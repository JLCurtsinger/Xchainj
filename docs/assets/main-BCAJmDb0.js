var LC=Object.defineProperty;var DC=(t,e,n)=>e in t?LC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var bn=(t,e,n)=>DC(t,typeof e!="symbol"?e+"":e,n);function OC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var fi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function To(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var iI={exports:{}},mp={},sI={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=Symbol.for("react.element"),jC=Symbol.for("react.portal"),BC=Symbol.for("react.fragment"),UC=Symbol.for("react.strict_mode"),FC=Symbol.for("react.profiler"),VC=Symbol.for("react.provider"),zC=Symbol.for("react.context"),WC=Symbol.for("react.forward_ref"),$C=Symbol.for("react.suspense"),qC=Symbol.for("react.memo"),HC=Symbol.for("react.lazy"),u_=Symbol.iterator;function KC(t){return t===null||typeof t!="object"?null:(t=u_&&t[u_]||t["@@iterator"],typeof t=="function"?t:null)}var oI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aI=Object.assign,lI={};function uc(t,e,n){this.props=t,this.context=e,this.refs=lI,this.updater=n||oI}uc.prototype.isReactComponent={};uc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cI(){}cI.prototype=uc.prototype;function Zy(t,e,n){this.props=t,this.context=e,this.refs=lI,this.updater=n||oI}var Xy=Zy.prototype=new cI;Xy.constructor=Zy;aI(Xy,uc.prototype);Xy.isPureReactComponent=!0;var d_=Array.isArray,uI=Object.prototype.hasOwnProperty,Jy={current:null},dI={key:!0,ref:!0,__self:!0,__source:!0};function hI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uI.call(e,r)&&!dI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:wd,type:t,key:s,ref:o,props:i,_owner:Jy.current}}function GC(t,e){return{$$typeof:wd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ew(t){return typeof t=="object"&&t!==null&&t.$$typeof===wd}function YC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var h_=/\/+/g;function Am(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YC(""+t.key):e.toString(36)}function Lh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wd:case jC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Am(o,0):r,d_(i)?(n="",t!=null&&(n=t.replace(h_,"$&/")+"/"),Lh(i,e,n,"",function(c){return c})):i!=null&&(ew(i)&&(i=GC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(h_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",d_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Am(s,a);o+=Lh(s,e,n,l,i)}else if(l=KC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Am(s,a++),o+=Lh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function th(t,e,n){if(t==null)return t;var r=[],i=0;return Lh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function QC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hr={current:null},Dh={transition:null},ZC={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:Dh,ReactCurrentOwner:Jy};function fI(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:th,forEach:function(t,e,n){th(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return th(t,function(){e++}),e},toArray:function(t){return th(t,function(e){return e})||[]},only:function(t){if(!ew(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=uc;Ke.Fragment=BC;Ke.Profiler=FC;Ke.PureComponent=Zy;Ke.StrictMode=UC;Ke.Suspense=$C;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZC;Ke.act=fI;Ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Jy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uI.call(e,l)&&!dI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:wd,type:t.type,key:i,ref:s,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:zC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VC,_context:t},t.Consumer=t};Ke.createElement=hI;Ke.createFactory=function(t){var e=hI.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:WC,render:t}};Ke.isValidElement=ew;Ke.lazy=function(t){return{$$typeof:HC,_payload:{_status:-1,_result:t},_init:QC}};Ke.memo=function(t,e){return{$$typeof:qC,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=Dh.transition;Dh.transition={};try{t()}finally{Dh.transition=e}};Ke.unstable_act=fI;Ke.useCallback=function(t,e){return hr.current.useCallback(t,e)};Ke.useContext=function(t){return hr.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return hr.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return hr.current.useEffect(t,e)};Ke.useId=function(){return hr.current.useId()};Ke.useImperativeHandle=function(t,e,n){return hr.current.useImperativeHandle(t,e,n)};Ke.useInsertionEffect=function(t,e){return hr.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return hr.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return hr.current.useMemo(t,e)};Ke.useReducer=function(t,e,n){return hr.current.useReducer(t,e,n)};Ke.useRef=function(t){return hr.current.useRef(t)};Ke.useState=function(t){return hr.current.useState(t)};Ke.useSyncExternalStore=function(t,e,n){return hr.current.useSyncExternalStore(t,e,n)};Ke.useTransition=function(){return hr.current.useTransition()};Ke.version="18.3.1";sI.exports=Ke;var Y=sI.exports;const ce=To(Y),XC=OC({__proto__:null,default:ce},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC=Y,eM=Symbol.for("react.element"),tM=Symbol.for("react.fragment"),nM=Object.prototype.hasOwnProperty,rM=JC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iM={key:!0,ref:!0,__self:!0,__source:!0};function pI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nM.call(e,r)&&!iM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eM,type:t,key:s,ref:o,props:i,_owner:rM.current}}mp.Fragment=tM;mp.jsx=pI;mp.jsxs=pI;iI.exports=mp;var p=iI.exports,mI={exports:{}},Lr={},gI={exports:{}},yI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,F){var q=M.length;M.push(F);e:for(;0<q;){var D=q-1>>>1,w=M[D];if(0<i(w,F))M[D]=F,M[q]=w,q=D;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var F=M[0],q=M.pop();if(q!==F){M[0]=q;e:for(var D=0,w=M.length,V=w>>>1;D<V;){var se=2*(D+1)-1,le=M[se],de=se+1,Ae=M[de];if(0>i(le,q))de<w&&0>i(Ae,le)?(M[D]=Ae,M[de]=q,D=de):(M[D]=le,M[se]=q,D=se);else if(de<w&&0>i(Ae,q))M[D]=Ae,M[de]=q,D=de;else break e}}return F}function i(M,F){var q=M.sortIndex-F.sortIndex;return q!==0?q:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,v=!1,k=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(M){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=M)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function j(M){if(S=!1,E(M),!k)if(n(l)!==null)k=!0,C(K);else{var F=n(c);F!==null&&R(j,F.startTime-M)}}function K(M,F){k=!1,S&&(S=!1,T(L),L=-1),v=!0;var q=m;try{for(E(F),h=n(l);h!==null&&(!(h.expirationTime>F)||M&&!$());){var D=h.callback;if(typeof D=="function"){h.callback=null,m=h.priorityLevel;var w=D(h.expirationTime<=F);F=t.unstable_now(),typeof w=="function"?h.callback=w:h===n(l)&&r(l),E(F)}else r(l);h=n(l)}if(h!==null)var V=!0;else{var se=n(c);se!==null&&R(j,se.startTime-F),V=!1}return V}finally{h=null,m=q,v=!1}}var G=!1,O=null,L=-1,B=5,W=-1;function $(){return!(t.unstable_now()-W<B)}function H(){if(O!==null){var M=t.unstable_now();W=M;var F=!0;try{F=O(!0,M)}finally{F?A():(G=!1,O=null)}}else G=!1}var A;if(typeof I=="function")A=function(){I(H)};else if(typeof MessageChannel<"u"){var f=new MessageChannel,b=f.port2;f.port1.onmessage=H,A=function(){b.postMessage(null)}}else A=function(){_(H,0)};function C(M){O=M,G||(G=!0,A())}function R(M,F){L=_(function(){M(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){k||v||(k=!0,C(K))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var q=m;m=F;try{return M()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=m;m=M;try{return F()}finally{m=q}},t.unstable_scheduleCallback=function(M,F,q){var D=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?D+q:D):q=D,M){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=q+w,M={id:d++,callback:F,priorityLevel:M,startTime:q,expirationTime:w,sortIndex:-1},q>D?(M.sortIndex=q,e(c,M),n(l)===null&&M===n(c)&&(S?(T(L),L=-1):S=!0,R(j,q-D))):(M.sortIndex=w,e(l,M),k||v||(k=!0,C(K))),M},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(M){var F=m;return function(){var q=m;m=F;try{return M.apply(this,arguments)}finally{m=q}}}})(yI);gI.exports=yI;var sM=gI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oM=Y,Pr=sM;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wI=new Set,Cu={};function Ta(t,e){jl(t,e),jl(t+"Capture",e)}function jl(t,e){for(Cu[t]=e,t=0;t<e.length;t++)wI.add(e[t])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qg=Object.prototype.hasOwnProperty,aM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f_={},p_={};function lM(t){return Qg.call(p_,t)?!0:Qg.call(f_,t)?!1:aM.test(t)?p_[t]=!0:(f_[t]=!0,!1)}function cM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uM(t,e,n,r){if(e===null||typeof e>"u"||cM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var tw=/[\-:]([a-z])/g;function nw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tw,nw);Wn[e]=new fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tw,nw);Wn[e]=new fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tw,nw);Wn[e]=new fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new fr(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function rw(t,e,n,r){var i=Wn.hasOwnProperty(e)?Wn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uM(e,n,i,r)&&(n=null),r||i===null?lM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ks=oM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nh=Symbol.for("react.element"),al=Symbol.for("react.portal"),ll=Symbol.for("react.fragment"),iw=Symbol.for("react.strict_mode"),Zg=Symbol.for("react.profiler"),vI=Symbol.for("react.provider"),_I=Symbol.for("react.context"),sw=Symbol.for("react.forward_ref"),Xg=Symbol.for("react.suspense"),Jg=Symbol.for("react.suspense_list"),ow=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),xI=Symbol.for("react.offscreen"),m_=Symbol.iterator;function Bc(t){return t===null||typeof t!="object"?null:(t=m_&&t[m_]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,Nm;function eu(t){if(Nm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nm=e&&e[1]||""}return`
`+Nm+t}var Cm=!1;function Mm(t,e){if(!t||Cm)return"";Cm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Cm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eu(t):""}function dM(t){switch(t.tag){case 5:return eu(t.type);case 16:return eu("Lazy");case 13:return eu("Suspense");case 19:return eu("SuspenseList");case 0:case 2:case 15:return t=Mm(t.type,!1),t;case 11:return t=Mm(t.type.render,!1),t;case 1:return t=Mm(t.type,!0),t;default:return""}}function e0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ll:return"Fragment";case al:return"Portal";case Zg:return"Profiler";case iw:return"StrictMode";case Xg:return"Suspense";case Jg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _I:return(t.displayName||"Context")+".Consumer";case vI:return(t._context.displayName||"Context")+".Provider";case sw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ow:return e=t.displayName||null,e!==null?e:e0(t.type)||"Memo";case $s:e=t._payload,t=t._init;try{return e0(t(e))}catch{}}return null}function hM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e0(e);case 8:return e===iw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fM(t){var e=EI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rh(t){t._valueTracker||(t._valueTracker=fM(t))}function bI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=EI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function t0(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function g_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function II(t,e){e=e.checked,e!=null&&rw(t,"checked",e,!1)}function n0(t,e){II(t,e);var n=xo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?r0(t,e.type,n):e.hasOwnProperty("defaultValue")&&r0(t,e.type,xo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function y_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function r0(t,e,n){(e!=="number"||lf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tu=Array.isArray;function bl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function i0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function w_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(tu(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xo(n)}}function SI(t,e){var n=xo(e.value),r=xo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function v_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function s0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ih,TI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ih=ih||document.createElement("div"),ih.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ih.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pM=["Webkit","ms","Moz","O"];Object.keys(hu).forEach(function(t){pM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hu[e]=hu[t]})});function AI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hu.hasOwnProperty(t)&&hu[t]?(""+e).trim():e+"px"}function NI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var mM=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o0(t,e){if(e){if(mM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function a0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=null;function aw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var c0=null,Il=null,Sl=null;function __(t){if(t=xd(t)){if(typeof c0!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=_p(e),c0(t.stateNode,t.type,e))}}function CI(t){Il?Sl?Sl.push(t):Sl=[t]:Il=t}function MI(){if(Il){var t=Il,e=Sl;if(Sl=Il=null,__(t),e)for(t=0;t<e.length;t++)__(e[t])}}function RI(t,e){return t(e)}function PI(){}var Rm=!1;function LI(t,e,n){if(Rm)return t(e,n);Rm=!0;try{return RI(t,e,n)}finally{Rm=!1,(Il!==null||Sl!==null)&&(PI(),MI())}}function Ru(t,e){var n=t.stateNode;if(n===null)return null;var r=_p(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var u0=!1;if(ps)try{var Uc={};Object.defineProperty(Uc,"passive",{get:function(){u0=!0}}),window.addEventListener("test",Uc,Uc),window.removeEventListener("test",Uc,Uc)}catch{u0=!1}function gM(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var fu=!1,cf=null,uf=!1,d0=null,yM={onError:function(t){fu=!0,cf=t}};function wM(t,e,n,r,i,s,o,a,l){fu=!1,cf=null,gM.apply(yM,arguments)}function vM(t,e,n,r,i,s,o,a,l){if(wM.apply(this,arguments),fu){if(fu){var c=cf;fu=!1,cf=null}else throw Error(ae(198));uf||(uf=!0,d0=c)}}function Aa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x_(t){if(Aa(t)!==t)throw Error(ae(188))}function _M(t){var e=t.alternate;if(!e){if(e=Aa(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return x_(i),t;if(s===r)return x_(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function OI(t){return t=_M(t),t!==null?jI(t):null}function jI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jI(t);if(e!==null)return e;t=t.sibling}return null}var BI=Pr.unstable_scheduleCallback,E_=Pr.unstable_cancelCallback,xM=Pr.unstable_shouldYield,EM=Pr.unstable_requestPaint,un=Pr.unstable_now,bM=Pr.unstable_getCurrentPriorityLevel,lw=Pr.unstable_ImmediatePriority,UI=Pr.unstable_UserBlockingPriority,df=Pr.unstable_NormalPriority,IM=Pr.unstable_LowPriority,FI=Pr.unstable_IdlePriority,gp=null,bi=null;function SM(t){if(bi&&typeof bi.onCommitFiberRoot=="function")try{bi.onCommitFiberRoot(gp,t,void 0,(t.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:AM,kM=Math.log,TM=Math.LN2;function AM(t){return t>>>=0,t===0?32:31-(kM(t)/TM|0)|0}var sh=64,oh=4194304;function nu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=nu(a):(s&=o,s!==0&&(r=nu(s)))}else o=n&~i,o!==0?r=nu(o):s!==0&&(r=nu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ci(e),i=1<<n,r|=t[n],e&=~i;return r}function NM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ci(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=NM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function h0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VI(){var t=sh;return sh<<=1,!(sh&4194240)&&(sh=64),t}function Pm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ci(e),t[e]=n}function MM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ci(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function cw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ci(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pt=0;function zI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WI,uw,$I,qI,HI,f0=!1,ah=[],oo=null,ao=null,lo=null,Pu=new Map,Lu=new Map,Ks=[],RM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b_(t,e){switch(t){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lu.delete(e.pointerId)}}function Fc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xd(e),e!==null&&uw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PM(t,e,n,r,i){switch(e){case"focusin":return oo=Fc(oo,t,e,n,r,i),!0;case"dragenter":return ao=Fc(ao,t,e,n,r,i),!0;case"mouseover":return lo=Fc(lo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pu.set(s,Fc(Pu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Lu.set(s,Fc(Lu.get(s)||null,t,e,n,r,i)),!0}return!1}function KI(t){var e=Zo(t.target);if(e!==null){var n=Aa(e);if(n!==null){if(e=n.tag,e===13){if(e=DI(n),e!==null){t.blockedOn=e,HI(t.priority,function(){$I(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=p0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);l0=r,n.target.dispatchEvent(r),l0=null}else return e=xd(n),e!==null&&uw(e),t.blockedOn=n,!1;e.shift()}return!0}function I_(t,e,n){Oh(t)&&n.delete(e)}function LM(){f0=!1,oo!==null&&Oh(oo)&&(oo=null),ao!==null&&Oh(ao)&&(ao=null),lo!==null&&Oh(lo)&&(lo=null),Pu.forEach(I_),Lu.forEach(I_)}function Vc(t,e){t.blockedOn===e&&(t.blockedOn=null,f0||(f0=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,LM)))}function Du(t){function e(i){return Vc(i,t)}if(0<ah.length){Vc(ah[0],t);for(var n=1;n<ah.length;n++){var r=ah[n];r.blockedOn===t&&(r.blockedOn=null)}}for(oo!==null&&Vc(oo,t),ao!==null&&Vc(ao,t),lo!==null&&Vc(lo,t),Pu.forEach(e),Lu.forEach(e),n=0;n<Ks.length;n++)r=Ks[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ks.length&&(n=Ks[0],n.blockedOn===null);)KI(n),n.blockedOn===null&&Ks.shift()}var kl=ks.ReactCurrentBatchConfig,ff=!0;function DM(t,e,n,r){var i=pt,s=kl.transition;kl.transition=null;try{pt=1,dw(t,e,n,r)}finally{pt=i,kl.transition=s}}function OM(t,e,n,r){var i=pt,s=kl.transition;kl.transition=null;try{pt=4,dw(t,e,n,r)}finally{pt=i,kl.transition=s}}function dw(t,e,n,r){if(ff){var i=p0(t,e,n,r);if(i===null)Wm(t,e,r,pf,n),b_(t,r);else if(PM(i,t,e,n,r))r.stopPropagation();else if(b_(t,r),e&4&&-1<RM.indexOf(t)){for(;i!==null;){var s=xd(i);if(s!==null&&WI(s),s=p0(t,e,n,r),s===null&&Wm(t,e,r,pf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wm(t,e,r,null,n)}}var pf=null;function p0(t,e,n,r){if(pf=null,t=aw(r),t=Zo(t),t!==null)if(e=Aa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pf=t,null}function GI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bM()){case lw:return 1;case UI:return 4;case df:case IM:return 16;case FI:return 536870912;default:return 16}default:return 16}}var Xs=null,hw=null,jh=null;function YI(){if(jh)return jh;var t,e=hw,n=e.length,r,i="value"in Xs?Xs.value:Xs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return jh=i.slice(t,1<r?1-r:void 0)}function Bh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lh(){return!0}function S_(){return!1}function Dr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lh:S_,this.isPropagationStopped=S_,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lh)},persist:function(){},isPersistent:lh}),e}var dc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fw=Dr(dc),_d=Xt({},dc,{view:0,detail:0}),jM=Dr(_d),Lm,Dm,zc,yp=Xt({},_d,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zc&&(zc&&t.type==="mousemove"?(Lm=t.screenX-zc.screenX,Dm=t.screenY-zc.screenY):Dm=Lm=0,zc=t),Lm)},movementY:function(t){return"movementY"in t?t.movementY:Dm}}),k_=Dr(yp),BM=Xt({},yp,{dataTransfer:0}),UM=Dr(BM),FM=Xt({},_d,{relatedTarget:0}),Om=Dr(FM),VM=Xt({},dc,{animationName:0,elapsedTime:0,pseudoElement:0}),zM=Dr(VM),WM=Xt({},dc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$M=Dr(WM),qM=Xt({},dc,{data:0}),T_=Dr(qM),HM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GM[t])?!!e[t]:!1}function pw(){return YM}var QM=Xt({},_d,{key:function(t){if(t.key){var e=HM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pw,charCode:function(t){return t.type==="keypress"?Bh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZM=Dr(QM),XM=Xt({},yp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A_=Dr(XM),JM=Xt({},_d,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pw}),eR=Dr(JM),tR=Xt({},dc,{propertyName:0,elapsedTime:0,pseudoElement:0}),nR=Dr(tR),rR=Xt({},yp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iR=Dr(rR),sR=[9,13,27,32],mw=ps&&"CompositionEvent"in window,pu=null;ps&&"documentMode"in document&&(pu=document.documentMode);var oR=ps&&"TextEvent"in window&&!pu,QI=ps&&(!mw||pu&&8<pu&&11>=pu),N_=" ",C_=!1;function ZI(t,e){switch(t){case"keyup":return sR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cl=!1;function aR(t,e){switch(t){case"compositionend":return XI(e);case"keypress":return e.which!==32?null:(C_=!0,N_);case"textInput":return t=e.data,t===N_&&C_?null:t;default:return null}}function lR(t,e){if(cl)return t==="compositionend"||!mw&&ZI(t,e)?(t=YI(),jh=hw=Xs=null,cl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QI&&e.locale!=="ko"?null:e.data;default:return null}}var cR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cR[t.type]:e==="textarea"}function JI(t,e,n,r){CI(r),e=mf(e,"onChange"),0<e.length&&(n=new fw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mu=null,Ou=null;function uR(t){uS(t,0)}function wp(t){var e=hl(t);if(bI(e))return t}function dR(t,e){if(t==="change")return e}var eS=!1;if(ps){var jm;if(ps){var Bm="oninput"in document;if(!Bm){var R_=document.createElement("div");R_.setAttribute("oninput","return;"),Bm=typeof R_.oninput=="function"}jm=Bm}else jm=!1;eS=jm&&(!document.documentMode||9<document.documentMode)}function P_(){mu&&(mu.detachEvent("onpropertychange",tS),Ou=mu=null)}function tS(t){if(t.propertyName==="value"&&wp(Ou)){var e=[];JI(e,Ou,t,aw(t)),LI(uR,e)}}function hR(t,e,n){t==="focusin"?(P_(),mu=e,Ou=n,mu.attachEvent("onpropertychange",tS)):t==="focusout"&&P_()}function fR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wp(Ou)}function pR(t,e){if(t==="click")return wp(e)}function mR(t,e){if(t==="input"||t==="change")return wp(e)}function gR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pi=typeof Object.is=="function"?Object.is:gR;function ju(t,e){if(pi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qg.call(e,i)||!pi(t[i],e[i]))return!1}return!0}function L_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function D_(t,e){var n=L_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L_(n)}}function nS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rS(){for(var t=window,e=lf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lf(t.document)}return e}function gw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yR(t){var e=rS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nS(n.ownerDocument.documentElement,n)){if(r!==null&&gw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=D_(n,s);var o=D_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wR=ps&&"documentMode"in document&&11>=document.documentMode,ul=null,m0=null,gu=null,g0=!1;function O_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;g0||ul==null||ul!==lf(r)||(r=ul,"selectionStart"in r&&gw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gu&&ju(gu,r)||(gu=r,r=mf(m0,"onSelect"),0<r.length&&(e=new fw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ul)))}function ch(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dl={animationend:ch("Animation","AnimationEnd"),animationiteration:ch("Animation","AnimationIteration"),animationstart:ch("Animation","AnimationStart"),transitionend:ch("Transition","TransitionEnd")},Um={},iS={};ps&&(iS=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function vp(t){if(Um[t])return Um[t];if(!dl[t])return t;var e=dl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iS)return Um[t]=e[n];return t}var sS=vp("animationend"),oS=vp("animationiteration"),aS=vp("animationstart"),lS=vp("transitionend"),cS=new Map,j_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(t,e){cS.set(t,e),Ta(e,[t])}for(var Fm=0;Fm<j_.length;Fm++){var Vm=j_[Fm],vR=Vm.toLowerCase(),_R=Vm[0].toUpperCase()+Vm.slice(1);Ao(vR,"on"+_R)}Ao(sS,"onAnimationEnd");Ao(oS,"onAnimationIteration");Ao(aS,"onAnimationStart");Ao("dblclick","onDoubleClick");Ao("focusin","onFocus");Ao("focusout","onBlur");Ao(lS,"onTransitionEnd");jl("onMouseEnter",["mouseout","mouseover"]);jl("onMouseLeave",["mouseout","mouseover"]);jl("onPointerEnter",["pointerout","pointerover"]);jl("onPointerLeave",["pointerout","pointerover"]);Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ru));function B_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vM(r,e,void 0,t),t.currentTarget=null}function uS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;B_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;B_(i,a,c),s=l}}}if(uf)throw t=d0,uf=!1,d0=null,t}function Pt(t,e){var n=e[x0];n===void 0&&(n=e[x0]=new Set);var r=t+"__bubble";n.has(r)||(dS(e,t,2,!1),n.add(r))}function zm(t,e,n){var r=0;e&&(r|=4),dS(n,t,r,e)}var uh="_reactListening"+Math.random().toString(36).slice(2);function Bu(t){if(!t[uh]){t[uh]=!0,wI.forEach(function(n){n!=="selectionchange"&&(xR.has(n)||zm(n,!1,t),zm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uh]||(e[uh]=!0,zm("selectionchange",!1,e))}}function dS(t,e,n,r){switch(GI(e)){case 1:var i=DM;break;case 4:i=OM;break;default:i=dw}n=i.bind(null,e,n,t),i=void 0,!u0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}LI(function(){var c=s,d=aw(n),h=[];e:{var m=cS.get(t);if(m!==void 0){var v=fw,k=t;switch(t){case"keypress":if(Bh(n)===0)break e;case"keydown":case"keyup":v=ZM;break;case"focusin":k="focus",v=Om;break;case"focusout":k="blur",v=Om;break;case"beforeblur":case"afterblur":v=Om;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=k_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=UM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=eR;break;case sS:case oS:case aS:v=zM;break;case lS:v=nR;break;case"scroll":v=jM;break;case"wheel":v=iR;break;case"copy":case"cut":case"paste":v=$M;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=A_}var S=(e&4)!==0,_=!S&&t==="scroll",T=S?m!==null?m+"Capture":null:m;S=[];for(var I=c,E;I!==null;){E=I;var j=E.stateNode;if(E.tag===5&&j!==null&&(E=j,T!==null&&(j=Ru(I,T),j!=null&&S.push(Uu(I,j,E)))),_)break;I=I.return}0<S.length&&(m=new v(m,k,null,n,d),h.push({event:m,listeners:S}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==l0&&(k=n.relatedTarget||n.fromElement)&&(Zo(k)||k[ms]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(k=n.relatedTarget||n.toElement,v=c,k=k?Zo(k):null,k!==null&&(_=Aa(k),k!==_||k.tag!==5&&k.tag!==6)&&(k=null)):(v=null,k=c),v!==k)){if(S=k_,j="onMouseLeave",T="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(S=A_,j="onPointerLeave",T="onPointerEnter",I="pointer"),_=v==null?m:hl(v),E=k==null?m:hl(k),m=new S(j,I+"leave",v,n,d),m.target=_,m.relatedTarget=E,j=null,Zo(d)===c&&(S=new S(T,I+"enter",k,n,d),S.target=E,S.relatedTarget=_,j=S),_=j,v&&k)t:{for(S=v,T=k,I=0,E=S;E;E=Za(E))I++;for(E=0,j=T;j;j=Za(j))E++;for(;0<I-E;)S=Za(S),I--;for(;0<E-I;)T=Za(T),E--;for(;I--;){if(S===T||T!==null&&S===T.alternate)break t;S=Za(S),T=Za(T)}S=null}else S=null;v!==null&&U_(h,m,v,S,!1),k!==null&&_!==null&&U_(h,_,k,S,!0)}}e:{if(m=c?hl(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var K=dR;else if(M_(m))if(eS)K=mR;else{K=fR;var G=hR}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(K=pR);if(K&&(K=K(t,c))){JI(h,K,n,d);break e}G&&G(t,m,c),t==="focusout"&&(G=m._wrapperState)&&G.controlled&&m.type==="number"&&r0(m,"number",m.value)}switch(G=c?hl(c):window,t){case"focusin":(M_(G)||G.contentEditable==="true")&&(ul=G,m0=c,gu=null);break;case"focusout":gu=m0=ul=null;break;case"mousedown":g0=!0;break;case"contextmenu":case"mouseup":case"dragend":g0=!1,O_(h,n,d);break;case"selectionchange":if(wR)break;case"keydown":case"keyup":O_(h,n,d)}var O;if(mw)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else cl?ZI(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(QI&&n.locale!=="ko"&&(cl||L!=="onCompositionStart"?L==="onCompositionEnd"&&cl&&(O=YI()):(Xs=d,hw="value"in Xs?Xs.value:Xs.textContent,cl=!0)),G=mf(c,L),0<G.length&&(L=new T_(L,t,null,n,d),h.push({event:L,listeners:G}),O?L.data=O:(O=XI(n),O!==null&&(L.data=O)))),(O=oR?aR(t,n):lR(t,n))&&(c=mf(c,"onBeforeInput"),0<c.length&&(d=new T_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=O))}uS(h,e)})}function Uu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ru(t,n),s!=null&&r.unshift(Uu(t,s,i)),s=Ru(t,e),s!=null&&r.push(Uu(t,s,i))),t=t.return}return r}function Za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function U_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ru(n,s),l!=null&&o.unshift(Uu(n,l,a))):i||(l=Ru(n,s),l!=null&&o.push(Uu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ER=/\r\n?/g,bR=/\u0000|\uFFFD/g;function F_(t){return(typeof t=="string"?t:""+t).replace(ER,`
`).replace(bR,"")}function dh(t,e,n){if(e=F_(e),F_(t)!==e&&n)throw Error(ae(425))}function gf(){}var y0=null,w0=null;function v0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _0=typeof setTimeout=="function"?setTimeout:void 0,IR=typeof clearTimeout=="function"?clearTimeout:void 0,V_=typeof Promise=="function"?Promise:void 0,SR=typeof queueMicrotask=="function"?queueMicrotask:typeof V_<"u"?function(t){return V_.resolve(null).then(t).catch(kR)}:_0;function kR(t){setTimeout(function(){throw t})}function $m(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Du(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Du(e)}function co(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function z_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hc=Math.random().toString(36).slice(2),xi="__reactFiber$"+hc,Fu="__reactProps$"+hc,ms="__reactContainer$"+hc,x0="__reactEvents$"+hc,TR="__reactListeners$"+hc,AR="__reactHandles$"+hc;function Zo(t){var e=t[xi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ms]||n[xi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=z_(t);t!==null;){if(n=t[xi])return n;t=z_(t)}return e}t=n,n=t.parentNode}return null}function xd(t){return t=t[xi]||t[ms],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function _p(t){return t[Fu]||null}var E0=[],fl=-1;function No(t){return{current:t}}function Ot(t){0>fl||(t.current=E0[fl],E0[fl]=null,fl--)}function At(t,e){fl++,E0[fl]=t.current,t.current=e}var Eo={},sr=No(Eo),vr=No(!1),ha=Eo;function Bl(t,e){var n=t.type.contextTypes;if(!n)return Eo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _r(t){return t=t.childContextTypes,t!=null}function yf(){Ot(vr),Ot(sr)}function W_(t,e,n){if(sr.current!==Eo)throw Error(ae(168));At(sr,e),At(vr,n)}function hS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,hM(t)||"Unknown",i));return Xt({},n,r)}function wf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Eo,ha=sr.current,At(sr,t),At(vr,vr.current),!0}function $_(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=hS(t,e,ha),r.__reactInternalMemoizedMergedChildContext=t,Ot(vr),Ot(sr),At(sr,t)):Ot(vr),At(vr,n)}var Yi=null,xp=!1,qm=!1;function fS(t){Yi===null?Yi=[t]:Yi.push(t)}function NR(t){xp=!0,fS(t)}function Co(){if(!qm&&Yi!==null){qm=!0;var t=0,e=pt;try{var n=Yi;for(pt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yi=null,xp=!1}catch(i){throw Yi!==null&&(Yi=Yi.slice(t+1)),BI(lw,Co),i}finally{pt=e,qm=!1}}return null}var pl=[],ml=0,vf=null,_f=0,Fr=[],Vr=0,fa=null,ns=1,rs="";function Wo(t,e){pl[ml++]=_f,pl[ml++]=vf,vf=t,_f=e}function pS(t,e,n){Fr[Vr++]=ns,Fr[Vr++]=rs,Fr[Vr++]=fa,fa=t;var r=ns;t=rs;var i=32-ci(r)-1;r&=~(1<<i),n+=1;var s=32-ci(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ns=1<<32-ci(e)+i|n<<i|r,rs=s+t}else ns=1<<s|n<<i|r,rs=t}function yw(t){t.return!==null&&(Wo(t,1),pS(t,1,0))}function ww(t){for(;t===vf;)vf=pl[--ml],pl[ml]=null,_f=pl[--ml],pl[ml]=null;for(;t===fa;)fa=Fr[--Vr],Fr[Vr]=null,rs=Fr[--Vr],Fr[Vr]=null,ns=Fr[--Vr],Fr[Vr]=null}var Mr=null,Cr=null,Vt=!1,ri=null;function mS(t,e){var n=$r(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function q_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mr=t,Cr=co(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mr=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fa!==null?{id:ns,overflow:rs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$r(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mr=t,Cr=null,!0):!1;default:return!1}}function b0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function I0(t){if(Vt){var e=Cr;if(e){var n=e;if(!q_(t,e)){if(b0(t))throw Error(ae(418));e=co(n.nextSibling);var r=Mr;e&&q_(t,e)?mS(r,n):(t.flags=t.flags&-4097|2,Vt=!1,Mr=t)}}else{if(b0(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Vt=!1,Mr=t}}}function H_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function hh(t){if(t!==Mr)return!1;if(!Vt)return H_(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!v0(t.type,t.memoizedProps)),e&&(e=Cr)){if(b0(t))throw gS(),Error(ae(418));for(;e;)mS(t,e),e=co(e.nextSibling)}if(H_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cr=co(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=Mr?co(t.stateNode.nextSibling):null;return!0}function gS(){for(var t=Cr;t;)t=co(t.nextSibling)}function Ul(){Cr=Mr=null,Vt=!1}function vw(t){ri===null?ri=[t]:ri.push(t)}var CR=ks.ReactCurrentBatchConfig;function Wc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function fh(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function K_(t){var e=t._init;return e(t._payload)}function yS(t){function e(T,I){if(t){var E=T.deletions;E===null?(T.deletions=[I],T.flags|=16):E.push(I)}}function n(T,I){if(!t)return null;for(;I!==null;)e(T,I),I=I.sibling;return null}function r(T,I){for(T=new Map;I!==null;)I.key!==null?T.set(I.key,I):T.set(I.index,I),I=I.sibling;return T}function i(T,I){return T=po(T,I),T.index=0,T.sibling=null,T}function s(T,I,E){return T.index=E,t?(E=T.alternate,E!==null?(E=E.index,E<I?(T.flags|=2,I):E):(T.flags|=2,I)):(T.flags|=1048576,I)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,I,E,j){return I===null||I.tag!==6?(I=Xm(E,T.mode,j),I.return=T,I):(I=i(I,E),I.return=T,I)}function l(T,I,E,j){var K=E.type;return K===ll?d(T,I,E.props.children,j,E.key):I!==null&&(I.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===$s&&K_(K)===I.type)?(j=i(I,E.props),j.ref=Wc(T,I,E),j.return=T,j):(j=qh(E.type,E.key,E.props,null,T.mode,j),j.ref=Wc(T,I,E),j.return=T,j)}function c(T,I,E,j){return I===null||I.tag!==4||I.stateNode.containerInfo!==E.containerInfo||I.stateNode.implementation!==E.implementation?(I=Jm(E,T.mode,j),I.return=T,I):(I=i(I,E.children||[]),I.return=T,I)}function d(T,I,E,j,K){return I===null||I.tag!==7?(I=la(E,T.mode,j,K),I.return=T,I):(I=i(I,E),I.return=T,I)}function h(T,I,E){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Xm(""+I,T.mode,E),I.return=T,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case nh:return E=qh(I.type,I.key,I.props,null,T.mode,E),E.ref=Wc(T,null,I),E.return=T,E;case al:return I=Jm(I,T.mode,E),I.return=T,I;case $s:var j=I._init;return h(T,j(I._payload),E)}if(tu(I)||Bc(I))return I=la(I,T.mode,E,null),I.return=T,I;fh(T,I)}return null}function m(T,I,E,j){var K=I!==null?I.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return K!==null?null:a(T,I,""+E,j);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nh:return E.key===K?l(T,I,E,j):null;case al:return E.key===K?c(T,I,E,j):null;case $s:return K=E._init,m(T,I,K(E._payload),j)}if(tu(E)||Bc(E))return K!==null?null:d(T,I,E,j,null);fh(T,E)}return null}function v(T,I,E,j,K){if(typeof j=="string"&&j!==""||typeof j=="number")return T=T.get(E)||null,a(I,T,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case nh:return T=T.get(j.key===null?E:j.key)||null,l(I,T,j,K);case al:return T=T.get(j.key===null?E:j.key)||null,c(I,T,j,K);case $s:var G=j._init;return v(T,I,E,G(j._payload),K)}if(tu(j)||Bc(j))return T=T.get(E)||null,d(I,T,j,K,null);fh(I,j)}return null}function k(T,I,E,j){for(var K=null,G=null,O=I,L=I=0,B=null;O!==null&&L<E.length;L++){O.index>L?(B=O,O=null):B=O.sibling;var W=m(T,O,E[L],j);if(W===null){O===null&&(O=B);break}t&&O&&W.alternate===null&&e(T,O),I=s(W,I,L),G===null?K=W:G.sibling=W,G=W,O=B}if(L===E.length)return n(T,O),Vt&&Wo(T,L),K;if(O===null){for(;L<E.length;L++)O=h(T,E[L],j),O!==null&&(I=s(O,I,L),G===null?K=O:G.sibling=O,G=O);return Vt&&Wo(T,L),K}for(O=r(T,O);L<E.length;L++)B=v(O,T,L,E[L],j),B!==null&&(t&&B.alternate!==null&&O.delete(B.key===null?L:B.key),I=s(B,I,L),G===null?K=B:G.sibling=B,G=B);return t&&O.forEach(function($){return e(T,$)}),Vt&&Wo(T,L),K}function S(T,I,E,j){var K=Bc(E);if(typeof K!="function")throw Error(ae(150));if(E=K.call(E),E==null)throw Error(ae(151));for(var G=K=null,O=I,L=I=0,B=null,W=E.next();O!==null&&!W.done;L++,W=E.next()){O.index>L?(B=O,O=null):B=O.sibling;var $=m(T,O,W.value,j);if($===null){O===null&&(O=B);break}t&&O&&$.alternate===null&&e(T,O),I=s($,I,L),G===null?K=$:G.sibling=$,G=$,O=B}if(W.done)return n(T,O),Vt&&Wo(T,L),K;if(O===null){for(;!W.done;L++,W=E.next())W=h(T,W.value,j),W!==null&&(I=s(W,I,L),G===null?K=W:G.sibling=W,G=W);return Vt&&Wo(T,L),K}for(O=r(T,O);!W.done;L++,W=E.next())W=v(O,T,L,W.value,j),W!==null&&(t&&W.alternate!==null&&O.delete(W.key===null?L:W.key),I=s(W,I,L),G===null?K=W:G.sibling=W,G=W);return t&&O.forEach(function(H){return e(T,H)}),Vt&&Wo(T,L),K}function _(T,I,E,j){if(typeof E=="object"&&E!==null&&E.type===ll&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case nh:e:{for(var K=E.key,G=I;G!==null;){if(G.key===K){if(K=E.type,K===ll){if(G.tag===7){n(T,G.sibling),I=i(G,E.props.children),I.return=T,T=I;break e}}else if(G.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===$s&&K_(K)===G.type){n(T,G.sibling),I=i(G,E.props),I.ref=Wc(T,G,E),I.return=T,T=I;break e}n(T,G);break}else e(T,G);G=G.sibling}E.type===ll?(I=la(E.props.children,T.mode,j,E.key),I.return=T,T=I):(j=qh(E.type,E.key,E.props,null,T.mode,j),j.ref=Wc(T,I,E),j.return=T,T=j)}return o(T);case al:e:{for(G=E.key;I!==null;){if(I.key===G)if(I.tag===4&&I.stateNode.containerInfo===E.containerInfo&&I.stateNode.implementation===E.implementation){n(T,I.sibling),I=i(I,E.children||[]),I.return=T,T=I;break e}else{n(T,I);break}else e(T,I);I=I.sibling}I=Jm(E,T.mode,j),I.return=T,T=I}return o(T);case $s:return G=E._init,_(T,I,G(E._payload),j)}if(tu(E))return k(T,I,E,j);if(Bc(E))return S(T,I,E,j);fh(T,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,I!==null&&I.tag===6?(n(T,I.sibling),I=i(I,E),I.return=T,T=I):(n(T,I),I=Xm(E,T.mode,j),I.return=T,T=I),o(T)):n(T,I)}return _}var Fl=yS(!0),wS=yS(!1),xf=No(null),Ef=null,gl=null,_w=null;function xw(){_w=gl=Ef=null}function Ew(t){var e=xf.current;Ot(xf),t._currentValue=e}function S0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tl(t,e){Ef=t,_w=gl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wr=!0),t.firstContext=null)}function Kr(t){var e=t._currentValue;if(_w!==t)if(t={context:t,memoizedValue:e,next:null},gl===null){if(Ef===null)throw Error(ae(308));gl=t,Ef.dependencies={lanes:0,firstContext:t}}else gl=gl.next=t;return e}var Xo=null;function bw(t){Xo===null?Xo=[t]:Xo.push(t)}function vS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bw(e)):(n.next=i.next,i.next=n),e.interleaved=n,gs(t,r)}function gs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qs=!1;function Iw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _S(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gs(t,n)}return i=r.interleaved,i===null?(e.next=e,bw(r)):(e.next=i.next,i.next=e),r.interleaved=e,gs(t,n)}function Uh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cw(t,n)}}function G_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bf(t,e,n,r){var i=t.updateQueue;qs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,v=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,S=a;switch(m=e,v=n,S.tag){case 1:if(k=S.payload,typeof k=="function"){h=k.call(v,h,m);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=S.payload,m=typeof k=="function"?k.call(v,h,m):k,m==null)break e;h=Xt({},h,m);break e;case 2:qs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,l=h):d=d.next=v,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ma|=o,t.lanes=o,t.memoizedState=h}}function Y_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var Ed={},Ii=No(Ed),Vu=No(Ed),zu=No(Ed);function Jo(t){if(t===Ed)throw Error(ae(174));return t}function Sw(t,e){switch(At(zu,e),At(Vu,t),At(Ii,Ed),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:s0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=s0(e,t)}Ot(Ii),At(Ii,e)}function Vl(){Ot(Ii),Ot(Vu),Ot(zu)}function xS(t){Jo(zu.current);var e=Jo(Ii.current),n=s0(e,t.type);e!==n&&(At(Vu,t),At(Ii,n))}function kw(t){Vu.current===t&&(Ot(Ii),Ot(Vu))}var Gt=No(0);function If(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hm=[];function Tw(){for(var t=0;t<Hm.length;t++)Hm[t]._workInProgressVersionPrimary=null;Hm.length=0}var Fh=ks.ReactCurrentDispatcher,Km=ks.ReactCurrentBatchConfig,pa=0,Zt=null,xn=null,Tn=null,Sf=!1,yu=!1,Wu=0,MR=0;function Kn(){throw Error(ae(321))}function Aw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pi(t[n],e[n]))return!1;return!0}function Nw(t,e,n,r,i,s){if(pa=s,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=t===null||t.memoizedState===null?DR:OR,t=n(r,i),yu){s=0;do{if(yu=!1,Wu=0,25<=s)throw Error(ae(301));s+=1,Tn=xn=null,e.updateQueue=null,Fh.current=jR,t=n(r,i)}while(yu)}if(Fh.current=kf,e=xn!==null&&xn.next!==null,pa=0,Tn=xn=Zt=null,Sf=!1,e)throw Error(ae(300));return t}function Cw(){var t=Wu!==0;return Wu=0,t}function _i(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Zt.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function Gr(){if(xn===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=xn.next;var e=Tn===null?Zt.memoizedState:Tn.next;if(e!==null)Tn=e,xn=t;else{if(t===null)throw Error(ae(310));xn=t,t={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Tn===null?Zt.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function $u(t,e){return typeof e=="function"?e(t):e}function Gm(t){var e=Gr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=xn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((pa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Zt.lanes|=d,ma|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,pi(r,e.memoizedState)||(wr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Zt.lanes|=s,ma|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ym(t){var e=Gr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);pi(s,e.memoizedState)||(wr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ES(){}function bS(t,e){var n=Zt,r=Gr(),i=e(),s=!pi(r.memoizedState,i);if(s&&(r.memoizedState=i,wr=!0),r=r.queue,Mw(kS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,qu(9,SS.bind(null,n,r,i,e),void 0,null),Nn===null)throw Error(ae(349));pa&30||IS(n,e,i)}return i}function IS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SS(t,e,n,r){e.value=n,e.getSnapshot=r,TS(e)&&AS(t)}function kS(t,e,n){return n(function(){TS(e)&&AS(t)})}function TS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pi(t,n)}catch{return!0}}function AS(t){var e=gs(t,1);e!==null&&ui(e,t,1,-1)}function Q_(t){var e=_i();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:t},e.queue=t,t=t.dispatch=LR.bind(null,Zt,t),[e.memoizedState,t]}function qu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function NS(){return Gr().memoizedState}function Vh(t,e,n,r){var i=_i();Zt.flags|=t,i.memoizedState=qu(1|e,n,void 0,r===void 0?null:r)}function Ep(t,e,n,r){var i=Gr();r=r===void 0?null:r;var s=void 0;if(xn!==null){var o=xn.memoizedState;if(s=o.destroy,r!==null&&Aw(r,o.deps)){i.memoizedState=qu(e,n,s,r);return}}Zt.flags|=t,i.memoizedState=qu(1|e,n,s,r)}function Z_(t,e){return Vh(8390656,8,t,e)}function Mw(t,e){return Ep(2048,8,t,e)}function CS(t,e){return Ep(4,2,t,e)}function MS(t,e){return Ep(4,4,t,e)}function RS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PS(t,e,n){return n=n!=null?n.concat([t]):null,Ep(4,4,RS.bind(null,e,t),n)}function Rw(){}function LS(t,e){var n=Gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Aw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function DS(t,e){var n=Gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Aw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function OS(t,e,n){return pa&21?(pi(n,e)||(n=VI(),Zt.lanes|=n,ma|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wr=!0),t.memoizedState=n)}function RR(t,e){var n=pt;pt=n!==0&&4>n?n:4,t(!0);var r=Km.transition;Km.transition={};try{t(!1),e()}finally{pt=n,Km.transition=r}}function jS(){return Gr().memoizedState}function PR(t,e,n){var r=fo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BS(t))US(e,n);else if(n=vS(t,e,n,r),n!==null){var i=ur();ui(n,t,r,i),FS(n,e,r)}}function LR(t,e,n){var r=fo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BS(t))US(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,pi(a,o)){var l=e.interleaved;l===null?(i.next=i,bw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=vS(t,e,i,r),n!==null&&(i=ur(),ui(n,t,r,i),FS(n,e,r))}}function BS(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function US(t,e){yu=Sf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cw(t,n)}}var kf={readContext:Kr,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useInsertionEffect:Kn,useLayoutEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useMutableSource:Kn,useSyncExternalStore:Kn,useId:Kn,unstable_isNewReconciler:!1},DR={readContext:Kr,useCallback:function(t,e){return _i().memoizedState=[t,e===void 0?null:e],t},useContext:Kr,useEffect:Z_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vh(4194308,4,RS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vh(4,2,t,e)},useMemo:function(t,e){var n=_i();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_i();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=PR.bind(null,Zt,t),[r.memoizedState,t]},useRef:function(t){var e=_i();return t={current:t},e.memoizedState=t},useState:Q_,useDebugValue:Rw,useDeferredValue:function(t){return _i().memoizedState=t},useTransition:function(){var t=Q_(!1),e=t[0];return t=RR.bind(null,t[1]),_i().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zt,i=_i();if(Vt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Nn===null)throw Error(ae(349));pa&30||IS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Z_(kS.bind(null,r,s,t),[t]),r.flags|=2048,qu(9,SS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=_i(),e=Nn.identifierPrefix;if(Vt){var n=rs,r=ns;n=(r&~(1<<32-ci(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},OR={readContext:Kr,useCallback:LS,useContext:Kr,useEffect:Mw,useImperativeHandle:PS,useInsertionEffect:CS,useLayoutEffect:MS,useMemo:DS,useReducer:Gm,useRef:NS,useState:function(){return Gm($u)},useDebugValue:Rw,useDeferredValue:function(t){var e=Gr();return OS(e,xn.memoizedState,t)},useTransition:function(){var t=Gm($u)[0],e=Gr().memoizedState;return[t,e]},useMutableSource:ES,useSyncExternalStore:bS,useId:jS,unstable_isNewReconciler:!1},jR={readContext:Kr,useCallback:LS,useContext:Kr,useEffect:Mw,useImperativeHandle:PS,useInsertionEffect:CS,useLayoutEffect:MS,useMemo:DS,useReducer:Ym,useRef:NS,useState:function(){return Ym($u)},useDebugValue:Rw,useDeferredValue:function(t){var e=Gr();return xn===null?e.memoizedState=t:OS(e,xn.memoizedState,t)},useTransition:function(){var t=Ym($u)[0],e=Gr().memoizedState;return[t,e]},useMutableSource:ES,useSyncExternalStore:bS,useId:jS,unstable_isNewReconciler:!1};function ei(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function k0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bp={isMounted:function(t){return(t=t._reactInternals)?Aa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ur(),i=fo(t),s=cs(r,i);s.payload=e,n!=null&&(s.callback=n),e=uo(t,s,i),e!==null&&(ui(e,t,i,r),Uh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ur(),i=fo(t),s=cs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=uo(t,s,i),e!==null&&(ui(e,t,i,r),Uh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ur(),r=fo(t),i=cs(n,r);i.tag=2,e!=null&&(i.callback=e),e=uo(t,i,r),e!==null&&(ui(e,t,r,n),Uh(e,t,r))}};function X_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ju(n,r)||!ju(i,s):!0}function VS(t,e,n){var r=!1,i=Eo,s=e.contextType;return typeof s=="object"&&s!==null?s=Kr(s):(i=_r(e)?ha:sr.current,r=e.contextTypes,s=(r=r!=null)?Bl(t,i):Eo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function J_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bp.enqueueReplaceState(e,e.state,null)}function T0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Iw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kr(s):(s=_r(e)?ha:sr.current,i.context=Bl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(k0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bp.enqueueReplaceState(i,i.state,null),bf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zl(t,e){try{var n="",r=e;do n+=dM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function A0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BR=typeof WeakMap=="function"?WeakMap:Map;function zS(t,e,n){n=cs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Af||(Af=!0,B0=r),A0(t,e)},n}function WS(t,e,n){n=cs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){A0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){A0(t,e),typeof r!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ex(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=XR.bind(null,t,e,n),e.then(t,t))}function tx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cs(-1,1),e.tag=2,uo(n,e,1))),n.lanes|=1),t)}var UR=ks.ReactCurrentOwner,wr=!1;function lr(t,e,n,r){e.child=t===null?wS(e,null,n,r):Fl(e,t.child,n,r)}function rx(t,e,n,r,i){n=n.render;var s=e.ref;return Tl(e,i),r=Nw(t,e,n,r,s,i),n=Cw(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ys(t,e,i)):(Vt&&n&&yw(e),e.flags|=1,lr(t,e,r,i),e.child)}function ix(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$S(t,e,s,r,i)):(t=qh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ju,n(o,r)&&t.ref===e.ref)return ys(t,e,i)}return e.flags|=1,t=po(s,r),t.ref=e.ref,t.return=e,e.child=t}function $S(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ju(s,r)&&t.ref===e.ref)if(wr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(wr=!0);else return e.lanes=t.lanes,ys(t,e,i)}return N0(t,e,n,r,i)}function qS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(wl,Ir),Ir|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(wl,Ir),Ir|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,At(wl,Ir),Ir|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,At(wl,Ir),Ir|=r;return lr(t,e,i,n),e.child}function HS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function N0(t,e,n,r,i){var s=_r(n)?ha:sr.current;return s=Bl(e,s),Tl(e,i),n=Nw(t,e,n,r,s,i),r=Cw(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ys(t,e,i)):(Vt&&r&&yw(e),e.flags|=1,lr(t,e,n,i),e.child)}function sx(t,e,n,r,i){if(_r(n)){var s=!0;wf(e)}else s=!1;if(Tl(e,i),e.stateNode===null)zh(t,e),VS(e,n,r),T0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Kr(c):(c=_r(n)?ha:sr.current,c=Bl(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&J_(e,o,r,c),qs=!1;var m=e.memoizedState;o.state=m,bf(e,r,o,i),l=e.memoizedState,a!==r||m!==l||vr.current||qs?(typeof d=="function"&&(k0(e,n,d,r),l=e.memoizedState),(a=qs||X_(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_S(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ei(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Kr(l):(l=_r(n)?ha:sr.current,l=Bl(e,l));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&J_(e,o,r,l),qs=!1,m=e.memoizedState,o.state=m,bf(e,r,o,i);var k=e.memoizedState;a!==h||m!==k||vr.current||qs?(typeof v=="function"&&(k0(e,n,v,r),k=e.memoizedState),(c=qs||X_(e,n,c,r,m,k,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return C0(t,e,n,r,s,i)}function C0(t,e,n,r,i,s){HS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&$_(e,n,!1),ys(t,e,s);r=e.stateNode,UR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fl(e,t.child,null,s),e.child=Fl(e,null,a,s)):lr(t,e,a,s),e.memoizedState=r.state,i&&$_(e,n,!0),e.child}function KS(t){var e=t.stateNode;e.pendingContext?W_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&W_(t,e.context,!1),Sw(t,e.containerInfo)}function ox(t,e,n,r,i){return Ul(),vw(i),e.flags|=256,lr(t,e,n,r),e.child}var M0={dehydrated:null,treeContext:null,retryLane:0};function R0(t){return{baseLanes:t,cachePool:null,transitions:null}}function GS(t,e,n){var r=e.pendingProps,i=Gt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),At(Gt,i&1),t===null)return I0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kp(o,r,0,null),t=la(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=R0(n),e.memoizedState=M0,t):Pw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return FR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=po(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=po(a,s):(s=la(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?R0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=M0,r}return s=t.child,t=s.sibling,r=po(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pw(t,e){return e=kp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ph(t,e,n,r){return r!==null&&vw(r),Fl(e,t.child,null,n),t=Pw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Qm(Error(ae(422))),ph(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=kp({mode:"visible",children:r.children},i,0,null),s=la(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fl(e,t.child,null,o),e.child.memoizedState=R0(o),e.memoizedState=M0,s);if(!(e.mode&1))return ph(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=Qm(s,r,void 0),ph(t,e,o,r)}if(a=(o&t.childLanes)!==0,wr||a){if(r=Nn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gs(t,i),ui(r,t,i,-1))}return Uw(),r=Qm(Error(ae(421))),ph(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=JR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Cr=co(i.nextSibling),Mr=e,Vt=!0,ri=null,t!==null&&(Fr[Vr++]=ns,Fr[Vr++]=rs,Fr[Vr++]=fa,ns=t.id,rs=t.overflow,fa=e),e=Pw(e,r.children),e.flags|=4096,e)}function ax(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),S0(t.return,e,n)}function Zm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function YS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(lr(t,e,r.children,n),r=Gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ax(t,n,e);else if(t.tag===19)ax(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(At(Gt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&If(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&If(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zm(e,!0,n,null,s);break;case"together":Zm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ma|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=po(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=po(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VR(t,e,n){switch(e.tag){case 3:KS(e),Ul();break;case 5:xS(e);break;case 1:_r(e.type)&&wf(e);break;case 4:Sw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;At(xf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(At(Gt,Gt.current&1),e.flags|=128,null):n&e.child.childLanes?GS(t,e,n):(At(Gt,Gt.current&1),t=ys(t,e,n),t!==null?t.sibling:null);At(Gt,Gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return YS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Gt,Gt.current),r)break;return null;case 22:case 23:return e.lanes=0,qS(t,e,n)}return ys(t,e,n)}var QS,P0,ZS,XS;QS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};P0=function(){};ZS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Jo(Ii.current);var s=null;switch(n){case"input":i=t0(t,i),r=t0(t,r),s=[];break;case"select":i=Xt({},i,{value:void 0}),r=Xt({},r,{value:void 0}),s=[];break;case"textarea":i=i0(t,i),r=i0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gf)}o0(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};XS=function(t,e,n,r){n!==r&&(e.flags|=4)};function $c(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zR(t,e,n){var r=e.pendingProps;switch(ww(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(e),null;case 1:return _r(e.type)&&yf(),Gn(e),null;case 3:return r=e.stateNode,Vl(),Ot(vr),Ot(sr),Tw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ri!==null&&(V0(ri),ri=null))),P0(t,e),Gn(e),null;case 5:kw(e);var i=Jo(zu.current);if(n=e.type,t!==null&&e.stateNode!=null)ZS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Gn(e),null}if(t=Jo(Ii.current),hh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xi]=e,r[Fu]=s,t=(e.mode&1)!==0,n){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(i=0;i<ru.length;i++)Pt(ru[i],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":g_(r,s),Pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pt("invalid",r);break;case"textarea":w_(r,s),Pt("invalid",r)}o0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&dh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dh(r.textContent,a,t),i=["children",""+a]):Cu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pt("scroll",r)}switch(n){case"input":rh(r),y_(r,s,!0);break;case"textarea":rh(r),v_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xi]=e,t[Fu]=r,QS(t,e,!1,!1),e.stateNode=t;e:{switch(o=a0(n,r),n){case"dialog":Pt("cancel",t),Pt("close",t),i=r;break;case"iframe":case"object":case"embed":Pt("load",t),i=r;break;case"video":case"audio":for(i=0;i<ru.length;i++)Pt(ru[i],t);i=r;break;case"source":Pt("error",t),i=r;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),i=r;break;case"details":Pt("toggle",t),i=r;break;case"input":g_(t,r),i=t0(t,r),Pt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xt({},r,{value:void 0}),Pt("invalid",t);break;case"textarea":w_(t,r),i=i0(t,r),Pt("invalid",t);break;default:i=r}o0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?NI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&TI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Mu(t,l):typeof l=="number"&&Mu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pt("scroll",t):l!=null&&rw(t,s,l,o))}switch(n){case"input":rh(t),y_(t,r,!1);break;case"textarea":rh(t),v_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?bl(t,!!r.multiple,s,!1):r.defaultValue!=null&&bl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gn(e),null;case 6:if(t&&e.stateNode!=null)XS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Jo(zu.current),Jo(Ii.current),hh(e)){if(r=e.stateNode,n=e.memoizedProps,r[xi]=e,(s=r.nodeValue!==n)&&(t=Mr,t!==null))switch(t.tag){case 3:dh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xi]=e,e.stateNode=r}return Gn(e),null;case 13:if(Ot(Gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&Cr!==null&&e.mode&1&&!(e.flags&128))gS(),Ul(),e.flags|=98560,s=!1;else if(s=hh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[xi]=e}else Ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gn(e),s=!1}else ri!==null&&(V0(ri),ri=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?En===0&&(En=3):Uw())),e.updateQueue!==null&&(e.flags|=4),Gn(e),null);case 4:return Vl(),P0(t,e),t===null&&Bu(e.stateNode.containerInfo),Gn(e),null;case 10:return Ew(e.type._context),Gn(e),null;case 17:return _r(e.type)&&yf(),Gn(e),null;case 19:if(Ot(Gt),s=e.memoizedState,s===null)return Gn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$c(s,!1);else{if(En!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=If(t),o!==null){for(e.flags|=128,$c(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return At(Gt,Gt.current&1|2),e.child}t=t.sibling}s.tail!==null&&un()>Wl&&(e.flags|=128,r=!0,$c(s,!1),e.lanes=4194304)}else{if(!r)if(t=If(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$c(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Vt)return Gn(e),null}else 2*un()-s.renderingStartTime>Wl&&n!==1073741824&&(e.flags|=128,r=!0,$c(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=un(),e.sibling=null,n=Gt.current,At(Gt,r?n&1|2:n&1),e):(Gn(e),null);case 22:case 23:return Bw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ir&1073741824&&(Gn(e),e.subtreeFlags&6&&(e.flags|=8192)):Gn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function WR(t,e){switch(ww(e),e.tag){case 1:return _r(e.type)&&yf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vl(),Ot(vr),Ot(sr),Tw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kw(e),null;case 13:if(Ot(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Ul()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ot(Gt),null;case 4:return Vl(),null;case 10:return Ew(e.type._context),null;case 22:case 23:return Bw(),null;case 24:return null;default:return null}}var mh=!1,nr=!1,$R=typeof WeakSet=="function"?WeakSet:Set,ye=null;function yl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){on(t,e,r)}else n.current=null}function L0(t,e,n){try{n()}catch(r){on(t,e,r)}}var lx=!1;function qR(t,e){if(y0=ff,t=rS(),gw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var v;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)m=h,h=v;for(;;){if(h===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(v=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(w0={focusedElem:t,selectionRange:n},ff=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var S=k.memoizedProps,_=k.memoizedState,T=e.stateNode,I=T.getSnapshotBeforeUpdate(e.elementType===e.type?S:ei(e.type,S),_);T.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(j){on(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return k=lx,lx=!1,k}function wu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&L0(e,n,s)}i=i.next}while(i!==r)}}function Ip(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function D0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JS(t){var e=t.alternate;e!==null&&(t.alternate=null,JS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xi],delete e[Fu],delete e[x0],delete e[TR],delete e[AR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ek(t){return t.tag===5||t.tag===3||t.tag===4}function cx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ek(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function O0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gf));else if(r!==4&&(t=t.child,t!==null))for(O0(t,e,n),t=t.sibling;t!==null;)O0(t,e,n),t=t.sibling}function j0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(j0(t,e,n),t=t.sibling;t!==null;)j0(t,e,n),t=t.sibling}var Dn=null,ni=!1;function Ls(t,e,n){for(n=n.child;n!==null;)tk(t,e,n),n=n.sibling}function tk(t,e,n){if(bi&&typeof bi.onCommitFiberUnmount=="function")try{bi.onCommitFiberUnmount(gp,n)}catch{}switch(n.tag){case 5:nr||yl(n,e);case 6:var r=Dn,i=ni;Dn=null,Ls(t,e,n),Dn=r,ni=i,Dn!==null&&(ni?(t=Dn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dn.removeChild(n.stateNode));break;case 18:Dn!==null&&(ni?(t=Dn,n=n.stateNode,t.nodeType===8?$m(t.parentNode,n):t.nodeType===1&&$m(t,n),Du(t)):$m(Dn,n.stateNode));break;case 4:r=Dn,i=ni,Dn=n.stateNode.containerInfo,ni=!0,Ls(t,e,n),Dn=r,ni=i;break;case 0:case 11:case 14:case 15:if(!nr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&L0(n,e,o),i=i.next}while(i!==r)}Ls(t,e,n);break;case 1:if(!nr&&(yl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){on(n,e,a)}Ls(t,e,n);break;case 21:Ls(t,e,n);break;case 22:n.mode&1?(nr=(r=nr)||n.memoizedState!==null,Ls(t,e,n),nr=r):Ls(t,e,n);break;default:Ls(t,e,n)}}function ux(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $R),e.forEach(function(r){var i=e4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dn=a.stateNode,ni=!1;break e;case 3:Dn=a.stateNode.containerInfo,ni=!0;break e;case 4:Dn=a.stateNode.containerInfo,ni=!0;break e}a=a.return}if(Dn===null)throw Error(ae(160));tk(s,o,i),Dn=null,ni=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){on(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nk(e,t),e=e.sibling}function nk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xr(e,t),wi(t),r&4){try{wu(3,t,t.return),Ip(3,t)}catch(S){on(t,t.return,S)}try{wu(5,t,t.return)}catch(S){on(t,t.return,S)}}break;case 1:Xr(e,t),wi(t),r&512&&n!==null&&yl(n,n.return);break;case 5:if(Xr(e,t),wi(t),r&512&&n!==null&&yl(n,n.return),t.flags&32){var i=t.stateNode;try{Mu(i,"")}catch(S){on(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&II(i,s),a0(a,o);var c=a0(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?NI(i,h):d==="dangerouslySetInnerHTML"?TI(i,h):d==="children"?Mu(i,h):rw(i,d,h,c)}switch(a){case"input":n0(i,s);break;case"textarea":SI(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?bl(i,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?bl(i,!!s.multiple,s.defaultValue,!0):bl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Fu]=s}catch(S){on(t,t.return,S)}}break;case 6:if(Xr(e,t),wi(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){on(t,t.return,S)}}break;case 3:if(Xr(e,t),wi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Du(e.containerInfo)}catch(S){on(t,t.return,S)}break;case 4:Xr(e,t),wi(t);break;case 13:Xr(e,t),wi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ow=un())),r&4&&ux(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(nr=(c=nr)||d,Xr(e,t),nr=c):Xr(e,t),wi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ye=t,d=t.child;d!==null;){for(h=ye=d;ye!==null;){switch(m=ye,v=m.child,m.tag){case 0:case 11:case 14:case 15:wu(4,m,m.return);break;case 1:yl(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(S){on(r,n,S)}}break;case 5:yl(m,m.return);break;case 22:if(m.memoizedState!==null){hx(h);continue}}v!==null?(v.return=m,ye=v):hx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AI("display",o))}catch(S){on(t,t.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(S){on(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xr(e,t),wi(t),r&4&&ux(t);break;case 21:break;default:Xr(e,t),wi(t)}}function wi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ek(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Mu(i,""),r.flags&=-33);var s=cx(t);j0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cx(t);O0(t,a,o);break;default:throw Error(ae(161))}}catch(l){on(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HR(t,e,n){ye=t,rk(t)}function rk(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var i=ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||nr;a=mh;var c=nr;if(mh=o,(nr=l)&&!c)for(ye=i;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?fx(i):l!==null?(l.return=o,ye=l):fx(i);for(;s!==null;)ye=s,rk(s),s=s.sibling;ye=i,mh=a,nr=c}dx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ye=s):dx(t)}}function dx(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nr||Ip(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ei(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Y_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Y_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Du(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}nr||e.flags&512&&D0(e)}catch(m){on(e,e.return,m)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function hx(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function fx(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ip(4,e)}catch(l){on(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){on(e,i,l)}}var s=e.return;try{D0(e)}catch(l){on(e,s,l)}break;case 5:var o=e.return;try{D0(e)}catch(l){on(e,o,l)}}}catch(l){on(e,e.return,l)}if(e===t){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var KR=Math.ceil,Tf=ks.ReactCurrentDispatcher,Lw=ks.ReactCurrentOwner,qr=ks.ReactCurrentBatchConfig,Je=0,Nn=null,yn=null,Vn=0,Ir=0,wl=No(0),En=0,Hu=null,ma=0,Sp=0,Dw=0,vu=null,gr=null,Ow=0,Wl=1/0,Gi=null,Af=!1,B0=null,ho=null,gh=!1,Js=null,Nf=0,_u=0,U0=null,Wh=-1,$h=0;function ur(){return Je&6?un():Wh!==-1?Wh:Wh=un()}function fo(t){return t.mode&1?Je&2&&Vn!==0?Vn&-Vn:CR.transition!==null?($h===0&&($h=VI()),$h):(t=pt,t!==0||(t=window.event,t=t===void 0?16:GI(t.type)),t):1}function ui(t,e,n,r){if(50<_u)throw _u=0,U0=null,Error(ae(185));vd(t,n,r),(!(Je&2)||t!==Nn)&&(t===Nn&&(!(Je&2)&&(Sp|=n),En===4&&Gs(t,Vn)),xr(t,r),n===1&&Je===0&&!(e.mode&1)&&(Wl=un()+500,xp&&Co()))}function xr(t,e){var n=t.callbackNode;CM(t,e);var r=hf(t,t===Nn?Vn:0);if(r===0)n!==null&&E_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&E_(n),e===1)t.tag===0?NR(px.bind(null,t)):fS(px.bind(null,t)),SR(function(){!(Je&6)&&Co()}),n=null;else{switch(zI(r)){case 1:n=lw;break;case 4:n=UI;break;case 16:n=df;break;case 536870912:n=FI;break;default:n=df}n=dk(n,ik.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ik(t,e){if(Wh=-1,$h=0,Je&6)throw Error(ae(327));var n=t.callbackNode;if(Al()&&t.callbackNode!==n)return null;var r=hf(t,t===Nn?Vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cf(t,r);else{e=r;var i=Je;Je|=2;var s=ok();(Nn!==t||Vn!==e)&&(Gi=null,Wl=un()+500,aa(t,e));do try{QR();break}catch(a){sk(t,a)}while(!0);xw(),Tf.current=s,Je=i,yn!==null?e=0:(Nn=null,Vn=0,e=En)}if(e!==0){if(e===2&&(i=h0(t),i!==0&&(r=i,e=F0(t,i))),e===1)throw n=Hu,aa(t,0),Gs(t,r),xr(t,un()),n;if(e===6)Gs(t,r);else{if(i=t.current.alternate,!(r&30)&&!GR(i)&&(e=Cf(t,r),e===2&&(s=h0(t),s!==0&&(r=s,e=F0(t,s))),e===1))throw n=Hu,aa(t,0),Gs(t,r),xr(t,un()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:$o(t,gr,Gi);break;case 3:if(Gs(t,r),(r&130023424)===r&&(e=Ow+500-un(),10<e)){if(hf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ur(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_0($o.bind(null,t,gr,Gi),e);break}$o(t,gr,Gi);break;case 4:if(Gs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ci(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KR(r/1960))-r,10<r){t.timeoutHandle=_0($o.bind(null,t,gr,Gi),r);break}$o(t,gr,Gi);break;case 5:$o(t,gr,Gi);break;default:throw Error(ae(329))}}}return xr(t,un()),t.callbackNode===n?ik.bind(null,t):null}function F0(t,e){var n=vu;return t.current.memoizedState.isDehydrated&&(aa(t,e).flags|=256),t=Cf(t,e),t!==2&&(e=gr,gr=n,e!==null&&V0(e)),t}function V0(t){gr===null?gr=t:gr.push.apply(gr,t)}function GR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gs(t,e){for(e&=~Dw,e&=~Sp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ci(e),r=1<<n;t[n]=-1,e&=~r}}function px(t){if(Je&6)throw Error(ae(327));Al();var e=hf(t,0);if(!(e&1))return xr(t,un()),null;var n=Cf(t,e);if(t.tag!==0&&n===2){var r=h0(t);r!==0&&(e=r,n=F0(t,r))}if(n===1)throw n=Hu,aa(t,0),Gs(t,e),xr(t,un()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$o(t,gr,Gi),xr(t,un()),null}function jw(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(Wl=un()+500,xp&&Co())}}function ga(t){Js!==null&&Js.tag===0&&!(Je&6)&&Al();var e=Je;Je|=1;var n=qr.transition,r=pt;try{if(qr.transition=null,pt=1,t)return t()}finally{pt=r,qr.transition=n,Je=e,!(Je&6)&&Co()}}function Bw(){Ir=wl.current,Ot(wl)}function aa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IR(n)),yn!==null)for(n=yn.return;n!==null;){var r=n;switch(ww(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yf();break;case 3:Vl(),Ot(vr),Ot(sr),Tw();break;case 5:kw(r);break;case 4:Vl();break;case 13:Ot(Gt);break;case 19:Ot(Gt);break;case 10:Ew(r.type._context);break;case 22:case 23:Bw()}n=n.return}if(Nn=t,yn=t=po(t.current,null),Vn=Ir=e,En=0,Hu=null,Dw=Sp=ma=0,gr=vu=null,Xo!==null){for(e=0;e<Xo.length;e++)if(n=Xo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xo=null}return t}function sk(t,e){do{var n=yn;try{if(xw(),Fh.current=kf,Sf){for(var r=Zt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sf=!1}if(pa=0,Tn=xn=Zt=null,yu=!1,Wu=0,Lw.current=null,n===null||n.return===null){En=1,Hu=e,yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=tx(o);if(v!==null){v.flags&=-257,nx(v,o,a,s,e),v.mode&1&&ex(s,c,e),e=v,l=c;var k=e.updateQueue;if(k===null){var S=new Set;S.add(l),e.updateQueue=S}else k.add(l);break e}else{if(!(e&1)){ex(s,c,e),Uw();break e}l=Error(ae(426))}}else if(Vt&&a.mode&1){var _=tx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),nx(_,o,a,s,e),vw(zl(l,a));break e}}s=l=zl(l,a),En!==4&&(En=2),vu===null?vu=[s]:vu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=zS(s,l,e);G_(s,T);break e;case 1:a=l;var I=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ho===null||!ho.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=WS(s,a,e);G_(s,j);break e}}s=s.return}while(s!==null)}lk(n)}catch(K){e=K,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(!0)}function ok(){var t=Tf.current;return Tf.current=kf,t===null?kf:t}function Uw(){(En===0||En===3||En===2)&&(En=4),Nn===null||!(ma&268435455)&&!(Sp&268435455)||Gs(Nn,Vn)}function Cf(t,e){var n=Je;Je|=2;var r=ok();(Nn!==t||Vn!==e)&&(Gi=null,aa(t,e));do try{YR();break}catch(i){sk(t,i)}while(!0);if(xw(),Je=n,Tf.current=r,yn!==null)throw Error(ae(261));return Nn=null,Vn=0,En}function YR(){for(;yn!==null;)ak(yn)}function QR(){for(;yn!==null&&!xM();)ak(yn)}function ak(t){var e=uk(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,e===null?lk(t):yn=e,Lw.current=null}function lk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WR(n,e),n!==null){n.flags&=32767,yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{En=6,yn=null;return}}else if(n=zR(n,e,Ir),n!==null){yn=n;return}if(e=e.sibling,e!==null){yn=e;return}yn=e=t}while(e!==null);En===0&&(En=5)}function $o(t,e,n){var r=pt,i=qr.transition;try{qr.transition=null,pt=1,ZR(t,e,n,r)}finally{qr.transition=i,pt=r}return null}function ZR(t,e,n,r){do Al();while(Js!==null);if(Je&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(MM(t,s),t===Nn&&(yn=Nn=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gh||(gh=!0,dk(df,function(){return Al(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qr.transition,qr.transition=null;var o=pt;pt=1;var a=Je;Je|=4,Lw.current=null,qR(t,n),nk(n,t),yR(w0),ff=!!y0,w0=y0=null,t.current=n,HR(n),EM(),Je=a,pt=o,qr.transition=s}else t.current=n;if(gh&&(gh=!1,Js=t,Nf=i),s=t.pendingLanes,s===0&&(ho=null),SM(n.stateNode),xr(t,un()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Af)throw Af=!1,t=B0,B0=null,t;return Nf&1&&t.tag!==0&&Al(),s=t.pendingLanes,s&1?t===U0?_u++:(_u=0,U0=t):_u=0,Co(),null}function Al(){if(Js!==null){var t=zI(Nf),e=qr.transition,n=pt;try{if(qr.transition=null,pt=16>t?16:t,Js===null)var r=!1;else{if(t=Js,Js=null,Nf=0,Je&6)throw Error(ae(331));var i=Je;for(Je|=4,ye=t.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ye=c;ye!==null;){var d=ye;switch(d.tag){case 0:case 11:case 15:wu(8,d,s)}var h=d.child;if(h!==null)h.return=d,ye=h;else for(;ye!==null;){d=ye;var m=d.sibling,v=d.return;if(JS(d),d===c){ye=null;break}if(m!==null){m.return=v,ye=m;break}ye=v}}}var k=s.alternate;if(k!==null){var S=k.child;if(S!==null){k.child=null;do{var _=S.sibling;S.sibling=null,S=_}while(S!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wu(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,ye=T;break e}ye=s.return}}var I=t.current;for(ye=I;ye!==null;){o=ye;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ye=E;else e:for(o=I;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ip(9,a)}}catch(K){on(a,a.return,K)}if(a===o){ye=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,ye=j;break e}ye=a.return}}if(Je=i,Co(),bi&&typeof bi.onPostCommitFiberRoot=="function")try{bi.onPostCommitFiberRoot(gp,t)}catch{}r=!0}return r}finally{pt=n,qr.transition=e}}return!1}function mx(t,e,n){e=zl(n,e),e=zS(t,e,1),t=uo(t,e,1),e=ur(),t!==null&&(vd(t,1,e),xr(t,e))}function on(t,e,n){if(t.tag===3)mx(t,t,n);else for(;e!==null;){if(e.tag===3){mx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ho===null||!ho.has(r))){t=zl(n,t),t=WS(e,t,1),e=uo(e,t,1),t=ur(),e!==null&&(vd(e,1,t),xr(e,t));break}}e=e.return}}function XR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ur(),t.pingedLanes|=t.suspendedLanes&n,Nn===t&&(Vn&n)===n&&(En===4||En===3&&(Vn&130023424)===Vn&&500>un()-Ow?aa(t,0):Dw|=n),xr(t,e)}function ck(t,e){e===0&&(t.mode&1?(e=oh,oh<<=1,!(oh&130023424)&&(oh=4194304)):e=1);var n=ur();t=gs(t,e),t!==null&&(vd(t,e,n),xr(t,n))}function JR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ck(t,n)}function e4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),ck(t,n)}var uk;uk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)wr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wr=!1,VR(t,e,n);wr=!!(t.flags&131072)}else wr=!1,Vt&&e.flags&1048576&&pS(e,_f,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zh(t,e),t=e.pendingProps;var i=Bl(e,sr.current);Tl(e,n),i=Nw(null,e,r,t,i,n);var s=Cw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_r(r)?(s=!0,wf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Iw(e),i.updater=bp,e.stateNode=i,i._reactInternals=e,T0(e,r,t,n),e=C0(null,e,r,!0,s,n)):(e.tag=0,Vt&&s&&yw(e),lr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=n4(r),t=ei(r,t),i){case 0:e=N0(null,e,r,t,n);break e;case 1:e=sx(null,e,r,t,n);break e;case 11:e=rx(null,e,r,t,n);break e;case 14:e=ix(null,e,r,ei(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),N0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),sx(t,e,r,i,n);case 3:e:{if(KS(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_S(t,e),bf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zl(Error(ae(423)),e),e=ox(t,e,r,n,i);break e}else if(r!==i){i=zl(Error(ae(424)),e),e=ox(t,e,r,n,i);break e}else for(Cr=co(e.stateNode.containerInfo.firstChild),Mr=e,Vt=!0,ri=null,n=wS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ul(),r===i){e=ys(t,e,n);break e}lr(t,e,r,n)}e=e.child}return e;case 5:return xS(e),t===null&&I0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,v0(r,i)?o=null:s!==null&&v0(r,s)&&(e.flags|=32),HS(t,e),lr(t,e,o,n),e.child;case 6:return t===null&&I0(e),null;case 13:return GS(t,e,n);case 4:return Sw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fl(e,null,r,n):lr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),rx(t,e,r,i,n);case 7:return lr(t,e,e.pendingProps,n),e.child;case 8:return lr(t,e,e.pendingProps.children,n),e.child;case 12:return lr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,At(xf,r._currentValue),r._currentValue=o,s!==null)if(pi(s.value,o)){if(s.children===i.children&&!vr.current){e=ys(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=cs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),S0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),S0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}lr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Tl(e,n),i=Kr(i),r=r(i),e.flags|=1,lr(t,e,r,n),e.child;case 14:return r=e.type,i=ei(r,e.pendingProps),i=ei(r.type,i),ix(t,e,r,i,n);case 15:return $S(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),zh(t,e),e.tag=1,_r(r)?(t=!0,wf(e)):t=!1,Tl(e,n),VS(e,r,i),T0(e,r,i,n),C0(null,e,r,!0,t,n);case 19:return YS(t,e,n);case 22:return qS(t,e,n)}throw Error(ae(156,e.tag))};function dk(t,e){return BI(t,e)}function t4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(t,e,n,r){return new t4(t,e,n,r)}function Fw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n4(t){if(typeof t=="function")return Fw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sw)return 11;if(t===ow)return 14}return 2}function po(t,e){var n=t.alternate;return n===null?(n=$r(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Fw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ll:return la(n.children,i,s,e);case iw:o=8,i|=8;break;case Zg:return t=$r(12,n,e,i|2),t.elementType=Zg,t.lanes=s,t;case Xg:return t=$r(13,n,e,i),t.elementType=Xg,t.lanes=s,t;case Jg:return t=$r(19,n,e,i),t.elementType=Jg,t.lanes=s,t;case xI:return kp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vI:o=10;break e;case _I:o=9;break e;case sw:o=11;break e;case ow:o=14;break e;case $s:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=$r(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function la(t,e,n,r){return t=$r(7,t,r,e),t.lanes=n,t}function kp(t,e,n,r){return t=$r(22,t,r,e),t.elementType=xI,t.lanes=n,t.stateNode={isHidden:!1},t}function Xm(t,e,n){return t=$r(6,t,null,e),t.lanes=n,t}function Jm(t,e,n){return e=$r(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pm(0),this.expirationTimes=Pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vw(t,e,n,r,i,s,o,a,l){return t=new r4(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$r(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iw(s),t}function i4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:al,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hk(t){if(!t)return Eo;t=t._reactInternals;e:{if(Aa(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(_r(n))return hS(t,n,e)}return e}function fk(t,e,n,r,i,s,o,a,l){return t=Vw(n,r,!0,t,i,s,o,a,l),t.context=hk(null),n=t.current,r=ur(),i=fo(n),s=cs(r,i),s.callback=e??null,uo(n,s,i),t.current.lanes=i,vd(t,i,r),xr(t,r),t}function Tp(t,e,n,r){var i=e.current,s=ur(),o=fo(i);return n=hk(n),e.context===null?e.context=n:e.pendingContext=n,e=cs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=uo(i,e,o),t!==null&&(ui(t,i,o,s),Uh(t,i,o)),o}function Mf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zw(t,e){gx(t,e),(t=t.alternate)&&gx(t,e)}function s4(){return null}var pk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ww(t){this._internalRoot=t}Ap.prototype.render=Ww.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Tp(t,e,null,null)};Ap.prototype.unmount=Ww.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ga(function(){Tp(null,t,null,null)}),e[ms]=null}};function Ap(t){this._internalRoot=t}Ap.prototype.unstable_scheduleHydration=function(t){if(t){var e=qI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ks.length&&e!==0&&e<Ks[n].priority;n++);Ks.splice(n,0,t),n===0&&KI(t)}};function $w(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Np(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yx(){}function o4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Mf(o);s.call(c)}}var o=fk(e,r,t,0,null,!1,!1,"",yx);return t._reactRootContainer=o,t[ms]=o.current,Bu(t.nodeType===8?t.parentNode:t),ga(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Mf(l);a.call(c)}}var l=Vw(t,0,!1,null,null,!1,!1,"",yx);return t._reactRootContainer=l,t[ms]=l.current,Bu(t.nodeType===8?t.parentNode:t),ga(function(){Tp(e,l,n,r)}),l}function Cp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Mf(o);a.call(l)}}Tp(e,o,t,i)}else o=o4(n,e,t,i,r);return Mf(o)}WI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nu(e.pendingLanes);n!==0&&(cw(e,n|1),xr(e,un()),!(Je&6)&&(Wl=un()+500,Co()))}break;case 13:ga(function(){var r=gs(t,1);if(r!==null){var i=ur();ui(r,t,1,i)}}),zw(t,1)}};uw=function(t){if(t.tag===13){var e=gs(t,134217728);if(e!==null){var n=ur();ui(e,t,134217728,n)}zw(t,134217728)}};$I=function(t){if(t.tag===13){var e=fo(t),n=gs(t,e);if(n!==null){var r=ur();ui(n,t,e,r)}zw(t,e)}};qI=function(){return pt};HI=function(t,e){var n=pt;try{return pt=t,e()}finally{pt=n}};c0=function(t,e,n){switch(e){case"input":if(n0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_p(r);if(!i)throw Error(ae(90));bI(r),n0(r,i)}}}break;case"textarea":SI(t,n);break;case"select":e=n.value,e!=null&&bl(t,!!n.multiple,e,!1)}};RI=jw;PI=ga;var a4={usingClientEntryPoint:!1,Events:[xd,hl,_p,CI,MI,jw]},qc={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l4={bundleType:qc.bundleType,version:qc.version,rendererPackageName:qc.rendererPackageName,rendererConfig:qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=OI(t),t===null?null:t.stateNode},findFiberByHostInstance:qc.findFiberByHostInstance||s4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{gp=yh.inject(l4),bi=yh}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a4;Lr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$w(e))throw Error(ae(200));return i4(t,e,null,n)};Lr.createRoot=function(t,e){if(!$w(t))throw Error(ae(299));var n=!1,r="",i=pk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vw(t,1,!1,null,null,n,!1,r,i),t[ms]=e.current,Bu(t.nodeType===8?t.parentNode:t),new Ww(e)};Lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=OI(e),t=t===null?null:t.stateNode,t};Lr.flushSync=function(t){return ga(t)};Lr.hydrate=function(t,e,n){if(!Np(e))throw Error(ae(200));return Cp(null,t,e,!0,n)};Lr.hydrateRoot=function(t,e,n){if(!$w(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fk(e,null,t,1,n??null,i,!1,s,o),t[ms]=e.current,Bu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ap(e)};Lr.render=function(t,e,n){if(!Np(e))throw Error(ae(200));return Cp(null,t,e,!1,n)};Lr.unmountComponentAtNode=function(t){if(!Np(t))throw Error(ae(40));return t._reactRootContainer?(ga(function(){Cp(null,null,t,!1,function(){t._reactRootContainer=null,t[ms]=null})}),!0):!1};Lr.unstable_batchedUpdates=jw;Lr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Np(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Cp(t,e,n,!1,r)};Lr.version="18.3.1-next-f1338f8080-20240426";function mk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mk)}catch(t){console.error(t)}}mk(),mI.exports=Lr;var gk=mI.exports,yk,wx=gk;yk=wx.createRoot,wx.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ku(){return Ku=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ku.apply(this,arguments)}var eo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(eo||(eo={}));const vx="popstate";function c4(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return z0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Rf(i)}return d4(e,n,null,t)}function hn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u4(){return Math.random().toString(36).substr(2,8)}function _x(t,e){return{usr:t.state,key:t.key,idx:e}}function z0(t,e,n,r){return n===void 0&&(n=null),Ku({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fc(e):e,{state:n,key:e&&e.key||r||u4()})}function Rf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function d4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=eo.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ku({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=eo.Pop;let _=d(),T=_==null?null:_-c;c=_,l&&l({action:a,location:S.location,delta:T})}function m(_,T){a=eo.Push;let I=z0(S.location,_,T);c=d()+1;let E=_x(I,c),j=S.createHref(I);try{o.pushState(E,"",j)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(j)}s&&l&&l({action:a,location:S.location,delta:1})}function v(_,T){a=eo.Replace;let I=z0(S.location,_,T);c=d();let E=_x(I,c),j=S.createHref(I);o.replaceState(E,"",j),s&&l&&l({action:a,location:S.location,delta:0})}function k(_){let T=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof _=="string"?_:Rf(_);return I=I.replace(/ $/,"%20"),hn(T,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,T)}let S={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(vx,h),l=_,()=>{i.removeEventListener(vx,h),l=null}},createHref(_){return e(i,_)},createURL:k,encodeLocation(_){let T=k(_);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:v,go(_){return o.go(_)}};return S}var xx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xx||(xx={}));function h4(t,e,n){return n===void 0&&(n="/"),f4(t,e,n,!1)}function f4(t,e,n,r){let i=typeof e=="string"?fc(e):e,s=qw(i.pathname||"/",n);if(s==null)return null;let o=vk(t);p4(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=S4(s);a=b4(o[l],c,r)}return a}function vk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(hn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=mo([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(hn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vk(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:x4(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of _k(s.path))i(s,o,l)}),e}function _k(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=_k(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function p4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:E4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const m4=/^:[\w-]+$/,g4=3,y4=2,w4=1,v4=10,_4=-2,Ex=t=>t==="*";function x4(t,e){let n=t.split("/"),r=n.length;return n.some(Ex)&&(r+=_4),e&&(r+=y4),n.filter(i=>!Ex(i)).reduce((i,s)=>i+(m4.test(s)?g4:s===""?w4:v4),r)}function E4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function b4(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=bx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=bx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:mo([s,h.pathname]),pathnameBase:N4(mo([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=mo([s,h.pathnameBase]))}return o}function bx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=I4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:m,isOptional:v}=d;if(m==="*"){let S=a[h]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const k=a[h];return v&&!k?c[m]=void 0:c[m]=(k||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function I4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function S4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function k4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?fc(t):t;return{pathname:n?n.startsWith("/")?n:T4(n,e):e,search:C4(r),hash:M4(i)}}function T4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function eg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function A4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hw(t,e){let n=A4(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Kw(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=fc(t):(i=Ku({},t),hn(!i.pathname||!i.pathname.includes("?"),eg("?","pathname","search",i)),hn(!i.pathname||!i.pathname.includes("#"),eg("#","pathname","hash",i)),hn(!i.search||!i.search.includes("#"),eg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=k4(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const mo=t=>t.join("/").replace(/\/\/+/g,"/"),N4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),C4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,M4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function R4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xk=["post","put","patch","delete"];new Set(xk);const P4=["get",...xk];new Set(P4);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gu(){return Gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gu.apply(this,arguments)}const Gw=Y.createContext(null),L4=Y.createContext(null),Mo=Y.createContext(null),Mp=Y.createContext(null),Pi=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),Ek=Y.createContext(null);function D4(t,e){let{relative:n}=e===void 0?{}:e;pc()||hn(!1);let{basename:r,navigator:i}=Y.useContext(Mo),{hash:s,pathname:o,search:a}=Sk(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:mo([r,o])),i.createHref({pathname:l,search:a,hash:s})}function pc(){return Y.useContext(Mp)!=null}function Li(){return pc()||hn(!1),Y.useContext(Mp).location}function bk(t){Y.useContext(Mo).static||Y.useLayoutEffect(t)}function ar(){let{isDataRoute:t}=Y.useContext(Pi);return t?Q4():O4()}function O4(){pc()||hn(!1);let t=Y.useContext(Gw),{basename:e,future:n,navigator:r}=Y.useContext(Mo),{matches:i}=Y.useContext(Pi),{pathname:s}=Li(),o=JSON.stringify(Hw(i,n.v7_relativeSplatPath)),a=Y.useRef(!1);return bk(()=>{a.current=!0}),Y.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Kw(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:mo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}const j4=Y.createContext(null);function B4(t){let e=Y.useContext(Pi).outlet;return e&&Y.createElement(j4.Provider,{value:t},e)}function Ik(){let{matches:t}=Y.useContext(Pi),e=t[t.length-1];return e?e.params:{}}function Sk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=Y.useContext(Mo),{matches:i}=Y.useContext(Pi),{pathname:s}=Li(),o=JSON.stringify(Hw(i,r.v7_relativeSplatPath));return Y.useMemo(()=>Kw(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function U4(t,e){return F4(t,e)}function F4(t,e,n,r){pc()||hn(!1);let{navigator:i}=Y.useContext(Mo),{matches:s}=Y.useContext(Pi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Li(),d;if(e){var h;let _=typeof e=="string"?fc(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||hn(!1),d=_}else d=c;let m=d.pathname||"/",v=m;if(l!=="/"){let _=l.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let k=h4(t,{pathname:v}),S=q4(k&&k.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:mo([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:mo([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&S?Y.createElement(Mp.Provider,{value:{location:Gu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:eo.Pop}},S):S}function V4(){let t=Y4(),e=R4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:i},n):null,null)}const z4=Y.createElement(V4,null);class W4 extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Y.createElement(Pi.Provider,{value:this.props.routeContext},Y.createElement(Ek.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $4(t){let{routeContext:e,match:n,children:r}=t,i=Y.useContext(Gw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Y.createElement(Pi.Provider,{value:e},r)}function q4(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||hn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:v}=n,k=h.route.loader&&m[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||k){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let v,k=!1,S=null,_=null;n&&(v=a&&h.route.id?a[h.route.id]:void 0,S=h.route.errorElement||z4,l&&(c<0&&m===0?(k=!0,_=null):c===m&&(k=!0,_=h.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,m+1)),I=()=>{let E;return v?E=S:k?E=_:h.route.Component?E=Y.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,Y.createElement($4,{match:h,routeContext:{outlet:d,matches:T,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?Y.createElement(W4,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:I(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):I()},null)}var kk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kk||{}),Pf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pf||{});function H4(t){let e=Y.useContext(Gw);return e||hn(!1),e}function K4(t){let e=Y.useContext(L4);return e||hn(!1),e}function G4(t){let e=Y.useContext(Pi);return e||hn(!1),e}function Tk(t){let e=G4(),n=e.matches[e.matches.length-1];return n.route.id||hn(!1),n.route.id}function Y4(){var t;let e=Y.useContext(Ek),n=K4(Pf.UseRouteError),r=Tk(Pf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Q4(){let{router:t}=H4(kk.UseNavigateStable),e=Tk(Pf.UseNavigateStable),n=Y.useRef(!1);return bk(()=>{n.current=!0}),Y.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Gu({fromRouteId:e},s)))},[t,e])}const Ix={};function Z4(t,e){Ix[e]||(Ix[e]=!0,console.warn(e))}const Sx=(t,e,n)=>Z4(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function X4(t,e){(t==null?void 0:t.v7_startTransition)===void 0&&Sx("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(t==null?void 0:t.v7_relativeSplatPath)===void 0&&!e&&Sx("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Ak(t){let{to:e,replace:n,state:r,relative:i}=t;pc()||hn(!1);let{future:s,static:o}=Y.useContext(Mo),{matches:a}=Y.useContext(Pi),{pathname:l}=Li(),c=ar(),d=Kw(e,Hw(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return Y.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function J4(t){return B4(t.context)}function _n(t){hn(!1)}function eP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=eo.Pop,navigator:s,static:o=!1,future:a}=t;pc()&&hn(!1);let l=e.replace(/^\/*/,"/"),c=Y.useMemo(()=>({basename:l,navigator:s,static:o,future:Gu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=fc(r));let{pathname:d="/",search:h="",hash:m="",state:v=null,key:k="default"}=r,S=Y.useMemo(()=>{let _=qw(d,l);return _==null?null:{location:{pathname:_,search:h,hash:m,state:v,key:k},navigationType:i}},[l,d,h,m,v,k,i]);return S==null?null:Y.createElement(Mo.Provider,{value:c},Y.createElement(Mp.Provider,{children:n,value:S}))}function tP(t){let{children:e,location:n}=t;return U4(W0(e),n)}new Promise(()=>{});function W0(t,e){e===void 0&&(e=[]);let n=[];return Y.Children.forEach(t,(r,i)=>{if(!Y.isValidElement(r))return;let s=[...e,i];if(r.type===Y.Fragment){n.push.apply(n,W0(r.props.children,s));return}r.type!==_n&&hn(!1),!r.props.index||!r.props.children||hn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=W0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $0(){return $0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$0.apply(this,arguments)}function nP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iP(t,e){return t.button===0&&(!e||e==="_self")&&!rP(t)}function q0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function sP(t,e){let n=q0(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const oP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],aP="6";try{window.__reactRouterVersion=aP}catch{}const lP="startTransition",kx=XC[lP];function cP(t){let{basename:e,children:n,future:r,window:i}=t,s=Y.useRef();s.current==null&&(s.current=c4({window:i,v5Compat:!0}));let o=s.current,[a,l]=Y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=Y.useCallback(h=>{c&&kx?kx(()=>l(h)):l(h)},[l,c]);return Y.useLayoutEffect(()=>o.listen(d),[o,d]),Y.useEffect(()=>X4(r),[r]),Y.createElement(eP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const uP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zt=Y.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,m=nP(e,oP),{basename:v}=Y.useContext(Mo),k,S=!1;if(typeof c=="string"&&dP.test(c)&&(k=c,uP))try{let E=new URL(window.location.href),j=c.startsWith("//")?new URL(E.protocol+c):new URL(c),K=qw(j.pathname,v);j.origin===E.origin&&K!=null?c=K+j.search+j.hash:S=!0}catch{}let _=D4(c,{relative:i}),T=hP(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function I(E){r&&r(E),E.defaultPrevented||T(E)}return Y.createElement("a",$0({},m,{href:k||_,onClick:S||s?r:I,ref:n,target:l}))});var Tx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Tx||(Tx={}));var Ax;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ax||(Ax={}));function hP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ar(),c=Li(),d=Sk(t,{relative:o});return Y.useCallback(h=>{if(iP(h,n)){h.preventDefault();let m=r!==void 0?r:Rf(c)===Rf(d);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}function fP(t){let e=Y.useRef(q0(t)),n=Y.useRef(!1),r=Li(),i=Y.useMemo(()=>sP(r.search,n.current?null:e.current),[r.search]),s=ar(),o=Y.useCallback((a,l)=>{const c=q0(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var Nx={MANPATH:"/opt/homebrew/share/man::",TERM_PROGRAM:"Apple_Terminal",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/b3/0x1h3p456wxfhqw79t6qrcpm0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"455",COLOR:"1",TERM_SESSION_ID:"41875280-E0F1-4769-84BE-EFC028F47D91",npm_config_noproxy:"",npm_config_local_prefix:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project",USER:"justincurtsinger",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.CMyud4jOmQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project/node_modules/.bin:/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/node_modules/.bin:/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/node_modules/.bin:/Users/justincurtsinger/Documents/BusinessIdeas/node_modules/.bin:/Users/justincurtsinger/Documents/node_modules/.bin:/Users/justincurtsinger/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Library/Frameworks/Python.framework/Versions/3.12/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_package_json:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project/package.json",_:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project/node_modules/.bin/vite",npm_config_userconfig:"/Users/justincurtsinger/.npmrc",npm_config_init_module:"/Users/justincurtsinger/.npm-init.js",__CFBundleIdentifier:"com.apple.Terminal",npm_command:"run-script",PWD:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"p2p-lending-platform",LANG:"en_US.UTF-8",npm_config_npm_version:"10.5.0",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.0.0",XPC_SERVICE_NAME:"0",HOME:"/Users/justincurtsinger",SHLVL:"2",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/justincurtsinger/.npm",LOGNAME:"justincurtsinger",npm_lifecycle_script:"vite build",npm_config_user_agent:"npm/10.5.0 node/v21.7.1 darwin arm64 workspaces/false",INFOPATH:"/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",NODE_ENV:"production"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ck={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,v=c&63;l||(v=64,o||(m=64)),r.push(n[d],n[h],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new mP;const m=s<<2|a>>4;if(r.push(m),c!==64){const v=a<<4&240|c>>2;if(r.push(v),h!==64){const k=c<<6&192|h;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gP=function(t){const e=Nk(t);return Ck.encodeByteArray(e,!0)},Lf=function(t){return gP(t).replace(/\./g,"")},Mk=function(t){try{return Ck.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=()=>yP().__FIREBASE_DEFAULTS__,vP=()=>{if(typeof process>"u"||typeof Nx>"u")return;const t=Nx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_P=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mk(t[1]);return e&&JSON.parse(e)},Rp=()=>{try{return wP()||vP()||_P()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rk=t=>{var e,n;return(n=(e=Rp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xP=t=>{const e=Rk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pk=()=>{var t;return(t=Rp())===null||t===void 0?void 0:t.config},Lk=t=>{var e;return(e=Rp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lf(JSON.stringify(n)),Lf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function SP(){var t;const e=(t=Rp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NP(){const t=or();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CP(){return!SP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MP(){try{return typeof indexedDB=="object"}catch{return!1}}function RP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="FirebaseError";class Di extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PP,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bd.prototype.create)}}class bd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Di(i,a,r)}}function LP(t,e){return t.replace(DP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const DP=/\{\$([^}]+)}/g;function OP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Df(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Cx(s)&&Cx(o)){if(!Df(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Cx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function su(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jP(t,e){const n=new BP(t,e);return n.subscribe.bind(n)}class BP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=tg),i.error===void 0&&(i.error=tg),i.complete===void 0&&(i.complete=tg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t){return t&&t._delegate?t._delegate:t}class bo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new EP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zP(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VP(t){return t===qo?void 0:t}function zP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const $P={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},qP=Ze.INFO,HP={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},KP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=HP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yw{constructor(e){this.name=e,this._logLevel=qP,this._logHandler=KP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const GP=(t,e)=>e.some(n=>t instanceof n);let Mx,Rx;function YP(){return Mx||(Mx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QP(){return Rx||(Rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dk=new WeakMap,H0=new WeakMap,Ok=new WeakMap,ng=new WeakMap,Qw=new WeakMap;function ZP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(go(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dk.set(n,t)}).catch(()=>{}),Qw.set(e,t),e}function XP(t){if(H0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});H0.set(t,e)}let K0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return H0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ok.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return go(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JP(t){K0=t(K0)}function eL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rg(this),e,...n);return Ok.set(r,e.sort?e.sort():[e]),go(r)}:QP().includes(t)?function(...e){return t.apply(rg(this),e),go(Dk.get(this))}:function(...e){return go(t.apply(rg(this),e))}}function tL(t){return typeof t=="function"?eL(t):(t instanceof IDBTransaction&&XP(t),GP(t,YP())?new Proxy(t,K0):t)}function go(t){if(t instanceof IDBRequest)return ZP(t);if(ng.has(t))return ng.get(t);const e=tL(t);return e!==t&&(ng.set(t,e),Qw.set(e,t)),e}const rg=t=>Qw.get(t);function nL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=go(o);return r&&o.addEventListener("upgradeneeded",l=>{r(go(o.result),l.oldVersion,l.newVersion,go(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const rL=["get","getKey","getAll","getAllKeys","count"],iL=["put","add","delete","clear"],ig=new Map;function Px(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ig.get(e))return ig.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=iL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return ig.set(e,s),s}JP(t=>({...t,get:(e,n,r)=>Px(e,n)||t.get(e,n,r),has:(e,n)=>!!Px(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const G0="@firebase/app",Lx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Yw("@firebase/app"),aL="@firebase/app-compat",lL="@firebase/analytics-compat",cL="@firebase/analytics",uL="@firebase/app-check-compat",dL="@firebase/app-check",hL="@firebase/auth",fL="@firebase/auth-compat",pL="@firebase/database",mL="@firebase/data-connect",gL="@firebase/database-compat",yL="@firebase/functions",wL="@firebase/functions-compat",vL="@firebase/installations",_L="@firebase/installations-compat",xL="@firebase/messaging",EL="@firebase/messaging-compat",bL="@firebase/performance",IL="@firebase/performance-compat",SL="@firebase/remote-config",kL="@firebase/remote-config-compat",TL="@firebase/storage",AL="@firebase/storage-compat",NL="@firebase/firestore",CL="@firebase/vertexai-preview",ML="@firebase/firestore-compat",RL="firebase",PL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="[DEFAULT]",LL={[G0]:"fire-core",[aL]:"fire-core-compat",[cL]:"fire-analytics",[lL]:"fire-analytics-compat",[dL]:"fire-app-check",[uL]:"fire-app-check-compat",[hL]:"fire-auth",[fL]:"fire-auth-compat",[pL]:"fire-rtdb",[mL]:"fire-data-connect",[gL]:"fire-rtdb-compat",[yL]:"fire-fn",[wL]:"fire-fn-compat",[vL]:"fire-iid",[_L]:"fire-iid-compat",[xL]:"fire-fcm",[EL]:"fire-fcm-compat",[bL]:"fire-perf",[IL]:"fire-perf-compat",[SL]:"fire-rc",[kL]:"fire-rc-compat",[TL]:"fire-gcs",[AL]:"fire-gcs-compat",[NL]:"fire-fst",[ML]:"fire-fst-compat",[CL]:"fire-vertex","fire-js":"fire-js",[RL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=new Map,DL=new Map,Q0=new Map;function Dx(t,e){try{t.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ya(t){const e=t.name;if(Q0.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;Q0.set(e,t);for(const n of Of.values())Dx(n,t);for(const n of DL.values())Dx(n,t);return!0}function Zw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function si(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yo=new bd("app","Firebase",OL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=PL;function jk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Y0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw yo.create("bad-app-name",{appName:String(i)});if(n||(n=Pk()),!n)throw yo.create("no-options");const s=Of.get(i);if(s){if(Df(n,s.options)&&Df(r,s.config))return s;throw yo.create("duplicate-app",{appName:i})}const o=new WP(i);for(const l of Q0.values())o.addComponent(l);const a=new jL(n,r,o);return Of.set(i,a),a}function Bk(t=Y0){const e=Of.get(t);if(!e&&t===Y0&&Pk())return jk();if(!e)throw yo.create("no-app",{appName:t});return e}function Si(t,e,n){var r;let i=(r=LL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(a.join(" "));return}ya(new bo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="firebase-heartbeat-database",UL=1,Yu="firebase-heartbeat-store";let sg=null;function Uk(){return sg||(sg=nL(BL,UL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw yo.create("idb-open",{originalErrorMessage:t.message})})),sg}async function FL(t){try{const n=(await Uk()).transaction(Yu),r=await n.objectStore(Yu).get(Fk(t));return await n.done,r}catch(e){if(e instanceof Di)ws.warn(e.message);else{const n=yo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(n.message)}}}async function Ox(t,e){try{const r=(await Uk()).transaction(Yu,"readwrite");await r.objectStore(Yu).put(e,Fk(t)),await r.done}catch(n){if(n instanceof Di)ws.warn(n.message);else{const r=yo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ws.warn(r.message)}}}function Fk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=1024,zL=30*24*60*60*1e3;class WL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=zL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ws.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jx(),{heartbeatsToSend:r,unsentEntries:i}=$L(this._heartbeatsCache.heartbeats),s=Lf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ws.warn(n),""}}}function jx(){return new Date().toISOString().substring(0,10)}function $L(t,e=VL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Bx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MP()?RP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ox(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ox(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Bx(t){return Lf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t){ya(new bo("platform-logger",e=>new sL(e),"PRIVATE")),ya(new bo("heartbeat",e=>new WL(e),"PRIVATE")),Si(G0,Lx,t),Si(G0,Lx,"esm2017"),Si("fire-js","")}HL("");var KL="firebase",GL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(KL,GL,"app");function Xw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Vk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YL=Vk,zk=new bd("auth","Firebase",Vk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Yw("@firebase/auth");function QL(t,...e){jf.logLevel<=Ze.WARN&&jf.warn(`Auth (${Na}): ${t}`,...e)}function Hh(t,...e){jf.logLevel<=Ze.ERROR&&jf.error(`Auth (${Na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,...e){throw ev(t,...e)}function di(t,...e){return ev(t,...e)}function Jw(t,e,n){const r=Object.assign(Object.assign({},YL()),{[e]:n});return new bd("auth","Firebase",r).create(e,{appName:t.name})}function us(t){return Jw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZL(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Yr(t,"argument-error"),Jw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ev(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zk.create(t,...e)}function Ne(t,e,...n){if(!t)throw ev(e,...n)}function is(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hh(e),new Error(e)}function vs(t,e){t||is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XL(){return Ux()==="http:"||Ux()==="https:"}function Ux(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XL()||TP()||"connection"in navigator)?navigator.onLine:!0}function eD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){this.shortDelay=e,this.longDelay=n,vs(n>e,"Short delay should be less than long delay!"),this.isMobile=IP()||AP()}get(){return JL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e){vs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new Sd(3e4,6e4);function Ts(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function As(t,e,n,r,i={}){return $k(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Id(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return kP()||(c.referrerPolicy="no-referrer"),Wk.fetch()(qk(t,t.config.apiHost,n,a),c)})}async function $k(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tD),e);try{const i=new iD(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw wh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw wh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Jw(t,d,c);Yr(t,d)}}catch(i){if(i instanceof Di)throw i;Yr(t,"network-request-failed",{message:String(i)})}}async function kd(t,e,n,r,i={}){const s=await As(t,e,n,r,i);return"mfaPendingCredential"in s&&Yr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function qk(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?tv(t.config,i):`${t.config.apiScheme}://${i}`}function rD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),nD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=di(t,e,r);return i.customData._tokenResponse=n,i}function Fx(t){return t!==void 0&&t.enterprise!==void 0}class sD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function oD(t,e){return As(t,"GET","/v2/recaptchaConfig",Ts(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e){return As(t,"POST","/v1/accounts:delete",e)}async function Hk(t,e){return As(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lD(t,e=!1){const n=Er(t),r=await n.getIdToken(e),i=nv(r);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xu(og(i.auth_time)),issuedAtTime:xu(og(i.iat)),expirationTime:xu(og(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function og(t){return Number(t)*1e3}function nv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Mk(n);return i?JSON.parse(i):(Hh("Failed to decode base64 JWT payload"),null)}catch(i){return Hh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Vx(t){const e=nv(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Di&&cD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Qu(t,Hk(n,{idToken:r}));Ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Kk(s.providerUserInfo):[],a=hD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new X0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function dD(t){const e=Er(t);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Kk(t){return t.map(e=>{var{providerId:n}=e,r=Xw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(t,e){const n=await $k(t,{},async()=>{const r=Id({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=qk(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Wk.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pD(t,e){return As(t,"POST","/v2/accounts:revokeToken",Ts(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=Vx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await fD(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Nl;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ss{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Xw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new X0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Qu(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lD(this,e)}reload(){return dD(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(si(this.auth.app))return Promise.reject(us(this.auth));const e=await this.getIdToken();return await Qu(this,aD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,I=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:j,isAnonymous:K,providerData:G,stsTokenManager:O}=n;Ne(E&&O,e,"internal-error");const L=Nl.fromJSON(this.name,O);Ne(typeof E=="string",e,"internal-error"),Ds(h,e.name),Ds(m,e.name),Ne(typeof j=="boolean",e,"internal-error"),Ne(typeof K=="boolean",e,"internal-error"),Ds(v,e.name),Ds(k,e.name),Ds(S,e.name),Ds(_,e.name),Ds(T,e.name),Ds(I,e.name);const B=new ss({uid:E,auth:e,email:m,emailVerified:j,displayName:h,isAnonymous:K,photoURL:k,phoneNumber:v,tenantId:S,stsTokenManager:L,createdAt:T,lastLoginAt:I});return G&&Array.isArray(G)&&(B.providerData=G.map(W=>Object.assign({},W))),_&&(B._redirectEventId=_),B}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nl;i.updateFromServerResponse(n);const s=new ss({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Kk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Nl;a.updateFromIdToken(r);const l=new ss({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new X0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Map;function os(t){vs(t instanceof Function,"Expected a class definition");let e=zx.get(t);return e?(vs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gk.type="NONE";const Wx=Gk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t,e,n){return`firebase:${t}:${e}:${n}`}class Cl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Kh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Kh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ss._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Cl(os(Wx),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||os(Wx);const o=Kh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ss._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Cl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Cl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eT(e))return"Blackberry";if(tT(e))return"Webos";if(Qk(e))return"Safari";if((e.includes("chrome/")||Zk(e))&&!e.includes("edge/"))return"Chrome";if(Jk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Yk(t=or()){return/firefox\//i.test(t)}function Qk(t=or()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zk(t=or()){return/crios\//i.test(t)}function Xk(t=or()){return/iemobile/i.test(t)}function Jk(t=or()){return/android/i.test(t)}function eT(t=or()){return/blackberry/i.test(t)}function tT(t=or()){return/webos/i.test(t)}function rv(t=or()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mD(t=or()){var e;return rv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gD(){return NP()&&document.documentMode===10}function nT(t=or()){return rv(t)||Jk(t)||tT(t)||eT(t)||/windows phone/i.test(t)||Xk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t,e=[]){let n;switch(t){case"Browser":n=$x(or());break;case"Worker":n=`${$x(or())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e={}){return As(t,"GET","/v2/passwordPolicy",Ts(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=6;class _D{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qx(this),this.idTokenSubscription=new qx(this),this.beforeStateQueue=new yD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=os(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Cl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hk(this,{idToken:e}),r=await ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(si(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(si(this.app))return Promise.reject(us(this));const n=e?Er(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return si(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return si(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wD(this),n=new _D(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&os(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await Cl.create(this,[os(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ns(t){return Er(t)}class qx{constructor(e){this.auth=e,this.observer=null,this.addObserver=jP(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ED(t){Pp=t}function iT(t){return Pp.loadJS(t)}function bD(){return Pp.recaptchaEnterpriseScript}function ID(){return Pp.gapiScript}function SD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const kD="recaptcha-enterprise",TD="NO_RECAPTCHA";class AD{constructor(e){this.type=kD,this.auth=Ns(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{oD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new sD(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Fx(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(TD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Fx(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=bD();l.length!==0&&(l+=a),iT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Hx(t,e,n,r=!1){const i=new AD(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Uf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Hx(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Hx(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t,e){const n=Zw(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Df(s,e??{}))return i;Yr(i,"already-initialized")}return n.initialize({options:e})}function CD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(os);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MD(t,e,n){const r=Ns(t);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=sT(e),{host:o,port:a}=RD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),PD()}function sT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RD(t){const e=sT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Kx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Kx(o)}}}function Kx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return is("not implemented")}_getIdTokenResponse(e){return is("not implemented")}_linkToIdToken(e,n){return is("not implemented")}_getReauthenticationResolver(e){return is("not implemented")}}async function LD(t,e){return As(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(t,e){return kd(t,"POST","/v1/accounts:signInWithPassword",Ts(t,e))}async function OD(t,e){return As(t,"POST","/v1/accounts:sendOobCode",Ts(t,e))}async function jD(t,e){return OD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(t,e){return kd(t,"POST","/v1/accounts:signInWithEmailLink",Ts(t,e))}async function UD(t,e){return kd(t,"POST","/v1/accounts:signInWithEmailLink",Ts(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends iv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Zu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Zu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,n,"signInWithPassword",DD);case"emailLink":return BD(e,{email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,r,"signUpPassword",LD);case"emailLink":return UD(e,{idToken:n,email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(t,e){return kd(t,"POST","/v1/accounts:signInWithIdp",Ts(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="http://localhost";class wa extends iv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Xw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new wa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ml(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ml(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ml(e,n)}buildRequest(){const e={requestUri:FD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Id(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zD(t){const e=iu(su(t)).link,n=e?iu(su(e)).deep_link_id:null,r=iu(su(t)).deep_link_id;return(r?iu(su(r)).link:null)||r||n||e||t}class sv{constructor(e){var n,r,i,s,o,a;const l=iu(su(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=VD((i=l.mode)!==null&&i!==void 0?i:null);Ne(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=zD(e);try{return new sv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(){this.providerId=mc.PROVIDER_ID}static credential(e,n){return Zu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sv.parseLink(n);return Ne(r,"argument-error"),Zu._fromEmailAndCode(e,r.code,r.tenantId)}}mc.PROVIDER_ID="password";mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends ov{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Td{constructor(){super("facebook.com")}static credential(e){return wa._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Td{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wa._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zi.credential(n,r)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Td{constructor(){super("github.com")}static credential(e){return wa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Td{constructor(){super("twitter.com")}static credential(e,n){return wa._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zs.credential(n,r)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e){return kd(t,"POST","/v1/accounts:signUp",Ts(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ss._fromIdTokenResponse(e,r,i),o=Gx(r);return new va({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Gx(r);return new va({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Gx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends Di{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ff.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ff(e,n,r,i)}}function oT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ff._fromErrorAndOperation(t,s,e,r):s})}async function $D(t,e,n=!1){const r=await Qu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return va._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e,n=!1){const{auth:r}=t;if(si(r.app))return Promise.reject(us(r));const i="reauthenticate";try{const s=await Qu(t,oT(r,i,e,t),n);Ne(s.idToken,r,"internal-error");const o=nv(s.idToken);Ne(o,r,"internal-error");const{sub:a}=o;return Ne(t.uid===a,r,"user-mismatch"),va._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Yr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(t,e,n=!1){if(si(t.app))return Promise.reject(us(t));const r="signIn",i=await oT(t,r,e),s=await va._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function HD(t,e){return aT(Ns(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(t){const e=Ns(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KD(t,e,n){const r=Ns(t);await Uf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",jD)}async function GD(t,e,n){if(si(t.app))return Promise.reject(us(t));const r=Ns(t),o=await Uf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&lT(t),l}),a=await va._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function YD(t,e,n){return si(t.app)?Promise.reject(us(t)):HD(Er(t),mc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lT(t),r})}function QD(t,e,n,r){return Er(t).onIdTokenChanged(e,n,r)}function ZD(t,e,n){return Er(t).beforeAuthStateChanged(e,n)}function XD(t){return Er(t).signOut()}const Vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vf,"1"),this.storage.removeItem(Vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=1e3,eO=10;class uT extends cT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);gD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,eO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},JD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uT.type="LOCAL";const tO=uT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT extends cT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dT.type="SESSION";const hT=dT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Lp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await nO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=av("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function iO(t){ki().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function sO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aO(){return fT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firebaseLocalStorageDb",lO=1,zf="firebaseLocalStorage",mT="fbase_key";class Ad{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dp(t,e){return t.transaction([zf],e?"readwrite":"readonly").objectStore(zf)}function cO(){const t=indexedDB.deleteDatabase(pT);return new Ad(t).toPromise()}function J0(){const t=indexedDB.open(pT,lO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zf,{keyPath:mT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zf)?e(r):(r.close(),await cO(),e(await J0()))})})}async function Yx(t,e,n){const r=Dp(t,!0).put({[mT]:e,value:n});return new Ad(r).toPromise()}async function uO(t,e){const n=Dp(t,!1).get(e),r=await new Ad(n).toPromise();return r===void 0?null:r.value}function Qx(t,e){const n=Dp(t,!0).delete(e);return new Ad(n).toPromise()}const dO=800,hO=3;class gT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lp._getInstance(aO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sO(),!this.activeServiceWorker)return;this.sender=new rO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J0();return await Yx(e,Vf,"1"),await Qx(e,Vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Dp(i,!1).getAll();return new Ad(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gT.type="LOCAL";const fO=gT;new Sd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e){return e?os(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv extends iv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ml(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ml(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pO(t){return aT(t.auth,new lv(t),t.bypassAuthState)}function mO(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),qD(n,new lv(t),t.bypassAuthState)}async function gO(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),$D(n,new lv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pO;case"linkViaPopup":case"linkViaRedirect":return gO;case"reauthViaPopup":case"reauthViaRedirect":return mO;default:Yr(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=new Sd(2e3,1e4);async function wO(t,e,n){if(si(t.app))return Promise.reject(di(t,"operation-not-supported-in-this-environment"));const r=Ns(t);ZL(t,e,ov);const i=yT(r,n);return new ea(r,"signInViaPopup",e,i).executeNotNull()}class ea extends wT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=av();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yO.get())};e()}}ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="pendingRedirect",Gh=new Map;class _O extends wT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gh.get(this.auth._key());if(!e){try{const r=await xO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gh.set(this.auth._key(),e)}return this.bypassAuthState||Gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xO(t,e){const n=IO(e),r=bO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function EO(t,e){Gh.set(t._key(),e)}function bO(t){return os(t._redirectPersistence)}function IO(t){return Kh(vO,t.config.apiKey,t.name)}async function SO(t,e,n=!1){if(si(t.app))return Promise.reject(us(t));const r=Ns(t),i=yT(r,e),o=await new _O(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=10*60*1e3;class TO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(di(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zx(e))}saveEventToCache(e){this.cachedEventUids.add(Zx(e)),this.lastProcessedEventTime=Date.now()}}function Zx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e={}){return As(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MO=/^https?/;async function RO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NO(t);for(const n of e)try{if(PO(n))return}catch{}Yr(t,"unauthorized-domain")}function PO(t){const e=Z0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!MO.test(n))return!1;if(CO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=new Sd(3e4,6e4);function Xx(){const t=ki().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DO(t){return new Promise((e,n)=>{var r,i,s;function o(){Xx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xx(),n(di(t,"network-request-failed"))},timeout:LO.get()})}if(!((i=(r=ki().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ki().gapi)===null||s===void 0)&&s.load)o();else{const a=SD("iframefcb");return ki()[a]=()=>{gapi.load?o():n(di(t,"network-request-failed"))},iT(`${ID()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function OO(t){return Yh=Yh||DO(t),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=new Sd(5e3,15e3),BO="__/auth/iframe",UO="emulator/auth/iframe",FO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zO(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?tv(e,UO):`https://${t.config.authDomain}/${BO}`,r={apiKey:e.apiKey,appName:t.name,v:Na},i=VO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Id(r).slice(1)}`}async function WO(t){const e=await OO(t),n=ki().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:zO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=di(t,"network-request-failed"),a=ki().setTimeout(()=>{s(o)},jO.get());function l(){ki().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qO=500,HO=600,KO="_blank",GO="http://localhost";class Jx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YO(t,e,n,r=qO,i=HO){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$O),{width:r.toString(),height:i.toString(),top:s,left:o}),c=or().toLowerCase();n&&(a=Zk(c)?KO:n),Yk(c)&&(e=e||GO,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[v,k])=>`${m}${v}=${k},`,"");if(mD(c)&&a!=="_self")return QO(e||"",a),new Jx(null);const h=window.open(e||"",a,d);Ne(h,t,"popup-blocked");try{h.focus()}catch{}return new Jx(h)}function QO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO="__/auth/handler",XO="emulator/auth/handler",JO=encodeURIComponent("fac");async function eE(t,e,n,r,i,s){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Na,eventId:i};if(e instanceof ov){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",OP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Td){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${JO}=${encodeURIComponent(l)}`:"";return`${e3(t)}?${Id(a).slice(1)}${c}`}function e3({config:t}){return t.emulator?tv(t,XO):`https://${t.authDomain}/${ZO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="webStorageSupport";class t3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hT,this._completeRedirectFn=SO,this._overrideRedirectResult=EO}async _openPopup(e,n,r,i){var s;vs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await eE(e,n,r,Z0(),i);return YO(e,o,av())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await eE(e,n,r,Z0(),i);return iO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(vs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WO(e),r=new TO(e);return n.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ag,{type:ag},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ag];o!==void 0&&n(!!o),Yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nT()||Qk()||rv()}}const n3=t3;var tE="@firebase/auth",nE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s3(t){ya(new bo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rT(t)},c=new xD(r,i,s,l);return CD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ya(new bo("auth-internal",e=>{const n=Ns(e.getProvider("auth").getImmediate());return(r=>new r3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si(tE,nE,i3(t)),Si(tE,nE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=5*60,a3=Lk("authIdTokenMaxAge")||o3;let rE=null;const l3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>a3)return;const i=n==null?void 0:n.token;rE!==i&&(rE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function c3(t=Bk()){const e=Zw(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ND(t,{popupRedirectResolver:n3,persistence:[fO,tO,hT]}),r=Lk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=l3(s.toString());ZD(n,o,()=>o(n.currentUser)),QD(n,a=>o(a))}}const i=Rk("auth");return i&&MD(n,`http://${i}`),n}function u3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ED({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=di("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",u3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s3("Browser");var iE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ca,_T;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,L){function B(){}B.prototype=L.prototype,O.D=L.prototype,O.prototype=new B,O.prototype.constructor=O,O.C=function(W,$,H){for(var A=Array(arguments.length-2),f=2;f<arguments.length;f++)A[f-2]=arguments[f];return L.prototype[$].apply(W,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,L,B){B||(B=0);var W=Array(16);if(typeof L=="string")for(var $=0;16>$;++$)W[$]=L.charCodeAt(B++)|L.charCodeAt(B++)<<8|L.charCodeAt(B++)<<16|L.charCodeAt(B++)<<24;else for($=0;16>$;++$)W[$]=L[B++]|L[B++]<<8|L[B++]<<16|L[B++]<<24;L=O.g[0],B=O.g[1],$=O.g[2];var H=O.g[3],A=L+(H^B&($^H))+W[0]+3614090360&4294967295;L=B+(A<<7&4294967295|A>>>25),A=H+($^L&(B^$))+W[1]+3905402710&4294967295,H=L+(A<<12&4294967295|A>>>20),A=$+(B^H&(L^B))+W[2]+606105819&4294967295,$=H+(A<<17&4294967295|A>>>15),A=B+(L^$&(H^L))+W[3]+3250441966&4294967295,B=$+(A<<22&4294967295|A>>>10),A=L+(H^B&($^H))+W[4]+4118548399&4294967295,L=B+(A<<7&4294967295|A>>>25),A=H+($^L&(B^$))+W[5]+1200080426&4294967295,H=L+(A<<12&4294967295|A>>>20),A=$+(B^H&(L^B))+W[6]+2821735955&4294967295,$=H+(A<<17&4294967295|A>>>15),A=B+(L^$&(H^L))+W[7]+4249261313&4294967295,B=$+(A<<22&4294967295|A>>>10),A=L+(H^B&($^H))+W[8]+1770035416&4294967295,L=B+(A<<7&4294967295|A>>>25),A=H+($^L&(B^$))+W[9]+2336552879&4294967295,H=L+(A<<12&4294967295|A>>>20),A=$+(B^H&(L^B))+W[10]+4294925233&4294967295,$=H+(A<<17&4294967295|A>>>15),A=B+(L^$&(H^L))+W[11]+2304563134&4294967295,B=$+(A<<22&4294967295|A>>>10),A=L+(H^B&($^H))+W[12]+1804603682&4294967295,L=B+(A<<7&4294967295|A>>>25),A=H+($^L&(B^$))+W[13]+4254626195&4294967295,H=L+(A<<12&4294967295|A>>>20),A=$+(B^H&(L^B))+W[14]+2792965006&4294967295,$=H+(A<<17&4294967295|A>>>15),A=B+(L^$&(H^L))+W[15]+1236535329&4294967295,B=$+(A<<22&4294967295|A>>>10),A=L+($^H&(B^$))+W[1]+4129170786&4294967295,L=B+(A<<5&4294967295|A>>>27),A=H+(B^$&(L^B))+W[6]+3225465664&4294967295,H=L+(A<<9&4294967295|A>>>23),A=$+(L^B&(H^L))+W[11]+643717713&4294967295,$=H+(A<<14&4294967295|A>>>18),A=B+(H^L&($^H))+W[0]+3921069994&4294967295,B=$+(A<<20&4294967295|A>>>12),A=L+($^H&(B^$))+W[5]+3593408605&4294967295,L=B+(A<<5&4294967295|A>>>27),A=H+(B^$&(L^B))+W[10]+38016083&4294967295,H=L+(A<<9&4294967295|A>>>23),A=$+(L^B&(H^L))+W[15]+3634488961&4294967295,$=H+(A<<14&4294967295|A>>>18),A=B+(H^L&($^H))+W[4]+3889429448&4294967295,B=$+(A<<20&4294967295|A>>>12),A=L+($^H&(B^$))+W[9]+568446438&4294967295,L=B+(A<<5&4294967295|A>>>27),A=H+(B^$&(L^B))+W[14]+3275163606&4294967295,H=L+(A<<9&4294967295|A>>>23),A=$+(L^B&(H^L))+W[3]+4107603335&4294967295,$=H+(A<<14&4294967295|A>>>18),A=B+(H^L&($^H))+W[8]+1163531501&4294967295,B=$+(A<<20&4294967295|A>>>12),A=L+($^H&(B^$))+W[13]+2850285829&4294967295,L=B+(A<<5&4294967295|A>>>27),A=H+(B^$&(L^B))+W[2]+4243563512&4294967295,H=L+(A<<9&4294967295|A>>>23),A=$+(L^B&(H^L))+W[7]+1735328473&4294967295,$=H+(A<<14&4294967295|A>>>18),A=B+(H^L&($^H))+W[12]+2368359562&4294967295,B=$+(A<<20&4294967295|A>>>12),A=L+(B^$^H)+W[5]+4294588738&4294967295,L=B+(A<<4&4294967295|A>>>28),A=H+(L^B^$)+W[8]+2272392833&4294967295,H=L+(A<<11&4294967295|A>>>21),A=$+(H^L^B)+W[11]+1839030562&4294967295,$=H+(A<<16&4294967295|A>>>16),A=B+($^H^L)+W[14]+4259657740&4294967295,B=$+(A<<23&4294967295|A>>>9),A=L+(B^$^H)+W[1]+2763975236&4294967295,L=B+(A<<4&4294967295|A>>>28),A=H+(L^B^$)+W[4]+1272893353&4294967295,H=L+(A<<11&4294967295|A>>>21),A=$+(H^L^B)+W[7]+4139469664&4294967295,$=H+(A<<16&4294967295|A>>>16),A=B+($^H^L)+W[10]+3200236656&4294967295,B=$+(A<<23&4294967295|A>>>9),A=L+(B^$^H)+W[13]+681279174&4294967295,L=B+(A<<4&4294967295|A>>>28),A=H+(L^B^$)+W[0]+3936430074&4294967295,H=L+(A<<11&4294967295|A>>>21),A=$+(H^L^B)+W[3]+3572445317&4294967295,$=H+(A<<16&4294967295|A>>>16),A=B+($^H^L)+W[6]+76029189&4294967295,B=$+(A<<23&4294967295|A>>>9),A=L+(B^$^H)+W[9]+3654602809&4294967295,L=B+(A<<4&4294967295|A>>>28),A=H+(L^B^$)+W[12]+3873151461&4294967295,H=L+(A<<11&4294967295|A>>>21),A=$+(H^L^B)+W[15]+530742520&4294967295,$=H+(A<<16&4294967295|A>>>16),A=B+($^H^L)+W[2]+3299628645&4294967295,B=$+(A<<23&4294967295|A>>>9),A=L+($^(B|~H))+W[0]+4096336452&4294967295,L=B+(A<<6&4294967295|A>>>26),A=H+(B^(L|~$))+W[7]+1126891415&4294967295,H=L+(A<<10&4294967295|A>>>22),A=$+(L^(H|~B))+W[14]+2878612391&4294967295,$=H+(A<<15&4294967295|A>>>17),A=B+(H^($|~L))+W[5]+4237533241&4294967295,B=$+(A<<21&4294967295|A>>>11),A=L+($^(B|~H))+W[12]+1700485571&4294967295,L=B+(A<<6&4294967295|A>>>26),A=H+(B^(L|~$))+W[3]+2399980690&4294967295,H=L+(A<<10&4294967295|A>>>22),A=$+(L^(H|~B))+W[10]+4293915773&4294967295,$=H+(A<<15&4294967295|A>>>17),A=B+(H^($|~L))+W[1]+2240044497&4294967295,B=$+(A<<21&4294967295|A>>>11),A=L+($^(B|~H))+W[8]+1873313359&4294967295,L=B+(A<<6&4294967295|A>>>26),A=H+(B^(L|~$))+W[15]+4264355552&4294967295,H=L+(A<<10&4294967295|A>>>22),A=$+(L^(H|~B))+W[6]+2734768916&4294967295,$=H+(A<<15&4294967295|A>>>17),A=B+(H^($|~L))+W[13]+1309151649&4294967295,B=$+(A<<21&4294967295|A>>>11),A=L+($^(B|~H))+W[4]+4149444226&4294967295,L=B+(A<<6&4294967295|A>>>26),A=H+(B^(L|~$))+W[11]+3174756917&4294967295,H=L+(A<<10&4294967295|A>>>22),A=$+(L^(H|~B))+W[2]+718787259&4294967295,$=H+(A<<15&4294967295|A>>>17),A=B+(H^($|~L))+W[9]+3951481745&4294967295,O.g[0]=O.g[0]+L&4294967295,O.g[1]=O.g[1]+($+(A<<21&4294967295|A>>>11))&4294967295,O.g[2]=O.g[2]+$&4294967295,O.g[3]=O.g[3]+H&4294967295}r.prototype.u=function(O,L){L===void 0&&(L=O.length);for(var B=L-this.blockSize,W=this.B,$=this.h,H=0;H<L;){if($==0)for(;H<=B;)i(this,O,H),H+=this.blockSize;if(typeof O=="string"){for(;H<L;)if(W[$++]=O.charCodeAt(H++),$==this.blockSize){i(this,W),$=0;break}}else for(;H<L;)if(W[$++]=O[H++],$==this.blockSize){i(this,W),$=0;break}}this.h=$,this.o+=L},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var L=1;L<O.length-8;++L)O[L]=0;var B=8*this.o;for(L=O.length-8;L<O.length;++L)O[L]=B&255,B/=256;for(this.u(O),O=Array(16),L=B=0;4>L;++L)for(var W=0;32>W;W+=8)O[B++]=this.g[L]>>>W&255;return O};function s(O,L){var B=a;return Object.prototype.hasOwnProperty.call(B,O)?B[O]:B[O]=L(O)}function o(O,L){this.h=L;for(var B=[],W=!0,$=O.length-1;0<=$;$--){var H=O[$]|0;W&&H==L||(B[$]=H,W=!1)}this.g=B}var a={};function l(O){return-128<=O&&128>O?s(O,function(L){return new o([L|0],0>L?-1:0)}):new o([O|0],0>O?-1:0)}function c(O){if(isNaN(O)||!isFinite(O))return h;if(0>O)return _(c(-O));for(var L=[],B=1,W=0;O>=B;W++)L[W]=O/B|0,B*=4294967296;return new o(L,0)}function d(O,L){if(O.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(O.charAt(0)=="-")return _(d(O.substring(1),L));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=c(Math.pow(L,8)),W=h,$=0;$<O.length;$+=8){var H=Math.min(8,O.length-$),A=parseInt(O.substring($,$+H),L);8>H?(H=c(Math.pow(L,H)),W=W.j(H).add(c(A))):(W=W.j(B),W=W.add(c(A)))}return W}var h=l(0),m=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-_(this).m();for(var O=0,L=1,B=0;B<this.g.length;B++){var W=this.i(B);O+=(0<=W?W:4294967296+W)*L,L*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(k(this))return"0";if(S(this))return"-"+_(this).toString(O);for(var L=c(Math.pow(O,6)),B=this,W="";;){var $=j(B,L).g;B=T(B,$.j(L));var H=((0<B.g.length?B.g[0]:B.h)>>>0).toString(O);if(B=$,k(B))return H+W;for(;6>H.length;)H="0"+H;W=H+W}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function k(O){if(O.h!=0)return!1;for(var L=0;L<O.g.length;L++)if(O.g[L]!=0)return!1;return!0}function S(O){return O.h==-1}t.l=function(O){return O=T(this,O),S(O)?-1:k(O)?0:1};function _(O){for(var L=O.g.length,B=[],W=0;W<L;W++)B[W]=~O.g[W];return new o(B,~O.h).add(m)}t.abs=function(){return S(this)?_(this):this},t.add=function(O){for(var L=Math.max(this.g.length,O.g.length),B=[],W=0,$=0;$<=L;$++){var H=W+(this.i($)&65535)+(O.i($)&65535),A=(H>>>16)+(this.i($)>>>16)+(O.i($)>>>16);W=A>>>16,H&=65535,A&=65535,B[$]=A<<16|H}return new o(B,B[B.length-1]&-2147483648?-1:0)};function T(O,L){return O.add(_(L))}t.j=function(O){if(k(this)||k(O))return h;if(S(this))return S(O)?_(this).j(_(O)):_(_(this).j(O));if(S(O))return _(this.j(_(O)));if(0>this.l(v)&&0>O.l(v))return c(this.m()*O.m());for(var L=this.g.length+O.g.length,B=[],W=0;W<2*L;W++)B[W]=0;for(W=0;W<this.g.length;W++)for(var $=0;$<O.g.length;$++){var H=this.i(W)>>>16,A=this.i(W)&65535,f=O.i($)>>>16,b=O.i($)&65535;B[2*W+2*$]+=A*b,I(B,2*W+2*$),B[2*W+2*$+1]+=H*b,I(B,2*W+2*$+1),B[2*W+2*$+1]+=A*f,I(B,2*W+2*$+1),B[2*W+2*$+2]+=H*f,I(B,2*W+2*$+2)}for(W=0;W<L;W++)B[W]=B[2*W+1]<<16|B[2*W];for(W=L;W<2*L;W++)B[W]=0;return new o(B,0)};function I(O,L){for(;(O[L]&65535)!=O[L];)O[L+1]+=O[L]>>>16,O[L]&=65535,L++}function E(O,L){this.g=O,this.h=L}function j(O,L){if(k(L))throw Error("division by zero");if(k(O))return new E(h,h);if(S(O))return L=j(_(O),L),new E(_(L.g),_(L.h));if(S(L))return L=j(O,_(L)),new E(_(L.g),L.h);if(30<O.g.length){if(S(O)||S(L))throw Error("slowDivide_ only works with positive integers.");for(var B=m,W=L;0>=W.l(O);)B=K(B),W=K(W);var $=G(B,1),H=G(W,1);for(W=G(W,2),B=G(B,2);!k(W);){var A=H.add(W);0>=A.l(O)&&($=$.add(B),H=A),W=G(W,1),B=G(B,1)}return L=T(O,$.j(L)),new E($,L)}for($=h;0<=O.l(L);){for(B=Math.max(1,Math.floor(O.m()/L.m())),W=Math.ceil(Math.log(B)/Math.LN2),W=48>=W?1:Math.pow(2,W-48),H=c(B),A=H.j(L);S(A)||0<A.l(O);)B-=W,H=c(B),A=H.j(L);k(H)&&(H=m),$=$.add(H),O=T(O,A)}return new E($,O)}t.A=function(O){return j(this,O).h},t.and=function(O){for(var L=Math.max(this.g.length,O.g.length),B=[],W=0;W<L;W++)B[W]=this.i(W)&O.i(W);return new o(B,this.h&O.h)},t.or=function(O){for(var L=Math.max(this.g.length,O.g.length),B=[],W=0;W<L;W++)B[W]=this.i(W)|O.i(W);return new o(B,this.h|O.h)},t.xor=function(O){for(var L=Math.max(this.g.length,O.g.length),B=[],W=0;W<L;W++)B[W]=this.i(W)^O.i(W);return new o(B,this.h^O.h)};function K(O){for(var L=O.g.length+1,B=[],W=0;W<L;W++)B[W]=O.i(W)<<1|O.i(W-1)>>>31;return new o(B,O.h)}function G(O,L){var B=L>>5;L%=32;for(var W=O.g.length-B,$=[],H=0;H<W;H++)$[H]=0<L?O.i(H+B)>>>L|O.i(H+B+1)<<32-L:O.i(H+B);return new o($,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_T=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ca=o}).apply(typeof iE<"u"?iE:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xT,ou,ET,Qh,ey,bT,IT,ST;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,N){return u==Array.prototype||u==Object.prototype||(u[g]=N.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var g=0;g<u.length;++g){var N=u[g];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function i(u,g){if(g)e:{var N=r;u=u.split(".");for(var U=0;U<u.length-1;U++){var X=u[U];if(!(X in N))break e;N=N[X]}u=u[u.length-1],U=N[u],g=g(U),g!=U&&g!=null&&e(N,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var N=0,U=!1,X={next:function(){if(!U&&N<u.length){var ne=N++;return{value:g(ne,u[ne]),done:!1}}return U=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(u){return u||function(){return s(this,function(g,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,N){return u.call.apply(u.bind,arguments)}function h(u,g,N){if(!u)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,U),u.apply(g,X)}}return function(){return u.apply(g,arguments)}}function m(u,g,N){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function v(u,g){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),u.apply(this,U)}}function k(u,g){function N(){}N.prototype=g.prototype,u.aa=g.prototype,u.prototype=new N,u.prototype.constructor=u,u.Qb=function(U,X,ne){for(var he=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)he[Et-2]=arguments[Et];return g.prototype[X].apply(U,he)}}function S(u){const g=u.length;if(0<g){const N=Array(g);for(let U=0;U<g;U++)N[U]=u[U];return N}return[]}function _(u,g){for(let N=1;N<arguments.length;N++){const U=arguments[N];if(l(U)){const X=u.length||0,ne=U.length||0;u.length=X+ne;for(let he=0;he<ne;he++)u[X+he]=U[he]}else u.push(U)}}class T{constructor(g,N){this.i=g,this.j=N,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function I(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var K=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function G(u,g,N){for(const U in u)g.call(N,u[U],U,u)}function O(u,g){for(const N in u)g.call(void 0,u[N],N,u)}function L(u){const g={};for(const N in u)g[N]=u[N];return g}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(u,g){let N,U;for(let X=1;X<arguments.length;X++){U=arguments[X];for(N in U)u[N]=U[N];for(let ne=0;ne<B.length;ne++)N=B[ne],Object.prototype.hasOwnProperty.call(U,N)&&(u[N]=U[N])}}function $(u){var g=1;u=u.split(":");const N=[];for(;0<g&&u.length;)N.push(u.shift()),g--;return u.length&&N.push(u.join(":")),N}function H(u){a.setTimeout(()=>{throw u},0)}function A(){var u=F;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class f{constructor(){this.h=this.g=null}add(g,N){const U=b.get();U.set(g,N),this.h?this.h.next=U:this.g=U,this.h=U}}var b=new T(()=>new C,u=>u.reset());class C{constructor(){this.next=this.g=this.h=null}set(g,N){this.h=g,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let R,M=!1,F=new f,q=()=>{const u=a.Promise.resolve(void 0);R=()=>{u.then(D)}};var D=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(N){H(N)}var g=b;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}M=!1};function w(){this.s=this.s,this.C=this.C}w.prototype.s=!1,w.prototype.ma=function(){this.s||(this.s=!0,this.N())},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const N=()=>{};a.addEventListener("test",N,g),a.removeEventListener("test",N,g)}catch{}return u}();function le(u,g){if(V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var N=this.type=u.type,U=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(K){e:{try{j(g.nodeName);var X=!0;break e}catch{}X=!1}X||(g=null)}}else N=="mouseover"?g=u.fromElement:N=="mouseout"&&(g=u.toElement);this.relatedTarget=g,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:de[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&le.aa.h.call(this)}}k(le,V);var de={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Ce(u,g,N,U,X){this.listener=u,this.proxy=null,this.src=g,this.type=N,this.capture=!!U,this.ha=X,this.key=++Ie,this.da=this.fa=!1}function vt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ue(u){this.src=u,this.g={},this.h=0}Ue.prototype.add=function(u,g,N,U,X){var ne=u.toString();u=this.g[ne],u||(u=this.g[ne]=[],this.h++);var he=jt(u,g,U,X);return-1<he?(g=u[he],N||(g.fa=!1)):(g=new Ce(g,this.src,ne,!!U,X),g.fa=N,u.push(g)),g};function Oe(u,g){var N=g.type;if(N in u.g){var U=u.g[N],X=Array.prototype.indexOf.call(U,g,void 0),ne;(ne=0<=X)&&Array.prototype.splice.call(U,X,1),ne&&(vt(g),u.g[N].length==0&&(delete u.g[N],u.h--))}}function jt(u,g,N,U){for(var X=0;X<u.length;++X){var ne=u[X];if(!ne.da&&ne.listener==g&&ne.capture==!!N&&ne.ha==U)return X}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),Ge={};function Vi(u,g,N,U,X){if(Array.isArray(g)){for(var ne=0;ne<g.length;ne++)Vi(u,g[ne],N,U,X);return null}return N=Mn(N),u&&u[Ae]?u.K(g,N,c(U)?!!U.capture:!!U,X):yt(u,g,N,!1,U,X)}function yt(u,g,N,U,X,ne){if(!g)throw Error("Invalid event type");var he=c(X)?!!X.capture:!!X,Et=ot(u);if(Et||(u[qe]=Et=new Ue(u)),N=Et.add(g,N,U,he,ne),N.proxy)return N;if(U=bt(),N.proxy=U,U.src=u,U.listener=N,u.addEventListener)se||(X=he),X===void 0&&(X=!1),u.addEventListener(g.toString(),U,X);else if(u.attachEvent)u.attachEvent(st(g.toString()),U);else if(u.addListener&&u.removeListener)u.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return N}function bt(){function u(N){return g.call(u.src,u.listener,N)}const g=vn;return u}function zi(u,g,N,U,X){if(Array.isArray(g))for(var ne=0;ne<g.length;ne++)zi(u,g[ne],N,U,X);else U=c(U)?!!U.capture:!!U,N=Mn(N),u&&u[Ae]?(u=u.i,g=String(g).toString(),g in u.g&&(ne=u.g[g],N=jt(ne,N,U,X),-1<N&&(vt(ne[N]),Array.prototype.splice.call(ne,N,1),ne.length==0&&(delete u.g[g],u.h--)))):u&&(u=ot(u))&&(g=u.g[g.toString()],u=-1,g&&(u=jt(g,N,U,X)),(N=-1<u?g[u]:null)&&ct(N))}function ct(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ae])Oe(g.i,u);else{var N=u.type,U=u.proxy;g.removeEventListener?g.removeEventListener(N,U,u.capture):g.detachEvent?g.detachEvent(st(N),U):g.addListener&&g.removeListener&&g.removeListener(U),(N=ot(g))?(Oe(N,u),N.h==0&&(N.src=null,g[qe]=null)):vt(u)}}}function st(u){return u in Ge?Ge[u]:Ge[u]="on"+u}function vn(u,g){if(u.da)u=!0;else{g=new le(g,this);var N=u.listener,U=u.ha||u.src;u.fa&&ct(u),u=N.call(U,g)}return u}function ot(u){return u=u[qe],u instanceof Ue?u:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mn(u){return typeof u=="function"?u:(u[ut]||(u[ut]=function(g){return u.handleEvent(g)}),u[ut])}function Fe(){w.call(this),this.i=new Ue(this),this.M=this,this.F=null}k(Fe,w),Fe.prototype[Ae]=!0,Fe.prototype.removeEventListener=function(u,g,N,U){zi(this,u,g,N,U)};function P(u,g){var N,U=u.F;if(U)for(N=[];U;U=U.F)N.push(U);if(u=u.M,U=g.type||g,typeof g=="string")g=new V(g,u);else if(g instanceof V)g.target=g.target||u;else{var X=g;g=new V(U,u),W(g,X)}if(X=!0,N)for(var ne=N.length-1;0<=ne;ne--){var he=g.g=N[ne];X=y(he,U,!0,g)&&X}if(he=g.g=u,X=y(he,U,!0,g)&&X,X=y(he,U,!1,g)&&X,N)for(ne=0;ne<N.length;ne++)he=g.g=N[ne],X=y(he,U,!1,g)&&X}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var N=u.g[g],U=0;U<N.length;U++)vt(N[U]);delete u.g[g],u.h--}}this.F=null},Fe.prototype.K=function(u,g,N,U){return this.i.add(String(u),g,!1,N,U)},Fe.prototype.L=function(u,g,N,U){return this.i.add(String(u),g,!0,N,U)};function y(u,g,N,U){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var X=!0,ne=0;ne<g.length;++ne){var he=g[ne];if(he&&!he.da&&he.capture==N){var Et=he.listener,Rn=he.ha||he.src;he.fa&&Oe(u.i,he),X=Et.call(Rn,U)!==!1&&X}}return X&&!U.defaultPrevented}function x(u,g,N){if(typeof u=="function")N&&(u=m(u,N));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function z(u){u.g=x(()=>{u.g=null,u.i&&(u.i=!1,z(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Q extends w{constructor(g,N){super(),this.m=g,this.l=N,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:z(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(u){w.call(this),this.h=u,this.g={}}k(Z,w);var te=[];function je(u){G(u.g,function(g,N){this.g.hasOwnProperty(N)&&ct(g)},u),u.g={}}Z.prototype.N=function(){Z.aa.N.call(this),je(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=a.JSON.stringify,Re=a.JSON.parse,_t=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ke(){}ke.prototype.h=null;function Wt(u){return u.h||(u.h=u.i())}function Tc(){}var It={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bt(){V.call(this,"d")}k(Bt,V);function Ba(){V.call(this,"c")}k(Ba,V);var wt={},$t=null;function Lo(){return $t=$t||new Fe}wt.La="serverreachability";function qt(u){V.call(this,wt.La,u)}k(qt,V);function St(u){const g=Lo();P(g,new qt(g))}wt.STAT_EVENT="statevent";function Ac(u,g){V.call(this,wt.STAT_EVENT,u),this.stat=g}k(Ac,V);function Ye(u){const g=Lo();P(g,new Ac(g,u))}wt.Ma="timingevent";function Ht(u,g){V.call(this,wt.Ma,u),this.size=g}k(Ht,V);function Cs(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function kt(){this.g=!0}kt.prototype.xa=function(){this.g=!1};function tn(u,g,N,U,X,ne){u.info(function(){if(u.g)if(ne)for(var he="",Et=ne.split("&"),Rn=0;Rn<Et.length;Rn++){var et=Et[Rn].split("=");if(1<et.length){var qn=et[0];et=et[1];var Hn=qn.split("_");he=2<=Hn.length&&Hn[1]=="type"?he+(qn+"="+et+"&"):he+(qn+"=redacted&")}}else he=null;else he=ne;return"XMLHTTP REQ ("+U+") [attempt "+X+"]: "+g+`
`+N+`
`+he})}function zd(u,g,N,U,X,ne,he){u.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+X+"]: "+g+`
`+N+`
`+ne+" "+he})}function xt(u,g,N,U){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Wd(u,N)+(U?" "+U:"")})}function nn(u,g){u.info(function(){return"TIMEOUT: "+g})}kt.prototype.info=function(){};function Wd(u,g){if(!u.g)return g;if(!g)return null;try{var N=JSON.parse(g);if(N){for(u=0;u<N.length;u++)if(Array.isArray(N[u])){var U=N[u];if(!(2>U.length)){var X=U[1];if(Array.isArray(X)&&!(1>X.length)){var ne=X[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var he=1;he<X.length;he++)X[he]=""}}}}return Me(N)}catch{return g}}var Nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ua;function Ct(){}k(Ct,ke),Ct.prototype.g=function(){return new XMLHttpRequest},Ct.prototype.i=function(){return{}},Ua=new Ct;function dt(u,g,N,U){this.j=u,this.i=g,this.l=N,this.R=U||1,this.U=new Z(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fa}function Fa(){this.i=null,this.g="",this.h=!1}var Va={},Do={};function Oo(u,g,N){u.L=1,u.v=Hd($i(g)),u.m=N,u.P=!0,za(u,null)}function za(u,g){u.F=Date.now(),Ms(u),u.A=$i(u.v);var N=u.A,U=u.R;Array.isArray(U)||(U=[String(U)]),z1(N.i,"t",U),u.C=0,N=u.j.J,u.h=new Fa,u.g=o_(u.j,N?g:null,!u.m),0<u.O&&(u.M=new Q(m(u.Y,u,u.g),u.O)),g=u.U,N=u.g,U=u.ca;var X="readystatechange";Array.isArray(X)||(X&&(te[0]=X.toString()),X=te);for(var ne=0;ne<X.length;ne++){var he=Vi(N,X[ne],U||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=u.H?L(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),St(),tn(u.i,u.u,u.A,u.l,u.R,u.m)}dt.prototype.ca=function(u){u=u.target;const g=this.M;g&&qi(u)==3?g.j():this.Y(u)},dt.prototype.Y=function(u){try{if(u==this.g)e:{const Hn=qi(this.g);var g=this.g.Ba();const Qa=this.g.Z();if(!(3>Hn)&&(Hn!=3||this.g&&(this.h.h||this.g.oa()||Y1(this.g)))){this.J||Hn!=4||g==7||(g==8||0>=Qa?St(3):St(2)),jo(this);var N=this.g.Z();this.X=N;t:if(Wa(this)){var U=Y1(this.g);u="";var X=U.length,ne=qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Wi(this);var he="";break t}this.h.i=new a.TextDecoder}for(g=0;g<X;g++)this.h.h=!0,u+=this.h.i.decode(U[g],{stream:!(ne&&g==X-1)});U.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=N==200,zd(this.i,this.u,this.A,this.l,this.R,Hn,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,Rn=this.g;if((Et=Rn.g?Rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Et)){var et=Et;break t}}et=null}if(N=et)xt(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bo(this,N);else{this.o=!1,this.s=3,Ye(12),Qr(this),Wi(this);break e}}if(this.P){N=!0;let Zr;for(;!this.J&&this.C<he.length;)if(Zr=Nc(this,he),Zr==Do){Hn==4&&(this.s=4,Ye(14),N=!1),xt(this.i,this.l,null,"[Incomplete Response]");break}else if(Zr==Va){this.s=4,Ye(15),xt(this.i,this.l,he,"[Invalid Chunk]"),N=!1;break}else xt(this.i,this.l,Zr,null),Bo(this,Zr);if(Wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Hn!=4||he.length!=0||this.h.h||(this.s=1,Ye(16),N=!1),this.o=this.o&&N,!N)xt(this.i,this.l,he,"[Invalid Chunked Response]"),Qr(this),Wi(this);else if(0<he.length&&!this.W){this.W=!0;var qn=this.j;qn.g==this&&qn.ba&&!qn.M&&(qn.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),km(qn),qn.M=!0,Ye(11))}}else xt(this.i,this.l,he,null),Bo(this,he);Hn==4&&Qr(this),this.o&&!this.J&&(Hn==4?n_(this.j,this):(this.o=!1,Ms(this)))}else RC(this.g),N==400&&0<he.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),Qr(this),Wi(this)}}}catch{}finally{}};function Wa(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Nc(u,g){var N=u.C,U=g.indexOf(`
`,N);return U==-1?Do:(N=Number(g.substring(N,U)),isNaN(N)?Va:(U+=1,U+N>g.length?Do:(g=g.slice(U,U+N),u.C=U+N,g)))}dt.prototype.cancel=function(){this.J=!0,Qr(this)};function Ms(u){u.S=Date.now()+u.I,$a(u,u.I)}function $a(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Cs(m(u.ba,u),g)}function jo(u){u.B&&(a.clearTimeout(u.B),u.B=null)}dt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(nn(this.i,this.A),this.L!=2&&(St(),Ye(17)),Qr(this),this.s=2,Wi(this)):$a(this,this.S-u)};function Wi(u){u.j.G==0||u.J||n_(u.j,u)}function Qr(u){jo(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,je(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Bo(u,g){try{var N=u.j;if(N.G!=0&&(N.g==u||Uo(N.h,u))){if(!u.K&&Uo(N.h,u)&&N.G==3){try{var U=N.Da.g.parse(g)}catch{U=null}if(Array.isArray(U)&&U.length==3){var X=U;if(X[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<u.F)Xd(N),Qd(N);else break e;Sm(N),Ye(18)}}else N.za=X[1],0<N.za-N.T&&37500>X[2]&&N.F&&N.v==0&&!N.C&&(N.C=Cs(m(N.Za,N),6e3));if(1>=Ka(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else zo(N,11)}else if((u.K||N.g==u)&&Xd(N),!I(g))for(X=N.Da.g.parse(g),g=0;g<X.length;g++){let et=X[g];if(N.T=et[0],et=et[1],N.G==2)if(et[0]=="c"){N.K=et[1],N.ia=et[2];const qn=et[3];qn!=null&&(N.la=qn,N.j.info("VER="+N.la));const Hn=et[4];Hn!=null&&(N.Aa=Hn,N.j.info("SVER="+N.Aa));const Qa=et[5];Qa!=null&&typeof Qa=="number"&&0<Qa&&(U=1.5*Qa,N.L=U,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;const Zr=u.g;if(Zr){const eh=Zr.g?Zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eh){var ne=U.h;ne.g||eh.indexOf("spdy")==-1&&eh.indexOf("quic")==-1&&eh.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Fo(ne,ne.h),ne.h=null))}if(U.D){const Tm=Zr.g?Zr.g.getResponseHeader("X-HTTP-Session-Id"):null;Tm&&(U.ya=Tm,Mt(U.I,U.D,Tm))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-u.F,N.j.info("Handshake RTT: "+N.R+"ms")),U=N;var he=u;if(U.qa=s_(U,U.J?U.ia:null,U.W),he.K){L1(U.h,he);var Et=he,Rn=U.L;Rn&&(Et.I=Rn),Et.B&&(jo(Et),Ms(Et)),U.g=he}else e_(U);0<N.i.length&&Zd(N)}else et[0]!="stop"&&et[0]!="close"||zo(N,7);else N.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?zo(N,7):Im(N):et[0]!="noop"&&N.l&&N.l.ta(et),N.v=0)}}St(4)}catch{}}var Cc=class{constructor(u,g){this.g=u,this.map=g}};function qa(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ha(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ka(u){return u.h?1:u.g?u.g.size:0}function Uo(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Fo(u,g){u.g?u.g.add(g):u.h=g}function L1(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}qa.prototype.cancel=function(){if(this.i=D1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function D1(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const N of u.g.values())g=g.concat(N.D);return g}return S(u.i)}function yC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],N=u.length,U=0;U<N;U++)g.push(u[U]);return g}g=[],N=0;for(U in u)g[N++]=u[U];return g}function wC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var N=0;N<u;N++)g.push(N);return g}g=[],N=0;for(const U in u)g[N++]=U;return g}}}function O1(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var N=wC(u),U=yC(u),X=U.length,ne=0;ne<X;ne++)g.call(void 0,U[ne],N&&N[ne],u)}var j1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vC(u,g){if(u){u=u.split("&");for(var N=0;N<u.length;N++){var U=u[N].indexOf("="),X=null;if(0<=U){var ne=u[N].substring(0,U);X=u[N].substring(U+1)}else ne=u[N];g(ne,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Vo(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vo){this.h=u.h,$d(this,u.j),this.o=u.o,this.g=u.g,qd(this,u.s),this.l=u.l;var g=u.i,N=new Pc;N.i=g.i,g.g&&(N.g=new Map(g.g),N.h=g.h),B1(this,N),this.m=u.m}else u&&(g=String(u).match(j1))?(this.h=!1,$d(this,g[1]||"",!0),this.o=Mc(g[2]||""),this.g=Mc(g[3]||"",!0),qd(this,g[4]),this.l=Mc(g[5]||"",!0),B1(this,g[6]||"",!0),this.m=Mc(g[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}Vo.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Rc(g,U1,!0),":");var N=this.g;return(N||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Rc(g,U1,!0),"@"),u.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&u.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&u.push("/"),u.push(Rc(N,N.charAt(0)=="/"?EC:xC,!0))),(N=this.i.toString())&&u.push("?",N),(N=this.m)&&u.push("#",Rc(N,IC)),u.join("")};function $i(u){return new Vo(u)}function $d(u,g,N){u.j=N?Mc(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function qd(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function B1(u,g,N){g instanceof Pc?(u.i=g,SC(u.i,u.h)):(N||(g=Rc(g,bC)),u.i=new Pc(g,u.h))}function Mt(u,g,N){u.i.set(g,N)}function Hd(u){return Mt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Mc(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Rc(u,g,N){return typeof u=="string"?(u=encodeURI(u).replace(g,_C),N&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function _C(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var U1=/[#\/\?@]/g,xC=/[#\?:]/g,EC=/[#\?]/g,bC=/[#\?@]/g,IC=/#/g;function Pc(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Rs(u){u.g||(u.g=new Map,u.h=0,u.i&&vC(u.i,function(g,N){u.add(decodeURIComponent(g.replace(/\+/g," ")),N)}))}t=Pc.prototype,t.add=function(u,g){Rs(this),this.i=null,u=Ga(this,u);var N=this.g.get(u);return N||this.g.set(u,N=[]),N.push(g),this.h+=1,this};function F1(u,g){Rs(u),g=Ga(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function V1(u,g){return Rs(u),g=Ga(u,g),u.g.has(g)}t.forEach=function(u,g){Rs(this),this.g.forEach(function(N,U){N.forEach(function(X){u.call(g,X,U,this)},this)},this)},t.na=function(){Rs(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),N=[];for(let U=0;U<g.length;U++){const X=u[U];for(let ne=0;ne<X.length;ne++)N.push(g[U])}return N},t.V=function(u){Rs(this);let g=[];if(typeof u=="string")V1(this,u)&&(g=g.concat(this.g.get(Ga(this,u))));else{u=Array.from(this.g.values());for(let N=0;N<u.length;N++)g=g.concat(u[N])}return g},t.set=function(u,g){return Rs(this),this.i=null,u=Ga(this,u),V1(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function z1(u,g,N){F1(u,g),0<N.length&&(u.i=null,u.g.set(Ga(u,g),S(N)),u.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var N=0;N<g.length;N++){var U=g[N];const ne=encodeURIComponent(String(U)),he=this.V(U);for(U=0;U<he.length;U++){var X=ne;he[U]!==""&&(X+="="+encodeURIComponent(String(he[U]))),u.push(X)}}return this.i=u.join("&")};function Ga(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function SC(u,g){g&&!u.j&&(Rs(u),u.i=null,u.g.forEach(function(N,U){var X=U.toLowerCase();U!=X&&(F1(this,U),z1(this,X,N))},u)),u.j=g}function kC(u,g){const N=new kt;if(a.Image){const U=new Image;U.onload=v(Ps,N,"TestLoadImage: loaded",!0,g,U),U.onerror=v(Ps,N,"TestLoadImage: error",!1,g,U),U.onabort=v(Ps,N,"TestLoadImage: abort",!1,g,U),U.ontimeout=v(Ps,N,"TestLoadImage: timeout",!1,g,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=u}else g(!1)}function TC(u,g){const N=new kt,U=new AbortController,X=setTimeout(()=>{U.abort(),Ps(N,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:U.signal}).then(ne=>{clearTimeout(X),ne.ok?Ps(N,"TestPingServer: ok",!0,g):Ps(N,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(X),Ps(N,"TestPingServer: error",!1,g)})}function Ps(u,g,N,U,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),U(N)}catch{}}function AC(){this.g=new _t}function NC(u,g,N){const U=N||"";try{O1(u,function(X,ne){let he=X;c(X)&&(he=Me(X)),g.push(U+ne+"="+encodeURIComponent(he))})}catch(X){throw g.push(U+"type="+encodeURIComponent("_badmap")),X}}function Kd(u){this.l=u.Ub||null,this.j=u.eb||!1}k(Kd,ke),Kd.prototype.g=function(){return new Gd(this.l,this.j)},Kd.prototype.i=function(u){return function(){return u}}({});function Gd(u,g){Fe.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Gd,Fe),t=Gd.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Dc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dc(this)),this.g&&(this.readyState=3,Dc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;W1(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function W1(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Lc(this):Dc(this),this.readyState==3&&W1(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Lc(this))},t.Qa=function(u){this.g&&(this.response=u,Lc(this))},t.ga=function(){this.g&&Lc(this)};function Lc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dc(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var N=g.next();!N.done;)N=N.value,u.push(N[0]+": "+N[1]),N=g.next();return u.join(`\r
`)};function Dc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $1(u){let g="";return G(u,function(N,U){g+=U,g+=":",g+=N,g+=`\r
`}),g}function bm(u,g,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=$1(N),typeof u=="string"?N!=null&&encodeURIComponent(String(N)):Mt(u,g,N))}function rn(u){Fe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(rn,Fe);var CC=/^https?$/i,MC=["POST","PUT"];t=rn.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ua.g(),this.v=this.o?Wt(this.o):Wt(Ua),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(ne){q1(this,ne);return}if(u=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var X in U)N.set(X,U[X]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ne of U.keys())N.set(ne,U.get(ne));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(N.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MC,g,void 0))||U||X||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,he]of N)this.g.setRequestHeader(ne,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{G1(this),this.u=!0,this.g.send(u),this.u=!1}catch(ne){q1(this,ne)}};function q1(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,H1(u),Yd(u)}function H1(u){u.A||(u.A=!0,P(u,"complete"),P(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,P(this,"complete"),P(this,"abort"),Yd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yd(this,!0)),rn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?K1(this):this.bb())},t.bb=function(){K1(this)};function K1(u){if(u.h&&typeof o<"u"&&(!u.v[1]||qi(u)!=4||u.Z()!=2)){if(u.u&&qi(u)==4)x(u.Ea,0,u);else if(P(u,"readystatechange"),qi(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var N;if(!(N=g)){var U;if(U=he===0){var X=String(u.D).match(j1)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),U=!CC.test(X?X.toLowerCase():"")}N=U}if(N)P(u,"complete"),P(u,"success");else{u.m=6;try{var ne=2<qi(u)?u.g.statusText:""}catch{ne=""}u.l=ne+" ["+u.Z()+"]",H1(u)}}finally{Yd(u)}}}}function Yd(u,g){if(u.g){G1(u);const N=u.g,U=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||P(u,"ready");try{N.onreadystatechange=U}catch{}}}function G1(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function qi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<qi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Re(g)}};function Y1(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function RC(u){const g={};u=(u.g&&2<=qi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<u.length;U++){if(I(u[U]))continue;var N=$(u[U]);const X=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ne=g[X]||[];g[X]=ne,ne.push(N)}O(g,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oc(u,g,N){return N&&N.internalChannelParams&&N.internalChannelParams[u]||g}function Q1(u){this.Aa=0,this.i=[],this.j=new kt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oc("baseRetryDelayMs",5e3,u),this.cb=Oc("retryDelaySeedMs",1e4,u),this.Wa=Oc("forwardChannelMaxRetries",2,u),this.wa=Oc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new qa(u&&u.concurrentRequestLimit),this.Da=new AC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Q1.prototype,t.la=8,t.G=1,t.connect=function(u,g,N,U){Ye(0),this.W=u,this.H=g||{},N&&U!==void 0&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.I=s_(this,null,this.W),Zd(this)};function Im(u){if(Z1(u),u.G==3){var g=u.U++,N=$i(u.I);if(Mt(N,"SID",u.K),Mt(N,"RID",g),Mt(N,"TYPE","terminate"),jc(u,N),g=new dt(u,u.j,g),g.L=2,g.v=Hd($i(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=g.v,N=!0),N||(g.g=o_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ms(g)}i_(u)}function Qd(u){u.g&&(km(u),u.g.cancel(),u.g=null)}function Z1(u){Qd(u),u.u&&(a.clearTimeout(u.u),u.u=null),Xd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Zd(u){if(!Ha(u.h)&&!u.s){u.s=!0;var g=u.Ga;R||q(),M||(R(),M=!0),F.add(g,u),u.B=0}}function PC(u,g){return Ka(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Cs(m(u.Ga,u,g),r_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const X=new dt(this,this.j,u);let ne=this.o;if(this.S&&(ne?(ne=L(ne),W(ne,this.S)):ne=this.S),this.m!==null||this.O||(X.H=ne,ne=null),this.P)e:{for(var g=0,N=0;N<this.i.length;N++){t:{var U=this.i[N];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(g+=U,4096<g){g=N;break e}if(g===4096||N===this.i.length-1){g=N+1;break e}}g=1e3}else g=1e3;g=J1(this,X,g),N=$i(this.I),Mt(N,"RID",u),Mt(N,"CVER",22),this.D&&Mt(N,"X-HTTP-Session-Id",this.D),jc(this,N),ne&&(this.O?g="headers="+encodeURIComponent(String($1(ne)))+"&"+g:this.m&&bm(N,this.m,ne)),Fo(this.h,X),this.Ua&&Mt(N,"TYPE","init"),this.P?(Mt(N,"$req",g),Mt(N,"SID","null"),X.T=!0,Oo(X,N,null)):Oo(X,N,g),this.G=2}}else this.G==3&&(u?X1(this,u):this.i.length==0||Ha(this.h)||X1(this))};function X1(u,g){var N;g?N=g.l:N=u.U++;const U=$i(u.I);Mt(U,"SID",u.K),Mt(U,"RID",N),Mt(U,"AID",u.T),jc(u,U),u.m&&u.o&&bm(U,u.m,u.o),N=new dt(u,u.j,N,u.B+1),u.m===null&&(N.H=u.o),g&&(u.i=g.D.concat(u.i)),g=J1(u,N,1e3),N.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Fo(u.h,N),Oo(N,U,g)}function jc(u,g){u.H&&G(u.H,function(N,U){Mt(g,U,N)}),u.l&&O1({},function(N,U){Mt(g,U,N)})}function J1(u,g,N){N=Math.min(u.i.length,N);var U=u.l?m(u.l.Na,u.l,u):null;e:{var X=u.i;let ne=-1;for(;;){const he=["count="+N];ne==-1?0<N?(ne=X[0].g,he.push("ofs="+ne)):ne=0:he.push("ofs="+ne);let Et=!0;for(let Rn=0;Rn<N;Rn++){let et=X[Rn].g;const qn=X[Rn].map;if(et-=ne,0>et)ne=Math.max(0,X[Rn].g-100),Et=!1;else try{NC(qn,he,"req"+et+"_")}catch{U&&U(qn)}}if(Et){U=he.join("&");break e}}}return u=u.i.splice(0,N),g.D=u,U}function e_(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;R||q(),M||(R(),M=!0),F.add(g,u),u.v=0}}function Sm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Cs(m(u.Fa,u),r_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,t_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Cs(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),Qd(this),t_(this))};function km(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function t_(u){u.g=new dt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=$i(u.qa);Mt(g,"RID","rpc"),Mt(g,"SID",u.K),Mt(g,"AID",u.T),Mt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Mt(g,"TO",u.ja),Mt(g,"TYPE","xmlhttp"),jc(u,g),u.m&&u.o&&bm(g,u.m,u.o),u.L&&(u.g.I=u.L);var N=u.g;u=u.ia,N.L=1,N.v=Hd($i(g)),N.m=null,N.P=!0,za(N,u)}t.Za=function(){this.C!=null&&(this.C=null,Qd(this),Sm(this),Ye(19))};function Xd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function n_(u,g){var N=null;if(u.g==g){Xd(u),km(u),u.g=null;var U=2}else if(Uo(u.h,g))N=g.D,L1(u.h,g),U=1;else return;if(u.G!=0){if(g.o)if(U==1){N=g.m?g.m.length:0,g=Date.now()-g.F;var X=u.B;U=Lo(),P(U,new Ht(U,N)),Zd(u)}else e_(u);else if(X=g.s,X==3||X==0&&0<g.X||!(U==1&&PC(u,g)||U==2&&Sm(u)))switch(N&&0<N.length&&(g=u.h,g.i=g.i.concat(N)),X){case 1:zo(u,5);break;case 4:zo(u,10);break;case 3:zo(u,6);break;default:zo(u,2)}}}function r_(u,g){let N=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(N*=2),N*g}function zo(u,g){if(u.j.info("Error code "+g),g==2){var N=m(u.fb,u),U=u.Xa;const X=!U;U=new Vo(U||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$d(U,"https"),Hd(U),X?kC(U.toString(),N):TC(U.toString(),N)}else Ye(2);u.G=0,u.l&&u.l.sa(g),i_(u),Z1(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function i_(u){if(u.G=0,u.ka=[],u.l){const g=D1(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function s_(u,g,N){var U=N instanceof Vo?$i(N):new Vo(N);if(U.g!="")g&&(U.g=g+"."+U.g),qd(U,U.s);else{var X=a.location;U=X.protocol,g=g?g+"."+X.hostname:X.hostname,X=+X.port;var ne=new Vo(null);U&&$d(ne,U),g&&(ne.g=g),X&&qd(ne,X),N&&(ne.l=N),U=ne}return N=u.D,g=u.ya,N&&g&&Mt(U,N,g),Mt(U,"VER",u.la),jc(u,U),U}function o_(u,g,N){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new rn(new Kd({eb:N})):new rn(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function a_(){}t=a_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Jd(){}Jd.prototype.g=function(u,g){return new br(u,g)};function br(u,g){Fe.call(this),this.g=new Q1(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!I(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Ya(this)}k(br,Fe),br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},br.prototype.close=function(){Im(this.g)},br.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var N={};N.__data__=u,u=N}else this.u&&(N={},N.__data__=Me(u),u=N);g.i.push(new Cc(g.Ya++,u)),g.G==3&&Zd(g)},br.prototype.N=function(){this.g.l=null,delete this.j,Im(this.g),delete this.g,br.aa.N.call(this)};function l_(u){Bt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const N in g){u=N;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}k(l_,Bt);function c_(){Ba.call(this),this.status=1}k(c_,Ba);function Ya(u){this.g=u}k(Ya,a_),Ya.prototype.ua=function(){P(this.g,"a")},Ya.prototype.ta=function(u){P(this.g,new l_(u))},Ya.prototype.sa=function(u){P(this.g,new c_)},Ya.prototype.ra=function(){P(this.g,"b")},Jd.prototype.createWebChannel=Jd.prototype.g,br.prototype.send=br.prototype.o,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,ST=function(){return new Jd},IT=function(){return Lo()},bT=wt,ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nt.NO_ERROR=0,Nt.TIMEOUT=8,Nt.HTTP_ERROR=6,Qh=Nt,Kt.COMPLETE="complete",ET=Kt,Tc.EventType=It,It.OPEN="a",It.CLOSE="b",It.ERROR="c",It.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,ou=Tc,rn.prototype.listenOnce=rn.prototype.L,rn.prototype.getLastError=rn.prototype.Ka,rn.prototype.getLastErrorCode=rn.prototype.Ba,rn.prototype.getStatus=rn.prototype.Z,rn.prototype.getResponseJson=rn.prototype.Oa,rn.prototype.getResponseText=rn.prototype.oa,rn.prototype.send=rn.prototype.ea,rn.prototype.setWithCredentials=rn.prototype.Ha,xT=rn}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});const sE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tr.UNAUTHENTICATED=new tr(null),tr.GOOGLE_CREDENTIALS=new tr("google-credentials-uid"),tr.FIRST_PARTY=new tr("first-party-uid"),tr.MOCK_USER=new tr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Yw("@firebase/firestore");function Hc(){return _a.logLevel}function we(t,...e){if(_a.logLevel<=Ze.DEBUG){const n=e.map(cv);_a.debug(`Firestore (${gc}): ${t}`,...n)}}function _s(t,...e){if(_a.logLevel<=Ze.ERROR){const n=e.map(cv);_a.error(`Firestore (${gc}): ${t}`,...n)}}function $l(t,...e){if(_a.logLevel<=Ze.WARN){const n=e.map(cv);_a.warn(`Firestore (${gc}): ${t}`,...n)}}function cv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${gc}) INTERNAL ASSERTION FAILED: `+t;throw _s(e),new Error(e)}function mt(t,e){t||Pe()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tr.UNAUTHENTICATED))}shutdown(){}}class h3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class f3{constructor(e){this.t=e,this.currentUser=tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){mt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ds,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ds)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string"),new kT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string"),new tr(e)}}class p3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=tr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class m3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new p3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){mt(this.o===void 0);const r=s=>{s.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,we("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(mt(typeof n.token=="string"),this.R=n.token,new g3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=w3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function ql(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return an.fromMillis(Date.now())}static fromDate(e){return an.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new an(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Le(e)}static min(){return new Le(new an(0,0))}static max(){return new Le(new an(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(),r===void 0?r=e.length-n:r>e.length-n&&Pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Dt extends Xu{construct(e,n,r){return new Dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Dt(n)}static emptyPath(){return new Dt([])}}const v3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends Xu{construct(e,n,r){return new Fn(e,n,r)}static isValidIdentifier(e){return v3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Fn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(n)}static emptyPath(){return new Fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(Dt.fromString(e))}static fromName(e){return new be(Dt.fromString(e).popFirst(5))}static empty(){return new be(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new Dt(e.slice()))}}function _3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new an(n+1,0):new an(n,r));return new Io(i,be.empty(),e)}function x3(t){return new Io(t.readTime,t.key,-1)}class Io{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Io(Le.min(),be.empty(),-1)}static max(){return new Io(Le.max(),be.empty(),-1)}}function E3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==b3)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,r)=>{n(e)})}static reject(e){return new oe((n,r)=>{r(e)})}static waitFor(e){return new oe((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next(i=>i?oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new oe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new oe((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function S3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}uv.oe=-1;function Op(t){return t==null}function Wf(t){return t===0&&1/t==-1/0}function k3(t){return typeof t=="number"&&Number.isInteger(t)&&!Wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||jn.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _h(this.root,e,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _h(this.root,e,this.comparator,!0)}}class _h{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??jn.RED,this.left=i??jn.EMPTY,this.right=s??jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new jn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aE(this.data.getIterator())}getIteratorFrom(e){return new aE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zn(this.comparator);return n.data=e,n}}class aE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new oi([])}unionWith(e){let n=new zn(Fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new NT("Invalid base64 string: "+s):s}}(e);return new $n(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new $n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const T3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(t){if(mt(!!t),typeof t=="string"){let e=0;const n=T3.exec(t);if(mt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cn(t.seconds),nanos:cn(t.nanos)}}function cn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xa(t){return typeof t=="string"?$n.fromBase64String(t):$n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hv(t){const e=t.mapValue.fields.__previous_value__;return dv(e)?hv(e):e}function Ju(t){const e=So(t.mapValue.fields.__local_write_time__.timestampValue);return new an(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ed{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ed("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ed&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dv(t)?4:C3(t)?9007199254740991:N3(t)?10:11:Pe()}function Ni(t,e){if(t===e)return!0;const n=Ea(t);if(n!==Ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ju(t).isEqual(Ju(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=So(i.timestampValue),a=So(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return xa(i.bytesValue).isEqual(xa(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return cn(i.geoPointValue.latitude)===cn(s.geoPointValue.latitude)&&cn(i.geoPointValue.longitude)===cn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return cn(i.integerValue)===cn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=cn(i.doubleValue),a=cn(s.doubleValue);return o===a?Wf(o)===Wf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ql(t.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(oE(o)!==oE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ni(o[l],a[l])))return!1;return!0}(t,e);default:return Pe()}}function td(t,e){return(t.values||[]).find(n=>Ni(n,e))!==void 0}function Hl(t,e){if(t===e)return 0;const n=Ea(t),r=Ea(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=cn(s.integerValue||s.doubleValue),l=cn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return lE(t.timestampValue,e.timestampValue);case 4:return lE(Ju(t),Ju(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=xa(s),l=xa(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=rt(a[c],l[c]);if(d!==0)return d}return rt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=rt(cn(s.latitude),cn(o.latitude));return a!==0?a:rt(cn(s.longitude),cn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},m=o.fields||{},v=(a=h.value)===null||a===void 0?void 0:a.arrayValue,k=(l=m.value)===null||l===void 0?void 0:l.arrayValue,S=rt(((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0,((d=k==null?void 0:k.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:cE(v,k)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===xh.mapValue&&o===xh.mapValue)return 0;if(s===xh.mapValue)return 1;if(o===xh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=rt(l[h],d[h]);if(m!==0)return m;const v=Hl(a[l[h]],c[d[h]]);if(v!==0)return v}return rt(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Pe()}}function lE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=So(t),r=So(e),i=rt(n.seconds,r.seconds);return i!==0?i:rt(n.nanos,r.nanos)}function cE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Hl(n[i],r[i]);if(s)return s}return rt(n.length,r.length)}function Kl(t){return ty(t)}function ty(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=So(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ty(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ty(n.fields[o])}`;return i+"}"}(t.mapValue):Pe()}function uE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ny(t){return!!t&&"integerValue"in t}function fv(t){return!!t&&"arrayValue"in t}function dE(t){return!!t&&"nullValue"in t}function hE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function N3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return yc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function C3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(n)}setAll(e){let n=Fn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Eu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){yc(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new zr(Eu(this.value))}}function CT(t){const e=[];return yc(t.fields,(n,r)=>{const i=new Fn([n]);if(Zh(r)){const s=CT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rr(e,0,Le.min(),Le.min(),Le.min(),zr.empty(),0)}static newFoundDocument(e,n,r,i){return new rr(e,1,n,Le.min(),r,i,0)}static newNoDocument(e,n){return new rr(e,2,n,Le.min(),Le.min(),zr.empty(),0)}static newUnknownDocument(e,n){return new rr(e,3,n,Le.min(),Le.min(),zr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){this.position=e,this.inclusive=n}}function fE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=be.comparator(be.fromName(o.referenceValue),n.key):r=Hl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ni(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n="asc"){this.field=e,this.dir=n}}function M3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MT=class{};class wn extends MT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new P3(e,n,r):n==="array-contains"?new O3(e,r):n==="in"?new j3(e,r):n==="not-in"?new B3(e,r):n==="array-contains-any"?new U3(e,r):new wn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new L3(e,r):new D3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Hl(n,this.value)):n!==null&&Ea(this.value)===Ea(n)&&this.matchesComparison(Hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends MT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new mi(e,n)}matches(e){return RT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function RT(t){return t.op==="and"}function PT(t){return R3(t)&&RT(t)}function R3(t){for(const e of t.filters)if(e instanceof mi)return!1;return!0}function ry(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+Kl(t.value);if(PT(t))return t.filters.map(e=>ry(e)).join(",");{const e=t.filters.map(n=>ry(n)).join(",");return`${t.op}(${e})`}}function LT(t,e){return t instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.field.isEqual(i.field)&&Ni(r.value,i.value)}(t,e):t instanceof mi?function(r,i){return i instanceof mi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&LT(o,i.filters[a]),!0):!1}(t,e):void Pe()}function DT(t){return t instanceof wn?function(n){return`${n.field.canonicalString()} ${n.op} ${Kl(n.value)}`}(t):t instanceof mi?function(n){return n.op.toString()+" {"+n.getFilters().map(DT).join(" ,")+"}"}(t):"Filter"}class P3 extends wn{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class L3 extends wn{constructor(e,n){super(e,"in",n),this.keys=OT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class D3 extends wn{constructor(e,n){super(e,"not-in",n),this.keys=OT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class O3 extends wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fv(n)&&td(n.arrayValue,this.value)}}class j3 extends wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&td(this.value.arrayValue,n)}}class B3 extends wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!td(this.value.arrayValue,n)}}class U3 extends wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>td(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function mE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new F3(t,e,n,r,i,s,o)}function pv(t){const e=De(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ry(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Op(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Kl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Kl(r)).join(",")),e.ue=n}return e.ue}function mv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pE(t.startAt,e.startAt)&&pE(t.endAt,e.endAt)}function iy(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function V3(t,e,n,r,i,s,o,a){return new wc(t,e,n,r,i,s,o,a)}function gv(t){return new wc(t)}function gE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jT(t){return t.collectionGroup!==null}function bu(t){const e=De(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zn(Fn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new nd(s,r))}),n.has(Fn.keyField().canonicalString())||e.ce.push(new nd(Fn.keyField(),r))}return e.ce}function Ti(t){const e=De(t);return e.le||(e.le=z3(e,bu(t))),e.le}function z3(t,e){if(t.limitType==="F")return mE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new nd(i.field,s)});const n=t.endAt?new $f(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $f(t.startAt.position,t.startAt.inclusive):null;return mE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sy(t,e){const n=t.filters.concat([e]);return new wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qf(t,e,n){return new wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jp(t,e){return mv(Ti(t),Ti(e))&&t.limitType===e.limitType}function BT(t){return`${pv(Ti(t))}|lt:${t.limitType}`}function tl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>DT(i)).join(", ")}]`),Op(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Kl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Kl(i)).join(",")),`Target(${r})`}(Ti(t))}; limitType=${t.limitType})`}function Bp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of bu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=fE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,bu(r),i)||r.endAt&&!function(o,a,l){const c=fE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,bu(r),i))}(t,e)}function W3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UT(t){return(e,n)=>{let r=!1;for(const i of bu(t)){const s=$3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $3(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Hl(l,c):Pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yc(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return AT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=new Jt(be.comparator);function xs(){return q3}const FT=new Jt(be.comparator);function au(...t){let e=FT;for(const n of t)e=e.insert(n.key,n);return e}function VT(t){let e=FT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ta(){return Iu()}function zT(){return Iu()}function Iu(){return new vc(t=>t.toString(),(t,e)=>t.isEqual(e))}const H3=new Jt(be.comparator),K3=new zn(be.comparator);function Qe(...t){let e=K3;for(const n of t)e=e.add(n);return e}const G3=new zn(rt);function Y3(){return G3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wf(e)?"-0":e}}function WT(t){return{integerValue:""+t}}function Q3(t,e){return k3(e)?WT(e):yv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this._=void 0}}function Z3(t,e,n){return t instanceof rd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dv(s)&&(s=hv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof id?qT(t,e):t instanceof sd?HT(t,e):function(i,s){const o=$T(i,s),a=yE(o)+yE(i.Pe);return ny(o)&&ny(i.Pe)?WT(a):yv(i.serializer,a)}(t,e)}function X3(t,e,n){return t instanceof id?qT(t,e):t instanceof sd?HT(t,e):n}function $T(t,e){return t instanceof Hf?function(r){return ny(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class rd extends Up{}class id extends Up{constructor(e){super(),this.elements=e}}function qT(t,e){const n=KT(e);for(const r of t.elements)n.some(i=>Ni(i,r))||n.push(r);return{arrayValue:{values:n}}}class sd extends Up{constructor(e){super(),this.elements=e}}function HT(t,e){let n=KT(e);for(const r of t.elements)n=n.filter(i=>!Ni(i,r));return{arrayValue:{values:n}}}class Hf extends Up{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function yE(t){return cn(t.integerValue||t.doubleValue)}function KT(t){return fv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n){this.field=e,this.transform=n}}function ej(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof id&&i instanceof id||r instanceof sd&&i instanceof sd?ql(r.elements,i.elements,Ni):r instanceof Hf&&i instanceof Hf?Ni(r.Pe,i.Pe):r instanceof rd&&i instanceof rd}(t.transform,e.transform)}class tj{constructor(e,n){this.version=e,this.transformResults=n}}class hs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fp{}function GT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new QT(t.key,hs.none()):new Md(t.key,t.data,hs.none());{const n=t.data,r=zr.empty();let i=new zn(Fn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ca(t.key,r,new oi(i.toArray()),hs.none())}}function nj(t,e,n){t instanceof Md?function(i,s,o){const a=i.value.clone(),l=vE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ca?function(i,s,o){if(!Xh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=vE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(YT(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Su(t,e,n,r){return t instanceof Md?function(s,o,a,l){if(!Xh(s.precondition,o))return a;const c=s.value.clone(),d=_E(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ca?function(s,o,a,l){if(!Xh(s.precondition,o))return a;const c=_E(s.fieldTransforms,l,o),d=o.data;return d.setAll(YT(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Xh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function rj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=$T(r.transform,i||null);s!=null&&(n===null&&(n=zr.empty()),n.set(r.field,s))}return n||null}function wE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ql(r,i,(s,o)=>ej(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Md extends Fp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ca extends Fp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function YT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vE(t,e,n){const r=new Map;mt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,X3(o,a,n[i]))}return r}function _E(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Z3(s,o,e))}return r}class QT extends Fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ij extends Fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&nj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Su(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=GT(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qe())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,(n,r)=>wE(n,r))&&ql(this.baseMutations,e.baseMutations,(n,r)=>wE(n,r))}}class wv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){mt(e.mutations.length===r.length);let i=function(){return H3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new wv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,Xe;function lj(t){switch(t){default:return Pe();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function ZT(t){if(t===void 0)return _s("GRPC error has no .code"),re.UNKNOWN;switch(t){case fn.OK:return re.OK;case fn.CANCELLED:return re.CANCELLED;case fn.UNKNOWN:return re.UNKNOWN;case fn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case fn.INTERNAL:return re.INTERNAL;case fn.UNAVAILABLE:return re.UNAVAILABLE;case fn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case fn.NOT_FOUND:return re.NOT_FOUND;case fn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case fn.ABORTED:return re.ABORTED;case fn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case fn.DATA_LOSS:return re.DATA_LOSS;default:return Pe()}}(Xe=fn||(fn={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new ca([4294967295,4294967295],0);function xE(t){const e=cj().encode(t),n=new _T;return n.update(e),new Uint8Array(n.digest())}function EE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ca([n,r],0),new ca([i,s],0)]}class vv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lu(`Invalid padding: ${n}`);if(r<0)throw new lu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ca.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ca.fromNumber(r)));return i.compare(uj)===1&&(i=new ca([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=xE(e),[r,i]=EE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new vv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=xE(e),[r,i]=EE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vp(Le.min(),i,new Jt(rt),xs(),Qe())}}class Rd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rd(r,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class XT{constructor(e,n){this.targetId=e,this.me=n}}class JT{constructor(e,n,r=$n.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class bE{constructor(){this.fe=0,this.ge=SE(),this.pe=$n.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qe(),n=Qe(),r=Qe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pe()}}),new Rd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=SE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dj{constructor(e){this.Le=e,this.Be=new Map,this.ke=xs(),this.qe=IE(),this.Qe=new Jt(rt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(iy(s))if(r===0){const o=new be(s.path);this.Ue(n,o,rr.newNoDocument(o,Le.min()))}else mt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=xa(r).toUint8Array()}catch(l){if(l instanceof NT)return $l("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new vv(o,i,s)}catch(l){return $l(l instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&iy(a.target)){const l=new be(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,rr.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Qe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Vp(e,n,this.Qe,this.ke,r);return this.ke=xs(),this.qe=IE(),this.Qe=new Jt(rt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new bE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new zn(rt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function IE(){return new Jt(be.comparator)}function SE(){return new Jt(be.comparator)}const hj={asc:"ASCENDING",desc:"DESCENDING"},fj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pj={and:"AND",or:"OR"};class mj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oy(t,e){return t.useProto3Json||Op(e)?e:{value:e}}function Kf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gj(t,e){return Kf(t,e.toTimestamp())}function Ai(t){return mt(!!t),Le.fromTimestamp(function(n){const r=So(n);return new an(r.seconds,r.nanos)}(t))}function _v(t,e){return ay(t,e).canonicalString()}function ay(t,e){const n=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function t2(t){const e=Dt.fromString(t);return mt(o2(e)),e}function ly(t,e){return _v(t.databaseId,e.path)}function lg(t,e){const n=t2(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(r2(n))}function n2(t,e){return _v(t.databaseId,e)}function yj(t){const e=t2(t);return e.length===4?Dt.emptyPath():r2(e)}function cy(t){return new Dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function r2(t){return mt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kE(t,e,n){return{name:ly(t,e),fields:n.value.mapValue.fields}}function wj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(mt(d===void 0||typeof d=="string"),$n.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),$n.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?re.UNKNOWN:ZT(c.code);return new ge(d,c.message||"")}(o);n=new JT(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lg(t,r.document.name),s=Ai(r.document.updateTime),o=r.document.createTime?Ai(r.document.createTime):Le.min(),a=new zr({mapValue:{fields:r.document.fields}}),l=rr.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Jh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lg(t,r.document),s=r.readTime?Ai(r.readTime):Le.min(),o=rr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Jh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lg(t,r.document),s=r.removedTargetIds||[];n=new Jh([],s,i,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new aj(i,s),a=r.targetId;n=new XT(a,o)}}return n}function vj(t,e){let n;if(e instanceof Md)n={update:kE(t,e.key,e.value)};else if(e instanceof QT)n={delete:ly(t,e.key)};else if(e instanceof Ca)n={update:kE(t,e.key,e.data),updateMask:Aj(e.fieldMask)};else{if(!(e instanceof ij))return Pe();n={verify:ly(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof rd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof id)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:gj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe()}(t,e.precondition)),n}function _j(t,e){return t&&t.length>0?(mt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ai(i.updateTime):Ai(s);return o.isEqual(Le.min())&&(o=Ai(s)),new tj(o,i.transformResults||[])}(n,e))):[]}function xj(t,e){return{documents:[n2(t,e.path)]}}function Ej(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=n2(t,i);const s=function(c){if(c.length!==0)return s2(mi.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:nl(m.field),direction:Sj(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=oy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function bj(t){let e=yj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){mt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=i2(h);return m instanceof mi&&PT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(k){return new nd(rl(k.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Op(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,v=h.values||[];return new $f(v,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,v=h.values||[];return new $f(v,m)}(n.endAt)),V3(e,i,o,s,a,"F",l,c)}function Ij(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function i2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=rl(n.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rl(n.unaryFilter.field);return wn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rl(n.unaryFilter.field);return wn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rl(n.unaryFilter.field);return wn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(t):t.fieldFilter!==void 0?function(n){return wn.create(rl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mi.create(n.compositeFilter.filters.map(r=>i2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe()}}(n.compositeFilter.op))}(t):Pe()}function Sj(t){return hj[t]}function kj(t){return fj[t]}function Tj(t){return pj[t]}function nl(t){return{fieldPath:t.canonicalString()}}function rl(t){return Fn.fromServerFormat(t.fieldPath)}function s2(t){return t instanceof wn?function(n){if(n.op==="=="){if(hE(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NAN"}};if(dE(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hE(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NOT_NAN"}};if(dE(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(n.field),op:kj(n.op),value:n.value}}}(t):t instanceof mi?function(n){const r=n.getFilters().map(i=>s2(i));return r.length===1?r[0]:{compositeFilter:{op:Tj(n.op),filters:r}}}(t):Pe()}function Aj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function o2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n,r,i,s=Le.min(),o=Le.min(),a=$n.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new to(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.ct=e}}function Cj(t){const e=bj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.un=new Rj}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Io.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Io.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class Rj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new zn(Dt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gl(0)}static kn(){return new Gl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.changes=new vc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Su(r.mutation,i,oi.empty(),an.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Qe()){const i=ta();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=au();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ta();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Qe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=xs();const o=Iu(),a=function(){return Iu()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Ca)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Su(d.mutation,c,d.mutation.getFieldMask(),an.now())):o.set(c.key,oi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new Lj(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Iu();let i=new Jt((o,a)=>o-a),s=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||oi.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||Qe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=zT();d.forEach(m=>{if(!s.has(m)){const v=GT(n.get(m),r.get(m));v!==null&&h.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):oe.resolve(ta());let a=-1,l=s;return o.next(c=>oe.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?oe.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Qe())).next(d=>({batchId:a,changes:VT(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let i=au();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=au();return this.indexManager.getCollectionParents(e,s).next(a=>oe.forEach(a,l=>{const c=function(h,m){return new wc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,rr.newInvalidDocument(d)))});let a=au();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Su(d.mutation,c,oi.empty(),an.now()),Bp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ai(i.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Cj(i.bundledQuery),readTime:Ai(i.readTime)}}(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.overlays=new Jt(be.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ta();return oe.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const i=ta(),s=n.length+1,o=new be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Jt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=ta(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ta(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return oe.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oj(n,r));let s=this.Ir.get(n);s===void 0&&(s=Qe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.Tr=new zn(Sn.Er),this.dr=new zn(Sn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Sn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Sn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new be(new Dt([])),r=new Sn(n,e),i=new Sn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new be(new Dt([])),r=new Sn(n,e),i=new Sn(n,e+1);let s=Qe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Sn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Sn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return be.comparator(e.key,n.key)||rt(e.wr,n.wr)}static Ar(e,n){return rt(e.wr,n.wr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new zn(Sn.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Sn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Sn(n,0),i=new Sn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zn(rt);return n.forEach(i=>{const s=new Sn(i,0),o=new Sn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const o=new Sn(new be(s),0);let a=new zn(rt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),oe.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){mt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,i=>{const s=new Sn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Sn(n,0),i=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.Mr=e,this.docs=function(){return new Jt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():rr.newInvalidDocument(n))}getEntries(e,n){let r=xs();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rr.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=xs();const o=n.path,a=new be(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||E3(x3(d),r)<=0||(i.has(d.key)||Bp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Pe()}Or(e,n){return oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Vj(this)}getSize(e){return oe.resolve(this.size)}}class Vj extends Pj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.persistence=e,this.Nr=new vc(n=>pv(n),mv),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xv,this.targetCount=0,this.kr=Gl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Gl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new uv(0),this.Kr=!1,this.Kr=!0,this.$r=new Bj,this.referenceDelegate=e(this),this.Ur=new zj(this),this.indexManager=new Mj,this.remoteDocumentCache=function(i){return new Fj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Nj(n),this.Gr=new Oj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Uj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const i=new $j(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return oe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $j extends I3{constructor(e){super(),this.currentSequenceNumber=e}}class Ev{constructor(e){this.persistence=e,this.Jr=new xv,this.Yr=null}static Zr(e){return new Ev(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,r=>{const i=be.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Qe(),i=Qe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return CP()?8:S3(or())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new qj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Hc()<=Ze.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",tl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(Hc()<=Ze.DEBUG&&we("QueryEngine","Query:",tl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Hc()<=Ze.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",tl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(n))):oe.resolve())}Yi(e,n){if(gE(n))return oe.resolve(null);let r=Ti(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=qf(n,null,"F"),r=Ti(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Qe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,qf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return gE(n)||i.isEqual(Le.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?oe.resolve(null):(Hc()<=Ze.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tl(n)),this.rs(e,o,n,_3(i,-1)).next(a=>a))})}ts(e,n){let r=new zn(UT(e));return n.forEach((i,s)=>{Bp(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Hc()<=Ze.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",tl(n)),this.Ji.getDocumentsMatchingQuery(e,n,Io.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Jt(rt),this._s=new vc(s=>pv(s),mv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Gj(t,e,n,r){return new Kj(t,e,n,r)}async function a2(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Qe();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Yj(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let v=oe.resolve();return m.forEach(k=>{v=v.next(()=>d.getEntry(l,k)).next(S=>{const _=c.docVersions.get(k);mt(_!==null),S.version.compareTo(_)<0&&(h.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),d.addEntry(S)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Qe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function l2(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Qj(t,e){const n=De(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken($n.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(h,v),function(S,_,T){return S.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,v,d)&&a.push(n.Ur.updateTargetData(s,v))});let l=xs(),c=Qe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Zj(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Le.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return oe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function Zj(t,e,n){let r=Qe(),i=Qe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=xs();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):we("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Xj(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jj(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new to(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function uy(t,e,n){const r=De(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Cd(o))throw o;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function TE(t,e,n){const r=De(t);let i=Le.min(),s=Qe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=De(l),m=h._s.get(d);return m!==void 0?oe.resolve(h.os.get(m)):h.Ur.getTargetData(c,d)}(r,o,Ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Le.min(),n?s:Qe())).next(a=>(e6(r,W3(e),a),{documents:a,Ts:s})))}function e6(t,e,n){let r=t.us.get(e)||Le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class AE{constructor(){this.activeTargetIds=Y3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t6{constructor(){this.so=new AE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new AE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh=null;function cg(){return Eh===null?Eh=function(){return 268435456+Math.round(2147483648*Math.random())}():Eh++,"0x"+Eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="WebChannelConnection";class s6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=cg(),l=this.xo(n,r.toUriEncodedString());we("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(d=>(we("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw $l("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=r6[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=cg();return new Promise((o,a)=>{const l=new xT;l.setWithCredentials(!0),l.listenOnce(ET.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qh.NO_ERROR:const d=l.getResponseJson();we(Yn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Qh.TIMEOUT:we(Yn,`RPC '${e}' ${s} timed out`),a(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case Qh.HTTP_ERROR:const h=l.getStatus();if(we(Yn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const k=function(_){const T=_.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(T)>=0?T:re.UNKNOWN}(v.status);a(new ge(k,v.message))}else a(new ge(re.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{we(Yn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);we(Yn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=cg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ST(),a=IT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");we(Yn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,v=!1;const k=new i6({Io:_=>{v?we(Yn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(m||(we(Yn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),we(Yn,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},To:()=>h.close()}),S=(_,T,I)=>{_.listen(T,E=>{try{I(E)}catch(j){setTimeout(()=>{throw j},0)}})};return S(h,ou.EventType.OPEN,()=>{v||(we(Yn,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),S(h,ou.EventType.CLOSE,()=>{v||(v=!0,we(Yn,`RPC '${e}' stream ${i} transport closed`),k.So())}),S(h,ou.EventType.ERROR,_=>{v||(v=!0,$l(Yn,`RPC '${e}' stream ${i} transport errored:`,_),k.So(new ge(re.UNAVAILABLE,"The operation could not be completed")))}),S(h,ou.EventType.MESSAGE,_=>{var T;if(!v){const I=_.data[0];mt(!!I);const E=I,j=E.error||((T=E[0])===null||T===void 0?void 0:T.error);if(j){we(Yn,`RPC '${e}' stream ${i} received error:`,j);const K=j.status;let G=function(B){const W=fn[B];if(W!==void 0)return ZT(W)}(K),O=j.message;G===void 0&&(G=re.INTERNAL,O="Unknown error status: "+K+" with message "+j.message),v=!0,k.So(new ge(G,O)),h.close()}else we(Yn,`RPC '${e}' stream ${i} received:`,I),k.bo(I)}}),S(a,bT.STAT_EVENT,_=>{_.stat===ey.PROXY?we(Yn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===ey.NOPROXY&&we(Yn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t){return new mj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new c2(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(_s(n.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ge(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o6 extends u2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=wj(this.serializer,e),r=function(s){if(!("targetChange"in s))return Le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?Ai(o.readTime):Le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=cy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=iy(l)?{documents:xj(s,l)}:{query:Ej(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=e2(s,o.resumeToken);const c=oy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=Kf(s,o.snapshotVersion.toTimestamp());const c=oy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Ij(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=cy(this.serializer),n.removeTarget=e,this.a_(n)}}class a6 extends u2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return mt(!!e.streamToken),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=_j(e.writeResults,e.commitTime),r=Ai(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=cy(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ay(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(re.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ay(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(re.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class c6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_s(n),this.D_=!1):we("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ma(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=De(l);c.L_.add(4),await Pd(c),c.q_.set("Unknown"),c.L_.delete(4),await Wp(c)}(this))})}),this.q_=new c6(r,i)}}async function Wp(t){if(Ma(t))for(const e of t.B_)await e(!0)}async function Pd(t){for(const e of t.B_)await e(!1)}function d2(t,e){const n=De(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Tv(n)?kv(n):_c(n).r_()&&Sv(n,e))}function Iv(t,e){const n=De(t),r=_c(n);n.N_.delete(e),r.r_()&&h2(n,e),n.N_.size===0&&(r.r_()?r.o_():Ma(n)&&n.q_.set("Unknown"))}function Sv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_c(t).A_(e)}function h2(t,e){t.Q_.xe(e),_c(t).R_(e)}function kv(t){t.Q_=new dj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_c(t).start(),t.q_.v_()}function Tv(t){return Ma(t)&&!_c(t).n_()&&t.N_.size>0}function Ma(t){return De(t).L_.size===0}function f2(t){t.Q_=void 0}async function d6(t){t.q_.set("Online")}async function h6(t){t.N_.forEach((e,n)=>{Sv(t,e)})}async function f6(t,e){f2(t),Tv(t)?(t.q_.M_(e),kv(t)):t.q_.set("Unknown")}async function p6(t,e,n){if(t.q_.set("Online"),e instanceof JT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gf(t,r)}else if(e instanceof Jh?t.Q_.Ke(e):e instanceof XT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Le.min()))try{const r=await l2(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken($n.EMPTY_BYTE_STRING,d.snapshotVersion)),h2(s,l);const h=new to(d.target,l,c,d.sequenceNumber);Sv(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){we("RemoteStore","Failed to raise snapshot:",r),await Gf(t,r)}}async function Gf(t,e,n){if(!Cd(e))throw e;t.L_.add(1),await Pd(t),t.q_.set("Offline"),n||(n=()=>l2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Wp(t)})}function p2(t,e){return e().catch(n=>Gf(t,n,e))}async function $p(t){const e=De(t),n=ko(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;m6(e);)try{const i=await Xj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,g6(e,i)}catch(i){await Gf(e,i)}m2(e)&&g2(e)}function m6(t){return Ma(t)&&t.O_.length<10}function g6(t,e){t.O_.push(e);const n=ko(t);n.r_()&&n.V_&&n.m_(e.mutations)}function m2(t){return Ma(t)&&!ko(t).n_()&&t.O_.length>0}function g2(t){ko(t).start()}async function y6(t){ko(t).p_()}async function w6(t){const e=ko(t);for(const n of t.O_)e.m_(n.mutations)}async function v6(t,e,n){const r=t.O_.shift(),i=wv.from(r,e,n);await p2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $p(t)}async function _6(t,e){e&&ko(t).V_&&await async function(r,i){if(function(o){return lj(o)&&o!==re.ABORTED}(i.code)){const s=r.O_.shift();ko(r).s_(),await p2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $p(r)}}(t,e),m2(t)&&g2(t)}async function CE(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const r=Ma(n);n.L_.add(3),await Pd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Wp(n)}async function x6(t,e){const n=De(t);e?(n.L_.delete(2),await Wp(n)):e||(n.L_.add(2),await Pd(n),n.q_.set("Unknown"))}function _c(t){return t.K_||(t.K_=function(n,r,i){const s=De(n);return s.w_(),new o6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:d6.bind(null,t),Ro:h6.bind(null,t),mo:f6.bind(null,t),d_:p6.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Tv(t)?kv(t):t.q_.set("Unknown")):(await t.K_.stop(),f2(t))})),t.K_}function ko(t){return t.U_||(t.U_=function(n,r,i){const s=De(n);return s.w_(),new a6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:y6.bind(null,t),mo:_6.bind(null,t),f_:w6.bind(null,t),g_:v6.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await $p(t)):(await t.U_.stop(),t.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Av(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nv(t,e){if(_s("AsyncQueue",`${e}: ${t}`),Cd(t))return new ge(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=au(),this.sortedSet=new Jt(this.comparator)}static emptySet(e){return new Rl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.W_=new Jt(be.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yl(e,n,Rl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class b6{constructor(){this.queries=RE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=De(n),s=i.queries;i.queries=RE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function RE(){return new vc(t=>BT(t),jp)}async function y2(t,e){const n=De(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new E6,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Nv(o,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Cv(n)}async function w2(t,e){const n=De(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function I6(t,e){const n=De(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Cv(n)}function S6(t,e,n){const r=De(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Cv(t){t.Y_.forEach(e=>{e.next()})}var dy,PE;(PE=dy||(dy={})).ea="default",PE.Cache="cache";class v2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.key=e}}class x2{constructor(e){this.key=e}}class k6{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qe(),this.mutatedKeys=Qe(),this.Aa=UT(e),this.Ra=new Rl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ME,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),v=Bp(this.query,h)?h:null,k=!!m&&this.mutatedKeys.has(m.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let _=!1;m&&v?m.data.isEqual(v.data)?k!==S&&(r.track({type:3,doc:v}),_=!0):this.ga(m,v)||(r.track({type:2,doc:v}),_=!0,(l&&this.Aa(v,l)>0||c&&this.Aa(v,c)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),_=!0):m&&!v&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(v?(o=o.add(v),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(v,k){const S=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return S(v)-S(k)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Yl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ME,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new x2(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _2(r))}),n}ba(e){this.Ta=e.Ts,this.da=Qe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Yl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class T6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class A6{constructor(e){this.key=e,this.va=!1}}class N6{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vc(a=>BT(a),jp),this.Ma=new Map,this.xa=new Set,this.Oa=new Jt(be.comparator),this.Na=new Map,this.La=new xv,this.Ba={},this.ka=new Map,this.qa=Gl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function C6(t,e,n=!0){const r=T2(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await E2(r,e,n,!0),i}async function M6(t,e){const n=T2(t);await E2(n,e,!0,!1)}async function E2(t,e,n,r){const i=await Jj(t.localStore,Ti(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await R6(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&d2(t.remoteStore,i),a}async function R6(t,e,n,r,i){t.Ka=(h,m,v)=>async function(S,_,T,I){let E=_.view.ma(T);E.ns&&(E=await TE(S.localStore,_.query,!1).then(({documents:O})=>_.view.ma(O,E)));const j=I&&I.targetChanges.get(_.targetId),K=I&&I.targetMismatches.get(_.targetId)!=null,G=_.view.applyChanges(E,S.isPrimaryClient,j,K);return DE(S,_.targetId,G.wa),G.snapshot}(t,h,m,v);const s=await TE(t.localStore,e,!0),o=new k6(e,s.Ts),a=o.ma(s.documents),l=Rd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);DE(t,n,c.wa);const d=new T6(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function P6(t,e,n){const r=De(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!jp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Iv(r.remoteStore,i.targetId),hy(r,i.targetId)}).catch(Nd)):(hy(r,i.targetId),await uy(r.localStore,i.targetId,!0))}async function L6(t,e){const n=De(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Iv(n.remoteStore,r.targetId))}async function D6(t,e,n){const r=z6(t);try{const i=await function(o,a){const l=De(o),c=an.now(),d=a.reduce((v,k)=>v.add(k.key),Qe());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let k=xs(),S=Qe();return l.cs.getEntries(v,d).next(_=>{k=_,k.forEach((T,I)=>{I.isValidDocument()||(S=S.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,k)).next(_=>{h=_;const T=[];for(const I of a){const E=rj(I,h.get(I.key).overlayedDocument);E!=null&&T.push(new Ca(I.key,E,CT(E.value.mapValue),hs.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,T,a)}).next(_=>{m=_;const T=_.applyToLocalDocumentSet(h,S);return l.documentOverlayCache.saveOverlays(v,_.batchId,T)})}).then(()=>({batchId:m.batchId,changes:VT(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Jt(rt)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ld(r,i.changes),await $p(r.remoteStore)}catch(i){const s=Nv(i,"Failed to persist write");n.reject(s)}}async function b2(t,e){const n=De(t);try{const r=await Qj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?mt(o.va):i.removedDocuments.size>0&&(mt(o.va),o.va=!1))}),await Ld(n,r,e)}catch(r){await Nd(r)}}function LE(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=De(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.j_)m.Z_(a)&&(c=!0)}),c&&Cv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O6(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Jt(be.comparator);o=o.insert(s,rr.newNoDocument(s,Le.min()));const a=Qe().add(s),l=new Vp(Le.min(),new Map,new Jt(rt),o,a);await b2(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Mv(r)}else await uy(r.localStore,e,!1).then(()=>hy(r,e,n)).catch(Nd)}async function j6(t,e){const n=De(t),r=e.batch.batchId;try{const i=await Yj(n.localStore,e);S2(n,r,null),I2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ld(n,i)}catch(i){await Nd(i)}}async function B6(t,e,n){const r=De(t);try{const i=await function(o,a){const l=De(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(mt(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);S2(r,e,n),I2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ld(r,i)}catch(i){await Nd(i)}}function I2(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function S2(t,e,n){const r=De(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function hy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||k2(t,r)})}function k2(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Iv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mv(t))}function DE(t,e,n){for(const r of n)r instanceof _2?(t.La.addReference(r.key,e),U6(t,r)):r instanceof x2?(we("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||k2(t,r.key)):Pe()}function U6(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(we("SyncEngine","New document in limbo: "+n),t.xa.add(r),Mv(t))}function Mv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new be(Dt.fromString(e)),r=t.qa.next();t.Na.set(r,new A6(n)),t.Oa=t.Oa.insert(n,r),d2(t.remoteStore,new to(Ti(gv(n.path)),r,"TargetPurposeLimboResolution",uv.oe))}}async function Ld(t,e,n){const r=De(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=bv.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=De(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>oe.forEach(c,m=>oe.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(h,m.targetId,v)).next(()=>oe.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(h,m.targetId,v)))))}catch(h){if(!Cd(h))throw h;we("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const v=d.os.get(m),k=v.snapshotVersion,S=v.withLastLimboFreeSnapshotVersion(k);d.os=d.os.insert(m,S)}}}(r.localStore,s))}async function F6(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const r=await a2(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ge(re.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ld(n,r.hs)}}function V6(t,e){const n=De(t),r=n.Na.get(e);if(r&&r.va)return Qe().add(r.key);{let i=Qe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function T2(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=b2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O6.bind(null,e),e.Ca.d_=I6.bind(null,e.eventManager),e.Ca.$a=S6.bind(null,e.eventManager),e}function z6(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B6.bind(null,e),e}class Yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Gj(this.persistence,new Hj,e.initialUser,this.serializer)}Ga(e){return new Wj(Ev.Zr,this.serializer)}Wa(e){return new t6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yf.provider={build:()=>new Yf};class fy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F6.bind(null,this.syncEngine),await x6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b6}()}createDatastore(e){const n=zp(e.databaseInfo.databaseId),r=function(s){return new s6(s)}(e.databaseInfo);return function(s,o,a,l){return new l6(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new u6(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>LE(this.syncEngine,n,0),function(){return NE.D()?new NE:new n6}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new N6(i,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=De(i);we("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Pd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fy.provider={build:()=>new fy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tr.UNAUTHENTICATED,this.clientId=TT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{we("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(we("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dg(t,e){t.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await a2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function OE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $6(t);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>CE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>CE(e.remoteStore,i)),t._onlineComponents=e}async function $6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await dg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;$l("Error using user provided cache. Falling back to memory cache: "+n),await dg(t,new Yf)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await dg(t,new Yf);return t._offlineComponents}async function N2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await OE(t,t._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await OE(t,new fy))),t._onlineComponents}function q6(t){return N2(t).then(e=>e.syncEngine)}async function C2(t){const e=await N2(t),n=e.eventManager;return n.onListen=C6.bind(null,e.syncEngine),n.onUnlisten=P6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=M6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L6.bind(null,e.syncEngine),n}function H6(t,e,n={}){const r=new ds;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new A2({next:m=>{d.Za(),o.enqueueAndForget(()=>w2(s,h));const v=m.docs.has(a);!v&&m.fromCache?c.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?c.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new v2(gv(a.path),d,{includeMetadataChanges:!0,_a:!0});return y2(s,h)}(await C2(t),t.asyncQueue,e,n,r)),r.promise}function K6(t,e,n={}){const r=new ds;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new A2({next:m=>{d.Za(),o.enqueueAndForget(()=>w2(s,h)),m.fromCache&&l.source==="server"?c.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new v2(a,d,{includeMetadataChanges:!0,_a:!0});return y2(s,h)}(await C2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t,e,n){if(!n)throw new ge(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G6(t,e,n,r){if(e===!0&&r===!0)throw new ge(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function BE(t){if(!be.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UE(t){if(be.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function Ql(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qp(t);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Y6(t,e){if(e<=0)throw new ge(re.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new d3;switch(r.type){case"firstParty":return new m3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jE.get(n);r&&(we("ComponentProvider","Removing Datastore"),jE.delete(n),r.terminate())}(this),Promise.resolve()}}function Q6(t,e,n,r={}){var i;const s=(t=Ql(t,Hp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=tr.MOCK_USER;else{a=bP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new tr(c)}t._authCredentials=new h3(new kT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ro(this.firestore,e,this._query)}}class Rr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}}class wo extends Ro{constructor(e,n,r){super(e,n,gv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new be(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function Zl(t,e,...n){if(t=Er(t),R2("collection","path",e),t instanceof Hp){const r=Dt.fromString(e,...n);return UE(r),new wo(t,null,r)}{if(!(t instanceof Rr||t instanceof wo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return UE(r),new wo(t.firestore,null,r)}}function Kp(t,e,...n){if(t=Er(t),arguments.length===1&&(e=TT.newId()),R2("doc","path",e),t instanceof Hp){const r=Dt.fromString(e,...n);return BE(r),new Rr(t,null,new be(r))}{if(!(t instanceof Rr||t instanceof wo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return BE(r),new Rr(t.firestore,t instanceof wo?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new c2(this,"async_queue_retry"),this.Vu=()=>{const r=ug();r&&we("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ug();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ug();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ds;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Cd(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _s("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Av.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Gp extends Hp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new VE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VE(e),this._firestoreClient=void 0,await e}}}function Z6(t,e){const n=typeof t=="object"?t:Bk(),r=typeof t=="string"?t:"(default)",i=Zw(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=xP("firestore");s&&Q6(i,...s)}return i}function Rv(t){if(t._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||X6(t),t._firestoreClient}function X6(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new A3(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,M2(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new W6(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xl($n.fromBase64String(e))}catch(n){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xl($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=/^__.*__$/;class eB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new Md(e,this.data,n,this.fieldTransforms)}}function P2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class jv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(P2(this.Cu)&&J6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zp(e)}Qu(e,n,r,i=!1){return new jv({Cu:e,methodName:n,qu:r,path:Fn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function L2(t){const e=t._freezeSettings(),n=zp(t._databaseId);return new tB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nB(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);j2("Data must be an object, but it was:",o,r);const a=D2(r,o);let l,c;if(s.merge)l=new oi(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=iB(e,h,n);if(!o.contains(m))throw new ge(re.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oB(d,m)||d.push(m)}l=new oi(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new eB(new zr(a),l,c)}class Bv extends Lv{_toFieldTransform(e){return new J3(e.path,new rd)}isEqual(e){return e instanceof Bv}}function rB(t,e,n,r=!1){return Uv(n,t.Qu(r?4:3,e))}function Uv(t,e){if(O2(t=Er(t)))return j2("Unsupported field value:",e,t),D2(t,e);if(t instanceof Lv)return function(r,i){if(!P2(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Uv(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Er(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Q3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=an.fromDate(r);return{timestampValue:Kf(i.serializer,s)}}if(r instanceof an){const s=new an(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kf(i.serializer,s)}}if(r instanceof Dv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xl)return{bytesValue:e2(i.serializer,r._byteString)};if(r instanceof Rr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_v(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ov)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return yv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${qp(r)}`)}(t,e)}function D2(t,e){const n={};return AT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yc(t,(r,i)=>{const s=Uv(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function O2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof an||t instanceof Dv||t instanceof Xl||t instanceof Rr||t instanceof Lv||t instanceof Ov)}function j2(t,e,n){if(!O2(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=qp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function iB(t,e,n){if((e=Er(e))instanceof Pv)return e._internalPath;if(typeof e=="string")return B2(t,e);throw Qf("Field path arguments must be of type string or ",t,!1,void 0,n)}const sB=new RegExp("[~\\*/\\[\\]]");function B2(t,e,n){if(e.search(sB)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pv(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ge(re.INVALID_ARGUMENT,a+t+l)}function oB(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aB extends U2{data(){return super.data()}}function Yp(t,e){return typeof e=="string"?B2(t,e):e instanceof Pv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fv{}class Vv extends Fv{}function od(t,e,...n){let r=[];e instanceof Fv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof zv).length,a=s.filter(l=>l instanceof Qp).length;if(o>1||o>0&&a>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qp extends Vv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qp(e,n,r)}_apply(e){const n=this._parse(e);return F2(e._query,n),new Ro(e.firestore,e.converter,sy(e._query,n))}_parse(e){const n=L2(e.firestore);return function(s,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){WE(h,d);const v=[];for(const k of h)v.push(zE(l,s,k));m={arrayValue:{values:v}}}else m=zE(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||WE(h,d),m=rB(a,o,h,d==="in"||d==="not-in");return wn.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function py(t,e,n){const r=e,i=Yp("where",t);return Qp._create(i,r,n)}class zv extends Fv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)F2(o,l),o=sy(o,l)}(e._query,n),new Ro(e.firestore,e.converter,sy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wv extends Vv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nd(s,o)}(e._query,this._field,this._direction);return new Ro(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new wc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Zf(t,e="asc"){const n=e,r=Yp("orderBy",t);return Wv._create(r,n)}class $v extends Vv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $v(e,n,r)}_apply(e){return new Ro(e.firestore,e.converter,qf(e._query,this._limit,this._limitType))}}function cB(t){return Y6("limit",t),$v._create("limit",t,"F")}function zE(t,e,n){if(typeof(n=Er(n))=="string"){if(n==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jT(e)&&n.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Dt.fromString(n));if(!be.isDocumentKey(r))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uE(t,new be(r))}if(n instanceof Rr)return uE(t,n._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qp(n)}.`)}function WE(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F2(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uB{convertValue(e,n="none"){switch(Ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yc(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>cn(o.doubleValue));return new Ov(s)}convertGeoPoint(e){return new Dv(cn(e.latitude),cn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=hv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const n=So(e);return new an(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dt.fromString(e);mt(o2(r));const i=new ed(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(n)||_s(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class V2 extends U2{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ef extends V2{data(e={}){return super.data(e)}}class hB{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ef(this._firestore,this._userDataWriter,r.key,r,new cu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ef(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ef(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:fB(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t){t=Ql(t,Rr);const e=Ql(t.firestore,Gp);return H6(Rv(e),t._key).then(n=>gB(e,t,n))}class z2 extends uB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,n)}}function ad(t){t=Ql(t,Ro);const e=Ql(t.firestore,Gp),n=Rv(e),r=new z2(e);return lB(t._query),K6(n,t._query).then(i=>new hB(e,r,t,i))}function pB(t,e){const n=Ql(t.firestore,Gp),r=Kp(t),i=dB(t.converter,e);return mB(n,[nB(L2(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hs.exists(!1))]).then(()=>r)}function mB(t,e){return function(r,i){const s=new ds;return r.asyncQueue.enqueueAndForget(async()=>D6(await q6(r),i,s)),s.promise}(Rv(t),e)}function gB(t,e,n){const r=n.docs.get(e._key),i=new z2(t);return new V2(t,i,e._key,r,new cu(n.hasPendingWrites,n.fromCache),e.converter)}function $E(){return new Bv("serverTimestamp")}(function(e,n=!0){(function(i){gc=i})(Na),ya(new bo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Gp(new f3(r.getProvider("auth-internal")),new y3(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ed(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Si(sE,"4.7.3",e),Si(sE,"4.7.3","esm2017")})();const yB={apiKey:"AIzaSyCmgORmeslowUkNeAhkf-V07fNXs9GB2wk",authDomain:"xchainj-8b61b.firebaseapp.com",projectId:"xchainj-8b61b",storageBucket:"xchainj-8b61b.firebasestorage.app",messagingSenderId:"906788087014",appId:"1:906788087014:web:df01c89cbca8459ef94727"},W2=jk(yB),Ci=c3(W2),Es=Z6(W2),$2=Y.createContext({user:null,loading:!0,initialized:!1}),Zp=()=>Y.useContext($2),wB=({children:t})=>{const[e,n]=Y.useState(null),[r,i]=Y.useState(!0),[s,o]=Y.useState(!1);return Y.useEffect(()=>{const a=Ci.onAuthStateChanged(l=>{n(l),i(!1),o(!0)});return()=>a()},[]),p.jsx($2.Provider,{value:{user:e,loading:r,initialized:s},children:t})};var Be={},Xp={};Xp.byteLength=xB;Xp.toByteArray=bB;Xp.fromByteArray=kB;var Ei=[],Br=[],vB=typeof Uint8Array<"u"?Uint8Array:Array,hg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xa=0,_B=hg.length;Xa<_B;++Xa)Ei[Xa]=hg[Xa],Br[hg.charCodeAt(Xa)]=Xa;Br[45]=62;Br[95]=63;function q2(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function xB(t){var e=q2(t),n=e[0],r=e[1];return(n+r)*3/4-r}function EB(t,e,n){return(e+n)*3/4-n}function bB(t){var e,n=q2(t),r=n[0],i=n[1],s=new vB(EB(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Br[t.charCodeAt(l)]<<18|Br[t.charCodeAt(l+1)]<<12|Br[t.charCodeAt(l+2)]<<6|Br[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Br[t.charCodeAt(l)]<<2|Br[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Br[t.charCodeAt(l)]<<10|Br[t.charCodeAt(l+1)]<<4|Br[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function IB(t){return Ei[t>>18&63]+Ei[t>>12&63]+Ei[t>>6&63]+Ei[t&63]}function SB(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(IB(r));return i.join("")}function kB(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(SB(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Ei[e>>2]+Ei[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Ei[e>>10]+Ei[e>>4&63]+Ei[e<<2&63]+"=")),i.join("")}var Hv={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Hv.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,v=t[e+h];for(h+=m,s=v&(1<<-d)-1,v>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(v?-1:1)*o*Math.pow(2,s-r)};Hv.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:s-1,k=r?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+v]=a&255,v+=k,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+v]=o&255,v+=k,o/=256,c-=8);t[n+v-k]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Xp,n=Hv,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=I,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const P=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(P,y),P.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(P){if(P>i)throw new RangeError('The value "'+P+'" is invalid for option "size"');const y=new Uint8Array(P);return Object.setPrototypeOf(y,a.prototype),y}function a(P,y,x){if(typeof P=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(P)}return l(P,y,x)}a.poolSize=8192;function l(P,y,x){if(typeof P=="string")return m(P,y);if(ArrayBuffer.isView(P))return k(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(vn(P,ArrayBuffer)||P&&vn(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vn(P,SharedArrayBuffer)||P&&vn(P.buffer,SharedArrayBuffer)))return S(P,y,x);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=P.valueOf&&P.valueOf();if(z!=null&&z!==P)return a.from(z,y,x);const Q=_(P);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return a.from(P[Symbol.toPrimitive]("string"),y,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}a.from=function(P,y,x){return l(P,y,x)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function d(P,y,x){return c(P),P<=0?o(P):y!==void 0?typeof x=="string"?o(P).fill(y,x):o(P).fill(y):o(P)}a.alloc=function(P,y,x){return d(P,y,x)};function h(P){return c(P),o(P<0?0:T(P)|0)}a.allocUnsafe=function(P){return h(P)},a.allocUnsafeSlow=function(P){return h(P)};function m(P,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const x=E(P,y)|0;let z=o(x);const Q=z.write(P,y);return Q!==x&&(z=z.slice(0,Q)),z}function v(P){const y=P.length<0?0:T(P.length)|0,x=o(y);for(let z=0;z<y;z+=1)x[z]=P[z]&255;return x}function k(P){if(vn(P,Uint8Array)){const y=new Uint8Array(P);return S(y.buffer,y.byteOffset,y.byteLength)}return v(P)}function S(P,y,x){if(y<0||P.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<y+(x||0))throw new RangeError('"length" is outside of buffer bounds');let z;return y===void 0&&x===void 0?z=new Uint8Array(P):x===void 0?z=new Uint8Array(P,y):z=new Uint8Array(P,y,x),Object.setPrototypeOf(z,a.prototype),z}function _(P){if(a.isBuffer(P)){const y=T(P.length)|0,x=o(y);return x.length===0||P.copy(x,0,0,y),x}if(P.length!==void 0)return typeof P.length!="number"||ot(P.length)?o(0):v(P);if(P.type==="Buffer"&&Array.isArray(P.data))return v(P.data)}function T(P){if(P>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return P|0}function I(P){return+P!=P&&(P=0),a.alloc(+P)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,x){if(vn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),vn(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(y)||!a.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===x)return 0;let z=y.length,Q=x.length;for(let Z=0,te=Math.min(z,Q);Z<te;++Z)if(y[Z]!==x[Z]){z=y[Z],Q=x[Z];break}return z<Q?-1:Q<z?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,x){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let z;if(x===void 0)for(x=0,z=0;z<y.length;++z)x+=y[z].length;const Q=a.allocUnsafe(x);let Z=0;for(z=0;z<y.length;++z){let te=y[z];if(vn(te,Uint8Array))Z+te.length>Q.length?(a.isBuffer(te)||(te=a.from(te)),te.copy(Q,Z)):Uint8Array.prototype.set.call(Q,te,Z);else if(a.isBuffer(te))te.copy(Q,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=te.length}return Q};function E(P,y){if(a.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||vn(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);const x=P.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&x===0)return 0;let Q=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return yt(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return ct(P).length;default:if(Q)return z?-1:yt(P).length;y=(""+y).toLowerCase(),Q=!0}}a.byteLength=E;function j(P,y,x){let z=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,y>>>=0,x<=y))return"";for(P||(P="utf8");;)switch(P){case"hex":return F(this,y,x);case"utf8":case"utf-8":return f(this,y,x);case"ascii":return R(this,y,x);case"latin1":case"binary":return M(this,y,x);case"base64":return A(this,y,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,y,x);default:if(z)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),z=!0}}a.prototype._isBuffer=!0;function K(P,y,x){const z=P[y];P[y]=P[x],P[x]=z}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<y;x+=2)K(this,x,x+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<y;x+=4)K(this,x,x+3),K(this,x+1,x+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<y;x+=8)K(this,x,x+7),K(this,x+1,x+6),K(this,x+2,x+5),K(this,x+3,x+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?f(this,0,y):j.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const x=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,x,z,Q,Z){if(vn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(x===void 0&&(x=0),z===void 0&&(z=y?y.length:0),Q===void 0&&(Q=0),Z===void 0&&(Z=this.length),x<0||z>y.length||Q<0||Z>this.length)throw new RangeError("out of range index");if(Q>=Z&&x>=z)return 0;if(Q>=Z)return-1;if(x>=z)return 1;if(x>>>=0,z>>>=0,Q>>>=0,Z>>>=0,this===y)return 0;let te=Z-Q,je=z-x;const Me=Math.min(te,je),Re=this.slice(Q,Z),_t=y.slice(x,z);for(let ke=0;ke<Me;++ke)if(Re[ke]!==_t[ke]){te=Re[ke],je=_t[ke];break}return te<je?-1:je<te?1:0};function G(P,y,x,z,Q){if(P.length===0)return-1;if(typeof x=="string"?(z=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,ot(x)&&(x=Q?0:P.length-1),x<0&&(x=P.length+x),x>=P.length){if(Q)return-1;x=P.length-1}else if(x<0)if(Q)x=0;else return-1;if(typeof y=="string"&&(y=a.from(y,z)),a.isBuffer(y))return y.length===0?-1:O(P,y,x,z,Q);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(P,y,x):Uint8Array.prototype.lastIndexOf.call(P,y,x):O(P,[y],x,z,Q);throw new TypeError("val must be string, number or Buffer")}function O(P,y,x,z,Q){let Z=1,te=P.length,je=y.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(P.length<2||y.length<2)return-1;Z=2,te/=2,je/=2,x/=2}function Me(_t,ke){return Z===1?_t[ke]:_t.readUInt16BE(ke*Z)}let Re;if(Q){let _t=-1;for(Re=x;Re<te;Re++)if(Me(P,Re)===Me(y,_t===-1?0:Re-_t)){if(_t===-1&&(_t=Re),Re-_t+1===je)return _t*Z}else _t!==-1&&(Re-=Re-_t),_t=-1}else for(x+je>te&&(x=te-je),Re=x;Re>=0;Re--){let _t=!0;for(let ke=0;ke<je;ke++)if(Me(P,Re+ke)!==Me(y,ke)){_t=!1;break}if(_t)return Re}return-1}a.prototype.includes=function(y,x,z){return this.indexOf(y,x,z)!==-1},a.prototype.indexOf=function(y,x,z){return G(this,y,x,z,!0)},a.prototype.lastIndexOf=function(y,x,z){return G(this,y,x,z,!1)};function L(P,y,x,z){x=Number(x)||0;const Q=P.length-x;z?(z=Number(z),z>Q&&(z=Q)):z=Q;const Z=y.length;z>Z/2&&(z=Z/2);let te;for(te=0;te<z;++te){const je=parseInt(y.substr(te*2,2),16);if(ot(je))return te;P[x+te]=je}return te}function B(P,y,x,z){return st(yt(y,P.length-x),P,x,z)}function W(P,y,x,z){return st(bt(y),P,x,z)}function $(P,y,x,z){return st(ct(y),P,x,z)}function H(P,y,x,z){return st(zi(y,P.length-x),P,x,z)}a.prototype.write=function(y,x,z,Q){if(x===void 0)Q="utf8",z=this.length,x=0;else if(z===void 0&&typeof x=="string")Q=x,z=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(z)?(z=z>>>0,Q===void 0&&(Q="utf8")):(Q=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-x;if((z===void 0||z>Z)&&(z=Z),y.length>0&&(z<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let te=!1;for(;;)switch(Q){case"hex":return L(this,y,x,z);case"utf8":case"utf-8":return B(this,y,x,z);case"ascii":case"latin1":case"binary":return W(this,y,x,z);case"base64":return $(this,y,x,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,y,x,z);default:if(te)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(P,y,x){return y===0&&x===P.length?e.fromByteArray(P):e.fromByteArray(P.slice(y,x))}function f(P,y,x){x=Math.min(P.length,x);const z=[];let Q=y;for(;Q<x;){const Z=P[Q];let te=null,je=Z>239?4:Z>223?3:Z>191?2:1;if(Q+je<=x){let Me,Re,_t,ke;switch(je){case 1:Z<128&&(te=Z);break;case 2:Me=P[Q+1],(Me&192)===128&&(ke=(Z&31)<<6|Me&63,ke>127&&(te=ke));break;case 3:Me=P[Q+1],Re=P[Q+2],(Me&192)===128&&(Re&192)===128&&(ke=(Z&15)<<12|(Me&63)<<6|Re&63,ke>2047&&(ke<55296||ke>57343)&&(te=ke));break;case 4:Me=P[Q+1],Re=P[Q+2],_t=P[Q+3],(Me&192)===128&&(Re&192)===128&&(_t&192)===128&&(ke=(Z&15)<<18|(Me&63)<<12|(Re&63)<<6|_t&63,ke>65535&&ke<1114112&&(te=ke))}}te===null?(te=65533,je=1):te>65535&&(te-=65536,z.push(te>>>10&1023|55296),te=56320|te&1023),z.push(te),Q+=je}return C(z)}const b=4096;function C(P){const y=P.length;if(y<=b)return String.fromCharCode.apply(String,P);let x="",z=0;for(;z<y;)x+=String.fromCharCode.apply(String,P.slice(z,z+=b));return x}function R(P,y,x){let z="";x=Math.min(P.length,x);for(let Q=y;Q<x;++Q)z+=String.fromCharCode(P[Q]&127);return z}function M(P,y,x){let z="";x=Math.min(P.length,x);for(let Q=y;Q<x;++Q)z+=String.fromCharCode(P[Q]);return z}function F(P,y,x){const z=P.length;(!y||y<0)&&(y=0),(!x||x<0||x>z)&&(x=z);let Q="";for(let Z=y;Z<x;++Z)Q+=ut[P[Z]];return Q}function q(P,y,x){const z=P.slice(y,x);let Q="";for(let Z=0;Z<z.length-1;Z+=2)Q+=String.fromCharCode(z[Z]+z[Z+1]*256);return Q}a.prototype.slice=function(y,x){const z=this.length;y=~~y,x=x===void 0?z:~~x,y<0?(y+=z,y<0&&(y=0)):y>z&&(y=z),x<0?(x+=z,x<0&&(x=0)):x>z&&(x=z),x<y&&(x=y);const Q=this.subarray(y,x);return Object.setPrototypeOf(Q,a.prototype),Q};function D(P,y,x){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+y>x)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,x,z){y=y>>>0,x=x>>>0,z||D(y,x,this.length);let Q=this[y],Z=1,te=0;for(;++te<x&&(Z*=256);)Q+=this[y+te]*Z;return Q},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,x,z){y=y>>>0,x=x>>>0,z||D(y,x,this.length);let Q=this[y+--x],Z=1;for(;x>0&&(Z*=256);)Q+=this[y+--x]*Z;return Q},a.prototype.readUint8=a.prototype.readUInt8=function(y,x){return y=y>>>0,x||D(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,x){return y=y>>>0,x||D(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,x){return y=y>>>0,x||D(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,x){return y=y>>>0,x||D(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,x){return y=y>>>0,x||D(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=Mn(function(y){y=y>>>0,jt(y,"offset");const x=this[y],z=this[y+7];(x===void 0||z===void 0)&&qe(y,this.length-8);const Q=x+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,Z=this[++y]+this[++y]*2**8+this[++y]*2**16+z*2**24;return BigInt(Q)+(BigInt(Z)<<BigInt(32))}),a.prototype.readBigUInt64BE=Mn(function(y){y=y>>>0,jt(y,"offset");const x=this[y],z=this[y+7];(x===void 0||z===void 0)&&qe(y,this.length-8);const Q=x*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],Z=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+z;return(BigInt(Q)<<BigInt(32))+BigInt(Z)}),a.prototype.readIntLE=function(y,x,z){y=y>>>0,x=x>>>0,z||D(y,x,this.length);let Q=this[y],Z=1,te=0;for(;++te<x&&(Z*=256);)Q+=this[y+te]*Z;return Z*=128,Q>=Z&&(Q-=Math.pow(2,8*x)),Q},a.prototype.readIntBE=function(y,x,z){y=y>>>0,x=x>>>0,z||D(y,x,this.length);let Q=x,Z=1,te=this[y+--Q];for(;Q>0&&(Z*=256);)te+=this[y+--Q]*Z;return Z*=128,te>=Z&&(te-=Math.pow(2,8*x)),te},a.prototype.readInt8=function(y,x){return y=y>>>0,x||D(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,x){y=y>>>0,x||D(y,2,this.length);const z=this[y]|this[y+1]<<8;return z&32768?z|4294901760:z},a.prototype.readInt16BE=function(y,x){y=y>>>0,x||D(y,2,this.length);const z=this[y+1]|this[y]<<8;return z&32768?z|4294901760:z},a.prototype.readInt32LE=function(y,x){return y=y>>>0,x||D(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,x){return y=y>>>0,x||D(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=Mn(function(y){y=y>>>0,jt(y,"offset");const x=this[y],z=this[y+7];(x===void 0||z===void 0)&&qe(y,this.length-8);const Q=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(z<<24);return(BigInt(Q)<<BigInt(32))+BigInt(x+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=Mn(function(y){y=y>>>0,jt(y,"offset");const x=this[y],z=this[y+7];(x===void 0||z===void 0)&&qe(y,this.length-8);const Q=(x<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(Q)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+z)}),a.prototype.readFloatLE=function(y,x){return y=y>>>0,x||D(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,x){return y=y>>>0,x||D(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,x){return y=y>>>0,x||D(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,x){return y=y>>>0,x||D(y,8,this.length),n.read(this,y,!1,52,8)};function w(P,y,x,z,Q,Z){if(!a.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>Q||y<Z)throw new RangeError('"value" argument is out of bounds');if(x+z>P.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,x,z,Q){if(y=+y,x=x>>>0,z=z>>>0,!Q){const je=Math.pow(2,8*z)-1;w(this,y,x,z,je,0)}let Z=1,te=0;for(this[x]=y&255;++te<z&&(Z*=256);)this[x+te]=y/Z&255;return x+z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,x,z,Q){if(y=+y,x=x>>>0,z=z>>>0,!Q){const je=Math.pow(2,8*z)-1;w(this,y,x,z,je,0)}let Z=z-1,te=1;for(this[x+Z]=y&255;--Z>=0&&(te*=256);)this[x+Z]=y/te&255;return x+z},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,1,255,0),this[x]=y&255,x+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,2,65535,0),this[x]=y&255,this[x+1]=y>>>8,x+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,2,65535,0),this[x]=y>>>8,this[x+1]=y&255,x+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,4,4294967295,0),this[x+3]=y>>>24,this[x+2]=y>>>16,this[x+1]=y>>>8,this[x]=y&255,x+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,4,4294967295,0),this[x]=y>>>24,this[x+1]=y>>>16,this[x+2]=y>>>8,this[x+3]=y&255,x+4};function V(P,y,x,z,Q){Oe(y,z,Q,P,x,7);let Z=Number(y&BigInt(4294967295));P[x++]=Z,Z=Z>>8,P[x++]=Z,Z=Z>>8,P[x++]=Z,Z=Z>>8,P[x++]=Z;let te=Number(y>>BigInt(32)&BigInt(4294967295));return P[x++]=te,te=te>>8,P[x++]=te,te=te>>8,P[x++]=te,te=te>>8,P[x++]=te,x}function se(P,y,x,z,Q){Oe(y,z,Q,P,x,7);let Z=Number(y&BigInt(4294967295));P[x+7]=Z,Z=Z>>8,P[x+6]=Z,Z=Z>>8,P[x+5]=Z,Z=Z>>8,P[x+4]=Z;let te=Number(y>>BigInt(32)&BigInt(4294967295));return P[x+3]=te,te=te>>8,P[x+2]=te,te=te>>8,P[x+1]=te,te=te>>8,P[x]=te,x+8}a.prototype.writeBigUInt64LE=Mn(function(y,x=0){return V(this,y,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Mn(function(y,x=0){return se(this,y,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,x,z,Q){if(y=+y,x=x>>>0,!Q){const Me=Math.pow(2,8*z-1);w(this,y,x,z,Me-1,-Me)}let Z=0,te=1,je=0;for(this[x]=y&255;++Z<z&&(te*=256);)y<0&&je===0&&this[x+Z-1]!==0&&(je=1),this[x+Z]=(y/te>>0)-je&255;return x+z},a.prototype.writeIntBE=function(y,x,z,Q){if(y=+y,x=x>>>0,!Q){const Me=Math.pow(2,8*z-1);w(this,y,x,z,Me-1,-Me)}let Z=z-1,te=1,je=0;for(this[x+Z]=y&255;--Z>=0&&(te*=256);)y<0&&je===0&&this[x+Z+1]!==0&&(je=1),this[x+Z]=(y/te>>0)-je&255;return x+z},a.prototype.writeInt8=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,1,127,-128),y<0&&(y=255+y+1),this[x]=y&255,x+1},a.prototype.writeInt16LE=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,2,32767,-32768),this[x]=y&255,this[x+1]=y>>>8,x+2},a.prototype.writeInt16BE=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,2,32767,-32768),this[x]=y>>>8,this[x+1]=y&255,x+2},a.prototype.writeInt32LE=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,4,2147483647,-2147483648),this[x]=y&255,this[x+1]=y>>>8,this[x+2]=y>>>16,this[x+3]=y>>>24,x+4},a.prototype.writeInt32BE=function(y,x,z){return y=+y,x=x>>>0,z||w(this,y,x,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[x]=y>>>24,this[x+1]=y>>>16,this[x+2]=y>>>8,this[x+3]=y&255,x+4},a.prototype.writeBigInt64LE=Mn(function(y,x=0){return V(this,y,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Mn(function(y,x=0){return se(this,y,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function le(P,y,x,z,Q,Z){if(x+z>P.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function de(P,y,x,z,Q){return y=+y,x=x>>>0,Q||le(P,y,x,4),n.write(P,y,x,z,23,4),x+4}a.prototype.writeFloatLE=function(y,x,z){return de(this,y,x,!0,z)},a.prototype.writeFloatBE=function(y,x,z){return de(this,y,x,!1,z)};function Ae(P,y,x,z,Q){return y=+y,x=x>>>0,Q||le(P,y,x,8),n.write(P,y,x,z,52,8),x+8}a.prototype.writeDoubleLE=function(y,x,z){return Ae(this,y,x,!0,z)},a.prototype.writeDoubleBE=function(y,x,z){return Ae(this,y,x,!1,z)},a.prototype.copy=function(y,x,z,Q){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(z||(z=0),!Q&&Q!==0&&(Q=this.length),x>=y.length&&(x=y.length),x||(x=0),Q>0&&Q<z&&(Q=z),Q===z||y.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),y.length-x<Q-z&&(Q=y.length-x+z);const Z=Q-z;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,z,Q):Uint8Array.prototype.set.call(y,this.subarray(z,Q),x),Z},a.prototype.fill=function(y,x,z,Q){if(typeof y=="string"){if(typeof x=="string"?(Q=x,x=0,z=this.length):typeof z=="string"&&(Q=z,z=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!a.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(y.length===1){const te=y.charCodeAt(0);(Q==="utf8"&&te<128||Q==="latin1")&&(y=te)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(x<0||this.length<x||this.length<z)throw new RangeError("Out of range index");if(z<=x)return this;x=x>>>0,z=z===void 0?this.length:z>>>0,y||(y=0);let Z;if(typeof y=="number")for(Z=x;Z<z;++Z)this[Z]=y;else{const te=a.isBuffer(y)?y:a.from(y,Q),je=te.length;if(je===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(Z=0;Z<z-x;++Z)this[Z+x]=te[Z%je]}return this};const Ie={};function Ce(P,y,x){Ie[P]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${P}]`,this.stack,delete this.name}get code(){return P}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${P}]: ${this.message}`}}}Ce("ERR_BUFFER_OUT_OF_BOUNDS",function(P){return P?`${P} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ce("ERR_INVALID_ARG_TYPE",function(P,y){return`The "${P}" argument must be of type number. Received type ${typeof y}`},TypeError),Ce("ERR_OUT_OF_RANGE",function(P,y,x){let z=`The value of "${P}" is out of range.`,Q=x;return Number.isInteger(x)&&Math.abs(x)>2**32?Q=vt(String(x)):typeof x=="bigint"&&(Q=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(Q=vt(Q)),Q+="n"),z+=` It must be ${y}. Received ${Q}`,z},RangeError);function vt(P){let y="",x=P.length;const z=P[0]==="-"?1:0;for(;x>=z+4;x-=3)y=`_${P.slice(x-3,x)}${y}`;return`${P.slice(0,x)}${y}`}function Ue(P,y,x){jt(y,"offset"),(P[y]===void 0||P[y+x]===void 0)&&qe(y,P.length-(x+1))}function Oe(P,y,x,z,Q,Z){if(P>x||P<y){const te=typeof y=="bigint"?"n":"";let je;throw y===0||y===BigInt(0)?je=`>= 0${te} and < 2${te} ** ${(Z+1)*8}${te}`:je=`>= -(2${te} ** ${(Z+1)*8-1}${te}) and < 2 ** ${(Z+1)*8-1}${te}`,new Ie.ERR_OUT_OF_RANGE("value",je,P)}Ue(z,Q,Z)}function jt(P,y){if(typeof P!="number")throw new Ie.ERR_INVALID_ARG_TYPE(y,"number",P)}function qe(P,y,x){throw Math.floor(P)!==P?(jt(P,x),new Ie.ERR_OUT_OF_RANGE("offset","an integer",P)):y<0?new Ie.ERR_BUFFER_OUT_OF_BOUNDS:new Ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,P)}const Ge=/[^+/0-9A-Za-z-_]/g;function Vi(P){if(P=P.split("=")[0],P=P.trim().replace(Ge,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function yt(P,y){y=y||1/0;let x;const z=P.length;let Q=null;const Z=[];for(let te=0;te<z;++te){if(x=P.charCodeAt(te),x>55295&&x<57344){if(!Q){if(x>56319){(y-=3)>-1&&Z.push(239,191,189);continue}else if(te+1===z){(y-=3)>-1&&Z.push(239,191,189);continue}Q=x;continue}if(x<56320){(y-=3)>-1&&Z.push(239,191,189),Q=x;continue}x=(Q-55296<<10|x-56320)+65536}else Q&&(y-=3)>-1&&Z.push(239,191,189);if(Q=null,x<128){if((y-=1)<0)break;Z.push(x)}else if(x<2048){if((y-=2)<0)break;Z.push(x>>6|192,x&63|128)}else if(x<65536){if((y-=3)<0)break;Z.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((y-=4)<0)break;Z.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return Z}function bt(P){const y=[];for(let x=0;x<P.length;++x)y.push(P.charCodeAt(x)&255);return y}function zi(P,y){let x,z,Q;const Z=[];for(let te=0;te<P.length&&!((y-=2)<0);++te)x=P.charCodeAt(te),z=x>>8,Q=x%256,Z.push(Q),Z.push(z);return Z}function ct(P){return e.toByteArray(Vi(P))}function st(P,y,x,z){let Q;for(Q=0;Q<z&&!(Q+x>=y.length||Q>=P.length);++Q)y[Q+x]=P[Q];return Q}function vn(P,y){return P instanceof y||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===y.name}function ot(P){return P!==P}const ut=function(){const P="0123456789abcdef",y=new Array(256);for(let x=0;x<16;++x){const z=x*16;for(let Q=0;Q<16;++Q)y[z+Q]=P[x]+P[Q]}return y}();function Mn(P){return typeof BigInt>"u"?Fe:P}function Fe(){throw new Error("BigInt not supported")}})(Be);function qE(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function TB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Jp(t,...e){if(!TB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function AB(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");qE(t.outputLen),qE(t.blockLen)}function Xf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NB(t,e){Jp(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ja=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fg=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),vi=(t,e)=>t<<32-e|t>>>e;function CB(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Kv(t){return typeof t=="string"&&(t=CB(t)),Jp(t),t}function MB(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Jp(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class H2{clone(){return this._cloneInto()}}function K2(t){const e=r=>t().update(Kv(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function G2(t=32){if(Ja&&typeof Ja.getRandomValues=="function")return Ja.getRandomValues(new Uint8Array(t));if(Ja&&typeof Ja.randomBytes=="function")return Ja.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function RB(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}const PB=(t,e,n)=>t&e^~t&n,LB=(t,e,n)=>t&e^t&n^e&n;class Y2 extends H2{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fg(this.buffer)}update(e){Xf(this);const{view:n,buffer:r,blockLen:i}=this;e=Kv(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=fg(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Xf(this),NB(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;RB(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=fg(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const bh=BigInt(2**32-1),my=BigInt(32);function Q2(t,e=!1){return e?{h:Number(t&bh),l:Number(t>>my&bh)}:{h:Number(t>>my&bh)|0,l:Number(t&bh)|0}}function DB(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Q2(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const OB=(t,e)=>BigInt(t>>>0)<<my|BigInt(e>>>0),jB=(t,e,n)=>t>>>n,BB=(t,e,n)=>t<<32-n|e>>>n,UB=(t,e,n)=>t>>>n|e<<32-n,FB=(t,e,n)=>t<<32-n|e>>>n,VB=(t,e,n)=>t<<64-n|e>>>n-32,zB=(t,e,n)=>t>>>n-32|e<<64-n,WB=(t,e)=>e,$B=(t,e)=>t,qB=(t,e,n)=>t<<n|e>>>32-n,HB=(t,e,n)=>e<<n|t>>>32-n,KB=(t,e,n)=>e<<n-32|t>>>64-n,GB=(t,e,n)=>t<<n-32|e>>>64-n;function YB(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const QB=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),ZB=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,XB=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),JB=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,e5=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),t5=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,We={fromBig:Q2,split:DB,toBig:OB,shrSH:jB,shrSL:BB,rotrSH:UB,rotrSL:FB,rotrBH:VB,rotrBL:zB,rotr32H:WB,rotr32L:$B,rotlSH:qB,rotlSL:HB,rotlBH:KB,rotlBL:GB,add:YB,add3L:QB,add3H:ZB,add4L:XB,add4H:JB,add5H:t5,add5L:e5},[n5,r5]=We.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Os=new Uint32Array(80),js=new Uint32Array(80);class i5 extends Y2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:d,Fh:h,Fl:m,Gh:v,Gl:k,Hh:S,Hl:_}=this;return[e,n,r,i,s,o,a,l,c,d,h,m,v,k,S,_]}set(e,n,r,i,s,o,a,l,c,d,h,m,v,k,S,_){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=h|0,this.Fl=m|0,this.Gh=v|0,this.Gl=k|0,this.Hh=S|0,this.Hl=_|0}process(e,n){for(let E=0;E<16;E++,n+=4)Os[E]=e.getUint32(n),js[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const j=Os[E-15]|0,K=js[E-15]|0,G=We.rotrSH(j,K,1)^We.rotrSH(j,K,8)^We.shrSH(j,K,7),O=We.rotrSL(j,K,1)^We.rotrSL(j,K,8)^We.shrSL(j,K,7),L=Os[E-2]|0,B=js[E-2]|0,W=We.rotrSH(L,B,19)^We.rotrBH(L,B,61)^We.shrSH(L,B,6),$=We.rotrSL(L,B,19)^We.rotrBL(L,B,61)^We.shrSL(L,B,6),H=We.add4L(O,$,js[E-7],js[E-16]),A=We.add4H(H,G,W,Os[E-7],Os[E-16]);Os[E]=A|0,js[E]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:d,Eh:h,El:m,Fh:v,Fl:k,Gh:S,Gl:_,Hh:T,Hl:I}=this;for(let E=0;E<80;E++){const j=We.rotrSH(h,m,14)^We.rotrSH(h,m,18)^We.rotrBH(h,m,41),K=We.rotrSL(h,m,14)^We.rotrSL(h,m,18)^We.rotrBL(h,m,41),G=h&v^~h&S,O=m&k^~m&_,L=We.add5L(I,K,O,r5[E],js[E]),B=We.add5H(L,T,j,G,n5[E],Os[E]),W=L|0,$=We.rotrSH(r,i,28)^We.rotrBH(r,i,34)^We.rotrBH(r,i,39),H=We.rotrSL(r,i,28)^We.rotrBL(r,i,34)^We.rotrBL(r,i,39),A=r&s^r&a^s&a,f=i&o^i&l^o&l;T=S|0,I=_|0,S=v|0,_=k|0,v=h|0,k=m|0,{h,l:m}=We.add(c|0,d|0,B|0,W|0),c=a|0,d=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const b=We.add3L(W,H,f);r=We.add3H(b,B,$,A),i=b|0}({h:r,l:i}=We.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=We.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=We.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=We.add(this.Dh|0,this.Dl|0,c|0,d|0),{h,l:m}=We.add(this.Eh|0,this.El|0,h|0,m|0),{h:v,l:k}=We.add(this.Fh|0,this.Fl|0,v|0,k|0),{h:S,l:_}=We.add(this.Gh|0,this.Gl|0,S|0,_|0),{h:T,l:I}=We.add(this.Hh|0,this.Hl|0,T|0,I|0),this.set(r,i,s,o,a,l,c,d,h,m,v,k,S,_,T,I)}roundClean(){Os.fill(0),js.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const s5=K2(()=>new i5);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const em=BigInt(0),tm=BigInt(1),o5=BigInt(2);function ba(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Dd(t){if(!ba(t))throw new Error("Uint8Array expected")}function fs(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const a5=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ia(t){Dd(t);let e="";for(let n=0;n<t.length;n++)e+=a5[t[n]];return e}function vl(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Gv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?em:BigInt("0x"+t)}const Hi={_0:48,_9:57,A:65,F:70,a:97,f:102};function HE(t){if(t>=Hi._0&&t<=Hi._9)return t-Hi._0;if(t>=Hi.A&&t<=Hi.F)return t-(Hi.A-10);if(t>=Hi.a&&t<=Hi.f)return t-(Hi.a-10)}function Jl(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=HE(t.charCodeAt(s)),a=HE(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function ua(t){return Gv(Ia(t))}function Pl(t){return Dd(t),Gv(Ia(Uint8Array.from(t).reverse()))}function ec(t,e){return Jl(t.toString(16).padStart(e*2,"0"))}function ld(t,e){return ec(t,e).reverse()}function l5(t){return Jl(vl(t))}function mn(t,e,n){let r;if(typeof e=="string")try{r=Jl(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ba(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Sa(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Dd(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function c5(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function u5(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const pg=t=>typeof t=="bigint"&&em<=t;function nm(t,e,n){return pg(t)&&pg(e)&&pg(n)&&e<=t&&t<n}function Wr(t,e,n,r){if(!nm(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Z2(t){let e;for(e=0;t>em;t>>=tm,e+=1);return e}function d5(t,e){return t>>BigInt(e)&tm}function h5(t,e,n){return t|(n?tm:em)<<BigInt(e)}const Yv=t=>(o5<<BigInt(t-1))-tm,mg=t=>new Uint8Array(t),KE=t=>Uint8Array.from(t);function X2(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=mg(t),i=mg(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),l=(h=mg())=>{i=a(KE([0]),h),r=a(),h.length!==0&&(i=a(KE([1]),h),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const m=[];for(;h<e;){r=a();const v=r.slice();m.push(v),h+=r.length}return Sa(...m)};return(h,m)=>{o(),l(h);let v;for(;!(v=m(c()));)l();return o(),v}}const f5={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ba(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function xc(t,e,n={}){const r=(i,s,o)=>{const a=f5[s];if(typeof a!="function")throw new Error("invalid validator function");const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+l)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const p5=()=>{throw new Error("not implemented")};function cd(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const m5=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Wr,abool:fs,abytes:Dd,bitGet:d5,bitLen:Z2,bitMask:Yv,bitSet:h5,bytesToHex:Ia,bytesToNumberBE:ua,bytesToNumberLE:Pl,concatBytes:Sa,createHmacDrbg:X2,ensureBytes:mn,equalBytes:c5,hexToBytes:Jl,hexToNumber:Gv,inRange:nm,isBytes:ba,memoized:cd,notImplemented:p5,numberToBytesBE:ec,numberToBytesLE:ld,numberToHexUnpadded:vl,numberToVarBytesBE:l5,utf8ToBytes:u5,validateObject:xc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const An=BigInt(0),Qt=BigInt(1),Go=BigInt(2),g5=BigInt(3),gy=BigInt(4),GE=BigInt(5),YE=BigInt(8);function Ft(t,e){const n=t%e;return n>=An?n:e+n}function y5(t,e,n){if(e<An)throw new Error("invalid exponent, negatives unsupported");if(n<=An)throw new Error("invalid modulus");if(n===Qt)return An;let r=Qt;for(;e>An;)e&Qt&&(r=r*t%n),t=t*t%n,e>>=Qt;return r}function sn(t,e,n){let r=t;for(;e-- >An;)r*=r,r%=n;return r}function yy(t,e){if(t===An)throw new Error("invert: expected non-zero number");if(e<=An)throw new Error("invert: expected positive modulus, got "+e);let n=Ft(t,e),r=e,i=An,s=Qt;for(;n!==An;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==Qt)throw new Error("invert: does not exist");return Ft(i,e)}function w5(t){const e=(t-Qt)/Go;let n,r,i;for(n=t-Qt,r=0;n%Go===An;n/=Go,r++);for(i=Go;i<t&&y5(i,e,t)!==t-Qt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Qt)/gy;return function(l,c){const d=l.pow(c,o);if(!l.eql(l.sqr(d),c))throw new Error("Cannot find square root");return d}}const s=(n+Qt)/Go;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,d=a.pow(a.mul(a.ONE,i),n),h=a.pow(l,s),m=a.pow(l,n);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let v=1;for(let S=a.sqr(m);v<c&&!a.eql(S,a.ONE);v++)S=a.sqr(S);const k=a.pow(d,Qt<<BigInt(c-v-1));d=a.sqr(k),h=a.mul(h,k),m=a.mul(m,d),c=v}return h}}function v5(t){if(t%gy===g5){const e=(t+Qt)/gy;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%YE===GE){const e=(t-GE)/YE;return function(r,i){const s=r.mul(i,Go),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,Go),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return w5(t)}const _5=(t,e)=>(Ft(t,e)&Qt)===Qt,x5=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function E5(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=x5.reduce((r,i)=>(r[i]="function",r),e);return xc(t,n)}function b5(t,e,n){if(n<An)throw new Error("invalid exponent, negatives unsupported");if(n===An)return t.ONE;if(n===Qt)return e;let r=t.ONE,i=e;for(;n>An;)n&Qt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Qt;return r}function I5(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function J2(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function rm(t,e,n=!1,r={}){if(t<=An)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=J2(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:Yv(i),ZERO:An,ONE:Qt,create:l=>Ft(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return An<=l&&l<t},is0:l=>l===An,isOdd:l=>(l&Qt)===Qt,neg:l=>Ft(-l,t),eql:(l,c)=>l===c,sqr:l=>Ft(l*l,t),add:(l,c)=>Ft(l+c,t),sub:(l,c)=>Ft(l-c,t),mul:(l,c)=>Ft(l*c,t),pow:(l,c)=>b5(a,l,c),div:(l,c)=>Ft(l*yy(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>yy(l,t),sqrt:r.sqrt||(l=>(o||(o=v5(t)),o(a,l))),invertBatch:l=>I5(a,l),cmov:(l,c,d)=>d?c:l,toBytes:l=>n?ld(l,s):ec(l,s),fromBytes:l=>{if(l.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);return n?Pl(l):ua(l)}});return Object.freeze(a)}function eA(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function tA(t){const e=eA(t);return e+Math.ceil(e/2)}function S5(t,e,n=!1){const r=t.length,i=eA(e),s=tA(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?Pl(t):ua(t),a=Ft(o,e-Qt)+Qt;return n?ld(a,i):ec(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const QE=BigInt(0),Ih=BigInt(1);function gg(t,e){const n=e.negate();return t?n:e}function nA(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function yg(t,e){nA(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function k5(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function T5(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const wg=new WeakMap,rA=new WeakMap;function vg(t){return rA.get(t)||1}function iA(t,e){return{constTimeNegate:gg,hasPrecomputes(n){return vg(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>QE;)r&Ih&&(i=i.add(s)),s=s.double(),r>>=Ih;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=yg(r,e),o=[];let a=n,l=a;for(let c=0;c<i;c++){l=a,o.push(l);for(let d=1;d<s;d++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=yg(n,e);let a=t.ZERO,l=t.BASE;const c=BigInt(2**n-1),d=2**n,h=BigInt(n);for(let m=0;m<s;m++){const v=m*o;let k=Number(i&c);i>>=h,k>o&&(k-=d,i+=Ih);const S=v,_=v+Math.abs(k)-1,T=m%2!==0,I=k<0;k===0?l=l.add(gg(T,r[S])):a=a.add(gg(I,r[_]))}return{p:a,f:l}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=yg(n,e),l=BigInt(2**n-1),c=2**n,d=BigInt(n);for(let h=0;h<o;h++){const m=h*a;if(i===QE)break;let v=Number(i&l);if(i>>=d,v>a&&(v-=c,i+=Ih),v===0)continue;let k=r[m+Math.abs(v)-1];v<0&&(k=k.negate()),s=s.add(k)}return s},getPrecomputes(n,r,i){let s=wg.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&wg.set(r,i(s))),s},wNAFCached(n,r,i){const s=vg(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=vg(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){nA(r,e),rA.set(n,r),wg.delete(n)}}}function sA(t,e,n,r){if(k5(n,t),T5(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Z2(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=new Array(a+1).fill(i),c=Math.floor((e.BITS-1)/o)*o;let d=i;for(let h=c;h>=0;h-=o){l.fill(i);for(let v=0;v<r.length;v++){const k=r[v],S=Number(k>>BigInt(h)&BigInt(a));l[S]=l[S].add(n[v])}let m=i;for(let v=l.length-1,k=i;v>0;v--)k=k.add(l[v]),m=m.add(k);if(d=d.add(m),h!==0)for(let v=0;v<o;v++)d=d.double()}return d}function Qv(t){return E5(t.Fp),xc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...J2(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jr=BigInt(0),pr=BigInt(1),Sh=BigInt(2),A5=BigInt(8),N5={zip215:!0};function C5(t){const e=Qv(t);return xc(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function M5(t){const e=C5(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,c=Sh<<BigInt(a*8)-pr,d=n.create,h=rm(e.n,e.nBitLength),m=e.uvRatio||((C,R)=>{try{return{isValid:!0,value:n.sqrt(C*n.inv(R))}}catch{return{isValid:!1,value:Jr}}}),v=e.adjustScalarBytes||(C=>C),k=e.domain||((C,R,M)=>{if(fs("phflag",M),R.length||M)throw new Error("Contexts/pre-hash are not supported");return C});function S(C,R){Wr("coordinate "+C,R,Jr,c)}function _(C){if(!(C instanceof E))throw new Error("ExtendedPoint expected")}const T=cd((C,R)=>{const{ex:M,ey:F,ez:q}=C,D=C.is0();R==null&&(R=D?A5:n.inv(q));const w=d(M*R),V=d(F*R),se=d(q*R);if(D)return{x:Jr,y:pr};if(se!==pr)throw new Error("invZ was invalid");return{x:w,y:V}}),I=cd(C=>{const{a:R,d:M}=e;if(C.is0())throw new Error("bad point: ZERO");const{ex:F,ey:q,ez:D,et:w}=C,V=d(F*F),se=d(q*q),le=d(D*D),de=d(le*le),Ae=d(V*R),Ie=d(le*d(Ae+se)),Ce=d(de+d(M*d(V*se)));if(Ie!==Ce)throw new Error("bad point: equation left != right (1)");const vt=d(F*q),Ue=d(D*w);if(vt!==Ue)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(R,M,F,q){this.ex=R,this.ey=M,this.ez=F,this.et=q,S("x",R),S("y",M),S("z",F),S("t",q),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof E)throw new Error("extended point not allowed");const{x:M,y:F}=R||{};return S("x",M),S("y",F),new E(M,F,pr,d(M*F))}static normalizeZ(R){const M=n.invertBatch(R.map(F=>F.ez));return R.map((F,q)=>F.toAffine(M[q])).map(E.fromAffine)}static msm(R,M){return sA(E,h,R,M)}_setWindowSize(R){G.setWindowSize(this,R)}assertValidity(){I(this)}equals(R){_(R);const{ex:M,ey:F,ez:q}=this,{ex:D,ey:w,ez:V}=R,se=d(M*V),le=d(D*q),de=d(F*V),Ae=d(w*q);return se===le&&de===Ae}is0(){return this.equals(E.ZERO)}negate(){return new E(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:R}=e,{ex:M,ey:F,ez:q}=this,D=d(M*M),w=d(F*F),V=d(Sh*d(q*q)),se=d(R*D),le=M+F,de=d(d(le*le)-D-w),Ae=se+w,Ie=Ae-V,Ce=se-w,vt=d(de*Ie),Ue=d(Ae*Ce),Oe=d(de*Ce),jt=d(Ie*Ae);return new E(vt,Ue,jt,Oe)}add(R){_(R);const{a:M,d:F}=e,{ex:q,ey:D,ez:w,et:V}=this,{ex:se,ey:le,ez:de,et:Ae}=R;if(M===BigInt(-1)){const ct=d((D-q)*(le+se)),st=d((D+q)*(le-se)),vn=d(st-ct);if(vn===Jr)return this.double();const ot=d(w*Sh*Ae),ut=d(V*Sh*de),Mn=ut+ot,Fe=st+ct,P=ut-ot,y=d(Mn*vn),x=d(Fe*P),z=d(Mn*P),Q=d(vn*Fe);return new E(y,x,Q,z)}const Ie=d(q*se),Ce=d(D*le),vt=d(V*F*Ae),Ue=d(w*de),Oe=d((q+D)*(se+le)-Ie-Ce),jt=Ue-vt,qe=Ue+vt,Ge=d(Ce-M*Ie),Vi=d(Oe*jt),yt=d(qe*Ge),bt=d(Oe*Ge),zi=d(jt*qe);return new E(Vi,yt,zi,bt)}subtract(R){return this.add(R.negate())}wNAF(R){return G.wNAFCached(this,R,E.normalizeZ)}multiply(R){const M=R;Wr("scalar",M,pr,r);const{p:F,f:q}=this.wNAF(M);return E.normalizeZ([F,q])[0]}multiplyUnsafe(R,M=E.ZERO){const F=R;return Wr("scalar",F,Jr,r),F===Jr?K:this.is0()||F===pr?this:G.wNAFCachedUnsafe(this,F,E.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return G.unsafeLadder(this,r).is0()}toAffine(R){return T(this,R)}clearCofactor(){const{h:R}=e;return R===pr?this:this.multiplyUnsafe(R)}static fromHex(R,M=!1){const{d:F,a:q}=e,D=n.BYTES;R=mn("pointHex",R,D),fs("zip215",M);const w=R.slice(),V=R[D-1];w[D-1]=V&-129;const se=Pl(w),le=M?c:n.ORDER;Wr("pointHex.y",se,Jr,le);const de=d(se*se),Ae=d(de-pr),Ie=d(F*de-q);let{isValid:Ce,value:vt}=m(Ae,Ie);if(!Ce)throw new Error("Point.fromHex: invalid y coordinate");const Ue=(vt&pr)===pr,Oe=(V&128)!==0;if(!M&&vt===Jr&&Oe)throw new Error("Point.fromHex: x=0 and x_0=1");return Oe!==Ue&&(vt=d(-vt)),E.fromAffine({x:vt,y:se})}static fromPrivateKey(R){return B(R).point}toRawBytes(){const{x:R,y:M}=this.toAffine(),F=ld(M,n.BYTES);return F[F.length-1]|=R&pr?128:0,F}toHex(){return Ia(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,pr,d(e.Gx*e.Gy)),E.ZERO=new E(Jr,pr,pr,Jr);const{BASE:j,ZERO:K}=E,G=iA(E,a*8);function O(C){return Ft(C,r)}function L(C){return O(Pl(C))}function B(C){const R=n.BYTES;C=mn("private key",C,R);const M=mn("hashed private key",s(C),2*R),F=v(M.slice(0,R)),q=M.slice(R,2*R),D=L(F),w=j.multiply(D),V=w.toRawBytes();return{head:F,prefix:q,scalar:D,point:w,pointBytes:V}}function W(C){return B(C).pointBytes}function $(C=new Uint8Array,...R){const M=Sa(...R);return L(s(k(M,mn("context",C),!!i)))}function H(C,R,M={}){C=mn("message",C),i&&(C=i(C));const{prefix:F,scalar:q,pointBytes:D}=B(R),w=$(M.context,F,C),V=j.multiply(w).toRawBytes(),se=$(M.context,V,D,C),le=O(w+se*q);Wr("signature.s",le,Jr,r);const de=Sa(V,ld(le,n.BYTES));return mn("result",de,n.BYTES*2)}const A=N5;function f(C,R,M,F=A){const{context:q,zip215:D}=F,w=n.BYTES;C=mn("signature",C,2*w),R=mn("message",R),M=mn("publicKey",M,w),D!==void 0&&fs("zip215",D),i&&(R=i(R));const V=Pl(C.slice(w,2*w));let se,le,de;try{se=E.fromHex(M,D),le=E.fromHex(C.slice(0,w),D),de=j.multiplyUnsafe(V)}catch{return!1}if(!D&&se.isSmallOrder())return!1;const Ae=$(q,le.toRawBytes(),se.toRawBytes(),R);return le.add(se.multiplyUnsafe(Ae)).subtract(de).clearCofactor().equals(E.ZERO)}return j._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:H,verify:f,ExtendedPoint:E,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(n.BYTES),precompute(C=8,R=E.BASE){return R._setWindowSize(C),R.multiply(BigInt(3)),R}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zv=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ZE=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const R5=BigInt(1),XE=BigInt(2);BigInt(3);const P5=BigInt(5),L5=BigInt(8);function D5(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=Zv,a=t*t%s*t%s,l=sn(a,XE,s)*a%s,c=sn(l,R5,s)*t%s,d=sn(c,P5,s)*c%s,h=sn(d,e,s)*d%s,m=sn(h,n,s)*h%s,v=sn(m,r,s)*m%s,k=sn(v,i,s)*v%s,S=sn(k,i,s)*v%s,_=sn(S,e,s)*d%s;return{pow_p_5_8:sn(_,XE,s)*t%s,b2:a}}function O5(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function j5(t,e){const n=Zv,r=Ft(e*e*e,n),i=Ft(r*r*e,n),s=D5(t*i).pow_p_5_8;let o=Ft(t*r*s,n);const a=Ft(e*o*o,n),l=o,c=Ft(o*ZE,n),d=a===t,h=a===Ft(-t,n),m=a===Ft(-t*ZE,n);return d&&(o=l),(h||m)&&(o=c),_5(o,n)&&(o=Ft(-o,n)),{isValid:d||h,value:o}}const B5=rm(Zv,void 0,!0),U5={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:B5,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:L5,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:s5,randomBytes:G2,adjustScalarBytes:O5,uvRatio:j5},Od=M5(U5);var Xv={exports:{}};const F5={},V5=Object.freeze(Object.defineProperty({__proto__:null,default:F5},Symbol.toStringTag,{value:"Module"})),z5=Qy(V5);Xv.exports;(function(t){(function(e,n){function r(A,f){if(!A)throw new Error(f||"Assertion failed")}function i(A,f){A.super_=f;var b=function(){};b.prototype=f.prototype,A.prototype=new b,A.prototype.constructor=A}function s(A,f,b){if(s.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((f==="le"||f==="be")&&(b=f,f=10),this._init(A||0,f||10,b||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=z5.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,b){return f.cmp(b)>0?f:b},s.min=function(f,b){return f.cmp(b)<0?f:b},s.prototype._init=function(f,b,C){if(typeof f=="number")return this._initNumber(f,b,C);if(typeof f=="object")return this._initArray(f,b,C);b==="hex"&&(b=16),r(b===(b|0)&&b>=2&&b<=36),f=f.toString().replace(/\s+/g,"");var R=0;f[0]==="-"&&(R++,this.negative=1),R<f.length&&(b===16?this._parseHex(f,R,C):(this._parseBase(f,b,R),C==="le"&&this._initArray(this.toArray(),b,C)))},s.prototype._initNumber=function(f,b,C){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),b,C)},s.prototype._initArray=function(f,b,C){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var M,F,q=0;if(C==="be")for(R=f.length-1,M=0;R>=0;R-=3)F=f[R]|f[R-1]<<8|f[R-2]<<16,this.words[M]|=F<<q&67108863,this.words[M+1]=F>>>26-q&67108863,q+=24,q>=26&&(q-=26,M++);else if(C==="le")for(R=0,M=0;R<f.length;R+=3)F=f[R]|f[R+1]<<8|f[R+2]<<16,this.words[M]|=F<<q&67108863,this.words[M+1]=F>>>26-q&67108863,q+=24,q>=26&&(q-=26,M++);return this._strip()};function a(A,f){var b=A.charCodeAt(f);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;r(!1,"Invalid character in "+A)}function l(A,f,b){var C=a(A,b);return b-1>=f&&(C|=a(A,b-1)<<4),C}s.prototype._parseHex=function(f,b,C){this.length=Math.ceil((f.length-b)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var M=0,F=0,q;if(C==="be")for(R=f.length-1;R>=b;R-=2)q=l(f,b,R)<<M,this.words[F]|=q&67108863,M>=18?(M-=18,F+=1,this.words[F]|=q>>>26):M+=8;else{var D=f.length-b;for(R=D%2===0?b+1:b;R<f.length;R+=2)q=l(f,b,R)<<M,this.words[F]|=q&67108863,M>=18?(M-=18,F+=1,this.words[F]|=q>>>26):M+=8}this._strip()};function c(A,f,b,C){for(var R=0,M=0,F=Math.min(A.length,b),q=f;q<F;q++){var D=A.charCodeAt(q)-48;R*=C,D>=49?M=D-49+10:D>=17?M=D-17+10:M=D,r(D>=0&&M<C,"Invalid character"),R+=M}return R}s.prototype._parseBase=function(f,b,C){this.words=[0],this.length=1;for(var R=0,M=1;M<=67108863;M*=b)R++;R--,M=M/b|0;for(var F=f.length-C,q=F%R,D=Math.min(F,F-q)+C,w=0,V=C;V<D;V+=R)w=c(f,V,V+R,b),this.imuln(M),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w);if(q!==0){var se=1;for(w=c(f,V,f.length,b),V=0;V<q;V++)se*=b;this.imuln(se),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w)}this._strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var b=0;b<this.length;b++)f.words[b]=this.words[b];f.length=this.length,f.negative=this.negative,f.red=this.red};function d(A,f){A.words=f.words,A.length=f.length,A.negative=f.negative,A.red=f.red}if(s.prototype._move=function(f){d(f,this)},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],k=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,b){f=f||10,b=b|0||1;var C;if(f===16||f==="hex"){C="";for(var R=0,M=0,F=0;F<this.length;F++){var q=this.words[F],D=((q<<R|M)&16777215).toString(16);M=q>>>24-R&16777215,R+=2,R>=26&&(R-=26,F--),M!==0||F!==this.length-1?C=m[6-D.length]+D+C:C=D+C}for(M!==0&&(C=M.toString(16)+C);C.length%b!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(f===(f|0)&&f>=2&&f<=36){var w=v[f],V=k[f];C="";var se=this.clone();for(se.negative=0;!se.isZero();){var le=se.modrn(V).toString(f);se=se.idivn(V),se.isZero()?C=le+C:C=m[w-le.length]+le+C}for(this.isZero()&&(C="0"+C);C.length%b!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(f,b){return this.toArrayLike(o,f,b)}),s.prototype.toArray=function(f,b){return this.toArrayLike(Array,f,b)};var S=function(f,b){return f.allocUnsafe?f.allocUnsafe(b):new f(b)};s.prototype.toArrayLike=function(f,b,C){this._strip();var R=this.byteLength(),M=C||Math.max(1,R);r(R<=M,"byte array longer than desired length"),r(M>0,"Requested array length <= 0");var F=S(f,M),q=b==="le"?"LE":"BE";return this["_toArrayLike"+q](F,R),F},s.prototype._toArrayLikeLE=function(f,b){for(var C=0,R=0,M=0,F=0;M<this.length;M++){var q=this.words[M]<<F|R;f[C++]=q&255,C<f.length&&(f[C++]=q>>8&255),C<f.length&&(f[C++]=q>>16&255),F===6?(C<f.length&&(f[C++]=q>>24&255),R=0,F=0):(R=q>>>24,F+=2)}if(C<f.length)for(f[C++]=R;C<f.length;)f[C++]=0},s.prototype._toArrayLikeBE=function(f,b){for(var C=f.length-1,R=0,M=0,F=0;M<this.length;M++){var q=this.words[M]<<F|R;f[C--]=q&255,C>=0&&(f[C--]=q>>8&255),C>=0&&(f[C--]=q>>16&255),F===6?(C>=0&&(f[C--]=q>>24&255),R=0,F=0):(R=q>>>24,F+=2)}if(C>=0)for(f[C--]=R;C>=0;)f[C--]=0},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var b=f,C=0;return b>=4096&&(C+=13,b>>>=13),b>=64&&(C+=7,b>>>=7),b>=8&&(C+=4,b>>>=4),b>=2&&(C+=2,b>>>=2),C+b},s.prototype._zeroBits=function(f){if(f===0)return 26;var b=f,C=0;return b&8191||(C+=13,b>>>=13),b&127||(C+=7,b>>>=7),b&15||(C+=4,b>>>=4),b&3||(C+=2,b>>>=2),b&1||C++,C},s.prototype.bitLength=function(){var f=this.words[this.length-1],b=this._countBits(f);return(this.length-1)*26+b};function _(A){for(var f=new Array(A.bitLength()),b=0;b<f.length;b++){var C=b/26|0,R=b%26;f[b]=A.words[C]>>>R&1}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,b=0;b<this.length;b++){var C=this._zeroBits(this.words[b]);if(f+=C,C!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var b=0;b<f.length;b++)this.words[b]=this.words[b]|f.words[b];return this._strip()},s.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var b;this.length>f.length?b=f:b=this;for(var C=0;C<b.length;C++)this.words[C]=this.words[C]&f.words[C];return this.length=b.length,this._strip()},s.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var b,C;this.length>f.length?(b=this,C=f):(b=f,C=this);for(var R=0;R<C.length;R++)this.words[R]=b.words[R]^C.words[R];if(this!==b)for(;R<b.length;R++)this.words[R]=b.words[R];return this.length=b.length,this._strip()},s.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var b=Math.ceil(f/26)|0,C=f%26;this._expand(b),C>0&&b--;for(var R=0;R<b;R++)this.words[R]=~this.words[R]&67108863;return C>0&&(this.words[R]=~this.words[R]&67108863>>26-C),this._strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,b){r(typeof f=="number"&&f>=0);var C=f/26|0,R=f%26;return this._expand(C+1),b?this.words[C]=this.words[C]|1<<R:this.words[C]=this.words[C]&~(1<<R),this._strip()},s.prototype.iadd=function(f){var b;if(this.negative!==0&&f.negative===0)return this.negative=0,b=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,b=this.isub(f),f.negative=1,b._normSign();var C,R;this.length>f.length?(C=this,R=f):(C=f,R=this);for(var M=0,F=0;F<R.length;F++)b=(C.words[F]|0)+(R.words[F]|0)+M,this.words[F]=b&67108863,M=b>>>26;for(;M!==0&&F<C.length;F++)b=(C.words[F]|0)+M,this.words[F]=b&67108863,M=b>>>26;if(this.length=C.length,M!==0)this.words[this.length]=M,this.length++;else if(C!==this)for(;F<C.length;F++)this.words[F]=C.words[F];return this},s.prototype.add=function(f){var b;return f.negative!==0&&this.negative===0?(f.negative=0,b=this.sub(f),f.negative^=1,b):f.negative===0&&this.negative!==0?(this.negative=0,b=f.sub(this),this.negative=1,b):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var b=this.iadd(f);return f.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var C=this.cmp(f);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,M;C>0?(R=this,M=f):(R=f,M=this);for(var F=0,q=0;q<M.length;q++)b=(R.words[q]|0)-(M.words[q]|0)+F,F=b>>26,this.words[q]=b&67108863;for(;F!==0&&q<R.length;q++)b=(R.words[q]|0)+F,F=b>>26,this.words[q]=b&67108863;if(F===0&&q<R.length&&R!==this)for(;q<R.length;q++)this.words[q]=R.words[q];return this.length=Math.max(this.length,q),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function T(A,f,b){b.negative=f.negative^A.negative;var C=A.length+f.length|0;b.length=C,C=C-1|0;var R=A.words[0]|0,M=f.words[0]|0,F=R*M,q=F&67108863,D=F/67108864|0;b.words[0]=q;for(var w=1;w<C;w++){for(var V=D>>>26,se=D&67108863,le=Math.min(w,f.length-1),de=Math.max(0,w-A.length+1);de<=le;de++){var Ae=w-de|0;R=A.words[Ae]|0,M=f.words[de]|0,F=R*M+se,V+=F/67108864|0,se=F&67108863}b.words[w]=se|0,D=V|0}return D!==0?b.words[w]=D|0:b.length--,b._strip()}var I=function(f,b,C){var R=f.words,M=b.words,F=C.words,q=0,D,w,V,se=R[0]|0,le=se&8191,de=se>>>13,Ae=R[1]|0,Ie=Ae&8191,Ce=Ae>>>13,vt=R[2]|0,Ue=vt&8191,Oe=vt>>>13,jt=R[3]|0,qe=jt&8191,Ge=jt>>>13,Vi=R[4]|0,yt=Vi&8191,bt=Vi>>>13,zi=R[5]|0,ct=zi&8191,st=zi>>>13,vn=R[6]|0,ot=vn&8191,ut=vn>>>13,Mn=R[7]|0,Fe=Mn&8191,P=Mn>>>13,y=R[8]|0,x=y&8191,z=y>>>13,Q=R[9]|0,Z=Q&8191,te=Q>>>13,je=M[0]|0,Me=je&8191,Re=je>>>13,_t=M[1]|0,ke=_t&8191,Wt=_t>>>13,Tc=M[2]|0,It=Tc&8191,Bt=Tc>>>13,Ba=M[3]|0,wt=Ba&8191,$t=Ba>>>13,Lo=M[4]|0,qt=Lo&8191,St=Lo>>>13,Ac=M[5]|0,Ye=Ac&8191,Ht=Ac>>>13,Cs=M[6]|0,kt=Cs&8191,tn=Cs>>>13,zd=M[7]|0,xt=zd&8191,nn=zd>>>13,Wd=M[8]|0,Nt=Wd&8191,Kt=Wd>>>13,Ua=M[9]|0,Ct=Ua&8191,dt=Ua>>>13;C.negative=f.negative^b.negative,C.length=19,D=Math.imul(le,Me),w=Math.imul(le,Re),w=w+Math.imul(de,Me)|0,V=Math.imul(de,Re);var Fa=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Fa>>>26)|0,Fa&=67108863,D=Math.imul(Ie,Me),w=Math.imul(Ie,Re),w=w+Math.imul(Ce,Me)|0,V=Math.imul(Ce,Re),D=D+Math.imul(le,ke)|0,w=w+Math.imul(le,Wt)|0,w=w+Math.imul(de,ke)|0,V=V+Math.imul(de,Wt)|0;var Va=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Va>>>26)|0,Va&=67108863,D=Math.imul(Ue,Me),w=Math.imul(Ue,Re),w=w+Math.imul(Oe,Me)|0,V=Math.imul(Oe,Re),D=D+Math.imul(Ie,ke)|0,w=w+Math.imul(Ie,Wt)|0,w=w+Math.imul(Ce,ke)|0,V=V+Math.imul(Ce,Wt)|0,D=D+Math.imul(le,It)|0,w=w+Math.imul(le,Bt)|0,w=w+Math.imul(de,It)|0,V=V+Math.imul(de,Bt)|0;var Do=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Do>>>26)|0,Do&=67108863,D=Math.imul(qe,Me),w=Math.imul(qe,Re),w=w+Math.imul(Ge,Me)|0,V=Math.imul(Ge,Re),D=D+Math.imul(Ue,ke)|0,w=w+Math.imul(Ue,Wt)|0,w=w+Math.imul(Oe,ke)|0,V=V+Math.imul(Oe,Wt)|0,D=D+Math.imul(Ie,It)|0,w=w+Math.imul(Ie,Bt)|0,w=w+Math.imul(Ce,It)|0,V=V+Math.imul(Ce,Bt)|0,D=D+Math.imul(le,wt)|0,w=w+Math.imul(le,$t)|0,w=w+Math.imul(de,wt)|0,V=V+Math.imul(de,$t)|0;var Oo=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Oo>>>26)|0,Oo&=67108863,D=Math.imul(yt,Me),w=Math.imul(yt,Re),w=w+Math.imul(bt,Me)|0,V=Math.imul(bt,Re),D=D+Math.imul(qe,ke)|0,w=w+Math.imul(qe,Wt)|0,w=w+Math.imul(Ge,ke)|0,V=V+Math.imul(Ge,Wt)|0,D=D+Math.imul(Ue,It)|0,w=w+Math.imul(Ue,Bt)|0,w=w+Math.imul(Oe,It)|0,V=V+Math.imul(Oe,Bt)|0,D=D+Math.imul(Ie,wt)|0,w=w+Math.imul(Ie,$t)|0,w=w+Math.imul(Ce,wt)|0,V=V+Math.imul(Ce,$t)|0,D=D+Math.imul(le,qt)|0,w=w+Math.imul(le,St)|0,w=w+Math.imul(de,qt)|0,V=V+Math.imul(de,St)|0;var za=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(za>>>26)|0,za&=67108863,D=Math.imul(ct,Me),w=Math.imul(ct,Re),w=w+Math.imul(st,Me)|0,V=Math.imul(st,Re),D=D+Math.imul(yt,ke)|0,w=w+Math.imul(yt,Wt)|0,w=w+Math.imul(bt,ke)|0,V=V+Math.imul(bt,Wt)|0,D=D+Math.imul(qe,It)|0,w=w+Math.imul(qe,Bt)|0,w=w+Math.imul(Ge,It)|0,V=V+Math.imul(Ge,Bt)|0,D=D+Math.imul(Ue,wt)|0,w=w+Math.imul(Ue,$t)|0,w=w+Math.imul(Oe,wt)|0,V=V+Math.imul(Oe,$t)|0,D=D+Math.imul(Ie,qt)|0,w=w+Math.imul(Ie,St)|0,w=w+Math.imul(Ce,qt)|0,V=V+Math.imul(Ce,St)|0,D=D+Math.imul(le,Ye)|0,w=w+Math.imul(le,Ht)|0,w=w+Math.imul(de,Ye)|0,V=V+Math.imul(de,Ht)|0;var Wa=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Wa>>>26)|0,Wa&=67108863,D=Math.imul(ot,Me),w=Math.imul(ot,Re),w=w+Math.imul(ut,Me)|0,V=Math.imul(ut,Re),D=D+Math.imul(ct,ke)|0,w=w+Math.imul(ct,Wt)|0,w=w+Math.imul(st,ke)|0,V=V+Math.imul(st,Wt)|0,D=D+Math.imul(yt,It)|0,w=w+Math.imul(yt,Bt)|0,w=w+Math.imul(bt,It)|0,V=V+Math.imul(bt,Bt)|0,D=D+Math.imul(qe,wt)|0,w=w+Math.imul(qe,$t)|0,w=w+Math.imul(Ge,wt)|0,V=V+Math.imul(Ge,$t)|0,D=D+Math.imul(Ue,qt)|0,w=w+Math.imul(Ue,St)|0,w=w+Math.imul(Oe,qt)|0,V=V+Math.imul(Oe,St)|0,D=D+Math.imul(Ie,Ye)|0,w=w+Math.imul(Ie,Ht)|0,w=w+Math.imul(Ce,Ye)|0,V=V+Math.imul(Ce,Ht)|0,D=D+Math.imul(le,kt)|0,w=w+Math.imul(le,tn)|0,w=w+Math.imul(de,kt)|0,V=V+Math.imul(de,tn)|0;var Nc=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Nc>>>26)|0,Nc&=67108863,D=Math.imul(Fe,Me),w=Math.imul(Fe,Re),w=w+Math.imul(P,Me)|0,V=Math.imul(P,Re),D=D+Math.imul(ot,ke)|0,w=w+Math.imul(ot,Wt)|0,w=w+Math.imul(ut,ke)|0,V=V+Math.imul(ut,Wt)|0,D=D+Math.imul(ct,It)|0,w=w+Math.imul(ct,Bt)|0,w=w+Math.imul(st,It)|0,V=V+Math.imul(st,Bt)|0,D=D+Math.imul(yt,wt)|0,w=w+Math.imul(yt,$t)|0,w=w+Math.imul(bt,wt)|0,V=V+Math.imul(bt,$t)|0,D=D+Math.imul(qe,qt)|0,w=w+Math.imul(qe,St)|0,w=w+Math.imul(Ge,qt)|0,V=V+Math.imul(Ge,St)|0,D=D+Math.imul(Ue,Ye)|0,w=w+Math.imul(Ue,Ht)|0,w=w+Math.imul(Oe,Ye)|0,V=V+Math.imul(Oe,Ht)|0,D=D+Math.imul(Ie,kt)|0,w=w+Math.imul(Ie,tn)|0,w=w+Math.imul(Ce,kt)|0,V=V+Math.imul(Ce,tn)|0,D=D+Math.imul(le,xt)|0,w=w+Math.imul(le,nn)|0,w=w+Math.imul(de,xt)|0,V=V+Math.imul(de,nn)|0;var Ms=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,D=Math.imul(x,Me),w=Math.imul(x,Re),w=w+Math.imul(z,Me)|0,V=Math.imul(z,Re),D=D+Math.imul(Fe,ke)|0,w=w+Math.imul(Fe,Wt)|0,w=w+Math.imul(P,ke)|0,V=V+Math.imul(P,Wt)|0,D=D+Math.imul(ot,It)|0,w=w+Math.imul(ot,Bt)|0,w=w+Math.imul(ut,It)|0,V=V+Math.imul(ut,Bt)|0,D=D+Math.imul(ct,wt)|0,w=w+Math.imul(ct,$t)|0,w=w+Math.imul(st,wt)|0,V=V+Math.imul(st,$t)|0,D=D+Math.imul(yt,qt)|0,w=w+Math.imul(yt,St)|0,w=w+Math.imul(bt,qt)|0,V=V+Math.imul(bt,St)|0,D=D+Math.imul(qe,Ye)|0,w=w+Math.imul(qe,Ht)|0,w=w+Math.imul(Ge,Ye)|0,V=V+Math.imul(Ge,Ht)|0,D=D+Math.imul(Ue,kt)|0,w=w+Math.imul(Ue,tn)|0,w=w+Math.imul(Oe,kt)|0,V=V+Math.imul(Oe,tn)|0,D=D+Math.imul(Ie,xt)|0,w=w+Math.imul(Ie,nn)|0,w=w+Math.imul(Ce,xt)|0,V=V+Math.imul(Ce,nn)|0,D=D+Math.imul(le,Nt)|0,w=w+Math.imul(le,Kt)|0,w=w+Math.imul(de,Nt)|0,V=V+Math.imul(de,Kt)|0;var $a=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+($a>>>26)|0,$a&=67108863,D=Math.imul(Z,Me),w=Math.imul(Z,Re),w=w+Math.imul(te,Me)|0,V=Math.imul(te,Re),D=D+Math.imul(x,ke)|0,w=w+Math.imul(x,Wt)|0,w=w+Math.imul(z,ke)|0,V=V+Math.imul(z,Wt)|0,D=D+Math.imul(Fe,It)|0,w=w+Math.imul(Fe,Bt)|0,w=w+Math.imul(P,It)|0,V=V+Math.imul(P,Bt)|0,D=D+Math.imul(ot,wt)|0,w=w+Math.imul(ot,$t)|0,w=w+Math.imul(ut,wt)|0,V=V+Math.imul(ut,$t)|0,D=D+Math.imul(ct,qt)|0,w=w+Math.imul(ct,St)|0,w=w+Math.imul(st,qt)|0,V=V+Math.imul(st,St)|0,D=D+Math.imul(yt,Ye)|0,w=w+Math.imul(yt,Ht)|0,w=w+Math.imul(bt,Ye)|0,V=V+Math.imul(bt,Ht)|0,D=D+Math.imul(qe,kt)|0,w=w+Math.imul(qe,tn)|0,w=w+Math.imul(Ge,kt)|0,V=V+Math.imul(Ge,tn)|0,D=D+Math.imul(Ue,xt)|0,w=w+Math.imul(Ue,nn)|0,w=w+Math.imul(Oe,xt)|0,V=V+Math.imul(Oe,nn)|0,D=D+Math.imul(Ie,Nt)|0,w=w+Math.imul(Ie,Kt)|0,w=w+Math.imul(Ce,Nt)|0,V=V+Math.imul(Ce,Kt)|0,D=D+Math.imul(le,Ct)|0,w=w+Math.imul(le,dt)|0,w=w+Math.imul(de,Ct)|0,V=V+Math.imul(de,dt)|0;var jo=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(jo>>>26)|0,jo&=67108863,D=Math.imul(Z,ke),w=Math.imul(Z,Wt),w=w+Math.imul(te,ke)|0,V=Math.imul(te,Wt),D=D+Math.imul(x,It)|0,w=w+Math.imul(x,Bt)|0,w=w+Math.imul(z,It)|0,V=V+Math.imul(z,Bt)|0,D=D+Math.imul(Fe,wt)|0,w=w+Math.imul(Fe,$t)|0,w=w+Math.imul(P,wt)|0,V=V+Math.imul(P,$t)|0,D=D+Math.imul(ot,qt)|0,w=w+Math.imul(ot,St)|0,w=w+Math.imul(ut,qt)|0,V=V+Math.imul(ut,St)|0,D=D+Math.imul(ct,Ye)|0,w=w+Math.imul(ct,Ht)|0,w=w+Math.imul(st,Ye)|0,V=V+Math.imul(st,Ht)|0,D=D+Math.imul(yt,kt)|0,w=w+Math.imul(yt,tn)|0,w=w+Math.imul(bt,kt)|0,V=V+Math.imul(bt,tn)|0,D=D+Math.imul(qe,xt)|0,w=w+Math.imul(qe,nn)|0,w=w+Math.imul(Ge,xt)|0,V=V+Math.imul(Ge,nn)|0,D=D+Math.imul(Ue,Nt)|0,w=w+Math.imul(Ue,Kt)|0,w=w+Math.imul(Oe,Nt)|0,V=V+Math.imul(Oe,Kt)|0,D=D+Math.imul(Ie,Ct)|0,w=w+Math.imul(Ie,dt)|0,w=w+Math.imul(Ce,Ct)|0,V=V+Math.imul(Ce,dt)|0;var Wi=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,D=Math.imul(Z,It),w=Math.imul(Z,Bt),w=w+Math.imul(te,It)|0,V=Math.imul(te,Bt),D=D+Math.imul(x,wt)|0,w=w+Math.imul(x,$t)|0,w=w+Math.imul(z,wt)|0,V=V+Math.imul(z,$t)|0,D=D+Math.imul(Fe,qt)|0,w=w+Math.imul(Fe,St)|0,w=w+Math.imul(P,qt)|0,V=V+Math.imul(P,St)|0,D=D+Math.imul(ot,Ye)|0,w=w+Math.imul(ot,Ht)|0,w=w+Math.imul(ut,Ye)|0,V=V+Math.imul(ut,Ht)|0,D=D+Math.imul(ct,kt)|0,w=w+Math.imul(ct,tn)|0,w=w+Math.imul(st,kt)|0,V=V+Math.imul(st,tn)|0,D=D+Math.imul(yt,xt)|0,w=w+Math.imul(yt,nn)|0,w=w+Math.imul(bt,xt)|0,V=V+Math.imul(bt,nn)|0,D=D+Math.imul(qe,Nt)|0,w=w+Math.imul(qe,Kt)|0,w=w+Math.imul(Ge,Nt)|0,V=V+Math.imul(Ge,Kt)|0,D=D+Math.imul(Ue,Ct)|0,w=w+Math.imul(Ue,dt)|0,w=w+Math.imul(Oe,Ct)|0,V=V+Math.imul(Oe,dt)|0;var Qr=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,D=Math.imul(Z,wt),w=Math.imul(Z,$t),w=w+Math.imul(te,wt)|0,V=Math.imul(te,$t),D=D+Math.imul(x,qt)|0,w=w+Math.imul(x,St)|0,w=w+Math.imul(z,qt)|0,V=V+Math.imul(z,St)|0,D=D+Math.imul(Fe,Ye)|0,w=w+Math.imul(Fe,Ht)|0,w=w+Math.imul(P,Ye)|0,V=V+Math.imul(P,Ht)|0,D=D+Math.imul(ot,kt)|0,w=w+Math.imul(ot,tn)|0,w=w+Math.imul(ut,kt)|0,V=V+Math.imul(ut,tn)|0,D=D+Math.imul(ct,xt)|0,w=w+Math.imul(ct,nn)|0,w=w+Math.imul(st,xt)|0,V=V+Math.imul(st,nn)|0,D=D+Math.imul(yt,Nt)|0,w=w+Math.imul(yt,Kt)|0,w=w+Math.imul(bt,Nt)|0,V=V+Math.imul(bt,Kt)|0,D=D+Math.imul(qe,Ct)|0,w=w+Math.imul(qe,dt)|0,w=w+Math.imul(Ge,Ct)|0,V=V+Math.imul(Ge,dt)|0;var Bo=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Bo>>>26)|0,Bo&=67108863,D=Math.imul(Z,qt),w=Math.imul(Z,St),w=w+Math.imul(te,qt)|0,V=Math.imul(te,St),D=D+Math.imul(x,Ye)|0,w=w+Math.imul(x,Ht)|0,w=w+Math.imul(z,Ye)|0,V=V+Math.imul(z,Ht)|0,D=D+Math.imul(Fe,kt)|0,w=w+Math.imul(Fe,tn)|0,w=w+Math.imul(P,kt)|0,V=V+Math.imul(P,tn)|0,D=D+Math.imul(ot,xt)|0,w=w+Math.imul(ot,nn)|0,w=w+Math.imul(ut,xt)|0,V=V+Math.imul(ut,nn)|0,D=D+Math.imul(ct,Nt)|0,w=w+Math.imul(ct,Kt)|0,w=w+Math.imul(st,Nt)|0,V=V+Math.imul(st,Kt)|0,D=D+Math.imul(yt,Ct)|0,w=w+Math.imul(yt,dt)|0,w=w+Math.imul(bt,Ct)|0,V=V+Math.imul(bt,dt)|0;var Cc=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Cc>>>26)|0,Cc&=67108863,D=Math.imul(Z,Ye),w=Math.imul(Z,Ht),w=w+Math.imul(te,Ye)|0,V=Math.imul(te,Ht),D=D+Math.imul(x,kt)|0,w=w+Math.imul(x,tn)|0,w=w+Math.imul(z,kt)|0,V=V+Math.imul(z,tn)|0,D=D+Math.imul(Fe,xt)|0,w=w+Math.imul(Fe,nn)|0,w=w+Math.imul(P,xt)|0,V=V+Math.imul(P,nn)|0,D=D+Math.imul(ot,Nt)|0,w=w+Math.imul(ot,Kt)|0,w=w+Math.imul(ut,Nt)|0,V=V+Math.imul(ut,Kt)|0,D=D+Math.imul(ct,Ct)|0,w=w+Math.imul(ct,dt)|0,w=w+Math.imul(st,Ct)|0,V=V+Math.imul(st,dt)|0;var qa=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(qa>>>26)|0,qa&=67108863,D=Math.imul(Z,kt),w=Math.imul(Z,tn),w=w+Math.imul(te,kt)|0,V=Math.imul(te,tn),D=D+Math.imul(x,xt)|0,w=w+Math.imul(x,nn)|0,w=w+Math.imul(z,xt)|0,V=V+Math.imul(z,nn)|0,D=D+Math.imul(Fe,Nt)|0,w=w+Math.imul(Fe,Kt)|0,w=w+Math.imul(P,Nt)|0,V=V+Math.imul(P,Kt)|0,D=D+Math.imul(ot,Ct)|0,w=w+Math.imul(ot,dt)|0,w=w+Math.imul(ut,Ct)|0,V=V+Math.imul(ut,dt)|0;var Ha=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Ha>>>26)|0,Ha&=67108863,D=Math.imul(Z,xt),w=Math.imul(Z,nn),w=w+Math.imul(te,xt)|0,V=Math.imul(te,nn),D=D+Math.imul(x,Nt)|0,w=w+Math.imul(x,Kt)|0,w=w+Math.imul(z,Nt)|0,V=V+Math.imul(z,Kt)|0,D=D+Math.imul(Fe,Ct)|0,w=w+Math.imul(Fe,dt)|0,w=w+Math.imul(P,Ct)|0,V=V+Math.imul(P,dt)|0;var Ka=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Ka>>>26)|0,Ka&=67108863,D=Math.imul(Z,Nt),w=Math.imul(Z,Kt),w=w+Math.imul(te,Nt)|0,V=Math.imul(te,Kt),D=D+Math.imul(x,Ct)|0,w=w+Math.imul(x,dt)|0,w=w+Math.imul(z,Ct)|0,V=V+Math.imul(z,dt)|0;var Uo=(q+D|0)+((w&8191)<<13)|0;q=(V+(w>>>13)|0)+(Uo>>>26)|0,Uo&=67108863,D=Math.imul(Z,Ct),w=Math.imul(Z,dt),w=w+Math.imul(te,Ct)|0,V=Math.imul(te,dt);var Fo=(q+D|0)+((w&8191)<<13)|0;return q=(V+(w>>>13)|0)+(Fo>>>26)|0,Fo&=67108863,F[0]=Fa,F[1]=Va,F[2]=Do,F[3]=Oo,F[4]=za,F[5]=Wa,F[6]=Nc,F[7]=Ms,F[8]=$a,F[9]=jo,F[10]=Wi,F[11]=Qr,F[12]=Bo,F[13]=Cc,F[14]=qa,F[15]=Ha,F[16]=Ka,F[17]=Uo,F[18]=Fo,q!==0&&(F[19]=q,C.length++),C};Math.imul||(I=T);function E(A,f,b){b.negative=f.negative^A.negative,b.length=A.length+f.length;for(var C=0,R=0,M=0;M<b.length-1;M++){var F=R;R=0;for(var q=C&67108863,D=Math.min(M,f.length-1),w=Math.max(0,M-A.length+1);w<=D;w++){var V=M-w,se=A.words[V]|0,le=f.words[w]|0,de=se*le,Ae=de&67108863;F=F+(de/67108864|0)|0,Ae=Ae+q|0,q=Ae&67108863,F=F+(Ae>>>26)|0,R+=F>>>26,F&=67108863}b.words[M]=q,C=F,F=R}return C!==0?b.words[M]=C:b.length--,b._strip()}function j(A,f,b){return E(A,f,b)}s.prototype.mulTo=function(f,b){var C,R=this.length+f.length;return this.length===10&&f.length===10?C=I(this,f,b):R<63?C=T(this,f,b):R<1024?C=E(this,f,b):C=j(this,f,b),C},s.prototype.mul=function(f){var b=new s(null);return b.words=new Array(this.length+f.length),this.mulTo(f,b)},s.prototype.mulf=function(f){var b=new s(null);return b.words=new Array(this.length+f.length),j(this,f,b)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){var b=f<0;b&&(f=-f),r(typeof f=="number"),r(f<67108864);for(var C=0,R=0;R<this.length;R++){var M=(this.words[R]|0)*f,F=(M&67108863)+(C&67108863);C>>=26,C+=M/67108864|0,C+=F>>>26,this.words[R]=F&67108863}return C!==0&&(this.words[R]=C,this.length++),b?this.ineg():this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var b=_(f);if(b.length===0)return new s(1);for(var C=this,R=0;R<b.length&&b[R]===0;R++,C=C.sqr());if(++R<b.length)for(var M=C.sqr();R<b.length;R++,M=M.sqr())b[R]!==0&&(C=C.mul(M));return C},s.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var b=f%26,C=(f-b)/26,R=67108863>>>26-b<<26-b,M;if(b!==0){var F=0;for(M=0;M<this.length;M++){var q=this.words[M]&R,D=(this.words[M]|0)-q<<b;this.words[M]=D|F,F=q>>>26-b}F&&(this.words[M]=F,this.length++)}if(C!==0){for(M=this.length-1;M>=0;M--)this.words[M+C]=this.words[M];for(M=0;M<C;M++)this.words[M]=0;this.length+=C}return this._strip()},s.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,b,C){r(typeof f=="number"&&f>=0);var R;b?R=(b-b%26)/26:R=0;var M=f%26,F=Math.min((f-M)/26,this.length),q=67108863^67108863>>>M<<M,D=C;if(R-=F,R=Math.max(0,R),D){for(var w=0;w<F;w++)D.words[w]=this.words[w];D.length=F}if(F!==0)if(this.length>F)for(this.length-=F,w=0;w<this.length;w++)this.words[w]=this.words[w+F];else this.words[0]=0,this.length=1;var V=0;for(w=this.length-1;w>=0&&(V!==0||w>=R);w--){var se=this.words[w]|0;this.words[w]=V<<26-M|se>>>M,V=se&q}return D&&V!==0&&(D.words[D.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(f,b,C){return r(this.negative===0),this.iushrn(f,b,C)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var b=f%26,C=(f-b)/26,R=1<<b;if(this.length<=C)return!1;var M=this.words[C];return!!(M&R)},s.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var b=f%26,C=(f-b)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(b!==0&&C++,this.length=Math.min(C,this.length),b!==0){var R=67108863^67108863>>>b<<b;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,b,C){var R=f.length+C,M;this._expand(R);var F,q=0;for(M=0;M<f.length;M++){F=(this.words[M+C]|0)+q;var D=(f.words[M]|0)*b;F-=D&67108863,q=(F>>26)-(D/67108864|0),this.words[M+C]=F&67108863}for(;M<this.length-C;M++)F=(this.words[M+C]|0)+q,q=F>>26,this.words[M+C]=F&67108863;if(q===0)return this._strip();for(r(q===-1),q=0,M=0;M<this.length;M++)F=-(this.words[M]|0)+q,q=F>>26,this.words[M]=F&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(f,b){var C=this.length-f.length,R=this.clone(),M=f,F=M.words[M.length-1]|0,q=this._countBits(F);C=26-q,C!==0&&(M=M.ushln(C),R.iushln(C),F=M.words[M.length-1]|0);var D=R.length-M.length,w;if(b!=="mod"){w=new s(null),w.length=D+1,w.words=new Array(w.length);for(var V=0;V<w.length;V++)w.words[V]=0}var se=R.clone()._ishlnsubmul(M,1,D);se.negative===0&&(R=se,w&&(w.words[D]=1));for(var le=D-1;le>=0;le--){var de=(R.words[M.length+le]|0)*67108864+(R.words[M.length+le-1]|0);for(de=Math.min(de/F|0,67108863),R._ishlnsubmul(M,de,le);R.negative!==0;)de--,R.negative=0,R._ishlnsubmul(M,1,le),R.isZero()||(R.negative^=1);w&&(w.words[le]=de)}return w&&w._strip(),R._strip(),b!=="div"&&C!==0&&R.iushrn(C),{div:w||null,mod:R}},s.prototype.divmod=function(f,b,C){if(r(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,M,F;return this.negative!==0&&f.negative===0?(F=this.neg().divmod(f,b),b!=="mod"&&(R=F.div.neg()),b!=="div"&&(M=F.mod.neg(),C&&M.negative!==0&&M.iadd(f)),{div:R,mod:M}):this.negative===0&&f.negative!==0?(F=this.divmod(f.neg(),b),b!=="mod"&&(R=F.div.neg()),{div:R,mod:F.mod}):this.negative&f.negative?(F=this.neg().divmod(f.neg(),b),b!=="div"&&(M=F.mod.neg(),C&&M.negative!==0&&M.isub(f)),{div:F.div,mod:M}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?b==="div"?{div:this.divn(f.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modrn(f.words[0]))}:this._wordDiv(f,b)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var b=this.divmod(f);if(b.mod.isZero())return b.div;var C=b.div.negative!==0?b.mod.isub(f):b.mod,R=f.ushrn(1),M=f.andln(1),F=C.cmp(R);return F<0||M===1&&F===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modrn=function(f){var b=f<0;b&&(f=-f),r(f<=67108863);for(var C=(1<<26)%f,R=0,M=this.length-1;M>=0;M--)R=(C*R+(this.words[M]|0))%f;return b?-R:R},s.prototype.modn=function(f){return this.modrn(f)},s.prototype.idivn=function(f){var b=f<0;b&&(f=-f),r(f<=67108863);for(var C=0,R=this.length-1;R>=0;R--){var M=(this.words[R]|0)+C*67108864;this.words[R]=M/f|0,C=M%f}return this._strip(),b?this.ineg():this},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var b=this,C=f.clone();b.negative!==0?b=b.umod(f):b=b.clone();for(var R=new s(1),M=new s(0),F=new s(0),q=new s(1),D=0;b.isEven()&&C.isEven();)b.iushrn(1),C.iushrn(1),++D;for(var w=C.clone(),V=b.clone();!b.isZero();){for(var se=0,le=1;!(b.words[0]&le)&&se<26;++se,le<<=1);if(se>0)for(b.iushrn(se);se-- >0;)(R.isOdd()||M.isOdd())&&(R.iadd(w),M.isub(V)),R.iushrn(1),M.iushrn(1);for(var de=0,Ae=1;!(C.words[0]&Ae)&&de<26;++de,Ae<<=1);if(de>0)for(C.iushrn(de);de-- >0;)(F.isOdd()||q.isOdd())&&(F.iadd(w),q.isub(V)),F.iushrn(1),q.iushrn(1);b.cmp(C)>=0?(b.isub(C),R.isub(F),M.isub(q)):(C.isub(b),F.isub(R),q.isub(M))}return{a:F,b:q,gcd:C.iushln(D)}},s.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var b=this,C=f.clone();b.negative!==0?b=b.umod(f):b=b.clone();for(var R=new s(1),M=new s(0),F=C.clone();b.cmpn(1)>0&&C.cmpn(1)>0;){for(var q=0,D=1;!(b.words[0]&D)&&q<26;++q,D<<=1);if(q>0)for(b.iushrn(q);q-- >0;)R.isOdd()&&R.iadd(F),R.iushrn(1);for(var w=0,V=1;!(C.words[0]&V)&&w<26;++w,V<<=1);if(w>0)for(C.iushrn(w);w-- >0;)M.isOdd()&&M.iadd(F),M.iushrn(1);b.cmp(C)>=0?(b.isub(C),R.isub(M)):(C.isub(b),M.isub(R))}var se;return b.cmpn(1)===0?se=R:se=M,se.cmpn(0)<0&&se.iadd(f),se},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var b=this.clone(),C=f.clone();b.negative=0,C.negative=0;for(var R=0;b.isEven()&&C.isEven();R++)b.iushrn(1),C.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;C.isEven();)C.iushrn(1);var M=b.cmp(C);if(M<0){var F=b;b=C,C=F}else if(M===0||C.cmpn(1)===0)break;b.isub(C)}while(!0);return C.iushln(R)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){r(typeof f=="number");var b=f%26,C=(f-b)/26,R=1<<b;if(this.length<=C)return this._expand(C+1),this.words[C]|=R,this;for(var M=R,F=C;M!==0&&F<this.length;F++){var q=this.words[F]|0;q+=M,M=q>>>26,q&=67108863,this.words[F]=q}return M!==0&&(this.words[F]=M,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var b=f<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var C;if(this.length>1)C=1;else{b&&(f=-f),r(f<=67108863,"Number is too big");var R=this.words[0]|0;C=R===f?0:R<f?-1:1}return this.negative!==0?-C|0:C},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var b=this.ucmp(f);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var b=0,C=this.length-1;C>=0;C--){var R=this.words[C]|0,M=f.words[C]|0;if(R!==M){R<M?b=-1:R>M&&(b=1);break}}return b},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new $(f)},s.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var K={k256:null,p224:null,p192:null,p25519:null};function G(A,f){this.name=A,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},G.prototype.ireduce=function(f){var b=f,C;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),C=b.bitLength();while(C>this.n);var R=C<this.n?-1:b.ucmp(this.p);return R===0?(b.words[0]=0,b.length=1):R>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},G.prototype.split=function(f,b){f.iushrn(this.n,0,b)},G.prototype.imulK=function(f){return f.imul(this.k)};function O(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(O,G),O.prototype.split=function(f,b){for(var C=4194303,R=Math.min(f.length,9),M=0;M<R;M++)b.words[M]=f.words[M];if(b.length=R,f.length<=9){f.words[0]=0,f.length=1;return}var F=f.words[9];for(b.words[b.length++]=F&C,M=10;M<f.length;M++){var q=f.words[M]|0;f.words[M-10]=(q&C)<<4|F>>>22,F=q}F>>>=22,f.words[M-10]=F,F===0&&f.length>10?f.length-=10:f.length-=9},O.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var b=0,C=0;C<f.length;C++){var R=f.words[C]|0;b+=R*977,f.words[C]=b&67108863,b=R*64+(b/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function L(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(L,G);function B(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,G);function W(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(W,G),W.prototype.imulK=function(f){for(var b=0,C=0;C<f.length;C++){var R=(f.words[C]|0)*19+b,M=R&67108863;R>>>=26,f.words[C]=M,b=R}return b!==0&&(f.words[f.length++]=b),f},s._prime=function(f){if(K[f])return K[f];var b;if(f==="k256")b=new O;else if(f==="p224")b=new L;else if(f==="p192")b=new B;else if(f==="p25519")b=new W;else throw new Error("Unknown prime "+f);return K[f]=b,b};function $(A){if(typeof A=="string"){var f=s._prime(A);this.m=f.p,this.prime=f}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}$.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},$.prototype._verify2=function(f,b){r((f.negative|b.negative)===0,"red works only with positives"),r(f.red&&f.red===b.red,"red works only with red numbers")},$.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(d(f,f.umod(this.m)._forceRed(this)),f)},$.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},$.prototype.add=function(f,b){this._verify2(f,b);var C=f.add(b);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},$.prototype.iadd=function(f,b){this._verify2(f,b);var C=f.iadd(b);return C.cmp(this.m)>=0&&C.isub(this.m),C},$.prototype.sub=function(f,b){this._verify2(f,b);var C=f.sub(b);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},$.prototype.isub=function(f,b){this._verify2(f,b);var C=f.isub(b);return C.cmpn(0)<0&&C.iadd(this.m),C},$.prototype.shl=function(f,b){return this._verify1(f),this.imod(f.ushln(b))},$.prototype.imul=function(f,b){return this._verify2(f,b),this.imod(f.imul(b))},$.prototype.mul=function(f,b){return this._verify2(f,b),this.imod(f.mul(b))},$.prototype.isqr=function(f){return this.imul(f,f.clone())},$.prototype.sqr=function(f){return this.mul(f,f)},$.prototype.sqrt=function(f){if(f.isZero())return f.clone();var b=this.m.andln(3);if(r(b%2===1),b===3){var C=this.m.add(new s(1)).iushrn(2);return this.pow(f,C)}for(var R=this.m.subn(1),M=0;!R.isZero()&&R.andln(1)===0;)M++,R.iushrn(1);r(!R.isZero());var F=new s(1).toRed(this),q=F.redNeg(),D=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new s(2*w*w).toRed(this);this.pow(w,D).cmp(q)!==0;)w.redIAdd(q);for(var V=this.pow(w,R),se=this.pow(f,R.addn(1).iushrn(1)),le=this.pow(f,R),de=M;le.cmp(F)!==0;){for(var Ae=le,Ie=0;Ae.cmp(F)!==0;Ie++)Ae=Ae.redSqr();r(Ie<de);var Ce=this.pow(V,new s(1).iushln(de-Ie-1));se=se.redMul(Ce),V=Ce.redSqr(),le=le.redMul(V),de=Ie}return se},$.prototype.invm=function(f){var b=f._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},$.prototype.pow=function(f,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return f.clone();var C=4,R=new Array(1<<C);R[0]=new s(1).toRed(this),R[1]=f;for(var M=2;M<R.length;M++)R[M]=this.mul(R[M-1],f);var F=R[0],q=0,D=0,w=b.bitLength()%26;for(w===0&&(w=26),M=b.length-1;M>=0;M--){for(var V=b.words[M],se=w-1;se>=0;se--){var le=V>>se&1;if(F!==R[0]&&(F=this.sqr(F)),le===0&&q===0){D=0;continue}q<<=1,q|=le,D++,!(D!==C&&(M!==0||se!==0))&&(F=this.mul(F,R[q]),D=0,q=0)}w=26}return F},$.prototype.convertTo=function(f){var b=f.umod(this.m);return b===f?b.clone():b},$.prototype.convertFrom=function(f){var b=f.clone();return b.red=null,b},s.mont=function(f){return new H(f)};function H(A){$.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(H,$),H.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},H.prototype.convertFrom=function(f){var b=this.imod(f.mul(this.rinv));return b.red=null,b},H.prototype.imul=function(f,b){if(f.isZero()||b.isZero())return f.words[0]=0,f.length=1,f;var C=f.imul(b),R=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=C.isub(R).iushrn(this.shift),F=M;return M.cmp(this.m)>=0?F=M.isub(this.m):M.cmpn(0)<0&&(F=M.iadd(this.m)),F._forceRed(this)},H.prototype.mul=function(f,b){if(f.isZero()||b.isZero())return new s(0)._forceRed(this);var C=f.mul(b),R=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=C.isub(R).iushrn(this.shift),F=M;return M.cmp(this.m)>=0?F=M.isub(this.m):M.cmpn(0)<0&&(F=M.iadd(this.m)),F._forceRed(this)},H.prototype.invm=function(f){var b=this.imod(f._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,fi)})(Xv);var oA=Xv.exports;const JE=To(oA);var wy={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=Be,r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(wy,wy.exports);var W5=wy.exports,kh=W5.Buffer;function $5(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function d(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=kh.from(v)),!kh.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var k=0,S=0,_=0,T=v.length;_!==T&&v[_]===0;)_++,k++;for(var I=(T-_)*c+1>>>0,E=new Uint8Array(I);_!==T;){for(var j=v[_],K=0,G=I-1;(j!==0||K<S)&&G!==-1;G--,K++)j+=256*E[G]>>>0,E[G]=j%o>>>0,j=j/o>>>0;if(j!==0)throw new Error("Non-zero carry");S=K,_++}for(var O=I-S;O!==I&&E[O]===0;)O++;for(var L=a.repeat(k);O<I;++O)L+=t.charAt(E[O]);return L}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return kh.alloc(0);for(var k=0,S=0,_=0;v[k]===a;)S++,k++;for(var T=(v.length-k)*l+1>>>0,I=new Uint8Array(T);k<v.length;){var E=e[v.charCodeAt(k)];if(E===255)return;for(var j=0,K=T-1;(E!==0||j<_)&&K!==-1;K--,j++)E+=o*I[K]>>>0,I[K]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");_=j,k++}for(var G=T-_;G!==T&&I[G]===0;)G++;var O=kh.allocUnsafe(S+(T-G));O.fill(0,0,S);for(var L=S;G!==T;)O[L++]=I[G++];return O}function m(v){var k=h(v);if(k)return k;throw new Error("Non-base"+o+" character")}return{encode:d,decodeUnsafe:h,decode:m}}var q5=$5,H5=q5,K5="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",aA=H5(K5);const Un=To(aA),G5=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Us=new Uint32Array(64);class Y5 extends Y2{constructor(){super(64,32,8,!1),this.A=Bs[0]|0,this.B=Bs[1]|0,this.C=Bs[2]|0,this.D=Bs[3]|0,this.E=Bs[4]|0,this.F=Bs[5]|0,this.G=Bs[6]|0,this.H=Bs[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)Us[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=Us[h-15],v=Us[h-2],k=vi(m,7)^vi(m,18)^m>>>3,S=vi(v,17)^vi(v,19)^v>>>10;Us[h]=S+Us[h-7]+k+Us[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:d}=this;for(let h=0;h<64;h++){const m=vi(a,6)^vi(a,11)^vi(a,25),v=d+m+PB(a,l,c)+G5[h]+Us[h]|0,S=(vi(r,2)^vi(r,13)^vi(r,22))+LB(r,i,s)|0;d=c,c=l,l=a,a=o+v|0,o=s,s=i,i=r,r=v+S|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,l,c,d)}roundClean(){Us.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const vy=K2(()=>new Y5);var Bn={};function Xi(t,e,n){return e<=t&&t<=n}function im(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Q5(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function Z5(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Jf=-1;function Jv(t){this.tokens=[].slice.call(t)}Jv.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Jf},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var tc=-1;function _g(t,e){if(t)throw TypeError("Decoder error");return e||65533}var ep="utf-8";function tp(t,e){if(!(this instanceof tp))return new tp(t,e);if(t=t!==void 0?String(t).toLowerCase():ep,t!==ep)throw new Error("Encoding not supported. Only utf-8 is supported");e=im(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}tp.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=im(n),this._streaming||(this._decoder=new X5({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new Jv(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==tc);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===tc)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Z5(s)}};function np(t,e){if(!(this instanceof np))return new np(t,e);if(t=t!==void 0?String(t).toLowerCase():ep,t!==ep)throw new Error("Encoding not supported. Only utf-8 is supported");e=im(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}np.prototype={encode:function(e,n){e=e?String(e):"",n=im(n),this._streaming||(this._encoder=new J5(this._options)),this._streaming=!!n.stream;for(var r=[],i=new Jv(Q5(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==tc);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==tc;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function X5(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===Jf&&i!==0)return i=0,_g(e);if(l===Jf)return tc;if(i===0){if(Xi(l,0,127))return l;if(Xi(l,194,223))i=1,n=l-192;else if(Xi(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if(Xi(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return _g(e);return n=n<<6*i,null}if(!Xi(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),_g(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function J5(t){t.fatal,this.handler=function(e,n){if(n===Jf)return tc;if(Xi(n,0,127))return n;var r,i;Xi(n,128,2047)?(r=1,i=192):Xi(n,2048,65535)?(r=2,i=224):Xi(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const e8=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:tp,TextEncoder:np},Symbol.toStringTag,{value:"Module"})),t8=Qy(e8);var n8=fi&&fi.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),r8=fi&&fi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Oi=fi&&fi.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i8=fi&&fi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&n8(e,t,n);return r8(e,t),e},lA=fi&&fi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bn,"__esModule",{value:!0});var cA=Bn.deserializeUnchecked=mA=Bn.deserialize=pA=Bn.serialize=Bn.BinaryReader=Bn.BinaryWriter=Bn.BorshError=Bn.baseDecode=Bn.baseEncode=void 0;const no=lA(oA),uA=lA(aA),s8=i8(t8),o8=typeof TextDecoder!="function"?s8.TextDecoder:TextDecoder,a8=new o8("utf-8",{fatal:!0});function l8(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),uA.default.encode(Buffer.from(t))}Bn.baseEncode=l8;function c8(t){return Buffer.from(uA.default.decode(t))}Bn.baseDecode=c8;const xg=1024;class cr extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Bn.BorshError=cr;class dA{constructor(){this.buf=Buffer.alloc(xg),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(xg)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new no.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new no.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new no.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new no.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(xg)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}Bn.BinaryWriter=dA;function ji(t,e,n){const r=n.value;n.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new cr("Reached the end of buffer when deserializing")}throw s}}}class Or{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new no.default(e,"le")}readU128(){const e=this.readBuffer(16);return new no.default(e,"le")}readU256(){const e=this.readBuffer(32);return new no.default(e,"le")}readU512(){const e=this.readBuffer(64);return new no.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new cr(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return a8.decode(n)}catch(r){throw new cr(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let i=0;i<n;++i)r.push(e());return r}}Oi([ji],Or.prototype,"readU8",null);Oi([ji],Or.prototype,"readU16",null);Oi([ji],Or.prototype,"readU32",null);Oi([ji],Or.prototype,"readU64",null);Oi([ji],Or.prototype,"readU128",null);Oi([ji],Or.prototype,"readU256",null);Oi([ji],Or.prototype,"readU512",null);Oi([ji],Or.prototype,"readString",null);Oi([ji],Or.prototype,"readFixedArray",null);Oi([ji],Or.prototype,"readArray",null);Bn.BinaryReader=Or;function hA(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Yo(t,e,n,r,i){try{if(typeof r=="string")i[`write${hA(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new cr(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new cr(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let s=0;s<r[1];s++)Yo(t,null,n[s],r[0],i)}else i.writeArray(n,s=>{Yo(t,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?i.writeU8(0):(i.writeU8(1),Yo(t,e,n,r.type,i));break}case"map":{i.writeU32(n.size),n.forEach((s,o)=>{Yo(t,e,o,r.key,i),Yo(t,e,s,r.value,i)});break}default:throw new cr(`FieldType ${r} unrecognized`)}else fA(t,n,i)}catch(s){throw s instanceof cr&&s.addToFieldPath(e),s}}function fA(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new cr(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{Yo(t,i,e[i],s,n)});else if(r.kind==="enum"){const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){n.writeU8(s),Yo(t,o,e[o],a,n);break}}}else throw new cr(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function u8(t,e,n=dA){const r=new n;return fA(t,e,r),r.toArray()}var pA=Bn.serialize=u8;function Qo(t,e,n,r){try{if(typeof n=="string")return r[`read${hA(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const i=[];for(let s=0;s<n[1];s++)i.push(Qo(t,null,n[0],r));return i}else return r.readArray(()=>Qo(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?Qo(t,e,n.type,r):void 0;if(n.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=Qo(t,e,n.key,r),l=Qo(t,e,n.value,r);i.set(a,l)}return i}return e1(t,n,r)}catch(i){throw i instanceof cr&&i.addToFieldPath(e),i}}function e1(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new cr(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of t.get(e).fields)i[s]=Qo(t,s,o,n);return new e(i)}if(r.kind==="enum"){const i=n.readU8();if(i>=r.values.length)throw new cr(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=Qo(t,s,o,n);return new e({[s]:a})}throw new cr(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function d8(t,e,n,r=Or){const i=new r(n),s=e1(t,e,i);if(i.offset<n.length)throw new cr(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return s}var mA=Bn.deserialize=d8;function h8(t,e,n,r=Or){const i=new r(n);return e1(t,e,i)}cA=Bn.deserializeUnchecked=h8;var ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.s16=ee.s8=ee.nu64be=ee.u48be=ee.u40be=ee.u32be=ee.u24be=ee.u16be=Ln=ee.nu64=ee.u48=ee.u40=Se=ee.u32=ee.u24=Ur=ee.u16=at=ee.u8=da=ee.offset=ee.greedy=ee.Constant=ee.UTF8=ee.CString=ee.Blob=ee.Boolean=ee.BitField=ee.BitStructure=ee.VariantLayout=ee.Union=ee.UnionLayoutDiscriminator=ee.UnionDiscriminator=ee.Structure=ee.Sequence=ee.DoubleBE=ee.Double=ee.FloatBE=ee.Float=ee.NearInt64BE=ee.NearInt64=ee.NearUInt64BE=ee.NearUInt64=ee.IntBE=ee.Int=ee.UIntBE=ee.UInt=ee.OffsetLayout=ee.GreedyCount=ee.ExternalLayout=ee.bindConstructorLayout=ee.nameWithProperty=ee.Layout=ee.uint8ArrayToBuffer=ee.checkUint8Array=void 0;ee.constant=ee.utf8=ee.cstr=Lt=ee.blob=ee.unionLayoutDiscriminator=ee.union=ir=ee.seq=ee.bits=ve=ee.struct=ee.f64be=ee.f64=ee.f32be=ee.f32=ee.ns64be=ee.s48be=ee.s40be=ee.s32be=ee.s24be=ee.s16be=kr=ee.ns64=ee.s48=ee.s40=ee.s32=ee.s24=void 0;const t1=Be;function Ec(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ee.checkUint8Array=Ec;function it(t){return Ec(t),t1.Buffer.from(t.buffer,t.byteOffset,t.length)}ee.uint8ArrayToBuffer=it;let gt=class{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}};ee.Layout=gt;function n1(t,e){return e.property?t+"["+e.property+"]":t}ee.nameWithProperty=n1;function f8(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof gt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}ee.bindConstructorLayout=f8;class yr extends gt{isCount(){throw new Error("ExternalLayout is abstract")}}ee.ExternalLayout=yr;class gA extends yr{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){Ec(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}ee.GreedyCount=gA;class r1 extends yr{constructor(e,n=0,r){if(!(e instanceof gt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Hr||this.layout instanceof hi}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}ee.OffsetLayout=r1;class Hr extends gt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return it(e).readUIntLE(n,this.span)}encode(e,n,r=0){return it(n).writeUIntLE(e,r,this.span),this.span}}ee.UInt=Hr;class hi extends gt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return it(e).readUIntBE(n,this.span)}encode(e,n,r=0){return it(n).writeUIntBE(e,r,this.span),this.span}}ee.UIntBE=hi;class Ra extends gt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return it(e).readIntLE(n,this.span)}encode(e,n,r=0){return it(n).writeIntLE(e,r,this.span),this.span}}ee.Int=Ra;class bc extends gt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return it(e).readIntBE(n,this.span)}encode(e,n,r=0){return it(n).writeIntBE(e,r,this.span),this.span}}ee.IntBE=bc;const _y=Math.pow(2,32);function sm(t){const e=Math.floor(t/_y),n=t-e*_y;return{hi32:e,lo32:n}}function om(t,e){return t*_y+e}class yA extends gt{constructor(e){super(8,e)}decode(e,n=0){const r=it(e),i=r.readUInt32LE(n),s=r.readUInt32LE(n+4);return om(s,i)}encode(e,n,r=0){const i=sm(e),s=it(n);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}ee.NearUInt64=yA;class wA extends gt{constructor(e){super(8,e)}decode(e,n=0){const r=it(e),i=r.readUInt32BE(n),s=r.readUInt32BE(n+4);return om(i,s)}encode(e,n,r=0){const i=sm(e),s=it(n);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}ee.NearUInt64BE=wA;class vA extends gt{constructor(e){super(8,e)}decode(e,n=0){const r=it(e),i=r.readUInt32LE(n),s=r.readInt32LE(n+4);return om(s,i)}encode(e,n,r=0){const i=sm(e),s=it(n);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}ee.NearInt64=vA;class _A extends gt{constructor(e){super(8,e)}decode(e,n=0){const r=it(e),i=r.readInt32BE(n),s=r.readUInt32BE(n+4);return om(i,s)}encode(e,n,r=0){const i=sm(e),s=it(n);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}ee.NearInt64BE=_A;class xA extends gt{constructor(e){super(4,e)}decode(e,n=0){return it(e).readFloatLE(n)}encode(e,n,r=0){return it(n).writeFloatLE(e,r),4}}ee.Float=xA;class EA extends gt{constructor(e){super(4,e)}decode(e,n=0){return it(e).readFloatBE(n)}encode(e,n,r=0){return it(n).writeFloatBE(e,r),4}}ee.FloatBE=EA;class bA extends gt{constructor(e){super(8,e)}decode(e,n=0){return it(e).readDoubleLE(n)}encode(e,n,r=0){return it(n).writeDoubleLE(e,r),8}}ee.Double=bA;class IA extends gt{constructor(e){super(8,e)}decode(e,n=0){return it(e).readDoubleBE(n)}encode(e,n,r=0){return it(n).writeDoubleBE(e,r),8}}ee.DoubleBE=IA;class SA extends gt{constructor(e,n,r){if(!(e instanceof gt))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof yr&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(n instanceof yr)&&0<e.span&&(i=n*e.span),super(i,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof yr&&(i=i.decode(e,n)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,n+r),++s}return r}decode(e,n=0){const r=[];let i=0,s=this.count;for(s instanceof yr&&(s=s.decode(e,n));i<s;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),i+=1;return r}encode(e,n,r=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,n,r+o),0);return this.count instanceof yr&&this.count.encode(e.length,n,r),s}}ee.Sequence=SA;class kA extends gt{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof gt,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(e,n);return n+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){Ec(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,n)),n+=i.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const c=e[a.property];c!==void 0&&(o=a.encode(c,n,r),0>l&&(l=a.getSpan(n,r)))}s=r,r+=l}return s+o-i}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}ee.Structure=kA;class i1{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}ee.UnionDiscriminator=i1;class rp extends i1{constructor(e,n){if(!(e instanceof yr&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}ee.UnionLayoutDiscriminator=rp;class s1 extends gt{constructor(e,n,r){let i;if(e instanceof Hr||e instanceof hi)i=new rp(new r1(e));else if(e instanceof yr&&e.isCount())i=new rp(e);else if(e instanceof i1)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof gt))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let s=-1;n&&(s=n.span,0<=s&&(e instanceof Hr||e instanceof hi)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Hr||e instanceof hi,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const i=this.discriminator,s=i.decode(e,n),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,n+l)}else r=o.decode(e,n);return r}encode(e,n,r=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],n,r),a+o.encode(e[o.property],n,r+a)}return i.encode(e,n,r)}addVariant(e,n,r){const i=new TA(this,e,n,r);return this.registry[e]=i,i}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}ee.Union=s1;class TA extends gt{constructor(e,n,r,i){if(!(e instanceof s1))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof gt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,n+r)),r+i}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],n,r+i),s+=this.layout.getSpan(n,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}ee.VariantLayout=TA;function il(t){return 0>t&&(t+=4294967296),t}class o1 extends gt{constructor(e,n,r){if(!(e instanceof Hr||e instanceof hi))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let i=0;this._packedSetValue=function(s){return i=il(s),this},this._packedGetValue=function(){return i}}decode(e,n=0){const r=this.makeDestinationObject(),i=this.word.decode(e,n);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,n,r=0){const i=this.word.decode(n,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new a1(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new AA(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}ee.BitStructure=o1;class a1{constructor(e,n,r){if(!(e instanceof o1))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(n+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-n),this.wordMask=il(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return il(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==il(e&this.valueMask))throw new TypeError(n1("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=il(e<<this.start);this.container._packedSetValue(il(n&~this.wordMask)|r)}}ee.BitField=a1;let AA=class extends a1{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};ee.Boolean=AA;class NA extends gt{constructor(e,n){if(!(e instanceof yr&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof yr||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),it(e).slice(n,n+r)}encode(e,n,r){let i=this.length;if(this.length instanceof yr&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(n1("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>n.length)throw new RangeError("encoding overruns Uint8Array");const s=it(e);return it(n).write(s.toString("hex"),r,i,"hex"),this.length instanceof yr&&this.length.encode(i,n,r),i}}ee.Blob=NA;class CA extends gt{constructor(e){super(-1,e)}getSpan(e,n=0){Ec(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return it(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const i=t1.Buffer.from(e,"utf8"),s=i.length;if(r+s>n.length)throw new RangeError("encoding overruns Buffer");const o=it(n);return i.copy(o,r),o[r+s]=0,s+1}}ee.CString=CA;class MA extends gt{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return Ec(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return it(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const i=t1.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>n.length)throw new RangeError("encoding overruns Buffer");return i.copy(it(n),r),s}}ee.UTF8=MA;class RA extends gt{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}ee.Constant=RA;ee.greedy=(t,e)=>new gA(t,e);var da=ee.offset=(t,e,n)=>new r1(t,e,n),at=ee.u8=t=>new Hr(1,t),Ur=ee.u16=t=>new Hr(2,t);ee.u24=t=>new Hr(3,t);var Se=ee.u32=t=>new Hr(4,t);ee.u40=t=>new Hr(5,t);ee.u48=t=>new Hr(6,t);var Ln=ee.nu64=t=>new yA(t);ee.u16be=t=>new hi(2,t);ee.u24be=t=>new hi(3,t);ee.u32be=t=>new hi(4,t);ee.u40be=t=>new hi(5,t);ee.u48be=t=>new hi(6,t);ee.nu64be=t=>new wA(t);ee.s8=t=>new Ra(1,t);ee.s16=t=>new Ra(2,t);ee.s24=t=>new Ra(3,t);ee.s32=t=>new Ra(4,t);ee.s40=t=>new Ra(5,t);ee.s48=t=>new Ra(6,t);var kr=ee.ns64=t=>new vA(t);ee.s16be=t=>new bc(2,t);ee.s24be=t=>new bc(3,t);ee.s32be=t=>new bc(4,t);ee.s40be=t=>new bc(5,t);ee.s48be=t=>new bc(6,t);ee.ns64be=t=>new _A(t);ee.f32=t=>new xA(t);ee.f32be=t=>new EA(t);ee.f64=t=>new bA(t);ee.f64be=t=>new IA(t);var ve=ee.struct=(t,e,n)=>new kA(t,e,n);ee.bits=(t,e,n)=>new o1(t,e,n);var ir=ee.seq=(t,e,n)=>new SA(t,e,n);ee.union=(t,e,n)=>new s1(t,e,n);ee.unionLayoutDiscriminator=(t,e)=>new rp(t,e);var Lt=ee.blob=(t,e)=>new NA(t,e);ee.cstr=t=>new CA(t);ee.utf8=(t,e)=>new MA(t,e);ee.constant=(t,e)=>new RA(t,e);var jd={};Object.defineProperty(jd,"__esModule",{value:!0});function p8(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var m8=jd.toBigIntLE=p8;function g8(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}jd.toBigIntBE=g8;function y8(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var w8=jd.toBufferLE=y8;function v8(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}jd.toBufferBE=v8;class _8 extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function x8(t){return Bd(t)&&typeof t[Symbol.iterator]=="function"}function Bd(t){return typeof t=="object"&&t!=null}function ip(t){return Bd(t)&&!Array.isArray(t)}function gi(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function E8(t){const{done:e,value:n}=t.next();return e?void 0:n}function b8(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${gi(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*eb(t,e,n,r){x8(t)||(t=[t]);for(const i of t){const s=b8(i,e,n,r);s&&(yield s)}}function*l1(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,d,h]of e.entries(t,a)){const m=l1(d,h,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,d],coerce:s,mask:o,message:n.message});for(const v of m)v[0]?(l=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):s&&(d=v[1],c===void 0?t=d:t instanceof Map?t.set(c,d):t instanceof Set?t.add(d):Bd(t)&&(d!==void 0||c in t)&&(t[c]=d))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let Bi=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const d=i(l,c);return eb(d,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const d=s(l,c);return eb(d,c,this,l)}:this.refiner=()=>[]}assert(e,n){return I8(e,this,n)}create(e,n){return fe(e,this,n)}is(e){return PA(e,this)}mask(e,n){return S8(e,this,n)}validate(e,n={}){return Ud(e,this,n)}};function I8(t,e,n){const r=Ud(t,e,{message:n});if(r[0])throw r[0]}function fe(t,e,n){const r=Ud(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function S8(t,e,n){const r=Ud(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function PA(t,e){return!Ud(t,e)[0]}function Ud(t,e,n={}){const r=l1(t,e,n),i=E8(r);return i[0]?[new _8(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Pa(t,e){return new Bi({type:t,schema:null,validator:e})}function k8(){return Pa("any",()=>!0)}function pe(t){return new Bi({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${gi(e)}`}})}function Mi(){return Pa("boolean",t=>typeof t=="boolean")}function c1(t){return Pa("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${gi(e)}`)}function Yt(t){const e=gi(t),n=typeof t;return new Bi({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${gi(r)}`}})}function T8(){return Pa("never",()=>!1)}function me(t){return new Bi({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function J(){return Pa("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${gi(t)}`)}function Te(t){return new Bi({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function LA(t,e){return new Bi({type:"record",schema:null,*entries(n){if(Bd(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return ip(n)||`Expected an object, but received: ${gi(n)}`},coercer(n){return ip(n)?{...n}:n}})}function ue(){return Pa("string",t=>typeof t=="string"||`Expected a string, but received: ${gi(t)}`)}function u1(t){const e=T8();return new Bi({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${gi(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function ie(t){const e=Object.keys(t);return new Bi({type:"type",schema:t,*entries(n){if(Bd(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return ip(n)||`Expected an object, but received: ${gi(n)}`},coercer(n){return ip(n)?{...n}:n}})}function dr(t){const e=t.map(n=>n.type).join(" | ");return new Bi({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=l1(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${gi(n)}`,...i]}})}function Ic(){return Pa("unknown",()=>!0)}function Fd(t,e,n){return new Bi({...t,coercer:(r,i)=>PA(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var Th,A8=new Uint8Array(16);function DA(){if(!Th&&(Th=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Th))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Th(A8)}const N8=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function am(t){return typeof t=="string"&&N8.test(t)}var Pn=[];for(var Eg=0;Eg<256;++Eg)Pn.push((Eg+256).toString(16).substr(1));function lm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Pn[t[e+0]]+Pn[t[e+1]]+Pn[t[e+2]]+Pn[t[e+3]]+"-"+Pn[t[e+4]]+Pn[t[e+5]]+"-"+Pn[t[e+6]]+Pn[t[e+7]]+"-"+Pn[t[e+8]]+Pn[t[e+9]]+"-"+Pn[t[e+10]]+Pn[t[e+11]]+Pn[t[e+12]]+Pn[t[e+13]]+Pn[t[e+14]]+Pn[t[e+15]]).toLowerCase();if(!am(n))throw TypeError("Stringified UUID is invalid");return n}var tb,bg,Ig=0,Sg=0;function C8(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||tb,o=t.clockseq!==void 0?t.clockseq:bg;if(s==null||o==null){var a=t.random||(t.rng||DA)();s==null&&(s=tb=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=bg=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:Sg+1,d=l-Ig+(c-Sg)/1e4;if(d<0&&t.clockseq===void 0&&(o=o+1&16383),(d<0||l>Ig)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ig=l,Sg=c,bg=o,l+=122192928e5;var h=((l&268435455)*1e4+c)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=h&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var v=0;v<6;++v)i[r+v]=s[v];return e||lm(i)}function OA(t){if(!am(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function M8(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var R8="6ba7b810-9dad-11d1-80b4-00c04fd430c8",P8="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function jA(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=M8(i)),typeof s=="string"&&(s=OA(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return lm(l)}try{r.name=t}catch{}return r.DNS=R8,r.URL=P8,r}function L8(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return D8(O8(j8(t),t.length*8))}function D8(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function BA(t){return(t+64>>>9<<4)+14+1}function O8(t,e){t[e>>5]|=128<<e%32,t[BA(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,d=s;n=Qn(n,r,i,s,t[o],7,-680876936),s=Qn(s,n,r,i,t[o+1],12,-389564586),i=Qn(i,s,n,r,t[o+2],17,606105819),r=Qn(r,i,s,n,t[o+3],22,-1044525330),n=Qn(n,r,i,s,t[o+4],7,-176418897),s=Qn(s,n,r,i,t[o+5],12,1200080426),i=Qn(i,s,n,r,t[o+6],17,-1473231341),r=Qn(r,i,s,n,t[o+7],22,-45705983),n=Qn(n,r,i,s,t[o+8],7,1770035416),s=Qn(s,n,r,i,t[o+9],12,-1958414417),i=Qn(i,s,n,r,t[o+10],17,-42063),r=Qn(r,i,s,n,t[o+11],22,-1990404162),n=Qn(n,r,i,s,t[o+12],7,1804603682),s=Qn(s,n,r,i,t[o+13],12,-40341101),i=Qn(i,s,n,r,t[o+14],17,-1502002290),r=Qn(r,i,s,n,t[o+15],22,1236535329),n=Zn(n,r,i,s,t[o+1],5,-165796510),s=Zn(s,n,r,i,t[o+6],9,-1069501632),i=Zn(i,s,n,r,t[o+11],14,643717713),r=Zn(r,i,s,n,t[o],20,-373897302),n=Zn(n,r,i,s,t[o+5],5,-701558691),s=Zn(s,n,r,i,t[o+10],9,38016083),i=Zn(i,s,n,r,t[o+15],14,-660478335),r=Zn(r,i,s,n,t[o+4],20,-405537848),n=Zn(n,r,i,s,t[o+9],5,568446438),s=Zn(s,n,r,i,t[o+14],9,-1019803690),i=Zn(i,s,n,r,t[o+3],14,-187363961),r=Zn(r,i,s,n,t[o+8],20,1163531501),n=Zn(n,r,i,s,t[o+13],5,-1444681467),s=Zn(s,n,r,i,t[o+2],9,-51403784),i=Zn(i,s,n,r,t[o+7],14,1735328473),r=Zn(r,i,s,n,t[o+12],20,-1926607734),n=Xn(n,r,i,s,t[o+5],4,-378558),s=Xn(s,n,r,i,t[o+8],11,-2022574463),i=Xn(i,s,n,r,t[o+11],16,1839030562),r=Xn(r,i,s,n,t[o+14],23,-35309556),n=Xn(n,r,i,s,t[o+1],4,-1530992060),s=Xn(s,n,r,i,t[o+4],11,1272893353),i=Xn(i,s,n,r,t[o+7],16,-155497632),r=Xn(r,i,s,n,t[o+10],23,-1094730640),n=Xn(n,r,i,s,t[o+13],4,681279174),s=Xn(s,n,r,i,t[o],11,-358537222),i=Xn(i,s,n,r,t[o+3],16,-722521979),r=Xn(r,i,s,n,t[o+6],23,76029189),n=Xn(n,r,i,s,t[o+9],4,-640364487),s=Xn(s,n,r,i,t[o+12],11,-421815835),i=Xn(i,s,n,r,t[o+15],16,530742520),r=Xn(r,i,s,n,t[o+2],23,-995338651),n=Jn(n,r,i,s,t[o],6,-198630844),s=Jn(s,n,r,i,t[o+7],10,1126891415),i=Jn(i,s,n,r,t[o+14],15,-1416354905),r=Jn(r,i,s,n,t[o+5],21,-57434055),n=Jn(n,r,i,s,t[o+12],6,1700485571),s=Jn(s,n,r,i,t[o+3],10,-1894986606),i=Jn(i,s,n,r,t[o+10],15,-1051523),r=Jn(r,i,s,n,t[o+1],21,-2054922799),n=Jn(n,r,i,s,t[o+8],6,1873313359),s=Jn(s,n,r,i,t[o+15],10,-30611744),i=Jn(i,s,n,r,t[o+6],15,-1560198380),r=Jn(r,i,s,n,t[o+13],21,1309151649),n=Jn(n,r,i,s,t[o+4],6,-145523070),s=Jn(s,n,r,i,t[o+11],10,-1120210379),i=Jn(i,s,n,r,t[o+2],15,718787259),r=Jn(r,i,s,n,t[o+9],21,-343485551),n=ro(n,a),r=ro(r,l),i=ro(i,c),s=ro(s,d)}return[n,r,i,s]}function j8(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(BA(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function ro(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function B8(t,e){return t<<e|t>>>32-e}function cm(t,e,n,r,i,s){return ro(B8(ro(ro(e,t),ro(r,s)),i),n)}function Qn(t,e,n,r,i,s,o){return cm(e&n|~e&r,t,e,i,s,o)}function Zn(t,e,n,r,i,s,o){return cm(e&r|n&~r,t,e,i,s,o)}function Xn(t,e,n,r,i,s,o){return cm(e^n^r,t,e,i,s,o)}function Jn(t,e,n,r,i,s,o){return cm(n^(e|~r),t,e,i,s,o)}var U8=jA("v3",48,L8);function F8(t,e,n){t=t||{};var r=t.random||(t.rng||DA)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return lm(r)}function V8(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function kg(t,e){return t<<e|t>>>32-e}function z8(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=t[l*64+d*4]<<24|t[l*64+d*4+1]<<16|t[l*64+d*4+2]<<8|t[l*64+d*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var m=new Uint32Array(80),v=0;v<16;++v)m[v]=a[h][v];for(var k=16;k<80;++k)m[k]=kg(m[k-3]^m[k-8]^m[k-14]^m[k-16],1);for(var S=n[0],_=n[1],T=n[2],I=n[3],E=n[4],j=0;j<80;++j){var K=Math.floor(j/20),G=kg(S,5)+V8(K,_,T,I)+E+e[K]+m[j]>>>0;E=I,I=T,T=kg(_,30)>>>0,_=S,S=G}n[0]=n[0]+S>>>0,n[1]=n[1]+_>>>0,n[2]=n[2]+T>>>0,n[3]=n[3]+I>>>0,n[4]=n[4]+E>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var W8=jA("v5",80,z8);const $8="00000000-0000-0000-0000-000000000000";function q8(t){if(!am(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const H8=Object.freeze(Object.defineProperty({__proto__:null,NIL:$8,parse:OA,stringify:lm,v1:C8,v3:U8,v4:F8,v5:W8,validate:am,version:q8},Symbol.toStringTag,{value:"Module"})),UA=Qy(H8),K8=UA.v4,G8=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:t};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return K8()};s.id=o(s,r)}else i===2&&n===null?r.notificationIdNull&&(s.id=null):s.id=n;return s};var Y8=G8;const Q8=UA.v4,Z8=Y8,ud=function(t,e){if(!(this instanceof ud))return new ud(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Q8()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var X8=ud;ud.prototype.request=function(t,e,n,r){const i=this;let s=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,s=t;else{typeof n=="function"&&(r=n,n=void 0);const c=typeof r=="function";try{s=Z8(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(d){if(c)return r(d);throw d}if(!c)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(c){return r(c)}return this.callServer(l,function(c,d){i._parseResponse(c,d,r)}),s};ud.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return n(i)}if(n.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return n(null,r.filter(i),r.filter(s))}else return n(null,r.error,r.result);n(null,r)};const J8=To(X8);var FA={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new i(d,h||l,m),k=n?n+c:c;return l._events[k]?l._events[k].fn?l._events[k]=[l._events[k],v]:l._events[k].push(v):(l._events[k]=v,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)e.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,v=h.length,k=new Array(v);m<v;m++)k[m]=h[m].fn;return k},a.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,d,h,m,v,k){var S=n?n+c:c;if(!this._events[S])return!1;var _=this._events[S],T=arguments.length,I,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),T){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,m),!0;case 5:return _.fn.call(_.context,d,h,m,v),!0;case 6:return _.fn.call(_.context,d,h,m,v,k),!0}for(E=1,I=new Array(T-1);E<T;E++)I[E-1]=arguments[E];_.fn.apply(_.context,I)}else{var j=_.length,K;for(E=0;E<j;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),T){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,d);break;case 3:_[E].fn.call(_[E].context,d,h);break;case 4:_[E].fn.call(_[E].context,d,h,m);break;default:if(!I)for(K=1,I=new Array(T-1);K<T;K++)I[K-1]=arguments[K];_[E].fn.apply(_[E].context,I)}}return!0},a.prototype.on=function(c,d,h){return s(this,c,d,h,!1)},a.prototype.once=function(c,d,h){return s(this,c,d,h,!0)},a.prototype.removeListener=function(c,d,h,m){var v=n?n+c:c;if(!this._events[v])return this;if(!d)return o(this,v),this;var k=this._events[v];if(k.fn)k.fn===d&&(!m||k.once)&&(!h||k.context===h)&&o(this,v);else{for(var S=0,_=[],T=k.length;S<T;S++)(k[S].fn!==d||m&&!k[S].once||h&&k[S].context!==h)&&_.push(k[S]);_.length?this._events[v]=_.length===1?_[0]:_:o(this,v)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(FA);var eU=FA.exports;const VA=To(eU);var tU=class extends VA{constructor(e,n,r){super();bn(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function nU(t,e){return new tU(t,e)}var rU=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},iU=class extends VA{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();bn(this,"address");bn(this,"rpc_id");bn(this,"queue");bn(this,"options");bn(this,"autoconnect");bn(this,"ready");bn(this,"reconnect");bn(this,"reconnect_timer_id");bn(this,"reconnect_interval");bn(this,"max_reconnects");bn(this,"rest_options");bn(this,"current_reconnects");bn(this,"generate_request_id");bn(this,"socket");bn(this,"webSocketFactory");bn(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>++this.rpc_id),c?this.dataPack=c:this.dataPack=new rU,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=Be.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}};class zA extends H2{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,AB(e);const r=Kv(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Xf(this),this.iHash.update(e),this}digestInto(e){Xf(this),Jp(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const WA=(t,e,n)=>new zA(t,e).update(n).digest();WA.create=(t,e)=>new zA(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nb(t){t.lowS!==void 0&&fs("lowS",t.lowS),t.prehash!==void 0&&fs("prehash",t.prehash)}function sU(t){const e=Qv(t);xc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:oU,hexToBytes:aU}=m5;class lU extends Error{constructor(e=""){super(e)}}const Qi={Err:lU,_tlv:{encode:(t,e)=>{const{Err:n}=Qi;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=vl(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?vl(i.length/2|128):"";return vl(t)+s+i+e},decode(t,e){const{Err:n}=Qi;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of c)o=o<<8|d;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Qi;if(t<Ji)throw new e("integer: negative integers are not allowed");let n=vl(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Qi;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return oU(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Qi,i=typeof t=="string"?aU(t):t;Dd(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:d}=r.decode(2,l);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=Qi,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Ji=BigInt(0),In=BigInt(1);BigInt(2);const rb=BigInt(3);BigInt(4);function cU(t){const e=sU(t),{Fp:n}=e,r=rm(e.n,e.nBitLength),i=e.toBytes||((S,_,T)=>{const I=_.toAffine();return Sa(Uint8Array.from([4]),n.toBytes(I.x),n.toBytes(I.y))}),s=e.fromBytes||(S=>{const _=S.subarray(1),T=n.fromBytes(_.subarray(0,n.BYTES)),I=n.fromBytes(_.subarray(n.BYTES,2*n.BYTES));return{x:T,y:I}});function o(S){const{a:_,b:T}=e,I=n.sqr(S),E=n.mul(I,S);return n.add(n.add(E,n.mul(S,_)),T)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(S){return nm(S,In,e.n)}function l(S){const{allowedPrivateKeyLengths:_,nByteLength:T,wrapPrivateKey:I,n:E}=e;if(_&&typeof S!="bigint"){if(ba(S)&&(S=Ia(S)),typeof S!="string"||!_.includes(S.length))throw new Error("invalid private key");S=S.padStart(T*2,"0")}let j;try{j=typeof S=="bigint"?S:ua(mn("private key",S,T))}catch{throw new Error("invalid private key, expected hex or "+T+" bytes, got "+typeof S)}return I&&(j=Ft(j,E)),Wr("private key",j,In,E),j}function c(S){if(!(S instanceof m))throw new Error("ProjectivePoint expected")}const d=cd((S,_)=>{const{px:T,py:I,pz:E}=S;if(n.eql(E,n.ONE))return{x:T,y:I};const j=S.is0();_==null&&(_=j?n.ONE:n.inv(E));const K=n.mul(T,_),G=n.mul(I,_),O=n.mul(E,_);if(j)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:K,y:G}}),h=cd(S=>{if(S.is0()){if(e.allowInfinityPoint&&!n.is0(S.py))return;throw new Error("bad point: ZERO")}const{x:_,y:T}=S.toAffine();if(!n.isValid(_)||!n.isValid(T))throw new Error("bad point: x or y not FE");const I=n.sqr(T),E=o(_);if(!n.eql(I,E))throw new Error("bad point: equation left != right");if(!S.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(_,T,I){if(this.px=_,this.py=T,this.pz=I,_==null||!n.isValid(_))throw new Error("x required");if(T==null||!n.isValid(T))throw new Error("y required");if(I==null||!n.isValid(I))throw new Error("z required");Object.freeze(this)}static fromAffine(_){const{x:T,y:I}=_||{};if(!_||!n.isValid(T)||!n.isValid(I))throw new Error("invalid affine point");if(_ instanceof m)throw new Error("projective point not allowed");const E=j=>n.eql(j,n.ZERO);return E(T)&&E(I)?m.ZERO:new m(T,I,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){const T=n.invertBatch(_.map(I=>I.pz));return _.map((I,E)=>I.toAffine(T[E])).map(m.fromAffine)}static fromHex(_){const T=m.fromAffine(s(mn("pointHex",_)));return T.assertValidity(),T}static fromPrivateKey(_){return m.BASE.multiply(l(_))}static msm(_,T){return sA(m,r,_,T)}_setWindowSize(_){k.setWindowSize(this,_)}assertValidity(){h(this)}hasEvenY(){const{y:_}=this.toAffine();if(n.isOdd)return!n.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){c(_);const{px:T,py:I,pz:E}=this,{px:j,py:K,pz:G}=_,O=n.eql(n.mul(T,G),n.mul(j,E)),L=n.eql(n.mul(I,G),n.mul(K,E));return O&&L}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:_,b:T}=e,I=n.mul(T,rb),{px:E,py:j,pz:K}=this;let G=n.ZERO,O=n.ZERO,L=n.ZERO,B=n.mul(E,E),W=n.mul(j,j),$=n.mul(K,K),H=n.mul(E,j);return H=n.add(H,H),L=n.mul(E,K),L=n.add(L,L),G=n.mul(_,L),O=n.mul(I,$),O=n.add(G,O),G=n.sub(W,O),O=n.add(W,O),O=n.mul(G,O),G=n.mul(H,G),L=n.mul(I,L),$=n.mul(_,$),H=n.sub(B,$),H=n.mul(_,H),H=n.add(H,L),L=n.add(B,B),B=n.add(L,B),B=n.add(B,$),B=n.mul(B,H),O=n.add(O,B),$=n.mul(j,K),$=n.add($,$),B=n.mul($,H),G=n.sub(G,B),L=n.mul($,W),L=n.add(L,L),L=n.add(L,L),new m(G,O,L)}add(_){c(_);const{px:T,py:I,pz:E}=this,{px:j,py:K,pz:G}=_;let O=n.ZERO,L=n.ZERO,B=n.ZERO;const W=e.a,$=n.mul(e.b,rb);let H=n.mul(T,j),A=n.mul(I,K),f=n.mul(E,G),b=n.add(T,I),C=n.add(j,K);b=n.mul(b,C),C=n.add(H,A),b=n.sub(b,C),C=n.add(T,E);let R=n.add(j,G);return C=n.mul(C,R),R=n.add(H,f),C=n.sub(C,R),R=n.add(I,E),O=n.add(K,G),R=n.mul(R,O),O=n.add(A,f),R=n.sub(R,O),B=n.mul(W,C),O=n.mul($,f),B=n.add(O,B),O=n.sub(A,B),B=n.add(A,B),L=n.mul(O,B),A=n.add(H,H),A=n.add(A,H),f=n.mul(W,f),C=n.mul($,C),A=n.add(A,f),f=n.sub(H,f),f=n.mul(W,f),C=n.add(C,f),H=n.mul(A,C),L=n.add(L,H),H=n.mul(R,C),O=n.mul(b,O),O=n.sub(O,H),H=n.mul(b,A),B=n.mul(R,B),B=n.add(B,H),new m(O,L,B)}subtract(_){return this.add(_.negate())}is0(){return this.equals(m.ZERO)}wNAF(_){return k.wNAFCached(this,_,m.normalizeZ)}multiplyUnsafe(_){const{endo:T,n:I}=e;Wr("scalar",_,Ji,I);const E=m.ZERO;if(_===Ji)return E;if(this.is0()||_===In)return this;if(!T||k.hasPrecomputes(this))return k.wNAFCachedUnsafe(this,_,m.normalizeZ);let{k1neg:j,k1:K,k2neg:G,k2:O}=T.splitScalar(_),L=E,B=E,W=this;for(;K>Ji||O>Ji;)K&In&&(L=L.add(W)),O&In&&(B=B.add(W)),W=W.double(),K>>=In,O>>=In;return j&&(L=L.negate()),G&&(B=B.negate()),B=new m(n.mul(B.px,T.beta),B.py,B.pz),L.add(B)}multiply(_){const{endo:T,n:I}=e;Wr("scalar",_,In,I);let E,j;if(T){const{k1neg:K,k1:G,k2neg:O,k2:L}=T.splitScalar(_);let{p:B,f:W}=this.wNAF(G),{p:$,f:H}=this.wNAF(L);B=k.constTimeNegate(K,B),$=k.constTimeNegate(O,$),$=new m(n.mul($.px,T.beta),$.py,$.pz),E=B.add($),j=W.add(H)}else{const{p:K,f:G}=this.wNAF(_);E=K,j=G}return m.normalizeZ([E,j])[0]}multiplyAndAddUnsafe(_,T,I){const E=m.BASE,j=(G,O)=>O===Ji||O===In||!G.equals(E)?G.multiplyUnsafe(O):G.multiply(O),K=j(this,T).add(j(_,I));return K.is0()?void 0:K}toAffine(_){return d(this,_)}isTorsionFree(){const{h:_,isTorsionFree:T}=e;if(_===In)return!0;if(T)return T(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:_,clearCofactor:T}=e;return _===In?this:T?T(m,this):this.multiplyUnsafe(e.h)}toRawBytes(_=!0){return fs("isCompressed",_),this.assertValidity(),i(m,this,_)}toHex(_=!0){return fs("isCompressed",_),Ia(this.toRawBytes(_))}}m.BASE=new m(e.Gx,e.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const v=e.nBitLength,k=iA(m,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function uU(t){const e=Qv(t);return xc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function dU(t){const e=uU(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(f){return Ft(f,r)}function a(f){return yy(f,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:h}=cU({...e,toBytes(f,b,C){const R=b.toAffine(),M=n.toBytes(R.x),F=Sa;return fs("isCompressed",C),C?F(Uint8Array.from([b.hasEvenY()?2:3]),M):F(Uint8Array.from([4]),M,n.toBytes(R.y))},fromBytes(f){const b=f.length,C=f[0],R=f.subarray(1);if(b===i&&(C===2||C===3)){const M=ua(R);if(!nm(M,In,n.ORDER))throw new Error("Point is not on curve");const F=d(M);let q;try{q=n.sqrt(F)}catch(V){const se=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+se)}const D=(q&In)===In;return(C&1)===1!==D&&(q=n.neg(q)),{x:M,y:q}}else if(b===s&&C===4){const M=n.fromBytes(R.subarray(0,n.BYTES)),F=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:M,y:F}}else{const M=i,F=s;throw new Error("invalid Point, expected length of "+M+", or uncompressed "+F+", got "+b)}}}),m=f=>Ia(ec(f,e.nByteLength));function v(f){const b=r>>In;return f>b}function k(f){return v(f)?o(-f):f}const S=(f,b,C)=>ua(f.slice(b,C));class _{constructor(b,C,R){this.r=b,this.s=C,this.recovery=R,this.assertValidity()}static fromCompact(b){const C=e.nByteLength;return b=mn("compactSignature",b,C*2),new _(S(b,0,C),S(b,C,2*C))}static fromDER(b){const{r:C,s:R}=Qi.toSig(mn("DER",b));return new _(C,R)}assertValidity(){Wr("r",this.r,In,r),Wr("s",this.s,In,r)}addRecoveryBit(b){return new _(this.r,this.s,b)}recoverPublicKey(b){const{r:C,s:R,recovery:M}=this,F=G(mn("msgHash",b));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const q=M===2||M===3?C+e.n:C;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const D=M&1?"03":"02",w=l.fromHex(D+m(q)),V=a(q),se=o(-F*V),le=o(R*V),de=l.BASE.multiplyAndAddUnsafe(w,se,le);if(!de)throw new Error("point at infinify");return de.assertValidity(),de}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Jl(this.toDERHex())}toDERHex(){return Qi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Jl(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const T={isValidPrivateKey(f){try{return c(f),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const f=tA(e.n);return S5(e.randomBytes(f),e.n)},precompute(f=8,b=l.BASE){return b._setWindowSize(f),b.multiply(BigInt(3)),b}};function I(f,b=!0){return l.fromPrivateKey(f).toRawBytes(b)}function E(f){const b=ba(f),C=typeof f=="string",R=(b||C)&&f.length;return b?R===i||R===s:C?R===2*i||R===2*s:f instanceof l}function j(f,b,C=!0){if(E(f))throw new Error("first arg must be private key");if(!E(b))throw new Error("second arg must be public key");return l.fromHex(b).multiply(c(f)).toRawBytes(C)}const K=e.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const b=ua(f),C=f.length*8-e.nBitLength;return C>0?b>>BigInt(C):b},G=e.bits2int_modN||function(f){return o(K(f))},O=Yv(e.nBitLength);function L(f){return Wr("num < 2^"+e.nBitLength,f,Ji,O),ec(f,e.nByteLength)}function B(f,b,C=W){if(["recovered","canonical"].some(Ie=>Ie in C))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:M}=e;let{lowS:F,prehash:q,extraEntropy:D}=C;F==null&&(F=!0),f=mn("msgHash",f),nb(C),q&&(f=mn("prehashed msgHash",R(f)));const w=G(f),V=c(b),se=[L(V),L(w)];if(D!=null&&D!==!1){const Ie=D===!0?M(n.BYTES):D;se.push(mn("extraEntropy",Ie))}const le=Sa(...se),de=w;function Ae(Ie){const Ce=K(Ie);if(!h(Ce))return;const vt=a(Ce),Ue=l.BASE.multiply(Ce).toAffine(),Oe=o(Ue.x);if(Oe===Ji)return;const jt=o(vt*o(de+Oe*V));if(jt===Ji)return;let qe=(Ue.x===Oe?0:2)|Number(Ue.y&In),Ge=jt;return F&&v(jt)&&(Ge=k(jt),qe^=1),new _(Oe,Ge,qe)}return{seed:le,k2sig:Ae}}const W={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function H(f,b,C=W){const{seed:R,k2sig:M}=B(f,b,C),F=e;return X2(F.hash.outputLen,F.nByteLength,F.hmac)(R,M)}l.BASE._setWindowSize(8);function A(f,b,C,R=$){var qe;const M=f;b=mn("msgHash",b),C=mn("publicKey",C);const{lowS:F,prehash:q,format:D}=R;if(nb(R),"strict"in R)throw new Error("options.strict was renamed to lowS");if(D!==void 0&&D!=="compact"&&D!=="der")throw new Error("format must be compact or der");const w=typeof M=="string"||ba(M),V=!w&&!D&&typeof M=="object"&&M!==null&&typeof M.r=="bigint"&&typeof M.s=="bigint";if(!w&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let se,le;try{if(V&&(se=new _(M.r,M.s)),w){try{D!=="compact"&&(se=_.fromDER(M))}catch(Ge){if(!(Ge instanceof Qi.Err))throw Ge}!se&&D!=="der"&&(se=_.fromCompact(M))}le=l.fromHex(C)}catch{return!1}if(!se||F&&se.hasHighS())return!1;q&&(b=e.hash(b));const{r:de,s:Ae}=se,Ie=G(b),Ce=a(Ae),vt=o(Ie*Ce),Ue=o(de*Ce),Oe=(qe=l.BASE.multiplyAndAddUnsafe(le,vt,Ue))==null?void 0:qe.toAffine();return Oe?o(Oe.x)===de:!1}return{CURVE:e,getPublicKey:I,getSharedSecret:j,sign:H,verify:A,ProjectivePoint:l,Signature:_,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hU(t){return{hash:t,hmac:(e,...n)=>WA(t,e,MB(...n)),randomBytes:G2}}function fU(t,e){const n=r=>dU({...t,...hU(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $A=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ib=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),pU=BigInt(1),xy=BigInt(2),sb=(t,e)=>(t+e/xy)/e;function mU(t){const e=$A,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,d=c*c*t%e,h=sn(d,n,e)*d%e,m=sn(h,n,e)*d%e,v=sn(m,xy,e)*c%e,k=sn(v,i,e)*v%e,S=sn(k,s,e)*k%e,_=sn(S,a,e)*S%e,T=sn(_,l,e)*_%e,I=sn(T,a,e)*S%e,E=sn(I,n,e)*d%e,j=sn(E,o,e)*k%e,K=sn(j,r,e)*c%e,G=sn(K,xy,e);if(!Ey.eql(Ey.sqr(G),t))throw new Error("Cannot find square root");return G}const Ey=rm($A,void 0,void 0,{sqrt:mU}),gU=fU({a:BigInt(0),b:BigInt(7),Fp:Ey,n:ib,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ib,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-pU*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=sb(s*t,e),l=sb(-r*t,e);let c=Ft(t-a*n-l*i,e),d=Ft(-a*r-l*s,e);const h=c>o,m=d>o;if(h&&(c=e-c),m&&(d=e-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:d}}}},vy);BigInt(0);const ob=()=>{const t=Od.utils.randomPrivateKey(),e=by(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},by=Od.getPublicKey;function ab(t){try{return Od.ExtendedPoint.fromHex(t),!0}catch{return!1}}const qA=(t,e)=>Od.sign(t,e.slice(0,32)),yU=Od.verify,nc=t=>Be.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Be.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Be.Buffer.from(t);class wU{constructor(e){Object.assign(this,e)}encode(){return Be.Buffer.from(pA(tf,this))}static decode(e){return mA(tf,this,e)}static decodeUnchecked(e){return cA(tf,this,e)}}const tf=new Map;var HA;const vU=32,vo=32;function _U(t){return t._bn!==void 0}let lb=1;class Ee extends wU{constructor(e){if(super({}),this._bn=void 0,_U(e))this._bn=e._bn;else{if(typeof e=="string"){const n=Un.decode(e);if(n.length!=vo)throw new Error("Invalid public key input");this._bn=new JE(n)}else this._bn=new JE(e);if(this._bn.byteLength()>vo)throw new Error("Invalid public key input")}}static unique(){const e=new Ee(lb);return lb+=1,new Ee(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Un.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Be.Buffer);if(e.length===vo)return e;const n=Be.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=Be.Buffer.concat([e.toBuffer(),Be.Buffer.from(n),r.toBuffer()]),s=vy(i);return new Ee(s)}static createProgramAddressSync(e,n){let r=Be.Buffer.alloc(0);e.forEach(function(s){if(s.length>vU)throw new TypeError("Max seed length exceeded");r=Be.Buffer.concat([r,nc(s)])}),r=Be.Buffer.concat([r,n.toBuffer(),Be.Buffer.from("ProgramDerivedAddress")]);const i=vy(r);if(ab(i))throw new Error("Invalid seeds, address must fall off the curve");return new Ee(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(Be.Buffer.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new Ee(e);return ab(n.toBytes())}}HA=Ee;Ee.default=new HA("11111111111111111111111111111111");tf.set(Ee,{kind:"struct",fields:[["_bn","u256"]]});new Ee("BPFLoader1111111111111111111111111111111111");const Ll=1232,d1=127,dd=64;class KA extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(KA.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class GA extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(GA.prototype,"name",{value:"TransactionExpiredTimeoutError"});class uu extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(uu.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class sp{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const He=(t="publicKey")=>Lt(32,t),xU=(t="signature")=>Lt(64,t),_l=(t="string")=>{const e=ve([Se("length"),Se("lengthPadding"),Lt(da(Se(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:Be.Buffer.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>Se().span+Se().span+Be.Buffer.from(s,"utf8").length,i},EU=(t="authorized")=>ve([He("staker"),He("withdrawer")],t),bU=(t="lockup")=>ve([kr("unixTimestamp"),kr("epoch"),He("custodian")],t),IU=(t="voteInit")=>ve([He("nodePubkey"),He("authorizedVoter"),He("authorizedWithdrawer"),at("commission")],t),SU=(t="voteAuthorizeWithSeedArgs")=>ve([Se("voteAuthorizationType"),He("currentAuthorityDerivedKeyOwnerPubkey"),_l("currentAuthorityDerivedKeySeed"),He("newAuthorized")],t);function Tr(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function Ar(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Ut(t,e){if(!t)throw new Error(e||"Assertion failed")}class um{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new um(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ut(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Ut(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Ut(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new Ee(l)),...r.map(([l])=>new Ee(l)),...i.map(([l])=>new Ee(l)),...s.map(([l])=>new Ee(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new Ee(s),l=e.findIndex(c=>c.equals(a));l>=0&&(Ut(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const YA="Reached end of buffer unexpectedly";function es(t){if(t.length===0)throw new Error(YA);return t.shift()}function Nr(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(YA);return t.splice(...e)}class bs{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new Ee(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Un.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new sp(this.staticAccountKeys)}static compile(e){const n=um.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new sp(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Un.encode(a.data)}));return new bs({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Ar(n,e);const r=this.instructions.map(h=>{const{accounts:m,programIdIndex:v}=h,k=Array.from(Un.decode(h.data));let S=[];Ar(S,m.length);let _=[];return Ar(_,k.length),{programIdIndex:v,keyIndicesCount:Be.Buffer.from(S),keyIndices:m,dataLength:Be.Buffer.from(_),data:k}});let i=[];Ar(i,r.length);let s=Be.Buffer.alloc(Ll);Be.Buffer.from(i).copy(s);let o=i.length;r.forEach(h=>{const v=ve([at("programIdIndex"),Lt(h.keyIndicesCount.length,"keyIndicesCount"),ir(at("keyIndex"),h.keyIndices.length,"keyIndices"),Lt(h.dataLength.length,"dataLength"),ir(at("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=v}),s=s.slice(0,o);const a=ve([Lt(1,"numRequiredSignatures"),Lt(1,"numReadonlySignedAccounts"),Lt(1,"numReadonlyUnsignedAccounts"),Lt(n.length,"keyCount"),ir(He("key"),e,"keys"),He("recentBlockhash")]),l={numRequiredSignatures:Be.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Be.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Be.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Be.Buffer.from(n),keys:this.accountKeys.map(h=>nc(h.toBytes())),recentBlockhash:Un.decode(this.recentBlockhash)};let c=Be.Buffer.alloc(2048);const d=a.encode(l,c);return s.copy(c,d),c.slice(0,d+s.length)}static from(e){let n=[...e];const r=es(n);if(r!==(r&d1))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=es(n),s=es(n),o=Tr(n);let a=[];for(let m=0;m<o;m++){const v=Nr(n,0,vo);a.push(new Ee(Be.Buffer.from(v)))}const l=Nr(n,0,vo),c=Tr(n);let d=[];for(let m=0;m<c;m++){const v=es(n),k=Tr(n),S=Nr(n,0,k),_=Tr(n),T=Nr(n,0,_),I=Un.encode(Be.Buffer.from(T));d.push({programIdIndex:v,accounts:S,data:I})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Un.encode(Be.Buffer.from(l)),accountKeys:a,instructions:d};return new bs(h)}}class hd{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new sp(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=um.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const h=n.extractTableLookup(d);if(h!==void 0){const[m,{writable:v,readonly:k}]=h;r.push(m),i.writable.push(...v),i.readonly.push(...k)}}const[o,a]=n.getMessageComponents(),c=new sp(a,i).compileInstructions(e.instructions);return new hd({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Ar(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Ar(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Ar(s,this.addressTableLookups.length);const o=ve([at("prefix"),ve([at("numRequiredSignatures"),at("numReadonlySignedAccounts"),at("numReadonlyUnsignedAccounts")],"header"),Lt(e.length,"staticAccountKeysLength"),ir(He(),this.staticAccountKeys.length,"staticAccountKeys"),He("recentBlockhash"),Lt(r.length,"instructionsLength"),Lt(n.length,"serializedInstructions"),Lt(s.length,"addressTableLookupsLength"),Lt(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Ll),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:Un.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(Ll);for(const r of this.compiledInstructions){const i=Array();Ar(i,r.accountKeyIndexes.length);const s=Array();Ar(s,r.data.length);const o=ve([at("programIdIndex"),Lt(i.length,"encodedAccountKeyIndexesLength"),ir(at(),r.accountKeyIndexes.length,"accountKeyIndexes"),Lt(s.length,"encodedDataLength"),Lt(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Ll);for(const r of this.addressTableLookups){const i=Array();Ar(i,r.writableIndexes.length);const s=Array();Ar(s,r.readonlyIndexes.length);const o=ve([He("accountKey"),Lt(i.length,"encodedWritableIndexesLength"),ir(at(),r.writableIndexes.length,"writableIndexes"),Lt(s.length,"encodedReadonlyIndexesLength"),ir(at(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=es(n),i=r&d1;Ut(r!==i,"Expected versioned message but received legacy message");const s=i;Ut(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:es(n),numReadonlySignedAccounts:es(n),numReadonlyUnsignedAccounts:es(n)},a=[],l=Tr(n);for(let k=0;k<l;k++)a.push(new Ee(Nr(n,0,vo)));const c=Un.encode(Nr(n,0,vo)),d=Tr(n),h=[];for(let k=0;k<d;k++){const S=es(n),_=Tr(n),T=Nr(n,0,_),I=Tr(n),E=new Uint8Array(Nr(n,0,I));h.push({programIdIndex:S,accountKeyIndexes:T,data:E})}const m=Tr(n),v=[];for(let k=0;k<m;k++){const S=new Ee(Nr(n,0,vo)),_=Tr(n),T=Nr(n,0,_),I=Tr(n),E=Nr(n,0,I);v.push({accountKey:S,writableIndexes:T,readonlyIndexes:E})}return new hd({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:h,addressTableLookups:v})}}const h1={deserializeMessageVersion(t){const e=t[0],n=e&d1;return n===e?"legacy":n},deserialize:t=>{const e=h1.deserializeMessageVersion(t);if(e==="legacy")return bs.from(t);if(e===0)return hd.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Fs=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const kU=Be.Buffer.alloc(dd).fill(0);class cb{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Be.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ii{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new cb(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let S=0;S<n.length;S++)if(n[S].programId===void 0)throw new Error(`Transaction instruction index ${S} has undefined program id`);const i=[],s=[];n.forEach(S=>{S.keys.forEach(T=>{s.push({...T})});const _=S.programId.toString();i.includes(_)||i.push(_)}),i.forEach(S=>{s.push({pubkey:new Ee(S),isSigner:!1,isWritable:!1})});const o=[];s.forEach(S=>{const _=S.pubkey.toString(),T=o.findIndex(I=>I.pubkey.toString()===_);T>-1?(o[T].isWritable=o[T].isWritable||S.isWritable,o[T].isSigner=o[T].isSigner||S.isSigner):o.push(S)}),o.sort(function(S,_){if(S.isSigner!==_.isSigner)return S.isSigner?-1:1;if(S.isWritable!==_.isWritable)return S.isWritable?-1:1;const T={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return S.pubkey.toBase58().localeCompare(_.pubkey.toBase58(),"en",T)});const a=o.findIndex(S=>S.pubkey.equals(r));if(a>-1){const[S]=o.splice(a,1);S.isSigner=!0,S.isWritable=!0,o.unshift(S)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const S of this.signatures){const _=o.findIndex(T=>T.pubkey.equals(S.publicKey));if(_>-1)o[_].isSigner||(o[_].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${S.publicKey.toString()}`)}let l=0,c=0,d=0;const h=[],m=[];o.forEach(({pubkey:S,isSigner:_,isWritable:T})=>{_?(h.push(S.toString()),l+=1,T||(c+=1)):(m.push(S.toString()),T||(d+=1))});const v=h.concat(m),k=n.map(S=>{const{data:_,programId:T}=S;return{programIdIndex:v.indexOf(T.toString()),accounts:S.keys.map(I=>v.indexOf(I.pubkey.toString())),data:Un.encode(_)}});return k.forEach(S=>{Ut(S.programIdIndex>=0),S.accounts.forEach(_=>Ut(_>=0))}),new bs({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:d},accountKeys:v,recentBlockhash:e,instructions:k})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=qA(r,i.secretKey);this._addSignature(i.publicKey,nc(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Ut(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=Be.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):yU(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];Ar(r,n.length);const i=r.length+n.length*64+e.length,s=Be.Buffer.alloc(i);return Ut(n.length<256),Be.Buffer.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Ut(o.length===64,"signature has invalid length"),Be.Buffer.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),Ut(s.length<=Ll,`Transaction too large: ${s.length} > ${Ll}`),s}get keys(){return Ut(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ut(this.instructions.length===1),this.instructions[0].programId}get data(){return Ut(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Tr(n);let i=[];for(let s=0;s<r;s++){const o=Nr(n,0,dd);i.push(Un.encode(Be.Buffer.from(o)))}return ii.populate(bs.from(n),i)}static populate(e,n=[]){const r=new ii;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==Un.encode(kU)?null:Un.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new cb({keys:s,programId:e.accountKeys[i.programIdIndex],data:Un.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class fd{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)Ut(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(dd));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();Ar(n,this.signatures.length);const r=ve([Lt(n.length,"encodedSignaturesLength"),ir(xU(),this.signatures.length,"signatures"),Lt(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let n=[...e];const r=[],i=Tr(n);for(let o=0;o<i;o++)r.push(new Uint8Array(Nr(n,0,dd)));const s=h1.deserialize(new Uint8Array(n));return new fd(s,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=r.findIndex(o=>o.equals(i.publicKey));Ut(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=qA(n,i.secretKey)}}addSignature(e,n){Ut(n.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Ut(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=n}}const TU=160,AU=64,NU=TU/AU,CU=1e3/NU;new Ee("SysvarC1ock11111111111111111111111111111111");new Ee("SysvarEpochSchedu1e111111111111111111111111");new Ee("Sysvar1nstructions1111111111111111111111111");new Ee("SysvarRecentB1ockHashes11111111111111111111");new Ee("SysvarRent111111111111111111111111111111111");new Ee("SysvarRewards111111111111111111111111111111");new Ee("SysvarS1otHashes111111111111111111111111111");new Ee("SysvarS1otHistory11111111111111111111111111");new Ee("SysvarStakeHistory1111111111111111111111111");class ub extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class xe extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function sl(t){return new Promise(e=>setTimeout(e,t))}const MU=Ln("lamportsPerSignature"),QA=ve([Se("version"),Se("state"),He("authorizedPubkey"),He("nonce"),ve([MU],"feeCalculator")]);QA.span;class f1{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=QA.decode(nc(e),0);return new f1({authorizedPubkey:new Ee(n.authorizedPubkey),nonce:new Ee(n.nonce).toString(),feeCalculator:n.feeCalculator})}}const RU=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}},PU=t=>e=>{const n=Lt(t,e),{encode:r,decode:i}=RU(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return m8(Be.Buffer.from(l))},s.encode=(o,a,l)=>{const c=w8(o,t);return r(c,a,l)},s},rc=PU(8);Object.freeze({Create:{index:0,layout:ve([Se("instruction"),kr("lamports"),kr("space"),He("programId")])},Assign:{index:1,layout:ve([Se("instruction"),He("programId")])},Transfer:{index:2,layout:ve([Se("instruction"),rc("lamports")])},CreateWithSeed:{index:3,layout:ve([Se("instruction"),He("base"),_l("seed"),kr("lamports"),kr("space"),He("programId")])},AdvanceNonceAccount:{index:4,layout:ve([Se("instruction")])},WithdrawNonceAccount:{index:5,layout:ve([Se("instruction"),kr("lamports")])},InitializeNonceAccount:{index:6,layout:ve([Se("instruction"),He("authorized")])},AuthorizeNonceAccount:{index:7,layout:ve([Se("instruction"),He("authorized")])},Allocate:{index:8,layout:ve([Se("instruction"),kr("space")])},AllocateWithSeed:{index:9,layout:ve([Se("instruction"),He("base"),_l("seed"),kr("space"),He("programId")])},AssignWithSeed:{index:10,layout:ve([Se("instruction"),He("base"),_l("seed"),He("programId")])},TransferWithSeed:{index:11,layout:ve([Se("instruction"),rc("lamports"),_l("seed"),He("programId")])},UpgradeNonceAccount:{index:12,layout:ve([Se("instruction")])}});new Ee("11111111111111111111111111111111");new Ee("BPFLoader2111111111111111111111111111111111");function LU(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tg,db;function DU(){if(db)return Tg;db=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,d,h;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(h=t.call(r),h==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(h==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],d=n(r[c],!1),d!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+d),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Tg=function(r){var i=n(r,!1);if(i!==void 0)return""+i},Tg}var OU=DU(),hb=LU(OU);const Kc=32;function Ag(t){let e=0;for(;t>1;)t/=2,e++;return e}function jU(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class BU{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=Ag(jU(e+Kc+1))-Ag(Kc)-1,r=this.getSlotsInEpoch(n),i=e-(r-Kc);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Kc:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ag(Kc)):this.slotsPerEpoch}}var UU=globalThis.fetch;class FU extends iU{constructor(e,n,r){const i=s=>{const o=nU(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function VU(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const fb=56;class pb{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=VU(zU,e),r=e.length-fb;Ut(r>=0,"lookup table is invalid"),Ut(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=ve([ir(He(),i,"addresses")]).decode(e.slice(fb));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new Ee(n.authority[0]):void 0,addresses:s.map(o=>new Ee(o))}}}const zU={index:1,layout:ve([Se("typeIndex"),rc("deactivationSlot"),Ln("lastExtendedSlot"),at("lastExtendedStartIndex"),at(),ir(He(),da(at(),-1),"authority")])},WU=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function $U(t){const e=t.match(WU);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const en=Fd(c1(Ee),ue(),t=>new Ee(t)),ZA=u1([ue(),Yt("base64")]),p1=Fd(c1(Be.Buffer),ZA,t=>Be.Buffer.from(t[0],"base64")),qU=30*1e3;function HU(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Tt(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function mb(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function XA(t){return dr([ie({jsonrpc:Yt("2.0"),id:ue(),result:t}),ie({jsonrpc:Yt("2.0"),id:ue(),error:ie({code:Ic(),message:ue(),data:Te(k8())})})])}const KU=XA(Ic());function $e(t){return Fd(XA(t),KU,e=>"error"in e?e:{...e,result:fe(e.result,t)})}function ln(t){return $e(ie({context:ie({slot:J()}),value:t}))}function dm(t){return ie({context:ie({slot:J()}),value:t})}function Ng(t,e){return t===0?new hd({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new Ee(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:Un.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new bs(e)}const GU=ie({foundation:J(),foundationTerm:J(),initial:J(),taper:J(),terminal:J()}),YU=$e(pe(me(ie({epoch:J(),effectiveSlot:J(),amount:J(),postBalance:J(),commission:Te(me(J()))})))),QU=pe(ie({slot:J(),prioritizationFee:J()})),ZU=ie({total:J(),validator:J(),foundation:J(),epoch:J()}),XU=ie({epoch:J(),slotIndex:J(),slotsInEpoch:J(),absoluteSlot:J(),blockHeight:Te(J()),transactionCount:Te(J())}),JU=ie({slotsPerEpoch:J(),leaderScheduleSlotOffset:J(),warmup:Mi(),firstNormalEpoch:J(),firstNormalSlot:J()}),eF=LA(ue(),pe(J())),La=me(dr([ie({}),ue()])),tF=ie({err:La}),nF=Yt("receivedSignature"),rF=ie({"solana-core":ue(),"feature-set":Te(J())}),iF=ie({program:ue(),programId:en,parsed:Ic()}),sF=ie({programId:en,accounts:pe(en),data:ue()}),gb=ln(ie({err:me(dr([ie({}),ue()])),logs:me(pe(ue())),accounts:Te(me(pe(me(ie({executable:Mi(),owner:ue(),lamports:J(),data:pe(ue()),rentEpoch:Te(J())}))))),unitsConsumed:Te(J()),returnData:Te(me(ie({programId:ue(),data:u1([ue(),Yt("base64")])}))),innerInstructions:Te(me(pe(ie({index:J(),instructions:pe(dr([iF,sF]))}))))})),oF=ln(ie({byIdentity:LA(ue(),pe(J())),range:ie({firstSlot:J(),lastSlot:J()})}));function aF(t,e,n,r,i,s){const o=n||UU;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(d,h)=>{const m=await new Promise((v,k)=>{try{r(d,h,(S,_)=>v([S,_]))}catch(S){k(S)}});return await o(...m)}),new J8(async(d,h)=>{const m={method:"POST",body:d,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},aV)};try{let v=5,k,S=500;for(;l?k=await l(t,m):k=await o(t,m),!(k.status!==429||i===!0||(v-=1,v===0));)console.error(`Server responded with ${k.status} ${k.statusText}.  Retrying after ${S}ms delay...`),await sl(S),S*=2;const _=await k.text();k.ok?h(null,_):h(new Error(`${k.status} ${k.statusText}: ${_}`))}catch(v){v instanceof Error&&h(v)}},{})}function lF(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function cF(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const uF=$e(GU),dF=$e(ZU),hF=$e(QU),fF=$e(XU),pF=$e(JU),mF=$e(eF),gF=$e(J()),yF=ln(ie({total:J(),circulating:J(),nonCirculating:J(),nonCirculatingAccounts:pe(en)})),Iy=ie({amount:ue(),uiAmount:me(J()),decimals:J(),uiAmountString:Te(ue())}),wF=ln(pe(ie({address:en,amount:ue(),uiAmount:me(J()),decimals:J(),uiAmountString:Te(ue())}))),vF=ln(pe(ie({pubkey:en,account:ie({executable:Mi(),owner:en,lamports:J(),data:p1,rentEpoch:J()})}))),Sy=ie({program:ue(),parsed:Ic(),space:J()}),_F=ln(pe(ie({pubkey:en,account:ie({executable:Mi(),owner:en,lamports:J(),data:Sy,rentEpoch:J()})}))),xF=ln(pe(ie({lamports:J(),address:en}))),pd=ie({executable:Mi(),owner:en,lamports:J(),data:p1,rentEpoch:J()}),EF=ie({pubkey:en,account:pd}),bF=Fd(dr([c1(Be.Buffer),Sy]),dr([ZA,Sy]),t=>Array.isArray(t)?fe(t,p1):t),ky=ie({executable:Mi(),owner:en,lamports:J(),data:bF,rentEpoch:J()}),IF=ie({pubkey:en,account:ky}),SF=ie({state:dr([Yt("active"),Yt("inactive"),Yt("activating"),Yt("deactivating")]),active:J(),inactive:J()}),kF=$e(pe(ie({signature:ue(),slot:J(),err:La,memo:me(ue()),blockTime:Te(me(J()))}))),TF=$e(pe(ie({signature:ue(),slot:J(),err:La,memo:me(ue()),blockTime:Te(me(J()))}))),AF=ie({subscription:J(),result:dm(pd)}),NF=ie({pubkey:en,account:pd}),CF=ie({subscription:J(),result:dm(NF)}),MF=ie({parent:J(),slot:J(),root:J()}),RF=ie({subscription:J(),result:MF}),PF=dr([ie({type:dr([Yt("firstShredReceived"),Yt("completed"),Yt("optimisticConfirmation"),Yt("root")]),slot:J(),timestamp:J()}),ie({type:Yt("createdBank"),parent:J(),slot:J(),timestamp:J()}),ie({type:Yt("frozen"),slot:J(),timestamp:J(),stats:ie({numTransactionEntries:J(),numSuccessfulTransactions:J(),numFailedTransactions:J(),maxTransactionsPerEntry:J()})}),ie({type:Yt("dead"),slot:J(),timestamp:J(),err:ue()})]),LF=ie({subscription:J(),result:PF}),DF=ie({subscription:J(),result:dm(dr([tF,nF]))}),OF=ie({subscription:J(),result:J()}),jF=ie({pubkey:ue(),gossip:me(ue()),tpu:me(ue()),rpc:me(ue()),version:me(ue())}),yb=ie({votePubkey:ue(),nodePubkey:ue(),activatedStake:J(),epochVoteAccount:Mi(),epochCredits:pe(u1([J(),J(),J()])),commission:J(),lastVote:J(),rootSlot:me(J())}),BF=$e(ie({current:pe(yb),delinquent:pe(yb)})),UF=dr([Yt("processed"),Yt("confirmed"),Yt("finalized")]),FF=ie({slot:J(),confirmations:me(J()),err:La,confirmationStatus:Te(UF)}),VF=ln(pe(me(FF))),zF=$e(J()),JA=ie({accountKey:en,writableIndexes:pe(J()),readonlyIndexes:pe(J())}),m1=ie({signatures:pe(ue()),message:ie({accountKeys:pe(ue()),header:ie({numRequiredSignatures:J(),numReadonlySignedAccounts:J(),numReadonlyUnsignedAccounts:J()}),instructions:pe(ie({accounts:pe(J()),data:ue(),programIdIndex:J()})),recentBlockhash:ue(),addressTableLookups:Te(pe(JA))})}),eN=ie({pubkey:en,signer:Mi(),writable:Mi(),source:Te(dr([Yt("transaction"),Yt("lookupTable")]))}),tN=ie({accountKeys:pe(eN),signatures:pe(ue())}),nN=ie({parsed:Ic(),program:ue(),programId:en}),rN=ie({accounts:pe(en),data:ue(),programId:en}),WF=dr([rN,nN]),$F=dr([ie({parsed:Ic(),program:ue(),programId:ue()}),ie({accounts:pe(ue()),data:ue(),programId:ue()})]),iN=Fd(WF,$F,t=>"accounts"in t?fe(t,rN):fe(t,nN)),sN=ie({signatures:pe(ue()),message:ie({accountKeys:pe(eN),instructions:pe(iN),recentBlockhash:ue(),addressTableLookups:Te(me(pe(JA)))})}),op=ie({accountIndex:J(),mint:ue(),owner:Te(ue()),programId:Te(ue()),uiTokenAmount:Iy}),oN=ie({writable:pe(en),readonly:pe(en)}),hm=ie({err:La,fee:J(),innerInstructions:Te(me(pe(ie({index:J(),instructions:pe(ie({accounts:pe(J()),data:ue(),programIdIndex:J()}))})))),preBalances:pe(J()),postBalances:pe(J()),logMessages:Te(me(pe(ue()))),preTokenBalances:Te(me(pe(op))),postTokenBalances:Te(me(pe(op))),loadedAddresses:Te(oN),computeUnitsConsumed:Te(J())}),g1=ie({err:La,fee:J(),innerInstructions:Te(me(pe(ie({index:J(),instructions:pe(iN)})))),preBalances:pe(J()),postBalances:pe(J()),logMessages:Te(me(pe(ue()))),preTokenBalances:Te(me(pe(op))),postTokenBalances:Te(me(pe(op))),loadedAddresses:Te(oN),computeUnitsConsumed:Te(J())}),Sc=dr([Yt(0),Yt("legacy")]),Da=ie({pubkey:ue(),lamports:J(),postBalance:me(J()),rewardType:me(ue()),commission:Te(me(J()))}),qF=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:m1,meta:me(hm),version:Te(Sc)})),rewards:Te(pe(Da)),blockTime:me(J()),blockHeight:me(J())}))),HF=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),rewards:Te(pe(Da)),blockTime:me(J()),blockHeight:me(J())}))),KF=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:tN,meta:me(hm),version:Te(Sc)})),rewards:Te(pe(Da)),blockTime:me(J()),blockHeight:me(J())}))),GF=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:sN,meta:me(g1),version:Te(Sc)})),rewards:Te(pe(Da)),blockTime:me(J()),blockHeight:me(J())}))),YF=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:tN,meta:me(g1),version:Te(Sc)})),rewards:Te(pe(Da)),blockTime:me(J()),blockHeight:me(J())}))),QF=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),rewards:Te(pe(Da)),blockTime:me(J()),blockHeight:me(J())}))),ZF=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:m1,meta:me(hm)})),rewards:Te(pe(Da)),blockTime:me(J())}))),wb=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),signatures:pe(ue()),blockTime:me(J())}))),Cg=$e(me(ie({slot:J(),meta:me(hm),blockTime:Te(me(J())),transaction:m1,version:Te(Sc)}))),Ah=$e(me(ie({slot:J(),transaction:sN,meta:me(g1),blockTime:Te(me(J())),version:Te(Sc)}))),XF=ln(ie({blockhash:ue(),lastValidBlockHeight:J()})),JF=ln(Mi()),eV=ie({slot:J(),numTransactions:J(),numSlots:J(),samplePeriodSecs:J()}),tV=$e(pe(eV)),nV=ln(me(ie({feeCalculator:ie({lamportsPerSignature:J()})}))),rV=$e(ue()),iV=$e(ue()),sV=ie({err:La,logs:pe(ue()),signature:ue()}),oV=ie({result:dm(sV),subscription:J()}),aV={"solana-client":"js/1.0.0-maintenance"};class y1{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async d=>{const{commitment:h,config:m}=Tt(d),v=this._buildArgs([],h,void 0,m),k=hb(v);return c[k]=c[k]??(async()=>{try{const S=await this._rpcRequest("getBlockHeight",v),_=fe(S,$e(J()));if("error"in _)throw new xe(_.error,"failed to get block height information");return _.result}finally{delete c[k]}})(),await c[k]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=HU(e),this._rpcWsEndpoint=r||$U(e),this._rpcClient=aF(e,i,s,o,a,l),this._rpcRequest=lF(this._rpcClient),this._rpcBatchRequest=cF(this._rpcClient),this._rpcWebSocket=new FU(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=fe(o,ln(J()));if("error"in a)throw new xe(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=fe(n,$e(me(J())));if("error"in r)throw new xe(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=fe(e,$e(J()));if("error"in n)throw new xe(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=fe(e,gF);if("error"in n)throw new xe(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=fe(r,yF);if("error"in i)throw new xe(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=fe(i,ln(Iy));if("error"in s)throw new xe(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=fe(i,ln(Iy));if("error"in s)throw new xe(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=Tt(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=fe(l,vF);if("error"in c)throw new xe(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=fe(o,_F);if("error"in a)throw new xe(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=fe(i,xF);if("error"in s)throw new xe(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=fe(i,wF);if("error"in s)throw new xe(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=fe(o,ln(me(pd)));if("error"in a)throw new xe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=fe(o,ln(me(ky)));if("error"in a)throw new xe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=Tt(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=fe(a,ln(pe(me(ky))));if("error"in l)throw new xe(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=Tt(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=fe(a,ln(pe(me(pd))));if("error"in l)throw new xe(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=Tt(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=fe(a,$e(SF));if("error"in l)throw new xe(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=Tt(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:mb(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=pe(EF),d=o.withContext===!0?fe(l,ln(c)):fe(l,$e(c));if("error"in d)throw new xe(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=fe(o,$e(pe(IF)));if("error"in a)throw new xe(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=Un.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ut(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(h,m)=>{r=void 0;const v={context:m,value:h};l({__type:Fs.PROCESSED,response:v})},e);const d=new Promise(h=>{r==null?h():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&h()})});(async()=>{if(await d,s)return;const h=await this.getSignatureStatus(n);if(s||h==null)return;const{context:m,value:v}=h;if(v!=null)if(v!=null&&v.err)c(v.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(v.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(v.confirmationStatus==="processed"||v.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:Fs.PROCESSED,response:{context:m,value:v}})}})()}catch(d){c(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(h=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let v=await m();if(!s){for(;v<=r;)if(await sl(1e3),s||(v=await m(),s))return;h({__type:Fs.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let d;try{const h=await Promise.race([c,l,o]);if(h.__type===Fs.PROCESSED)d=h.response;else throw new KA(i)}finally{s=!0,a()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(v=>{let k=s,S=null;const _=async()=>{try{const{context:T,value:I}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return S=T.slot,I==null?void 0:I.nonce}catch{return k}};(async()=>{if(k=await _(),!a)for(;;){if(s!==k){v({__type:Fs.NONCE_INVALID,slotInWhichNonceDidAdvance:S});return}if(await sl(2e3),a||(k=await _(),a))return}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(n);let m;try{const v=await Promise.race([h,d,l]);if(v.__type===Fs.PROCESSED)m=v.response;else{let k;for(;;){const S=await this.getSignatureStatus(o);if(S==null)break;if(S.context.slot<(v.slotInWhichNonceDidAdvance??r)){await sl(400);continue}k=S;break}if(k!=null&&k.value){const S=e||"finalized",{confirmationStatus:_}=k.value;switch(S){case"processed":case"recent":if(_!=="processed"&&_!=="confirmed"&&_!=="finalized")throw new uu(o);break;case"confirmed":case"single":case"singleGossip":if(_!=="confirmed"&&_!=="finalized")throw new uu(o);break;case"finalized":case"max":case"root":if(_!=="finalized")throw new uu(o);break;default:}m={context:k.context,value:{err:k.value.err}}}else throw new uu(o)}}finally{a=!0,c()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:Fs.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===Fs.PROCESSED)a=l.response;else throw new GA(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=fe(e,$e(pe(jF)));if("error"in n)throw new xe(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=fe(r,BF);if("error"in i)throw new xe(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=fe(s,$e(J()));if("error"in o)throw new xe(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=fe(s,$e(ue()));if("error"in o)throw new xe(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=fe(i,$e(pe(en)));if("error"in s)throw new xe(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);Ut(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=fe(i,VF);if("error"in s)throw new xe(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=fe(s,$e(J()));if("error"in o)throw new xe(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=fe(r,uF);if("error"in i)throw new xe(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=Tt(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=fe(a,YU);if("error"in l)throw new xe(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=fe(e,dF);if("error"in n)throw new xe(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=fe(s,fF);if("error"in o)throw new xe(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=fe(e,pF);if("error"in n)throw new xe(n.error,"failed to get epoch schedule");const r=n.result;return new BU(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=fe(e,mF);if("error"in n)throw new xe(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=fe(i,zF);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=fe(n,tV);if("error"in r)throw new xe(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=fe(i,nV);if("error"in s)throw new xe(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=nc(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=fe(s,ln(me(J())));if("error"in o)throw new xe(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=fe(i,hF);if("error"in s)throw new xe(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=fe(s,XF);if("error"in o)throw new xe(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=fe(o,JF);if("error"in a)throw new xe(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=fe(e,$e(rF));if("error"in n)throw new xe(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=fe(e,$e(ue()));if("error"in n)throw new xe(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=fe(o,KF);if("error"in a)throw a.error;return a.result}case"none":{const a=fe(o,HF);if("error"in a)throw a.error;return a.result}default:{const a=fe(o,qF);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:d,version:h})=>({meta:d,transaction:{...c,message:Ng(h,c.message)},version:h}))}:null}}}catch(a){throw new xe(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=fe(o,YF);if("error"in a)throw a.error;return a.result}case"none":{const a=fe(o,QF);if("error"in a)throw a.error;return a.result}default:{const a=fe(o,GF);if("error"in a)throw a.error;return a.result}}}catch(a){throw new xe(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=fe(s,oF);if("error"in o)throw new xe(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=fe(o,Cg);if("error"in a)throw new xe(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:Ng(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=fe(o,Ah);if("error"in a)throw new xe(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=Tt(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=fe(l,Ah);if("error"in c)throw new xe(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=Tt(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=fe(l,Cg);if("error"in c)throw new xe(c.error,"failed to get transactions");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:Ng(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=fe(i,ZF);if("error"in s)throw new xe(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const d=new bs(l.message);return{meta:c,transaction:{...l,message:d}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:ii.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=fe(s,$e(pe(J())));if("error"in o)throw new xe(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=fe(i,wb);if("error"in s)throw new xe(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=fe(i,wb);if("error"in s)throw new xe(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=fe(i,Cg);if("error"in s)throw new xe(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new bs(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:ii.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=fe(i,Ah);if("error"in s)throw new xe(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=fe(o,Ah);if("error"in a)throw new xe(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=fe(s,kF);if("error"in o)throw new xe(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=fe(s,TF);if("error"in o)throw new xe(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new pb({key:e,state:pb.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=f1.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=fe(r,rV);if("error"in i)throw new xe(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await sl(100);const r=Date.now()-this._blockhashInfo.lastFetch>=qU;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await sl(CU/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=fe(s,ln(J()));if("error"in o)throw new xe(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const S=e.serialize(),_=Be.Buffer.from(S).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const T=n||{};T.encoding="base64","commitment"in T||(T.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(T.innerInstructions=n.innerInstructions);const I=[_,T],E=await this._rpcRequest("simulateTransaction",I),j=fe(E,gb);if("error"in j)throw new Error("failed to simulate transaction: "+j.error.message);return j.result}let i;if(e instanceof ii){let k=e;i=new ii,i.feePayer=k.feePayer,i.instructions=e.instructions,i.nonceInfo=k.nonceInfo,i.signatures=k.signatures}else i=ii.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let k=this._disableBlockhashCaching;for(;;){const S=await this._blockhashWithExpiryBlockHeight(k);if(i.lastValidBlockHeight=S.lastValidBlockHeight,i.recentBlockhash=S.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const _=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(_)&&!this._blockhashInfo.transactionSignatures.includes(_)){this._blockhashInfo.simulatedSignatures.push(_);break}else k=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(r){const k=(Array.isArray(r)?r:o.nonProgramIds()).map(S=>S.toBase58());d.accounts={encoding:"base64",addresses:k}}s&&(d.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(d.innerInstructions=n.innerInstructions);const h=[c,d],m=await this._rpcRequest("simulateTransaction",h),v=fe(m,gb);if("error"in v){let k;if("data"in v.error&&(k=v.error.data.logs,k&&Array.isArray(k))){const S=`
    `,_=S+k.join(S);console.error(v.error.message,_)}throw new ub({action:"simulate",signature:"",transactionMessage:v.error.message,logs:k})}return v.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=nc(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=fe(a,iV);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new ub({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=fe(e,AF);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=hb([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Ut(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=Tt(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=fe(e,CF);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=Tt(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:mb(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=fe(e,oV);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=fe(e,RF);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=fe(e,LF);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=fe(e,DF);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=fe(e,OF);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class ku{constructor(e){this._keypair=void 0,this._keypair=e??ob()}static generate(){return new ku(ob())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=by(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new ku({publicKey:r,secretKey:e})}static fromSeed(e){const n=by(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new ku({publicKey:n,secretKey:r})}get publicKey(){return new Ee(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ve([Se("instruction"),rc("recentSlot"),at("bumpSeed")])},FreezeLookupTable:{index:1,layout:ve([Se("instruction")])},ExtendLookupTable:{index:2,layout:ve([Se("instruction"),rc(),ir(He(),da(Se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ve([Se("instruction")])},CloseLookupTable:{index:4,layout:ve([Se("instruction")])}});new Ee("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ve([at("instruction"),Se("units"),Se("additionalFee")])},RequestHeapFrame:{index:1,layout:ve([at("instruction"),Se("bytes")])},SetComputeUnitLimit:{index:2,layout:ve([at("instruction"),Se("units")])},SetComputeUnitPrice:{index:3,layout:ve([at("instruction"),rc("microLamports")])}});new Ee("ComputeBudget111111111111111111111111111111");ve([at("numSignatures"),at("padding"),Ur("signatureOffset"),Ur("signatureInstructionIndex"),Ur("publicKeyOffset"),Ur("publicKeyInstructionIndex"),Ur("messageDataOffset"),Ur("messageDataSize"),Ur("messageInstructionIndex")]);new Ee("Ed25519SigVerify111111111111111111111111111");gU.utils.isValidPrivateKey;ve([at("numSignatures"),Ur("signatureOffset"),at("signatureInstructionIndex"),Ur("ethAddressOffset"),at("ethAddressInstructionIndex"),Ur("messageDataOffset"),Ur("messageDataSize"),at("messageInstructionIndex"),Lt(20,"ethAddress"),Lt(64,"signature"),at("recoveryId")]);new Ee("KeccakSecp256k11111111111111111111111111111");var aN;new Ee("StakeConfig11111111111111111111111111111111");class lN{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}aN=lN;lN.default=new aN(0,0,Ee.default);Object.freeze({Initialize:{index:0,layout:ve([Se("instruction"),EU(),bU()])},Authorize:{index:1,layout:ve([Se("instruction"),He("newAuthorized"),Se("stakeAuthorizationType")])},Delegate:{index:2,layout:ve([Se("instruction")])},Split:{index:3,layout:ve([Se("instruction"),kr("lamports")])},Withdraw:{index:4,layout:ve([Se("instruction"),kr("lamports")])},Deactivate:{index:5,layout:ve([Se("instruction")])},Merge:{index:7,layout:ve([Se("instruction")])},AuthorizeWithSeed:{index:8,layout:ve([Se("instruction"),He("newAuthorized"),Se("stakeAuthorizationType"),_l("authoritySeed"),He("authorityOwner")])}});new Ee("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ve([Se("instruction"),IU()])},Authorize:{index:1,layout:ve([Se("instruction"),He("newAuthorized"),Se("voteAuthorizationType")])},Withdraw:{index:3,layout:ve([Se("instruction"),kr("lamports")])},UpdateValidatorIdentity:{index:4,layout:ve([Se("instruction")])},AuthorizeWithSeed:{index:10,layout:ve([Se("instruction"),SU()])}});new Ee("Vote111111111111111111111111111111111111111");new Ee("Va1idator1nfo111111111111111111111111111111");ie({name:ue(),website:Te(ue()),details:Te(ue()),iconUrl:Te(ue()),keybaseUsername:Te(ue())});new Ee("Vote111111111111111111111111111111111111111");ve([He("nodePubkey"),He("authorizedWithdrawer"),at("commission"),Ln(),ir(ve([Ln("slot"),Se("confirmationCount")]),da(Se(),-8),"votes"),at("rootSlotValid"),Ln("rootSlot"),Ln(),ir(ve([Ln("epoch"),He("authorizedVoter")]),da(Se(),-8),"authorizedVoters"),ve([ir(ve([He("authorizedPubkey"),Ln("epochOfLastAuthorizedSwitch"),Ln("targetEpoch")]),32,"buf"),Ln("idx"),at("isEmpty")],"priorVoters"),Ln(),ir(ve([Ln("epoch"),Ln("credits"),Ln("prevCredits")]),da(Se(),-8),"epochCredits"),ve([Ln("slot"),Ln("timestamp")],"lastTimestamp")]);const vb={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function lV(t,e){const n="https";if(!t)return vb[n].devnet;const r=vb[n][t];if(!r)throw new Error(`Unknown ${n} cluster: ${t}`);return r}const cN=Y.createContext({});function cV(){return Y.useContext(cN)}const uV=({children:t,endpoint:e,config:n={commitment:"confirmed"}})=>{const r=Y.useMemo(()=>new y1(e,n),[e,n]);return ce.createElement(cN.Provider,{value:{connection:r}},t)};var uN={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new i(d,h||l,m),k=n?n+c:c;return l._events[k]?l._events[k].fn?l._events[k]=[l._events[k],v]:l._events[k].push(v):(l._events[k]=v,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)e.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,v=h.length,k=new Array(v);m<v;m++)k[m]=h[m].fn;return k},a.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,d,h,m,v,k){var S=n?n+c:c;if(!this._events[S])return!1;var _=this._events[S],T=arguments.length,I,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),T){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,m),!0;case 5:return _.fn.call(_.context,d,h,m,v),!0;case 6:return _.fn.call(_.context,d,h,m,v,k),!0}for(E=1,I=new Array(T-1);E<T;E++)I[E-1]=arguments[E];_.fn.apply(_.context,I)}else{var j=_.length,K;for(E=0;E<j;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),T){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,d);break;case 3:_[E].fn.call(_[E].context,d,h);break;case 4:_[E].fn.call(_[E].context,d,h,m);break;default:if(!I)for(K=1,I=new Array(T-1);K<T;K++)I[K-1]=arguments[K];_[E].fn.apply(_[E].context,I)}}return!0},a.prototype.on=function(c,d,h){return s(this,c,d,h,!1)},a.prototype.once=function(c,d,h){return s(this,c,d,h,!0)},a.prototype.removeListener=function(c,d,h,m){var v=n?n+c:c;if(!this._events[v])return this;if(!d)return o(this,v),this;var k=this._events[v];if(k.fn)k.fn===d&&(!m||k.once)&&(!h||k.context===h)&&o(this,v);else{for(var S=0,_=[],T=k.length;S<T;S++)(k[S].fn!==d||m&&!k[S].once||h&&k[S].context!==h)&&_.push(k[S]);_.length?this._events[v]=_.length===1?_[0]:_:o(this,v)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(uN);var dV=uN.exports;const hV=To(dV);class Cn extends Error{constructor(e,n){super(e),this.error=n}}class _o extends Cn{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class fV extends Cn{constructor(){super(...arguments),this.name="WalletLoadError"}}class xl extends Cn{constructor(){super(...arguments),this.name="WalletConfigError"}}class io extends Cn{constructor(){super(...arguments),this.name="WalletConnectionError"}}class fm extends Cn{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class w1 extends Cn{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class na extends Cn{constructor(){super(...arguments),this.name="WalletAccountError"}}class ic extends Cn{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class dn extends Cn{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class as extends Cn{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class ai extends Cn{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class pm extends Cn{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class _b extends Cn{constructor(){super(...arguments),this.name="WalletSignInError"}}var Ve;(function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"})(Ve||(Ve={}));class dN extends hV{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,n,r={}){const i=this.publicKey;if(!i)throw new dn;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await n.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function hN(t){if(typeof window>"u"||typeof document>"u")return;const e=[];function n(){if(t())for(const s of e)s()}const r=setInterval(n,1e3);e.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",n))),document.readyState!=="complete"&&(window.addEventListener("load",n,{once:!0}),e.push(()=>window.removeEventListener("load",n))),n()}function Ty(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),n=t.includes("safari");return e&&n}function ls(t){return"version"in t}class pV extends dN{async sendTransaction(e,n,r={}){let i=!0;try{if(ls(e)){if(!this.supportedTransactionVersions)throw new as("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new as(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await n.sendRawTransaction(s,r)}catch(s){throw s instanceof ai?(i=!1,s):new as(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=r;e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await n.sendRawTransaction(a,o)}catch(s){throw s instanceof ai?(i=!1,s):new as(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const r of e)if(ls(r)){if(!this.supportedTransactionVersions)throw new ai("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new ai(`Signing transaction version ${r.version} isn't supported by this wallet`)}const n=[];for(const r of e)n.push(await this.signTransaction(r));return n}}class v1 extends pV{}class mV extends v1{}const ts="solana:signAndSendTransaction",Mg="solana:signIn",ol="solana:signMessage",kn="solana:signTransaction",_1="standard:connect",Ay="standard:disconnect",x1="standard:events";function gV(t){return _1 in t.features&&x1 in t.features&&(ts in t.features||kn in t.features)}var Ny;(function(t){t.Mainnet="mainnet-beta",t.Testnet="testnet",t.Devnet="devnet"})(Ny||(Ny={}));class xb extends Cn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const yV=[],mm={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){ti("call","select")},connect(){return Promise.reject(ti("call","connect"))},disconnect(){return Promise.reject(ti("call","disconnect"))},sendTransaction(){return Promise.reject(ti("call","sendTransaction"))},signTransaction(){return Promise.reject(ti("call","signTransaction"))},signAllTransactions(){return Promise.reject(ti("call","signAllTransactions"))},signMessage(){return Promise.reject(ti("call","signMessage"))},signIn(){return Promise.reject(ti("call","signIn"))}};Object.defineProperty(mm,"wallets",{get(){return ti("read","wallets"),yV}});Object.defineProperty(mm,"wallet",{get(){return ti("read","wallet"),null}});Object.defineProperty(mm,"publicKey",{get(){return ti("read","publicKey"),null}});function ti(t,e){const n=new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(n),n}const fN=Y.createContext(mm);function pN(){return Y.useContext(fN)}function wV(t,e){const n=Y.useState(()=>{try{const s=localStorage.getItem(t);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),r=n[0],i=Y.useRef(!0);return Y.useEffect(()=>{if(i.current){i.current=!1;return}try{r===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(r))}catch(s){typeof window<"u"&&console.error(s)}},[r,t]),n}function Rg(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Cy="solana:mainnet",mN="solana:devnet",gN="solana:testnet",vV="solana:localnet",_V="https://api.mainnet-beta.solana.com";function xV(t){return t.includes(_V)?Cy:/\bdevnet\b/i.test(t)?mN:/\btestnet\b/i.test(t)?gN:/\blocalhost\b/i.test(t)||/\b127\.0\.0\.1\b/.test(t)?vV:Cy}function EV(t){let e=`${t.domain} wants you to sign in with your Solana account:
`;e+=`${t.address}`,t.statement&&(e+=`

${t.statement}`);const n=[];if(t.uri&&n.push(`URI: ${t.uri}`),t.version&&n.push(`Version: ${t.version}`),t.chainId&&n.push(`Chain ID: ${t.chainId}`),t.nonce&&n.push(`Nonce: ${t.nonce}`),t.issuedAt&&n.push(`Issued At: ${t.issuedAt}`),t.expirationTime&&n.push(`Expiration Time: ${t.expirationTime}`),t.notBefore&&n.push(`Not Before: ${t.notBefore}`),t.requestId&&n.push(`Request ID: ${t.requestId}`),t.resources){n.push("Resources:");for(const r of t.resources)n.push(`- ${r}`)}return n.length&&(e+=`

${n.join(`
`)}`),e}const Is={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Ss extends Error{constructor(...e){const[n,r,i]=e;super(r),this.code=n,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class yN extends Error{constructor(...e){const[n,r,i,s]=e;super(i),this.code=r,this.data=s,this.jsonRpcMessageId=n,this.name="SolanaMobileWalletAdapterProtocolError"}}function gn(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,[])).next())})}function Pg(t,e){return gn(this,void 0,void 0,function*(){const n=yield crypto.subtle.exportKey("raw",t),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,n),i=new Uint8Array(n.byteLength+r.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i})}function bV(t){return window.btoa(t)}function IV(t){return EV(t)}function SV(t){return bV(IV(t))}const kV="solana:signTransactions",Eb="solana:cloneAuthorization";function TV(t,e){return new Proxy({},{get(n,r){return n[r]==null&&(n[r]=function(i){return gn(this,void 0,void 0,function*(){const{method:s,params:o}=AV(r,i,t),a=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield CV(o.sign_in_payload,a,e)),NV(r,a,t)})}),n[r]},defineProperty(){return!1},deleteProperty(){return!1}})}function AV(t,e,n){let r=e,i=t.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(t){case"authorize":{let{chain:s}=r;if(n==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=r.cluster}r.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}r.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=r;if(s)switch(n){case"legacy":{i="reauthorize",r={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:r}}function NV(t,e,n){switch(t){case"getCapabilities":{const r=e;switch(n){case"legacy":{const i=[kV];return r.supports_clone_authorization===!0&&i.push(Eb),Object.assign(Object.assign({},r),{features:i})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes(Eb)})}}}return e}function CV(t,e,n){var r;return gn(this,void 0,void 0,function*(){const i=(r=t.domain)!==null&&r!==void 0?r:window.location.host,s=e.accounts[0].address,o=SV(Object.assign(Object.assign({},t),{domain:i,address:s})),a=yield n("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const ra=4;function MV(t){if(t>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(ra);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e)}const My=12,wN=65;function RV(t,e,n){return gn(this,void 0,void 0,function*(){const r=MV(e),i=new Uint8Array(My);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(_N(r,i),n,new TextEncoder().encode(t)),o=new Uint8Array(r.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.byteLength),o.set(new Uint8Array(s),r.byteLength+i.byteLength),o})}function vN(t,e){return gn(this,void 0,void 0,function*(){const n=t.slice(0,ra),r=t.slice(ra,ra+My),i=t.slice(ra+My),s=yield crypto.subtle.decrypt(_N(n,r),e,i);return PV().decode(s)})}function _N(t,e){return{additionalData:t,iv:e,name:"AES-GCM",tagLength:128}}let Lg;function PV(){return Lg===void 0&&(Lg=new TextDecoder("utf-8")),Lg}function LV(){return gn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Dg(){return gn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function DV(t,e){return gn(this,void 0,void 0,function*(){const n=JSON.stringify(t),r=t.id;return RV(n,r,e)})}function OV(t,e){return gn(this,void 0,void 0,function*(){const n=yield vN(t,e),r=JSON.parse(n);if(Object.hasOwnProperty.call(r,"error"))throw new yN(r.id,r.error.code,r.error.message);return r})}function jV(t,e,n){return gn(this,void 0,void 0,function*(){const[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",t.slice(0,wN),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},n,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function BV(t,e){return gn(this,void 0,void 0,function*(){const n=yield vN(t,e),r=JSON.parse(n);let i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Ss(Is.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}function UV(){return xN(49152+Math.floor(Math.random()*16384))}function xN(t){if(t<49152||t>65535)throw new Ss(Is.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${t} given.`,{port:t});return t}function FV(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}function VV(t){return t.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const zV="solana-wallet";function bb(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function WV(t,e){let n=null;if(e){try{n=new URL(e)}catch{}if((n==null?void 0:n.protocol)!=="https:")throw new Ss(Is.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL(`${zV}:/`));const r=t.startsWith("/")?t:[...bb(n.pathname),...bb(t)].join("/");return new URL(r,n)}function $V(t,e,n,r=["v1"]){return gn(this,void 0,void 0,function*(){const i=xN(e),s=yield crypto.subtle.exportKey("raw",t),o=FV(s),a=WV("v1/associate/local",n);return a.searchParams.set("association",VV(o)),a.searchParams.set("port",`${i}`),r.forEach(l=>{a.searchParams.set("v",l)}),a})}const ap={Firefox:0,Other:1};function qV(){return navigator.userAgent.indexOf("Firefox/")!==-1?ap.Firefox:ap.Other}function HV(){return new Promise((t,e)=>{function n(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){n(),t()}window.addEventListener("blur",r);const i=setTimeout(()=>{n(),e()},2e3)})}let Gc=null;function KV(t){Gc==null&&(Gc=document.createElement("iframe"),Gc.style.display="none",document.body.appendChild(Gc)),Gc.contentWindow.location.href=t.toString()}function GV(t){return gn(this,void 0,void 0,function*(){if(t.protocol==="https:")window.location.assign(t);else try{const e=qV();switch(e){case ap.Firefox:KV(t);break;case ap.Other:{const n=HV();window.location.assign(t),yield n;break}default:}}catch{throw new Ss(Is.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function YV(t,e){return gn(this,void 0,void 0,function*(){const n=UV(),r=yield $V(t,n,e);return yield GV(r),n})}const Ib={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},QV="com.solana.mobilewalletadapter.v1";function ZV(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Ss(Is.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function XV(t){let e;try{e=new URL(t)}catch{throw new Ss(Is.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Ss(Is.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function Sb(t){return new DataView(t).getUint32(0,!1)}function JV(t,e){return gn(this,void 0,void 0,function*(){ZV();const n=yield LV(),i=`ws://localhost:${yield YV(n.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const d=[...Ib.retryDelayScheduleMs];return()=>d.length>1?d.shift():d[0]})();let a=1,l=0,c={__type:"disconnected"};return new Promise((d,h)=>{let m;const v={},k=()=>gn(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}m.removeEventListener("open",k);const{associationKeypair:K}=c,G=yield Dg();m.send(yield Pg(G.publicKey,K.privateKey)),c={__type:"hello_req_sent",associationPublicKey:K.publicKey,ecdhPrivateKey:G.privateKey}}),S=K=>{K.wasClean?c={__type:"disconnected"}:h(new Ss(Is.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${K.code}: ${K.reason}).`,{closeEvent:K})),I()},_=K=>gn(this,void 0,void 0,function*(){I(),Date.now()-s>=Ib.timeoutMs?h(new Ss(Is.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(G=>{const O=o();E=window.setTimeout(G,O)}),j())}),T=K=>gn(this,void 0,void 0,function*(){const G=yield K.data.arrayBuffer();switch(c.__type){case"connecting":if(G.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const O=yield Dg();m.send(yield Pg(O.publicKey,n.privateKey)),c={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:O.privateKey};break;case"connected":try{const L=G.slice(0,ra),B=Sb(L);if(B!==l+1)throw new Error("Encrypted message has invalid sequence number");l=B;const W=yield OV(G,c.sharedSecret),$=v[W.id];delete v[W.id],$.resolve(W.result)}catch(L){if(L instanceof yN){const B=v[L.jsonRpcMessageId];delete v[L.jsonRpcMessageId],B.reject(L)}else throw L}break;case"hello_req_sent":{if(G.byteLength===0){const H=yield Dg();m.send(yield Pg(H.publicKey,n.privateKey)),c={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:H.privateKey};break}const L=yield jV(G,c.associationPublicKey,c.ecdhPrivateKey),B=G.slice(wN),W=B.byteLength!==0?yield gn(this,void 0,void 0,function*(){const H=B.slice(0,ra),A=Sb(H);if(A!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=A,BV(B,L)}):{protocol_version:"legacy"};c={__type:"connected",sharedSecret:L,sessionProperties:W};const $=TV(W.protocol_version,(H,A)=>gn(this,void 0,void 0,function*(){const f=a++;return m.send(yield DV({id:f,jsonrpc:"2.0",method:H,params:A??{}},L)),new Promise((b,C)=>{v[f]={resolve(R){switch(H){case"authorize":case"reauthorize":{const{wallet_uri_base:M}=R;if(M!=null)try{XV(M)}catch(F){C(F);return}break}}b(R)},reject:C}})}));try{d(yield t($))}catch(H){h(H)}finally{I(),m.close()}break}}});let I,E;const j=()=>{I&&I(),c={__type:"connecting",associationKeypair:n},s===void 0&&(s=Date.now()),m=new WebSocket(i,[QV]),m.addEventListener("open",k),m.addEventListener("close",S),m.addEventListener("error",_),m.addEventListener("message",T),I=()=>{window.clearTimeout(E),m.removeEventListener("open",k),m.removeEventListener("close",S),m.removeEventListener("error",_),m.removeEventListener("message",T)}};j()})})}function e9(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var k=0,S=0,_=0,T=v.length;_!==T&&v[_]===0;)_++,k++;for(var I=(T-_)*c+1>>>0,E=new Uint8Array(I);_!==T;){for(var j=v[_],K=0,G=I-1;(j!==0||K<S)&&G!==-1;G--,K++)j+=256*E[G]>>>0,E[G]=j%o>>>0,j=j/o>>>0;if(j!==0)throw new Error("Non-zero carry");S=K,_++}for(var O=I-S;O!==I&&E[O]===0;)O++;for(var L=a.repeat(k);O<I;++O)L+=t.charAt(E[O]);return L}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;for(var k=0,S=0,_=0;v[k]===a;)S++,k++;for(var T=(v.length-k)*l+1>>>0,I=new Uint8Array(T);v[k];){var E=e[v.charCodeAt(k)];if(E===255)return;for(var j=0,K=T-1;(E!==0||j<_)&&K!==-1;K--,j++)E+=o*I[K]>>>0,I[K]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");_=j,k++}for(var G=T-_;G!==T&&I[G]===0;)G++;for(var O=new Uint8Array(S+(T-G)),L=S;G!==T;)O[L++]=I[G++];return O}function m(v){var k=h(v);if(k)return k;throw new Error("Non-base"+o+" character")}return{encode:d,decodeUnsafe:h,decode:m}}var t9=e9;const n9=t9,r9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var i9=n9(r9);const s9=To(i9);function Og(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Nh(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,[])).next())})}function EN(t){return window.btoa(String.fromCharCode.call(null,...t))}function jg(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function kb(t){const e="version"in t?t.serialize():t.serialize({requireAllSignatures:!1,verifySignatures:!1});return EN(e)}function o9(t){const n=t[0]*dd+1;return h1.deserializeMessageVersion(t.slice(n,t.length))==="legacy"?ii.from(t):fd.deserialize(t)}function a9(t,e){return Nh(this,void 0,void 0,function*(){return yield JV(r=>{const i=new Proxy({},{get(s,o){if(s[o]==null)switch(o){case"signAndSendTransactions":s[o]=function(a){var{minContextSlot:l,commitment:c,skipPreflight:d,maxRetries:h,waitForCommitmentToSendNextTransaction:m,transactions:v}=a,k=Og(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Nh(this,void 0,void 0,function*(){const S=v.map(kb),_={min_context_slot:l,commitment:c,skip_preflight:d,max_retries:h,wait_for_commitment_to_send_next_transaction:m},{signatures:T}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},k),Object.values(_).some(E=>E!=null)?{options:_}:null),{payloads:S}));return T.map(jg).map(s9.encode)})};break;case"signMessages":s[o]=function(a){var{payloads:l}=a,c=Og(a,["payloads"]);return Nh(this,void 0,void 0,function*(){const d=l.map(EN),{signed_payloads:h}=yield r.signMessages(Object.assign(Object.assign({},c),{payloads:d}));return h.map(jg)})};break;case"signTransactions":s[o]=function(a){var{transactions:l}=a,c=Og(a,["transactions"]);return Nh(this,void 0,void 0,function*(){const d=l.map(kb),{signed_payloads:h}=yield r.signTransactions(Object.assign(Object.assign({},c),{payloads:d}));return h.map(jg).map(o9)})};break;default:{s[o]=r[o];break}}return s[o]},defineProperty(){return!1},deleteProperty(){return!1}});return t(i)},e)})}var l9=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},bN={},jr={};let E1;const c9=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];jr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};jr.getSymbolTotalCodewords=function(e){return c9[e]};jr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};jr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');E1=e};jr.isKanjiModeEnabled=function(){return typeof E1<"u"};jr.toSJIS=function(e){return E1(e)};var gm={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(gm);function IN(){this.buffer=[],this.length=0}IN.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var u9=IN;function Vd(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Vd.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};Vd.prototype.get=function(t,e){return this.data[t*this.size+e]};Vd.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Vd.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var d9=Vd,SN={};(function(t){const e=jr.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(SN);var kN={};const h9=jr.getSymbolSize,Tb=7;kN.getPositions=function(e){const n=h9(e);return[[0,0],[n-Tb,0],[0,n-Tb]]};var TN={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,c=null,d=null;for(let h=0;h<s;h++){a=l=0,c=d=null;for(let m=0;m<s;m++){let v=i.get(h,m);v===c?a++:(a>=5&&(o+=e.N1+(a-5)),c=v,a=1),v=i.get(m,h),v===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=v,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const c=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(c===4||c===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let c=0;c<s;c++){a=l=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(c,d),d>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(d,c),d>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,n(i,l,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let c=0;c<o;c++){s(c),t.applyMask(c,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(c,i),d<l&&(l=d,a=c)}return a}})(TN);var ym={};const so=gm,Ch=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Mh=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ym.getBlocksCount=function(e,n){switch(n){case so.L:return Ch[(e-1)*4+0];case so.M:return Ch[(e-1)*4+1];case so.Q:return Ch[(e-1)*4+2];case so.H:return Ch[(e-1)*4+3];default:return}};ym.getTotalCodewordsCount=function(e,n){switch(n){case so.L:return Mh[(e-1)*4+0];case so.M:return Mh[(e-1)*4+1];case so.Q:return Mh[(e-1)*4+2];case so.H:return Mh[(e-1)*4+3];default:return}};var AN={},wm={};const Tu=new Uint8Array(512),lp=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Tu[n]=e,lp[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Tu[n]=Tu[n-255]})();wm.log=function(e){if(e<1)throw new Error("log("+e+")");return lp[e]};wm.exp=function(e){return Tu[e]};wm.mul=function(e,n){return e===0||n===0?0:Tu[lp[e]+lp[n]]};(function(t){const e=wm;t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(AN);const NN=AN;function b1(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}b1.prototype.initialize=function(e){this.degree=e,this.genPoly=NN.generateECPolynomial(this.degree)};b1.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=NN.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var f9=b1,CN={},Po={},I1={};I1.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ui={};const MN="[0-9]+",p9="[A-Z $%*+\\-./:]+";let md="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";md=md.replace(/u/g,"\\u");const m9="(?:(?![A-Z0-9 $%*+\\-./:]|"+md+`)(?:.|[\r
]))+`;Ui.KANJI=new RegExp(md,"g");Ui.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ui.BYTE=new RegExp(m9,"g");Ui.NUMERIC=new RegExp(MN,"g");Ui.ALPHANUMERIC=new RegExp(p9,"g");const g9=new RegExp("^"+md+"$"),y9=new RegExp("^"+MN+"$"),w9=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ui.testKanji=function(e){return g9.test(e)};Ui.testNumeric=function(e){return y9.test(e)};Ui.testAlphanumeric=function(e){return w9.test(e)};(function(t){const e=I1,n=Ui;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(Po);(function(t){const e=jr,n=ym,r=gm,i=Po,s=I1,o=7973,a=e.getBCHDigit(o);function l(m,v,k){for(let S=1;S<=40;S++)if(v<=t.getCapacity(S,k,m))return S}function c(m,v){return i.getCharCountIndicator(m,v)+4}function d(m,v){let k=0;return m.forEach(function(S){const _=c(S.mode,v);k+=_+S.getBitsLength()}),k}function h(m,v){for(let k=1;k<=40;k++)if(d(m,k)<=t.getCapacity(k,v,i.MIXED))return k}t.from=function(v,k){return s.isValid(v)?parseInt(v,10):k},t.getCapacity=function(v,k,S){if(!s.isValid(v))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const _=e.getSymbolTotalCodewords(v),T=n.getTotalCodewordsCount(v,k),I=(_-T)*8;if(S===i.MIXED)return I;const E=I-c(S,v);switch(S){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(v,k){let S;const _=r.from(k,r.M);if(Array.isArray(v)){if(v.length>1)return h(v,_);if(v.length===0)return 1;S=v[0]}else S=v;return l(S.mode,S.getLength(),_)},t.getEncodedBits=function(v){if(!s.isValid(v)||v<7)throw new Error("Invalid QR Code version");let k=v<<12;for(;e.getBCHDigit(k)-a>=0;)k^=o<<e.getBCHDigit(k)-a;return v<<12|k}})(CN);var RN={};const Ry=jr,PN=1335,v9=21522,Ab=Ry.getBCHDigit(PN);RN.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;Ry.getBCHDigit(i)-Ab>=0;)i^=PN<<Ry.getBCHDigit(i)-Ab;return(r<<10|i)^v9};var LN={};const _9=Po;function sc(t){this.mode=_9.NUMERIC,this.data=t.toString()}sc.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};sc.prototype.getLength=function(){return this.data.length};sc.prototype.getBitsLength=function(){return sc.getBitsLength(this.data.length)};sc.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,s*3+1))};var x9=sc;const E9=Po,Bg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function oc(t){this.mode=E9.ALPHANUMERIC,this.data=t}oc.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};oc.prototype.getLength=function(){return this.data.length};oc.prototype.getBitsLength=function(){return oc.getBitsLength(this.data.length)};oc.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Bg.indexOf(this.data[n])*45;r+=Bg.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Bg.indexOf(this.data[n]),6)};var b9=oc;const I9=Po;function ac(t){this.mode=I9.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}ac.getBitsLength=function(e){return e*8};ac.prototype.getLength=function(){return this.data.length};ac.prototype.getBitsLength=function(){return ac.getBitsLength(this.data.length)};ac.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var S9=ac;const k9=Po,T9=jr;function lc(t){this.mode=k9.KANJI,this.data=t}lc.getBitsLength=function(e){return e*13};lc.prototype.getLength=function(){return this.data.length};lc.prototype.getBitsLength=function(){return lc.getBitsLength(this.data.length)};lc.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=T9.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var A9=lc,DN={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,c,d,h,m,v,k,S,_;!a.empty();){l=a.pop(),c=l.value,h=l.cost,m=n[c]||{};for(d in m)m.hasOwnProperty(d)&&(v=m[d],k=h+v,S=o[d],_=typeof o[d]>"u",(_||S>k)&&(o[d]=k,a.push(d,k),s[d]=c))}if(typeof i<"u"&&typeof o[i]>"u"){var T=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(T)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(DN);var N9=DN.exports;(function(t){const e=Po,n=x9,r=b9,i=S9,s=A9,o=Ui,a=jr,l=N9;function c(T){return unescape(encodeURIComponent(T)).length}function d(T,I,E){const j=[];let K;for(;(K=T.exec(E))!==null;)j.push({data:K[0],index:K.index,mode:I,length:K[0].length});return j}function h(T){const I=d(o.NUMERIC,e.NUMERIC,T),E=d(o.ALPHANUMERIC,e.ALPHANUMERIC,T);let j,K;return a.isKanjiModeEnabled()?(j=d(o.BYTE,e.BYTE,T),K=d(o.KANJI,e.KANJI,T)):(j=d(o.BYTE_KANJI,e.BYTE,T),K=[]),I.concat(E,j,K).sort(function(O,L){return O.index-L.index}).map(function(O){return{data:O.data,mode:O.mode,length:O.length}})}function m(T,I){switch(I){case e.NUMERIC:return n.getBitsLength(T);case e.ALPHANUMERIC:return r.getBitsLength(T);case e.KANJI:return s.getBitsLength(T);case e.BYTE:return i.getBitsLength(T)}}function v(T){return T.reduce(function(I,E){const j=I.length-1>=0?I[I.length-1]:null;return j&&j.mode===E.mode?(I[I.length-1].data+=E.data,I):(I.push(E),I)},[])}function k(T){const I=[];for(let E=0;E<T.length;E++){const j=T[E];switch(j.mode){case e.NUMERIC:I.push([j,{data:j.data,mode:e.ALPHANUMERIC,length:j.length},{data:j.data,mode:e.BYTE,length:j.length}]);break;case e.ALPHANUMERIC:I.push([j,{data:j.data,mode:e.BYTE,length:j.length}]);break;case e.KANJI:I.push([j,{data:j.data,mode:e.BYTE,length:c(j.data)}]);break;case e.BYTE:I.push([{data:j.data,mode:e.BYTE,length:c(j.data)}])}}return I}function S(T,I){const E={},j={start:{}};let K=["start"];for(let G=0;G<T.length;G++){const O=T[G],L=[];for(let B=0;B<O.length;B++){const W=O[B],$=""+G+B;L.push($),E[$]={node:W,lastCount:0},j[$]={};for(let H=0;H<K.length;H++){const A=K[H];E[A]&&E[A].node.mode===W.mode?(j[A][$]=m(E[A].lastCount+W.length,W.mode)-m(E[A].lastCount,W.mode),E[A].lastCount+=W.length):(E[A]&&(E[A].lastCount=W.length),j[A][$]=m(W.length,W.mode)+4+e.getCharCountIndicator(W.mode,I))}}K=L}for(let G=0;G<K.length;G++)j[K[G]].end=0;return{map:j,table:E}}function _(T,I){let E;const j=e.getBestModeForData(T);if(E=e.from(I,j),E!==e.BYTE&&E.bit<j.bit)throw new Error('"'+T+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(j));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new n(T);case e.ALPHANUMERIC:return new r(T);case e.KANJI:return new s(T);case e.BYTE:return new i(T)}}t.fromArray=function(I){return I.reduce(function(E,j){return typeof j=="string"?E.push(_(j,null)):j.data&&E.push(_(j.data,j.mode)),E},[])},t.fromString=function(I,E){const j=h(I,a.isKanjiModeEnabled()),K=k(j),G=S(K,E),O=l.find_path(G.map,"start","end"),L=[];for(let B=1;B<O.length-1;B++)L.push(G.table[O[B]].node);return t.fromArray(v(L))},t.rawSplit=function(I){return t.fromArray(h(I,a.isKanjiModeEnabled()))}})(LN);const vm=jr,Ug=gm,C9=u9,M9=d9,R9=SN,P9=kN,Py=TN,Ly=ym,L9=f9,cp=CN,D9=RN,O9=Po,Fg=LN;function j9(t,e){const n=t.size,r=P9.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||n<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(s+a,o+l,!0,!0):t.set(s+a,o+l,!1,!0))}}function B9(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function U9(t,e){const n=R9.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function F9(t,e){const n=t.size,r=cp.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=(r>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Vg(t,e,n){const r=t.size,i=D9.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function V9(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(i,a-l)){let c=!1;o<e.length&&(c=(e[o]>>>s&1)===1),t.set(i,a-l,c),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function z9(t,e,n){const r=new C9;n.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),O9.getCharCountIndicator(l.mode,t)),l.write(r)});const i=vm.getSymbolTotalCodewords(t),s=Ly.getTotalCodewordsCount(t,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let l=0;l<a;l++)r.put(l%2?17:236,8);return W9(r,t,e)}function W9(t,e,n){const r=vm.getSymbolTotalCodewords(e),i=Ly.getTotalCodewordsCount(e,n),s=r-i,o=Ly.getBlocksCount(e,n),a=r%o,l=o-a,c=Math.floor(r/o),d=Math.floor(s/o),h=d+1,m=c-d,v=new L9(m);let k=0;const S=new Array(o),_=new Array(o);let T=0;const I=new Uint8Array(t.buffer);for(let O=0;O<o;O++){const L=O<l?d:h;S[O]=I.slice(k,k+L),_[O]=v.encode(S[O]),k+=L,T=Math.max(T,L)}const E=new Uint8Array(r);let j=0,K,G;for(K=0;K<T;K++)for(G=0;G<o;G++)K<S[G].length&&(E[j++]=S[G][K]);for(K=0;K<m;K++)for(G=0;G<o;G++)E[j++]=_[G][K];return E}function $9(t,e,n,r){let i;if(Array.isArray(t))i=Fg.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){const d=Fg.rawSplit(t);c=cp.getBestVersionForData(d,n)}i=Fg.fromString(t,c||40)}else throw new Error("Invalid data");const s=cp.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=z9(e,n,i),a=vm.getSymbolSize(e),l=new M9(a);return j9(l,e),B9(l),U9(l,e),Vg(l,n,0),e>=7&&F9(l,e),V9(l,o),isNaN(r)&&(r=Py.getBestMask(l,Vg.bind(null,l,n))),Py.applyMask(r,l),Vg(l,n,r),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}bN.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Ug.M,i,s;return typeof n<"u"&&(r=Ug.from(n.errorCorrectionLevel,Ug.M),i=cp.from(n.version),s=Py.from(n.maskPattern),n.toSJISFunc&&vm.setToSJISFunction(n.toSJISFunc)),$9(e,i,r,s)};var ON={},S1={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,l=t.getScale(o,s),c=Math.floor((o+s.margin*2)*l),d=s.margin*l,h=[s.color.light,s.color.dark];for(let m=0;m<c;m++)for(let v=0;v<c;v++){let k=(m*c+v)*4,S=s.color.light;if(m>=d&&v>=d&&m<c-d&&v<c-d){const _=Math.floor((m-d)/l),T=Math.floor((v-d)/l);S=h[a[_*o+T]?1:0]}r[k++]=S.r,r[k++]=S.g,r[k++]=S.b,r[k]=S.a}}})(S1);(function(t){const e=S1;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let l=a,c=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(c=r()),l=e.getOptions(l);const d=e.getImageWidth(s.modules.size,l),h=c.getContext("2d"),m=h.createImageData(d,d);return e.qrToImageData(m.data,s,l),n(h,c,d),h.putImageData(m,0,0),c},t.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const c=t.render(s,o,l),d=l.type||"image/png",h=l.rendererOpts||{};return c.toDataURL(d,h.quality)}})(ON);var jN={};const q9=S1;function Nb(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function zg(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function H9(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),c=Math.floor(a/e);!l&&!s&&(s=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(r+=s?zg("M",l+n,.5+c+n):zg("m",i,0),i=0,s=!1),l+1<e&&t[a+1]||(r+=zg("h",o),o=0)):i++}return r}jN.render=function(e,n,r){const i=q9.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,l=i.color.light.a?"<path "+Nb(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+Nb(i.color.dark,"stroke")+' d="'+H9(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof r=="function"&&r(null,m),m};const K9=l9,Dy=bN,BN=ON,G9=jN;function k1(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!K9())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(l,c){try{const d=Dy.create(n,r);l(t(d,e,r))}catch(d){c(d)}})}try{const l=Dy.create(n,r);i(null,t(l,e,r))}catch(l){i(l)}}Dy.create;k1.bind(null,BN.render);k1.bind(null,BN.renderToDataURL);k1.bind(null,function(t,e,n){return G9.render(t,n)});function tt(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,[])).next())})}function nf(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function Y9(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const Hs="Mobile Wallet Adapter",Q9=64;function Z9(t){const e=nf(t);return new Ee(e)}function Cb(t){return"version"in t}function X9(t){switch(t){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class J9 extends mV{constructor(e){var n;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=Hs,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=Y9()?Ve.Loadable:Ve.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=(n=e.chain)!==null&&n!==void 0?n:X9(e.cluster),this._hostAuthority=e.remoteHostAuthority,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==Ve.Unsupported&&this._authorizationResultCache.get().then(r=>{r&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=Z9(this._selectedAddress)}catch(e){throw new ic(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==Ve.Installed&&this.emit("readyStateChange",this._readyState=Ve.Installed)}runWithGuard(e){return tt(this,void 0,void 0,function*(){try{return yield e()}catch(n){throw this.emit("error",n),n}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return tt(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return tt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new _o;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new io(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return tt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new _o;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new io(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return tt(this,void 0,void 0,function*(){try{const n=yield this._authorizationResultCache.get();return n?(this.handleAuthorizationResult(n),n):yield this.transact(r=>tt(this,void 0,void 0,function*(){const i=yield r.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(i),this.handleAuthorizationResult(i)]),i}))}catch(n){throw new io(n instanceof Error&&n.message||"Unknown error",n)}})}handleAuthorizationResult(e){var n;return tt(this,void 0,void 0,function*(){const r=this._authorizationResult==null||((n=this._authorizationResult)===null||n===void 0?void 0:n.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((i,s)=>i.address!==e.accounts[s].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),r){const i=yield this._addressSelector.select(e.accounts.map(({address:s})=>s));i!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,n){return tt(this,void 0,void 0,function*(){try{const r=yield e.authorize({auth_token:n,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(r),this.handleAuthorizationResult(r)])}catch(r){throw this.disconnect(),new fm(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}})}disconnect(){return tt(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var n;return tt(this,void 0,void 0,function*(){const r=(n=this._authorizationResult)===null||n===void 0?void 0:n.wallet_uri_base,i=r?{baseUri:r}:void 0,s=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield a9(e,Object.assign(Object.assign({},i),s))}catch(a){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),a}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new dn;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return tt(this,void 0,void 0,function*(){const{authToken:n}=this.assertIsAuthorized();try{return yield this.transact(r=>tt(this,void 0,void 0,function*(){return yield this.performReauthorization(r,n),yield r.signTransactions({transactions:e})}))}catch(r){throw new ai(r==null?void 0:r.message,r)}})}sendTransaction(e,n,r){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const{authToken:i}=this.assertIsAuthorized(),s=r==null?void 0:r.minContextSlot;try{return yield this.transact(o=>tt(this,void 0,void 0,function*(){function a(){let h;switch(n.commitment){case"confirmed":case"finalized":case"processed":h=n.commitment;break;default:h="finalized"}let m;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":m=r.preflightCommitment;break;case void 0:m=h;break;default:m="finalized"}return(m==="finalized"?2:m==="confirmed"?1:0)<(h==="finalized"?2:h==="confirmed"?1:0)?m:h}const[l,c,d]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,i),Cb(e)?null:tt(this,void 0,void 0,function*(){var h;if(e.feePayer||(e.feePayer=(h=this.publicKey)!==null&&h!==void 0?h:void 0),e.recentBlockhash==null){const{blockhash:m}=yield n.getLatestBlockhash({commitment:a()});e.recentBlockhash=m}})]);if(l.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:s,transactions:[e]}))[0];{const[h]=yield o.signTransactions({transactions:[e]});if(Cb(h))return yield n.sendTransaction(h);{const m=h.serialize();return yield n.sendRawTransaction(m,Object.assign(Object.assign({},r),{preflightCommitment:a()}))}}}))}catch(o){throw new as(o==null?void 0:o.message,o)}}))})}signTransaction(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const[n]=yield this.performSignTransactions([e]);return n}))})}signAllTransactions(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const{authToken:n,selectedAddress:r}=this.assertIsAuthorized();try{return yield this.transact(i=>tt(this,void 0,void 0,function*(){yield this.performReauthorization(i,n);const[s]=yield i.signMessages({addresses:[r],payloads:[e]});return s.slice(-Q9)}))}catch(i){throw new pm(i==null?void 0:i.message,i)}}))})}signIn(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){var n,r;if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new _o;this._connecting=!0;try{const i=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:(n=e==null?void 0:e.domain)!==null&&n!==void 0?n:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(r=i.accounts.find(a=>a.address==s))!==null&&r!==void 0?r:{address:s}),{publicKey:nf(s)}),signedMessage:nf(i.sign_in_result.signed_message),signature:nf(i.sign_in_result.signature)}}catch(i){throw new io(i instanceof Error&&i.message||"Unknown error",i)}finally{this._connecting=!1}}))})}}function ez(){return{select(t){return tt(this,void 0,void 0,function*(){return t[0]})}}}const Wg="SolanaMobileWalletAdapterDefaultAuthorizationCache";function tz(){let t;try{t=window.localStorage}catch{}return{clear(){return tt(this,void 0,void 0,function*(){if(t)try{t.removeItem(Wg)}catch{}})},get(){return tt(this,void 0,void 0,function*(){if(t)try{return JSON.parse(t.getItem(Wg))||void 0}catch{}})},set(e){return tt(this,void 0,void 0,function*(){if(t)try{t.setItem(Wg,JSON.stringify(e))}catch{}})}}}function nz(t){return tt(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(t.url)})}function rz(){return nz}var iz=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},sz=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},rf;function oz(t){const e=({register:n})=>n(t);try{window.dispatchEvent(new az(e))}catch(n){console.error(`wallet-standard:register-wallet event could not be dispatched
`,n)}try{window.addEventListener("wallet-standard:app-ready",({detail:n})=>e(n))}catch(n){console.error(`wallet-standard:app-ready event listener could not be added
`,n)}}class az extends Event{get detail(){return iz(this,rf,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),rf.set(this,void 0),sz(this,rf,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}rf=new WeakMap;function lz(t,e){if(t===e)return!0;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function cz(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){const d=t.charAt(c),h=d.charCodeAt(0);if(e[h]!==255)throw new TypeError(d+" is ambiguous");e[h]=c}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let d=0,h=0,m=0;const v=c.length;for(;m!==v&&c[m]===0;)m++,d++;const k=(v-m)*s+1>>>0,S=new Uint8Array(k);for(;m!==v;){let I=c[m],E=0;for(let j=k-1;(I!==0||E<h)&&j!==-1;j--,E++)I+=256*S[j]>>>0,S[j]=I%n>>>0,I=I/n>>>0;if(I!==0)throw new Error("Non-zero carry");h=E,m++}let _=k-h;for(;_!==k&&S[_]===0;)_++;let T=r.repeat(d);for(;_<k;++_)T+=t.charAt(S[_]);return T}function a(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let d=0,h=0,m=0;for(;c[d]===r;)h++,d++;const v=(c.length-d)*i+1>>>0,k=new Uint8Array(v);for(;c[d];){let I=e[c.charCodeAt(d)];if(I===255)return;let E=0;for(let j=v-1;(I!==0||E<m)&&j!==-1;j--,E++)I+=n*k[j]>>>0,k[j]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");m=E,d++}let S=v-m;for(;S!==v&&k[S]===0;)S++;const _=new Uint8Array(h+(v-S));let T=h;for(;S!==v;)_[T++]=k[S++];return _}function l(c){const d=a(c);if(d)return d;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var uz="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const dz=cz(uz);var _e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},pn=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},On,mr,ia,sa,Ho,du,up,nt,dp,Oy,sf,jy,Au,By,Mb,Rb,Pb,Lb;class hz extends dN{get name(){return _e(this,nt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return _e(this,nt,"f").icon}get readyState(){return _e(this,dp,"f")}get publicKey(){return _e(this,ia,"f")}get connecting(){return _e(this,sa,"f")}get supportedTransactionVersions(){return _e(this,up,"f")}get wallet(){return _e(this,nt,"f")}get standard(){return!0}constructor({wallet:e}){super(),On.add(this),mr.set(this,void 0),ia.set(this,void 0),sa.set(this,void 0),Ho.set(this,void 0),du.set(this,void 0),up.set(this,void 0),nt.set(this,void 0),dp.set(this,typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.Installed),By.set(this,n=>{if("accounts"in n){const r=_e(this,nt,"f").accounts[0];_e(this,mr,"f")&&!_e(this,Ho,"f")&&r!==_e(this,mr,"f")&&(r?_e(this,On,"m",sf).call(this,r):(this.emit("error",new fm),_e(this,On,"m",jy).call(this)))}"features"in n&&_e(this,On,"m",Au).call(this)}),pn(this,nt,e,"f"),pn(this,mr,null,"f"),pn(this,ia,null,"f"),pn(this,sa,!1,"f"),pn(this,Ho,!1,"f"),pn(this,du,_e(this,nt,"f").features[x1].on("change",_e(this,By,"f")),"f"),_e(this,On,"m",Au).call(this)}destroy(){pn(this,mr,null,"f"),pn(this,ia,null,"f"),pn(this,sa,!1,"f"),pn(this,Ho,!1,"f");const e=_e(this,du,"f");e&&(pn(this,du,null,"f"),e())}async autoConnect(){return _e(this,On,"m",Oy).call(this,{silent:!0})}async connect(){return _e(this,On,"m",Oy).call(this)}async disconnect(){if(Ay in _e(this,nt,"f").features)try{pn(this,Ho,!0,"f"),await _e(this,nt,"f").features[Ay].disconnect()}catch(e){this.emit("error",new w1(e==null?void 0:e.message,e))}finally{pn(this,Ho,!1,"f")}_e(this,On,"m",jy).call(this)}async sendTransaction(e,n,r={}){try{const i=_e(this,mr,"f");if(!i)throw new dn;let s;if(ts in _e(this,nt,"f").features)if(i.features.includes(ts))s=ts;else if(kn in _e(this,nt,"f").features&&i.features.includes(kn))s=kn;else throw new na;else if(kn in _e(this,nt,"f").features){if(!i.features.includes(kn))throw new na;s=kn}else throw new xl;const o=xV(n.rpcEndpoint);if(!i.chains.includes(o))throw new as;try{const{signers:a,...l}=r;let c;if(ls(e)?(a!=null&&a.length&&e.sign(a),c=e.serialize()):(e=await this.prepareTransaction(e,n,l),a!=null&&a.length&&e.partialSign(...a),c=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===ts){const[d]=await _e(this,nt,"f").features[ts].signAndSendTransaction({account:i,chain:o,transaction:c,options:{preflightCommitment:Rg(l.preflightCommitment||n.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return dz.encode(d.signature)}else{const[d]=await _e(this,nt,"f").features[kn].signTransaction({account:i,chain:o,transaction:c,options:{preflightCommitment:Rg(l.preflightCommitment||n.commitment),minContextSlot:l.minContextSlot}});return await n.sendRawTransaction(d.signedTransaction,{...l,preflightCommitment:Rg(l.preflightCommitment||n.commitment)})}}catch(a){throw a instanceof Cn?a:new as(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}mr=new WeakMap,ia=new WeakMap,sa=new WeakMap,Ho=new WeakMap,du=new WeakMap,up=new WeakMap,nt=new WeakMap,dp=new WeakMap,By=new WeakMap,On=new WeakSet,Oy=async function(e){try{if(this.connected||this.connecting)return;if(_e(this,dp,"f")!==Ve.Installed)throw new _o;if(pn(this,sa,!0,"f"),!_e(this,nt,"f").accounts.length)try{await _e(this,nt,"f").features[_1].connect(e)}catch(r){throw new io(r==null?void 0:r.message,r)}const n=_e(this,nt,"f").accounts[0];if(!n)throw new na;_e(this,On,"m",sf).call(this,n)}catch(n){throw this.emit("error",n),n}finally{pn(this,sa,!1,"f")}},sf=function(e){let n;try{n=new Ee(e.address)}catch(r){throw new ic(r==null?void 0:r.message,r)}pn(this,mr,e,"f"),pn(this,ia,n,"f"),_e(this,On,"m",Au).call(this),this.emit("connect",n)},jy=function(){pn(this,mr,null,"f"),pn(this,ia,null,"f"),_e(this,On,"m",Au).call(this),this.emit("disconnect")},Au=function(){var n,r;const e=ts in _e(this,nt,"f").features?_e(this,nt,"f").features[ts].supportedTransactionVersions:_e(this,nt,"f").features[kn].supportedTransactionVersions;pn(this,up,lz(e,["legacy"])?null:new Set(e),"f"),kn in _e(this,nt,"f").features&&((n=_e(this,mr,"f"))!=null&&n.features.includes(kn))?(this.signTransaction=_e(this,On,"m",Mb),this.signAllTransactions=_e(this,On,"m",Rb)):(delete this.signTransaction,delete this.signAllTransactions),ol in _e(this,nt,"f").features&&((r=_e(this,mr,"f"))!=null&&r.features.includes(ol))?this.signMessage=_e(this,On,"m",Pb):delete this.signMessage,Mg in _e(this,nt,"f").features?this.signIn=_e(this,On,"m",Lb):delete this.signIn},Mb=async function(e){try{const n=_e(this,mr,"f");if(!n)throw new dn;if(!(kn in _e(this,nt,"f").features))throw new xl;if(!n.features.includes(kn))throw new na;try{const i=(await _e(this,nt,"f").features[kn].signTransaction({account:n,transaction:ls(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return ls(e)?fd.deserialize(i):ii.from(i)}catch(r){throw r instanceof Cn?r:new ai(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},Rb=async function(e){try{const n=_e(this,mr,"f");if(!n)throw new dn;if(!(kn in _e(this,nt,"f").features))throw new xl;if(!n.features.includes(kn))throw new na;try{const r=await _e(this,nt,"f").features[kn].signTransaction(...e.map(i=>({account:n,transaction:ls(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=r[s].signedTransaction;return ls(i)?fd.deserialize(o):ii.from(o)})}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},Pb=async function(e){try{const n=_e(this,mr,"f");if(!n)throw new dn;if(!(ol in _e(this,nt,"f").features))throw new xl;if(!n.features.includes(ol))throw new na;try{return(await _e(this,nt,"f").features[ol].signMessage({account:n,message:e}))[0].signature}catch(r){throw new pm(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},Lb=async function(e={}){try{if(!(Mg in _e(this,nt,"f").features))throw new xl;let n;try{[n]=await _e(this,nt,"f").features[Mg].signIn(e)}catch(r){throw new _b(r==null?void 0:r.message,r)}if(!n)throw new _b;return _e(this,On,"m",sf).call(this,n.account),n}catch(n){throw this.emit("error",n),n}};const fz=gV;var pz=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},mz=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},of;let Sr;const _m=new Set;function gz(t){Nu=void 0,_m.add(t)}function yz(t){Nu=void 0,_m.delete(t)}const El={};function wz(){if(Sr||(Sr=Object.freeze({register:Db,get:vz,on:_z}),typeof window>"u"))return Sr;const t=Object.freeze({register:Db});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new xz(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Sr}function Db(...t){var e;return t=t.filter(n=>!_m.has(n)),t.length?(t.forEach(n=>gz(n)),(e=El.register)==null||e.forEach(n=>Uy(()=>n(...t))),function(){var r;t.forEach(i=>yz(i)),(r=El.unregister)==null||r.forEach(i=>Uy(()=>i(...t)))}):()=>{}}let Nu;function vz(){return Nu||(Nu=[..._m]),Nu}function _z(t,e){var n;return(n=El[t])!=null&&n.push(e)||(El[t]=[e]),function(){var i;El[t]=(i=El[t])==null?void 0:i.filter(s=>e!==s)}}function Uy(t){try{t()}catch(e){console.error(e)}}class xz extends Event{get detail(){return pz(this,of,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),of.set(this,void 0),mz(this,of,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}of=new WeakMap;function Ez(){if(Sr||(Sr=wz(),typeof window>"u"))return Sr;const t=window.navigator.wallets||[];if(!Array.isArray(t))return console.error("window.navigator.wallets is not an array"),Sr;const{register:e}=Sr,n=(...r)=>r.forEach(i=>Uy(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch{return console.error("window.navigator.wallets could not be set"),Sr}return n(...t),Sr}function bz(t){const e=Ob(()=>new Set),{get:n,on:r}=Ob(()=>Ez()),[i,s]=Y.useState(()=>jb(n()));Y.useEffect(()=>{const a=[r("register",(...l)=>s(c=>[...c,...jb(l)])),r("unregister",(...l)=>s(c=>c.filter(d=>l.some(h=>h===d.wallet))))];return()=>a.forEach(l=>l())},[r]);const o=Iz(i);return Y.useEffect(()=>{if(!o)return;const a=new Set(i);new Set(o.filter(c=>!a.has(c))).forEach(c=>c.destroy())},[o,i]),Y.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),Y.useMemo(()=>[...i,...t.filter(({name:a})=>i.some(l=>l.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,t,e])}function Ob(t){const e=Y.useRef(void 0);return e.current===void 0&&(e.current={value:t()}),e.current.value}function Iz(t){const e=Y.useRef(void 0);return Y.useEffect(()=>{e.current=t}),e.current}function jb(t){return t.filter(fz).map(e=>new hz({wallet:e}))}var Dl;(function(t){t[t.DESKTOP_WEB=0]="DESKTOP_WEB",t[t.MOBILE_WEB=1]="MOBILE_WEB"})(Dl||(Dl={}));function Sz(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function kz({adapters:t,userAgentString:e}){return t.some(n=>n.name!==Hs&&n.readyState===Ve.Installed)?Dl.DESKTOP_WEB:e&&/android/i.test(e)&&!Sz(e)?Dl.MOBILE_WEB:Dl.DESKTOP_WEB}function Tz(t){return t?/devnet/i.test(t)?"devnet":/testnet/i.test(t)?"testnet":"mainnet-beta":"mainnet-beta"}function Az({children:t,wallets:e,adapter:n,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const l=Y.useRef(!1),[c,d]=Y.useState(!1),h=Y.useRef(!1),[m,v]=Y.useState(!1),[k,S]=Y.useState(()=>(n==null?void 0:n.publicKey)??null),[_,T]=Y.useState(()=>(n==null?void 0:n.connected)??!1),I=Y.useRef(o);Y.useEffect(()=>(I.current=o,()=>{I.current=void 0}),[o]);const E=Y.useRef((b,C)=>(r.current||(I.current?I.current(b,C):(console.error(b,C),b instanceof _o&&typeof window<"u"&&C&&window.open(C.url,"_blank"))),b)),[j,K]=Y.useState(()=>e.map(b=>({adapter:b,readyState:b.readyState})).filter(({readyState:b})=>b!==Ve.Unsupported));Y.useEffect(()=>{K(C=>e.map((R,M)=>{const F=C[M];return F&&F.adapter===R&&F.readyState===R.readyState?F:{adapter:R,readyState:R.readyState}}).filter(({readyState:R})=>R!==Ve.Unsupported));function b(C){K(R=>{const M=R.findIndex(({adapter:q})=>q===this);if(M===-1)return R;const{adapter:F}=R[M];return[...R.slice(0,M),{adapter:F,readyState:C},...R.slice(M+1)].filter(({readyState:q})=>q!==Ve.Unsupported)})}return e.forEach(C=>C.on("readyStateChange",b,C)),()=>{e.forEach(C=>C.off("readyStateChange",b,C))}},[n,e]);const G=Y.useMemo(()=>j.find(b=>b.adapter===n)??null,[n,j]);Y.useEffect(()=>{if(!n)return;const b=M=>{S(M),l.current=!1,d(!1),T(!0),h.current=!1,v(!1)},C=()=>{r.current||(S(null),l.current=!1,d(!1),T(!1),h.current=!1,v(!1))},R=M=>{E.current(M,n)};return n.on("connect",b),n.on("disconnect",C),n.on("error",R),()=>{n.off("connect",b),n.off("disconnect",C),n.off("error",R),C()}},[n,r]);const O=Y.useRef(!1);Y.useEffect(()=>()=>{O.current=!1},[n]),Y.useEffect(()=>{O.current||l.current||_||!i||!((G==null?void 0:G.readyState)===Ve.Installed||(G==null?void 0:G.readyState)===Ve.Loadable)||(l.current=!0,d(!0),O.current=!0,async function(){try{await i()}catch{s()}finally{d(!1),l.current=!1}}())},[_,i,s,G]);const L=Y.useCallback(async(b,C,R)=>{if(!n)throw E.current(new xb);if(!_)throw E.current(new dn,n);return await n.sendTransaction(b,C,R)},[n,_]),B=Y.useMemo(()=>n&&"signTransaction"in n?async b=>{if(!_)throw E.current(new dn,n);return await n.signTransaction(b)}:void 0,[n,_]),W=Y.useMemo(()=>n&&"signAllTransactions"in n?async b=>{if(!_)throw E.current(new dn,n);return await n.signAllTransactions(b)}:void 0,[n,_]),$=Y.useMemo(()=>n&&"signMessage"in n?async b=>{if(!_)throw E.current(new dn,n);return await n.signMessage(b)}:void 0,[n,_]),H=Y.useMemo(()=>n&&"signIn"in n?async b=>await n.signIn(b):void 0,[n]),A=Y.useCallback(async()=>{if(l.current||h.current||G!=null&&G.adapter.connected)return;if(!G)throw E.current(new xb);const{adapter:b,readyState:C}=G;if(!(C===Ve.Installed||C===Ve.Loadable))throw E.current(new _o,b);l.current=!0,d(!0);try{await b.connect()}catch(R){throw s(),R}finally{d(!1),l.current=!1}},[s,G]),f=Y.useCallback(async()=>{if(!h.current&&n){h.current=!0,v(!0);try{await n.disconnect()}finally{v(!1),h.current=!1}}},[n]);return ce.createElement(fN.Provider,{value:{autoConnect:!!i,wallets:j,wallet:G,publicKey:k,connected:_,connecting:c,disconnecting:m,select:a,connect:A,disconnect:f,sendTransaction:L,signTransaction:B,signAllTransactions:W,signMessage:$,signIn:H}},t)}let $g;function Nz(){var t;return $g===void 0&&($g=((t=globalThis.navigator)==null?void 0:t.userAgent)??null),$g}function Rh(t){const e=Nz();return kz({adapters:t,userAgentString:e})===Dl.MOBILE_WEB}function Cz(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function Mz({children:t,wallets:e,autoConnect:n,localStorageKey:r="walletName",onError:i}){const{connection:s}=cV(),o=bz(e),a=Y.useMemo(()=>{if(!Rh(o))return null;const I=o.find(E=>E.name===Hs);return I||new J9({addressSelector:ez(),appIdentity:{uri:Cz()},authorizationResultCache:tz(),cluster:Tz(s==null?void 0:s.rpcEndpoint),onWalletNotFound:rz()})},[o,s==null?void 0:s.rpcEndpoint]),l=Y.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[c,d]=wV(r,Rh(o)?Hs:null),h=Y.useMemo(()=>l.find(I=>I.name===c)??null,[l,c]),m=Y.useCallback(I=>{c!==I&&(h&&h.name!==Hs&&h.disconnect(),d(I))},[h,d,c]);Y.useEffect(()=>{if(!h)return;function I(){S.current||c===Hs&&Rh(o)||d(null)}return h.on("disconnect",I),()=>{h.off("disconnect",I)}},[h,o,d,c]);const v=Y.useRef(!1),k=Y.useMemo(()=>{if(!(!n||!h))return async()=>{(n===!0||await n(h))&&(v.current?await h.connect():await h.autoConnect())}},[n,h]),S=Y.useRef(!1);Y.useEffect(()=>{if(c===Hs&&Rh(o)){S.current=!1;return}function I(){S.current=!0}return window.addEventListener("beforeunload",I),()=>{window.removeEventListener("beforeunload",I)}},[o,c]);const _=Y.useCallback(()=>{h&&h.name!==Hs&&m(null)},[h,m]),T=Y.useCallback(I=>{v.current=!0,m(I)},[m]);return ce.createElement(Az,{wallets:l,adapter:h,isUnloadingRef:S,onAutoConnectRequest:k,onConnectError:_,onError:i,onSelectWallet:T},t)}const Rz="modulepreload",Pz=function(t){return"/"+t},Bb={},UN=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Pz(l),l in Bb)return;Bb[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Rz,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((m,v)=>{h.addEventListener("load",m),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Lz="Phantom";class Dz extends v1{constructor(e={}){super(),this.name=Lz,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.NotDetected,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),n.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new fm),this.emit("disconnect"))},this._accountChanged=n=>{const r=this._publicKey;if(r){try{n=new Ee(n.toBytes())}catch(i){this.emit("error",new ic(i==null?void 0:i.message,i));return}r.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==Ve.Unsupported&&(Ty()?(this._readyState=Ve.Loadable,this.emit("readyStateChange",this._readyState)):hN(()=>{var n,r,i;return(r=(n=window.phantom)==null?void 0:n.solana)!=null&&r.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=Ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ve.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===Ve.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==Ve.Installed)throw new _o;this._connecting=!0;const n=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!n.isConnected)try{await n.connect()}catch(i){throw new io(i==null?void 0:i.message,i)}if(!n.publicKey)throw new na;let r;try{r=new Ee(n.publicKey.toBytes())}catch(i){throw new ic(i==null?void 0:i.message,i)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=r,this.emit("connect",r)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new w1(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,r={}){try{const i=this._wallet;if(!i)throw new dn;try{const{signers:s,...o}=r;ls(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||n.commitment;const{signature:a}=await i.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof Cn?s:new as(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new dn;try{return await n.signTransaction(e)||e}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new dn;try{return await n.signAllTransactions(e)||e}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new dn;try{const{signature:r}=await n.signMessage(e);return r}catch(r){throw new pm(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}}const Oz="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var ht=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},jz=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},af,oa,Fy,Vy,zy,er,Wy,FN,VN,$y,qy,Hy,Ky,Gy;class Bz{constructor(){af.add(this),oa.set(this,{}),Fy.set(this,"1.0.0"),Vy.set(this,"MetaMask"),zy.set(this,Oz),er.set(this,null),Wy.set(this,(e,n)=>{var r;return(r=ht(this,oa,"f")[e])!=null&&r.push(n)||(ht(this,oa,"f")[e]=[n]),()=>ht(this,af,"m",VN).call(this,e,n)}),$y.set(this,async()=>{if(!ht(this,er,"f")){let e;try{e=(await UN(async()=>{const{default:n}=await import("./index-CBh0ND1f.js");return{default:n}},[])).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}jz(this,er,new e,"f"),ht(this,er,"f").on("standard_change",n=>ht(this,af,"m",FN).call(this,"change",n))}return this.accounts.length||await ht(this,er,"f").connect(),{accounts:this.accounts}}),qy.set(this,async()=>{ht(this,er,"f")&&await ht(this,er,"f").disconnect()}),Hy.set(this,async(...e)=>{if(!ht(this,er,"f"))throw new dn;return await ht(this,er,"f").standardSignAndSendTransaction(...e)}),Ky.set(this,async(...e)=>{if(!ht(this,er,"f"))throw new dn;return await ht(this,er,"f").standardSignTransaction(...e)}),Gy.set(this,async(...e)=>{if(!ht(this,er,"f"))throw new dn;return await ht(this,er,"f").standardSignMessage(...e)})}get version(){return ht(this,Fy,"f")}get name(){return ht(this,Vy,"f")}get icon(){return ht(this,zy,"f")}get chains(){return[Cy,mN,gN]}get features(){return{[_1]:{version:"1.0.0",connect:ht(this,$y,"f")},[Ay]:{version:"1.0.0",disconnect:ht(this,qy,"f")},[x1]:{version:"1.0.0",on:ht(this,Wy,"f")},[ts]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ht(this,Hy,"f")},[kn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ht(this,Ky,"f")},[ol]:{version:"1.0.0",signMessage:ht(this,Gy,"f")}}}get accounts(){return ht(this,er,"f")?ht(this,er,"f").standardAccounts:[]}}oa=new WeakMap,Fy=new WeakMap,Vy=new WeakMap,zy=new WeakMap,er=new WeakMap,Wy=new WeakMap,$y=new WeakMap,qy=new WeakMap,Hy=new WeakMap,Ky=new WeakMap,Gy=new WeakMap,af=new WeakSet,FN=function(e,...n){var r;(r=ht(this,oa,"f")[e])==null||r.forEach(i=>i.apply(null,n))},VN=function(e,n){var r;ht(this,oa,"f")[e]=(r=ht(this,oa,"f")[e])==null?void 0:r.filter(i=>n!==i)};let Ub=!1;function Uz(){Ub||(oz(new Bz),Ub=!0)}async function Fz(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function n(r){var s,o;const i=r.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===t?(window.removeEventListener("message",n),i.data.data.error||Uz()):e())}window.addEventListener("message",n),window.setTimeout(()=>window.removeEventListener("message",n),5e3),e()}const Vz="Solflare";class zz extends v1{constructor(e={}){super(),this.name=Vz,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.Loadable,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new fm),this.emit("disconnect"))},this._accountChanged=n=>{if(!n)return;const r=this._publicKey;if(r){try{n=new Ee(n.toBytes())}catch(i){this.emit("error",new ic(i==null?void 0:i.message,i));return}r.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==Ve.Unsupported&&(hN(()=>{var n;return(n=window.solflare)!=null&&n.isSolflare||window.SolflareApp?(this._readyState=Ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),Fz())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ve.Loadable&&Ty()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ve.Loadable&&this._readyState!==Ve.Installed)throw new _o;if(this.readyState===Ve.Loadable&&Ty()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await UN(async()=>{const{default:i}=await import("./index-DdF3T4oD.js");return{default:i}},[])).default}catch(i){throw new fV(i==null?void 0:i.message,i)}let n;try{n=new e({network:this._config.network})}catch(i){throw new xl(i==null?void 0:i.message,i)}if(this._connecting=!0,!n.connected)try{await n.connect()}catch(i){throw new io(i==null?void 0:i.message,i)}if(!n.publicKey)throw new io;let r;try{r=new Ee(n.publicKey.toBytes())}catch(i){throw new ic(i==null?void 0:i.message,i)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new w1(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,r={}){try{const i=this._wallet;if(!i)throw new dn;try{const{signers:s,...o}=r;return ls(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||n.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof Cn?s:new as(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new dn;try{return await n.signTransaction(e)||e}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new dn;try{return await n.signAllTransactions(e)||e}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new dn;try{return await n.signMessage(e,"utf8")}catch(r){throw new pm(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}}const zN={setVisible(t){console.error(WN("call","setVisible"))},visible:!1};Object.defineProperty(zN,"visible",{get(){return console.error(WN("read","visible")),!1}});function WN(t,e){return`You have tried to  ${t} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const $N=Y.createContext(zN);function Wz(){return Y.useContext($N)}const $z=t=>ce.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&ce.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&ce.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),qz=({wallet:t,...e})=>t&&ce.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e}),Fb=({id:t,children:e,expanded:n=!1})=>{const r=Y.useRef(null),i=Y.useRef(!0),s="height 250ms ease-out",o=()=>{const l=r.current;l&&requestAnimationFrame(()=>{l.style.height=l.scrollHeight+"px"})},a=()=>{const l=r.current;l&&requestAnimationFrame(()=>{l.style.height=l.offsetHeight+"px",l.style.overflow="hidden",requestAnimationFrame(()=>{l.style.height="0"})})};return Y.useLayoutEffect(()=>{n?o():a()},[n]),Y.useLayoutEffect(()=>{const l=r.current;if(!l)return;function c(){l&&(l.style.overflow=n?"initial":"hidden",n&&(l.style.height="auto"))}function d(h){l&&h.target===l&&h.propertyName==="height"&&c()}return i.current&&(c(),i.current=!1),l.addEventListener("transitionend",d),()=>l.removeEventListener("transitionend",d)},[n]),ce.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:r,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},qg=({handleClick:t,tabIndex:e,wallet:n})=>ce.createElement("li",null,ce.createElement($z,{onClick:t,startIcon:ce.createElement(qz,{wallet:n}),tabIndex:e},n.adapter.name,n.readyState===Ve.Installed&&ce.createElement("span",null,"Detected"))),Hz=()=>ce.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ce.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),ce.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),ce.createElement("g",{clipPath:"url(#clip0_880_5115)"},ce.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),ce.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),ce.createElement("defs",null,ce.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("clipPath",{id:"clip0_880_5115"},ce.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),Kz=({className:t="",container:e="body"})=>{const n=Y.useRef(null),{wallets:r,select:i}=pN(),{setVisible:s}=Wz(),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[d,h]=Y.useState(null),[m,v]=Y.useMemo(()=>{const E=[],j=[];for(const K of r)K.readyState===Ve.Installed?E.push(K):j.push(K);return E.length?[E,j]:[j,[]]},[r]),k=Y.useCallback(()=>{c(!1),setTimeout(()=>s(!1),150)},[s]),S=Y.useCallback(E=>{E.preventDefault(),k()},[k]),_=Y.useCallback((E,j)=>{i(j),S(E)},[i,S]),T=Y.useCallback(()=>a(!o),[o]),I=Y.useCallback(E=>{const j=n.current;if(!j)return;const K=j.querySelectorAll("button"),G=K[0],O=K[K.length-1];E.shiftKey?document.activeElement===G&&(O.focus(),E.preventDefault()):document.activeElement===O&&(G.focus(),E.preventDefault())},[n]);return Y.useLayoutEffect(()=>{const E=K=>{K.key==="Escape"?k():K.key==="Tab"&&I(K)},{overflow:j}=window.getComputedStyle(document.body);return setTimeout(()=>c(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",E,!1),()=>{document.body.style.overflow=j,window.removeEventListener("keydown",E,!1)}},[k,I]),Y.useLayoutEffect(()=>h(document.querySelector(e)),[e]),d&&gk.createPortal(ce.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${l&&"wallet-adapter-modal-fade-in"} ${t}`,ref:n,role:"dialog"},ce.createElement("div",{className:"wallet-adapter-modal-container"},ce.createElement("div",{className:"wallet-adapter-modal-wrapper"},ce.createElement("button",{onClick:S,className:"wallet-adapter-modal-button-close"},ce.createElement("svg",{width:"14",height:"14"},ce.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),m.length?ce.createElement(ce.Fragment,null,ce.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),ce.createElement("ul",{className:"wallet-adapter-modal-list"},m.map(E=>ce.createElement(qg,{key:E.adapter.name,handleClick:j=>_(j,E.adapter.name),wallet:E})),v.length?ce.createElement(Fb,{expanded:o,id:"wallet-adapter-modal-collapse"},v.map(E=>ce.createElement(qg,{key:E.adapter.name,handleClick:j=>_(j,E.adapter.name),tabIndex:o?0:-1,wallet:E}))):null),v.length?ce.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:T,tabIndex:0},ce.createElement("span",null,o?"Less ":"More ","options"),ce.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},ce.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):ce.createElement(ce.Fragment,null,ce.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),ce.createElement("div",{className:"wallet-adapter-modal-middle"},ce.createElement(Hz,null)),v.length?ce.createElement(ce.Fragment,null,ce.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:T,tabIndex:0},ce.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),ce.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},ce.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),ce.createElement(Fb,{expanded:o,id:"wallet-adapter-modal-collapse"},ce.createElement("ul",{className:"wallet-adapter-modal-list"},v.map(E=>ce.createElement(qg,{key:E.adapter.name,handleClick:j=>_(j,E.adapter.name),tabIndex:o?0:-1,wallet:E}))))):null))),ce.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:S})),d)},Gz=({children:t,...e})=>{const[n,r]=Y.useState(!1);return ce.createElement($N.Provider,{value:{visible:n,setVisible:r}},t,n&&ce.createElement(Kz,{...e}))},Yz=Y.createContext({connected:!1,connecting:!1,publicKey:null,balance:null,error:null}),Qz=({children:t})=>{Ny.Mainnet;const e="https://api.mainnet-beta.solana.com",n=[new Dz,new zz];return p.jsx(uV,{endpoint:e,children:p.jsx(Mz,{wallets:n,autoConnect:!0,children:p.jsx(Gz,{children:p.jsx(Zz,{children:t})})})})},Zz=({children:t})=>{const{publicKey:e,connected:n,connecting:r}=pN(),[i,s]=Y.useState(null),[o,a]=Y.useState(null);return Y.useEffect(()=>{n&&e&&(async()=>{if(e)try{const d=await new y1("https://api.mainnet-beta.solana.com","confirmed").getBalance(e);s(d/1e9),a(null)}catch(c){console.error("Error fetching balance:",c),a("Failed to fetch wallet balance"),s(null)}else s(null)})()},[n,e]),p.jsx(Yz.Provider,{value:{connected:n,connecting:r,publicKey:(e==null?void 0:e.toBase58())||null,balance:i,error:o},children:t})},Xz=()=>{const{pathname:t}=Li();return Y.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t]),null};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),lt=(t,e)=>{const n=Y.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>Y.createElement("svg",{ref:d,...Jz,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${e7(t)}`,a].join(" "),...c},[...e.map(([h,m])=>Y.createElement(h,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=lt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=lt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=lt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=lt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=lt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=lt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=lt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=lt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=lt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=lt("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=lt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=lt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=lt("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=lt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=lt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=lt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=lt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=lt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=lt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=lt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=lt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=lt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=lt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=lt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=lt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=lt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=lt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=lt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=lt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=lt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function E7(t,e){Y.useEffect(()=>{const n=r=>{!t.current||t.current.contains(r.target)||e(r)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[t,e])}const b7=({isOpen:t,onClose:e})=>{const n=Y.useRef(null);return E7(n,e),t?p.jsxs("div",{ref:n,className:"absolute right-0 top-16 w-48 py-2 bg-white rounded-lg shadow-lg border border-gray-100",children:[p.jsx(zt,{to:"/browse-items",onClick:e,className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"Browse"}),p.jsx(zt,{to:"/list-item",onClick:e,className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"List Item"})]}):null},I7={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCmgORmeslowUkNeAhkf-V07fNXs9GB2wk",VITE_FIREBASE_APP_ID:"1:906788087014:web:df01c89cbca8459ef94727",VITE_FIREBASE_AUTH_DOMAIN:"xchainj-8b61b.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-3PHFSNC9Y3",VITE_FIREBASE_MESSAGING_SENDER_ID:"906788087014",VITE_FIREBASE_PROJECT_ID:"xchainj-8b61b",VITE_FIREBASE_STORAGE_BUCKET:"xchainj-8b61b.firebasestorage.app",VITE_SOLANA_RPC_URL:"https://api.mainnet-beta.solana.com"},Vb=t=>{let e;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const v=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(k=>k(e,v))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(I7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},S7=t=>t?Vb(t):Vb;var YN={exports:{}},QN={},ZN={exports:{}},XN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Y;function k7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var T7=typeof Object.is=="function"?Object.is:k7,A7=cc.useState,N7=cc.useEffect,C7=cc.useLayoutEffect,M7=cc.useDebugValue;function R7(t,e){var n=e(),r=A7({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return C7(function(){i.value=n,i.getSnapshot=e,Hg(i)&&s({inst:i})},[t,n,e]),N7(function(){return Hg(i)&&s({inst:i}),t(function(){Hg(i)&&s({inst:i})})},[t]),M7(n),n}function Hg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!T7(t,n)}catch{return!0}}function P7(t,e){return e()}var L7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P7:R7;XN.useSyncExternalStore=cc.useSyncExternalStore!==void 0?cc.useSyncExternalStore:L7;ZN.exports=XN;var D7=ZN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=Y,O7=D7;function j7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var B7=typeof Object.is=="function"?Object.is:j7,U7=O7.useSyncExternalStore,F7=xm.useRef,V7=xm.useEffect,z7=xm.useMemo,W7=xm.useDebugValue;QN.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=F7(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=z7(function(){function l(v){if(!c){if(c=!0,d=v,v=r(v),i!==void 0&&o.hasValue){var k=o.value;if(i(k,v))return h=k}return h=v}if(k=h,B7(d,v))return k;var S=r(v);return i!==void 0&&i(k,S)?k:(d=v,h=S)}var c=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var a=U7(t,s[0],s[1]);return V7(function(){o.hasValue=!0,o.value=a},[a]),W7(a),a};YN.exports=QN;var $7=YN.exports;const q7=To($7),JN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCmgORmeslowUkNeAhkf-V07fNXs9GB2wk",VITE_FIREBASE_APP_ID:"1:906788087014:web:df01c89cbca8459ef94727",VITE_FIREBASE_AUTH_DOMAIN:"xchainj-8b61b.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-3PHFSNC9Y3",VITE_FIREBASE_MESSAGING_SENDER_ID:"906788087014",VITE_FIREBASE_PROJECT_ID:"xchainj-8b61b",VITE_FIREBASE_STORAGE_BUCKET:"xchainj-8b61b.firebasestorage.app",VITE_SOLANA_RPC_URL:"https://api.mainnet-beta.solana.com"},{useDebugValue:H7}=ce,{useSyncExternalStoreWithSelector:K7}=q7;let zb=!1;const G7=t=>t;function Y7(t,e=G7,n){(JN?"production":void 0)!=="production"&&n&&!zb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),zb=!0);const r=K7(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return H7(r),r}const Wb=t=>{(JN?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?S7(t):t,n=(r,i)=>Y7(e,r,i);return Object.assign(n,e),n},M1=t=>t?Wb(t):Wb,Q7=M1(t=>({searchQuery:"",setSearchQuery:e=>t({searchQuery:e})})),Z7=()=>{const t=ar(),[e,n]=Y.useState(""),{setSearchQuery:r}=Q7(),i=s=>{s.preventDefault(),e.trim()&&(r(e.trim()),t(`/browse-items?search=${encodeURIComponent(e.trim())}`))};return p.jsxs("form",{onSubmit:i,className:"relative max-w-lg w-full",children:[p.jsx("input",{type:"text",value:e,onChange:s=>n(s.target.value),placeholder:"Search items...",className:"w-full bg-gray-100 dark:bg-dark-charcoal rounded-full pl-10 pr-24 py-2 focus:outline-none focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 dark:placeholder-neutral-warm/60 transition-colors duration-200"}),p.jsx(KN,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400 dark:text-neutral-warm/60"}),p.jsx("button",{type:"submit",className:"absolute right-2 top-1 px-4 py-1 text-sm text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 rounded-full transition-colors duration-200",children:"Search"})]})},eC=({variant:t="full",className:e=""})=>{const[n,r]=Y.useState(!1),i=()=>{switch(t){case"text":return"/images/logos/TextLogo.png";case"icon":return"/images/logos/AppIcon.png";default:return"/images/logos/FullLogo.png"}};return n?p.jsxs(zt,{to:"/",className:`inline-flex items-center ${e}`,children:[p.jsx(ja,{className:"h-8 w-8 text-blue-600"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Xchainj"})]}):p.jsx(zt,{to:"/",className:`inline-block ${e}`,children:p.jsx("img",{src:i(),alt:"Xchainj",className:`h-auto ${t==="icon"?"w-10":"w-32"}`,onError:()=>r(!0)})})},X7={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCmgORmeslowUkNeAhkf-V07fNXs9GB2wk",VITE_FIREBASE_APP_ID:"1:906788087014:web:df01c89cbca8459ef94727",VITE_FIREBASE_AUTH_DOMAIN:"xchainj-8b61b.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-3PHFSNC9Y3",VITE_FIREBASE_MESSAGING_SENDER_ID:"906788087014",VITE_FIREBASE_PROJECT_ID:"xchainj-8b61b",VITE_FIREBASE_STORAGE_BUCKET:"xchainj-8b61b.firebasestorage.app",VITE_SOLANA_RPC_URL:"https://api.mainnet-beta.solana.com"};function J7(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const gd=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return gd(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return gd(r)(n)}}}},eW=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,T)=>({...T,..._}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(..._)},r,i);const d=gd(s.serialize),h=()=>{const _=s.partialize({...r()});let T;const I=d({state:_,version:s.version}).then(E=>c.setItem(s.name,E)).catch(E=>{T=E});if(T)throw T;return I},m=i.setState;i.setState=(_,T)=>{m(_,T),h()};const v=t((..._)=>{n(..._),h()},r,i);let k;const S=()=>{var _;if(!c)return;o=!1,a.forEach(I=>I(r()));const T=((_=s.onRehydrateStorage)==null?void 0:_.call(s,r()))||void 0;return gd(c.getItem.bind(c))(s.name).then(I=>{if(I)return s.deserialize(I)}).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==s.version){if(s.migrate)return s.migrate(I.state,I.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return I.state}).then(I=>{var E;return k=s.merge(I,(E=r())!=null?E:v),n(k,!0),h()}).then(()=>{T==null||T(k,void 0),o=!0,l.forEach(I=>I(k))}).catch(I=>{T==null||T(void 0,I)})};return i.persist={setOptions:_=>{s={...s,..._},_.getStorage&&(c=_.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},S(),k||v},tW=(t,e)=>(n,r,i)=>{let s={storage:J7(()=>localStorage),partialize:S=>S,version:0,merge:(S,_)=>({..._,...S}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...S)},r,i);const d=()=>{const S=s.partialize({...r()});return c.setItem(s.name,{state:S,version:s.version})},h=i.setState;i.setState=(S,_)=>{h(S,_),d()};const m=t((...S)=>{n(...S),d()},r,i);i.getInitialState=()=>m;let v;const k=()=>{var S,_;if(!c)return;o=!1,a.forEach(I=>{var E;return I((E=r())!=null?E:m)});const T=((_=s.onRehydrateStorage)==null?void 0:_.call(s,(S=r())!=null?S:m))||void 0;return gd(c.getItem.bind(c))(s.name).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==s.version){if(s.migrate)return[!0,s.migrate(I.state,I.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,I.state];return[!1,void 0]}).then(I=>{var E;const[j,K]=I;if(v=s.merge(K,(E=r())!=null?E:m),n(v,!0),j)return d()}).then(()=>{T==null||T(v,void 0),v=r(),o=!0,l.forEach(I=>I(v))}).catch(I=>{T==null||T(void 0,I)})};return i.persist={setOptions:S=>{s={...s,...S},S.storage&&(c=S.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(l.add(S),()=>{l.delete(S)})},s.skipHydration||k(),v||m},nW=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((X7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),eW(t,e)):tW(t,e),rW=nW,iW=M1()(rW(t=>({isDarkMode:!0,toggleTheme:()=>t(e=>({isDarkMode:!e.isDarkMode}))}),{name:"theme-storage"})),sW=()=>{const{isDarkMode:t,toggleTheme:e}=iW();return Y.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),p.jsx("button",{onClick:e,className:"p-2 rounded-full transition-colors duration-200 hover:bg-primary-accent/10","aria-label":"Toggle theme",children:t?p.jsx(m7,{className:"h-5 w-5 text-neutral-warm"}):p.jsx(h7,{className:"h-5 w-5 text-dark-charcoal"})})};function oW(){Li();const t=ar(),{user:e}=Zp(),[n,r]=Y.useState(!1),[i,s]=Y.useState(!1),o=()=>{e?s(!i):t("/sign-in")},a=async()=>{try{await XD(Ci),t("/")}catch(l){console.error("Error signing out:",l)}};return p.jsxs("header",{className:"bg-neutral-warm dark:bg-dark shadow-sm relative transition-colors duration-200",children:[p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between items-center h-16",children:[p.jsx("div",{className:"flex items-center",children:p.jsx(eC,{variant:"full",className:"h-8"})}),p.jsx("div",{className:"hidden sm:block flex-1 px-8",children:p.jsx("div",{className:"max-w-lg w-full mx-auto",children:p.jsx(Z7,{})})}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(sW,{}),p.jsx(zt,{to:"/list-item",className:"hidden sm:inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md bg-primary-accent text-dark hover:bg-primary-light transition-colors duration-200",children:"List Item"}),p.jsx(zt,{to:"/browse-items",className:"hidden sm:inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-dark-charcoal dark:text-neutral-warm hover:text-accent-purple dark:hover:text-primary-accent transition-colors duration-200",children:"Browse"}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:o,className:"text-dark-charcoal dark:text-neutral-warm hover:text-accent-purple dark:hover:text-primary-accent transition-colors duration-200","aria-label":e?"Open user menu":"Sign in",children:p.jsx(w7,{className:"h-6 w-6"})}),i&&e&&p.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-dark-charcoal rounded-md shadow-lg py-1 z-50",children:[p.jsx(zt,{to:"/dashboard",className:"block px-4 py-2 text-sm text-dark-charcoal dark:text-neutral-warm hover:bg-neutral-warm/90 dark:hover:bg-dark-secondary",onClick:()=>s(!1),children:"Dashboard"}),p.jsx(zt,{to:"/edit-profile",className:"block px-4 py-2 text-sm text-dark-charcoal dark:text-neutral-warm hover:bg-neutral-warm/90 dark:hover:bg-dark-secondary",onClick:()=>s(!1),children:"Settings"}),p.jsxs("button",{onClick:()=>{s(!1),a()},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-neutral-warm/90 dark:hover:bg-dark-secondary flex items-center",children:[p.jsx(HN,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]}),p.jsx("button",{className:"sm:hidden text-dark-charcoal dark:text-neutral-warm",onClick:()=>r(!n),"aria-label":"Toggle mobile menu",children:p.jsx(d7,{className:"h-6 w-6"})})]})]})}),p.jsx(b7,{isOpen:n,onClose:()=>r(!1)})]})}const aW=()=>{const t=ar(),e=n=>{if(n.endsWith(".html")){window.location.href=n;return}t(n),window.scrollTo({top:0,behavior:"smooth"})};return p.jsx("footer",{className:"bg-neutral-warm dark:bg-dark border-t border-dark-charcoal/10 dark:border-neutral-warm/10",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[p.jsxs("div",{className:"col-span-1 md:col-span-2",children:[p.jsx(eC,{variant:"text",className:"mb-4"}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 max-w-md",children:"Exchange anything with anyone, securely and easily. Join our community of trusted users today."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-dark-charcoal dark:text-neutral-warm tracking-wider uppercase mb-4",children:"Platform"}),p.jsxs("ul",{className:"space-y-4",children:[p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/browse-items"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"Browse Items"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/list-item"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"List Item"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/how-it-works"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"How It Works"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-dark-charcoal dark:text-neutral-warm tracking-wider uppercase mb-4",children:"Legal"}),p.jsxs("ul",{className:"space-y-4",children:[p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/privacy-policy.html"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"Privacy Policy"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/TermsAndConditions.html"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"Terms of Service"})})]})]})]}),p.jsx("div",{className:"mt-8 pt-8 border-t border-dark-charcoal/10 dark:border-neutral-warm/10",children:p.jsxs("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60 text-sm text-center",children:["© ",new Date().getFullYear()," Xchainj. All rights reserved."]})})]})})},lW=()=>p.jsxs("div",{className:"min-h-screen flex flex-col bg-neutral-warm dark:bg-dark-gradient transition-colors duration-200",children:[p.jsx(oW,{}),p.jsx("main",{className:"flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:p.jsx(J4,{})}),p.jsx(aW,{})]}),cW=()=>p.jsxs(zt,{to:"/how-it-works",className:"inline-flex items-center px-8 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 md:py-4 md:text-lg md:px-10",children:[p.jsx(c7,{className:"h-5 w-5 mr-2"}),"How It Works"]}),uW=[{name:"Secure Lending",description:"Protected by smart contracts and collateral system",icon:C1,path:"/secure-lending"},{name:"Trust System",description:"Build reputation through verified transactions",icon:GN,path:"/trust-system"},{name:"Quick Process",description:"Fast and efficient lending process",icon:T1,path:"/quick-process"}],dW=()=>p.jsxs("div",{className:"space-y-12",children:[p.jsxs("section",{className:"text-center",children:[p.jsxs("h1",{className:"text-4xl font-bold tracking-tight text-dark-charcoal dark:text-neutral-warm sm:text-5xl md:text-6xl",children:[p.jsx("span",{className:"block",children:"Borrow, Loan, Trade"}),p.jsx("span",{className:"block text-accent-purple dark:text-primary-accent",children:"Locally or remotely"})]}),p.jsxs("p",{className:"mt-3 max-w-md mx-auto text-base text-dark-charcoal/80 dark:text-neutral-warm/80 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:["Borrow, loan, and trade anything of value with anyone securely using a blockchain-powered collateral system.",p.jsx("br",{}),"Join our trusted community today."]}),p.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row items-center justify-center gap-4 md:mt-8",children:[p.jsx(zt,{to:"/browse-items",className:"inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-dark bg-primary-accent hover:bg-primary-light md:py-4 md:text-lg md:px-10 transition-colors duration-200",children:"Browse Items"}),p.jsx(cW,{})]})]}),p.jsx("section",{children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsx("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:uW.map(t=>p.jsxs(zt,{to:t.path,className:"relative bg-neutral-warm dark:bg-dark p-6 rounded-lg shadow-sm hover:shadow-md transition-all group",children:[p.jsx("div",{children:p.jsx(t.icon,{className:"h-8 w-8 text-accent-purple dark:text-accent-purple group-hover:text-primary-accent transition-colors duration-200","aria-hidden":"true"})}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:t.name}),p.jsx("p",{className:"mt-2 text-base text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]})]},t.name))})})})]}),hW=()=>{const[t,e]=fP(),n=r=>{e(r?{search:r}:{})};return{search:t.get("search")||"",setSearch:n}},fW=(t,e)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>t(...r),e)}},pW=({initialValue:t="",onSearch:e})=>{const n=ar(),[r,i]=Y.useState(t),s=Y.useCallback(fW(l=>{l.trim()&&e(l.trim())},300),[e]),o=l=>{l.preventDefault(),r.trim()&&(n(`/browse-items?search=${encodeURIComponent(r.trim())}`),e(r.trim()))},a=l=>{const c=l.target.value;i(c),s(c)};return p.jsxs("form",{onSubmit:o,className:"relative w-full",children:[p.jsx("input",{type:"text",value:r,onChange:a,placeholder:"Search items...",className:"w-full bg-gray-100 dark:bg-dark-charcoal rounded-full pl-10 pr-20 py-2 focus:outline-none focus:ring-2 focus:ring-accent-purple dark:focus:ring-accent-purple text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 dark:placeholder-neutral-warm/60 transition-colors duration-200","aria-label":"Search items"}),p.jsx(KN,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400 dark:text-neutral-warm/60"}),p.jsx("button",{type:"submit",className:"absolute right-2 top-1 px-4 py-1 text-sm text-white bg-[#5C50D7] hover:bg-[#5C50D7]/90 rounded-full transition-colors duration-200",children:"Search"})]})},mW=(t,e)=>t.length<=e?t:t.slice(0,e)+"...";function gW(t,e){if(!t.coordinates||!e.coordinates)return t.postalCode&&e.postalCode?t.postalCode===e.postalCode?.5:t.state===e.state?25:100:t.city===e.city&&t.state===e.state?5:1/0;const n=3959,r=t.coordinates.latitude*Math.PI/180,i=e.coordinates.latitude*Math.PI/180,s=(e.coordinates.latitude-t.coordinates.latitude)*Math.PI/180,o=(e.coordinates.longitude-t.coordinates.longitude)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(r)*Math.cos(i)*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return Math.round(n*l*10)/10}function tC(t){if(!t||!t.city)return"Location not specified";let e=`${t.city}, ${t.state}`;return t.postalCode&&(e+=` ${t.postalCode}`),e}function yW(t,e){return t.postalCode&&e.postalCode?t.postalCode===e.postalCode:t.city===e.city&&t.state===e.state}const wW=({item:t})=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-md overflow-hidden transition-all hover:scale-[1.02]",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"pt-[60%]",children:t.image?p.jsx("img",{src:t.image,alt:t.name,className:"absolute top-0 left-0 w-full h-full object-cover",onError:e=>{e.currentTarget.src="https://placehold.co/600x400/e2e8f0/64748b?text=No+Image"}}):p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gray-100 dark:bg-dark-secondary flex items-center justify-center",children:p.jsx(ja,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})})}),t.location&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-4",children:p.jsxs("div",{className:"flex items-center text-neutral-warm",children:[p.jsx(N1,{className:"h-4 w-4 flex-shrink-0"}),p.jsx("span",{className:"ml-1 text-sm truncate",children:tC(t.location)})]})})]}),p.jsxs("div",{className:"p-4 space-y-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-dark-charcoal dark:text-neutral-warm",children:t.name}),p.jsx("p",{className:"text-sm text-dark-charcoal/80 dark:text-neutral-warm/80",children:mW(t.description,100)})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[p.jsxs(zt,{to:`/items/${t.id}`,className:"inline-flex items-center text-sm font-medium text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:["View Details",p.jsx(o7,{className:"ml-1 h-4 w-4"})]}),p.jsx(zt,{to:`/request-borrow/${t.id}`,className:"inline-flex items-center justify-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:"Request to Borrow"})]})]})]}),vW=({items:t})=>p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:t.map(e=>p.jsx(wW,{item:e},e.id))}),_W=({items:t,isLoading:e,searchQuery:n})=>e?p.jsx("div",{className:"flex justify-center items-center py-12",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.length===0?p.jsx("div",{className:"text-center py-12",children:p.jsx("p",{className:"text-gray-500",children:n?`No items found for "${n}"`:"No items available"})}):p.jsxs("div",{children:[n&&p.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Found ",t.length," ",t.length===1?"item":"items",' for "',n,'"']}),p.jsx(vW,{items:t})]}),xW=["All","Camping Gear","Electronics","Bicycles"],EW=["All","New","Like New","Used"],bW=({filters:t,onFilterChange:e})=>p.jsxs("div",{className:"space-y-4 p-4 bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm transition-colors duration-200",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm mb-1",children:"Category"}),p.jsx("select",{value:t.category,onChange:n=>e({...t,category:n.target.value}),className:"w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:border-accent-purple focus:ring-accent-purple dark:focus:border-primary-accent dark:focus:ring-primary-accent text-sm bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:xW.map(n=>p.jsx("option",{value:n==="All"?"":n,children:n},n))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm mb-1",children:"Condition"}),p.jsx("select",{value:t.condition,onChange:n=>e({...t,condition:n.target.value}),className:"w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:border-accent-purple focus:ring-accent-purple dark:focus:border-primary-accent dark:focus:ring-primary-accent text-sm bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:EW.map(n=>p.jsx("option",{value:n==="All"?"":n,children:n},n))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm mb-1",children:"Price Range (per day)"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"number",value:t.minPrice||"",onChange:n=>e({...t,minPrice:Number(n.target.value)}),placeholder:"Min",className:"w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:border-accent-purple focus:ring-accent-purple dark:focus:border-primary-accent dark:focus:ring-primary-accent text-sm bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200"}),p.jsx("input",{type:"number",value:t.maxPrice||"",onChange:n=>e({...t,maxPrice:Number(n.target.value)}),placeholder:"Max",className:"w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:border-accent-purple focus:ring-accent-purple dark:focus:border-primary-accent dark:focus:ring-primary-accent text-sm bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200"})]})]})]}),nC="listings",rC=t=>{var n;const e=t.data();return{id:t.id,name:e.itemName||e.name||"Untitled Item",description:e.description||"",category:e.category||"Other",condition:e.condition||"Used",pricePerDay:e.price||0,expectedValue:e.expectedValue||e.price*20||0,image:((n=e.images)==null?void 0:n[0])||e.image_url||"",location:e.location?{city:e.location.city||"",state:e.location.state||"",postalCode:e.location.postalCode||e.location.zip||"",coordinates:e.location.coordinates||null}:void 0,maxTravelDistance:e.maxTravelDistance||e.max_travel_distance||10}},IW=async(t=20)=>{try{const e=od(Zl(Es,nC),Zf("timestamp","desc"),cB(t));return(await ad(e)).docs.map(rC)}catch(e){throw console.error("Error fetching listings:",e),new Error("Failed to fetch listings")}},SW=async t=>{try{const e=od(Zl(Es,nC)),n=await ad(e),r=t.toLowerCase();return n.docs.filter(i=>{var o,a,l;const s=i.data();return((o=s.itemName)==null?void 0:o.toLowerCase().includes(r))||((a=s.description)==null?void 0:a.toLowerCase().includes(r))||((l=s.category)==null?void 0:l.toLowerCase().includes(r))}).map(rC)}catch(e){throw console.error("Error searching listings:",e),new Error("Failed to search listings")}},kW=()=>{const{search:t,setSearch:e}=hW(),[n,r]=Y.useState(!0),[i,s]=Y.useState(null),[o,a]=Y.useState([]),[l,c]=Y.useState(!1),[d,h]=Y.useState({category:"",condition:"",minPrice:0,maxPrice:0});Y.useEffect(()=>{(async()=>{try{r(!0),s(null);const k=t?await SW(t):await IW();a(k)}catch(k){console.error("Error fetching items:",k),s("Failed to load items. Please try again later.")}finally{r(!1)}})()},[t]);const m=async v=>{e(v)};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"lg:hidden",children:p.jsxs("button",{onClick:()=>c(!l),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-neutral-warm dark:bg-dark-charcoal rounded-md shadow-sm hover:bg-neutral-warm/90 dark:hover:bg-dark-secondary transition-colors duration-200",children:[p.jsx(l7,{className:"h-4 w-4"}),l?"Hide Filters":"Show Filters"]})}),p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[p.jsx("div",{className:`
          lg:w-64 flex-shrink-0
          ${l?"block":"hidden"}
          lg:block
        `,children:p.jsx("div",{className:"sticky top-4",children:p.jsx(bW,{filters:d,onFilterChange:h})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"mb-6",children:p.jsx(pW,{initialValue:t,onSearch:m})}),i?p.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-md",children:p.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}):p.jsx(_W,{items:o,isLoading:n,searchQuery:t})]})]})]})},TW=({item:t})=>p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-lg overflow-hidden",children:p.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-dark-charcoal dark:text-neutral-warm",children:t.name}),p.jsx("p",{className:"mt-2 text-lg text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]})]}),AW=({item:t})=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 space-y-6 transition-colors duration-200",children:[p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.pricePerDay&&p.jsxs("div",{className:"flex items-start",children:[p.jsx(s7,{className:"h-5 w-5 text-accent-purple dark:text-primary-accent mt-1"}),p.jsxs("div",{className:"ml-2",children:[p.jsx("h3",{className:"text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Price per Day"}),p.jsxs("p",{className:"mt-1 text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:["$",t.pricePerDay]})]})]}),t.expectedValue&&p.jsxs("div",{className:"flex items-start",children:[p.jsx(g7,{className:"h-5 w-5 text-accent-purple dark:text-primary-accent mt-1"}),p.jsxs("div",{className:"ml-2",children:[p.jsx("h3",{className:"text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Expected Value"}),p.jsxs("p",{className:"mt-1 text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:["$",t.expectedValue]})]})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx(N1,{className:"h-5 w-5 text-accent-purple dark:text-primary-accent mt-1"}),p.jsxs("div",{className:"ml-2",children:[p.jsx("h3",{className:"text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Location"}),p.jsx("p",{className:"mt-1 text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:tC(t.location)}),t.maxTravelDistance&&p.jsxs("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:["Within ",t.maxTravelDistance," miles"]})]})]}),t.condition&&p.jsxs("div",{className:"flex items-start",children:[p.jsx(Oa,{className:"h-5 w-5 text-accent-purple dark:text-primary-accent mt-1"}),p.jsxs("div",{className:"ml-2",children:[p.jsx("h3",{className:"text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Condition"}),p.jsx("p",{className:"mt-1 text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:t.condition})]})]})]}),p.jsx("div",{className:"pt-6 border-t border-dark-charcoal/10 dark:border-neutral-warm/10",children:p.jsx(zt,{to:`/request-borrow/${t.id}`,className:"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple transition-colors duration-200",children:"Request to Borrow"})})]});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="firebasestorage.googleapis.com",NW="storageBucket",CW=2*60*1e3,MW=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Di{constructor(e,n,r=0){super(Kg(e),`Firebase Storage: ${n} (${Kg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ri;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ri||(Ri={}));function Kg(t){return"storage/"+t}function RW(){const t="An unknown error occurred, please check the error payload for server response.";return new Fi(Ri.UNKNOWN,t)}function PW(){return new Fi(Ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LW(){return new Fi(Ri.CANCELED,"User canceled the upload/download.")}function DW(t){return new Fi(Ri.INVALID_URL,"Invalid URL '"+t+"'.")}function OW(t){return new Fi(Ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $b(t){return new Fi(Ri.INVALID_ARGUMENT,t)}function sC(){return new Fi(Ri.APP_DELETED,"The Firebase app was deleted.")}function jW(t){return new Fi(Ri.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=li.makeFromUrl(e,n)}catch{return new li(e,"")}if(r.path==="")return r;throw OW(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(j){j.path_=decodeURIComponent(j.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),k={bucket:1,path:3},S=n===iC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",T=new RegExp(`^https?://${S}/${i}/${_}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:v,indices:k,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let j=0;j<E.length;j++){const K=E[j],G=K.regex.exec(e);if(G){const O=G[K.indices.bucket];let L=G[K.indices.path];L||(L=""),r=new li(O,L),K.postModify(r);break}}if(r==null)throw DW(e);return r}}class BW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(v,l())},_)}function m(){s&&clearTimeout(s)}function v(_,...T){if(c){m();return}if(_){m(),d.call(null,_,...T);return}if(l()||o){m(),d.call(null,_,...T);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let k=!1;function S(_){k||(k=!0,m(),!c&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function FW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VW(t){return t!==void 0}function qb(t,e,n,r){if(r<e)throw $b(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw $b(`Invalid value for '${t}'. Expected ${n} or less.`)}function zW(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var hp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hp||(hp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,n,r,i,s,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,k)=>{this.resolve_=v,this.reject_=k,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ph(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===hp.NO_ERROR,l=s.getStatus();if(!a||WW(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===hp.ABORT;r(!1,new Ph(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ph(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());VW(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=RW();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?sC():LW();o(l)}else{const l=PW();o(l)}};this.canceled_?n(!1,new Ph(!1,null,!0)):this.backoffId_=UW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ph{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function qW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YW(t,e,n,r,i,s,o=!0){const a=zW(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return KW(c,e),qW(c,n),HW(c,s),GW(c,r),new $W(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZW(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this._service=e,n instanceof li?this._location=n:this._location=li.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fp(e,n)}get root(){const e=new li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZW(this._location.path)}get storage(){return this._service}get parent(){const e=QW(this._location.path);if(e===null)return null;const n=new li(this._location.bucket,e);return new fp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jW(e)}}function Hb(t,e){const n=e==null?void 0:e[NW];return n==null?null:li.makeFromBucketSpec(n,t)}class XW{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=iC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CW,this._maxUploadRetryTime=MW,this._requests=new Set,i!=null?this._bucket=li.makeFromBucketSpec(i,this._host):this._bucket=Hb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=li.makeFromBucketSpec(this._url,e):this._bucket=Hb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fp(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new BW(sC());{const o=YW(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Kb="@firebase/storage",Gb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW="storage";function e$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new XW(n,r,i,e,Na)}function t$(){ya(new bo(JW,e$,"PUBLIC").setMultipleInstances(!0)),Si(Kb,Gb,""),Si(Kb,Gb,"esm2017")}t$();const n$="listings",r$=t=>({id:t.id,name:t.name,description:t.description,category:t.category,condition:t.condition,expectedValue:t.expected_value,images:t.images||[],location:t.location,maxTravelDistance:t.max_travel_distance}),i$=async t=>{try{console.log("Fetching item:",t);const e=Kp(Es,n$,t),n=await qv(e);return n.exists()?r$({id:n.id,...n.data()}):(console.log("Item not found:",t),null)}catch(e){throw console.error("Error fetching item:",e),e}},s$=()=>{const{id:t}=Ik(),e=ar(),[n,r]=Y.useState(null),[i,s]=Y.useState(!0),[o,a]=Y.useState(null);return Y.useEffect(()=>{(async()=>{if(!t){a("Invalid item ID"),s(!1);return}try{const c=await i$(t);c?r(c):a("Item not found")}catch(c){console.error("Error fetching item:",c),a("Failed to load item details")}finally{s(!1)}})()},[t]),i?p.jsx("div",{className:"max-w-3xl mx-auto p-6",children:p.jsxs("div",{className:"animate-pulse space-y-4",children:[p.jsx("div",{className:"h-64 bg-gray-200 dark:bg-dark-secondary rounded-lg"}),p.jsx("div",{className:"h-8 bg-gray-200 dark:bg-dark-secondary rounded w-3/4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-dark-secondary rounded w-1/2"})]})}):o||!n?p.jsx("div",{className:"max-w-3xl mx-auto p-6",children:p.jsxs("div",{className:"text-center",children:[p.jsx(ja,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-600 mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-2",children:o||"Item Not Found"}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 mb-6",children:"This item is no longer available or may have been removed."}),p.jsx("button",{onClick:()=>e("/browse-items"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:"Back to Browse"})]})}):p.jsxs("div",{className:"max-w-3xl mx-auto p-4 sm:p-6 space-y-6",children:[p.jsxs("button",{onClick:()=>e("/browse-items"),className:"inline-flex items-center text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60 hover:text-dark-charcoal dark:hover:text-neutral-warm",children:[p.jsx(t7,{className:"h-4 w-4 mr-1"}),"Back to Browse"]}),p.jsx(TW,{item:n}),p.jsx(AW,{item:n})]})};function oC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=oC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function o$(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=oC(t))&&(r&&(r+=" "),r+=e);return r}const R1="-",a$=t=>{const e=c$(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(R1);return a[0]===""&&a.length!==1&&a.shift(),aC(a,e)||l$(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},aC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?aC(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(R1);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},Yb=/^\[(.+)\]$/,l$=t=>{if(Yb.test(t)){const e=Yb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},c$=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return d$(Object.entries(t.classGroups),n).forEach(([s,o])=>{Yy(o,r,s,e)}),r},Yy=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Qb(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(u$(i)){Yy(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Yy(o,Qb(e,s),n,r)})})},Qb=(t,e)=>{let n=t;return e.split(R1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},u$=t=>t.isThemeGetter,d$=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,h$=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},lC="!",f$=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let _=0;_<a.length;_++){let T=a[_];if(c===0){if(T===i&&(r||a.slice(_,_+s)===e)){l.push(a.slice(d,_)),d=_+s;continue}if(T==="/"){h=_;continue}}T==="["?c++:T==="]"&&c--}const m=l.length===0?a:a.substring(d),v=m.startsWith(lC),k=v?m.substring(1):m,S=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:k,maybePostfixModifierPosition:S}};return n?a=>n({className:a,parseClassName:o}):o},p$=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},m$=t=>({cache:h$(t.cacheSize),parseClassName:f$(t),...a$(t)}),g$=/\s+/,y$=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(g$);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:v}=n(c);let k=!!v,S=r(k?m.substring(0,v):m);if(!S){if(!k){a=c+(a.length>0?" "+a:a);continue}if(S=r(m),!S){a=c+(a.length>0?" "+a:a);continue}k=!1}const _=p$(d).join(":"),T=h?_+lC:_,I=T+S;if(s.includes(I))continue;s.push(I);const E=i(S,k);for(let j=0;j<E.length;++j){const K=E[j];s.push(T+K)}a=c+(a.length>0?" "+a:a)}return a};function w$(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=cC(e))&&(r&&(r+=" "),r+=n);return r}const cC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=cC(t[r]))&&(n&&(n+=" "),n+=e);return n};function v$(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=m$(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=y$(l,n);return i(l,d),d}return function(){return s(w$.apply(null,arguments))}}const Rt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},uC=/^\[(?:([a-z-]+):)?(.+)\]$/i,_$=/^\d+\/\d+$/,x$=new Set(["px","full","screen"]),E$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,b$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,I$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,S$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,k$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ki=t=>Ol(t)||x$.has(t)||_$.test(t),Vs=t=>kc(t,"length",L$),Ol=t=>!!t&&!Number.isNaN(Number(t)),Gg=t=>kc(t,"number",Ol),Yc=t=>!!t&&Number.isInteger(Number(t)),T$=t=>t.endsWith("%")&&Ol(t.slice(0,-1)),ze=t=>uC.test(t),zs=t=>E$.test(t),A$=new Set(["length","size","percentage"]),N$=t=>kc(t,A$,dC),C$=t=>kc(t,"position",dC),M$=new Set(["image","url"]),R$=t=>kc(t,M$,O$),P$=t=>kc(t,"",D$),Qc=()=>!0,kc=(t,e,n)=>{const r=uC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},L$=t=>b$.test(t)&&!I$.test(t),dC=()=>!1,D$=t=>S$.test(t),O$=t=>k$.test(t),j$=()=>{const t=Rt("colors"),e=Rt("spacing"),n=Rt("blur"),r=Rt("brightness"),i=Rt("borderColor"),s=Rt("borderRadius"),o=Rt("borderSpacing"),a=Rt("borderWidth"),l=Rt("contrast"),c=Rt("grayscale"),d=Rt("hueRotate"),h=Rt("invert"),m=Rt("gap"),v=Rt("gradientColorStops"),k=Rt("gradientColorStopPositions"),S=Rt("inset"),_=Rt("margin"),T=Rt("opacity"),I=Rt("padding"),E=Rt("saturate"),j=Rt("scale"),K=Rt("sepia"),G=Rt("skew"),O=Rt("space"),L=Rt("translate"),B=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",ze,e],H=()=>[ze,e],A=()=>["",Ki,Vs],f=()=>["auto",Ol,ze],b=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],C=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",ze],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[Ol,ze];return{cacheSize:500,separator:":",theme:{colors:[Qc],spacing:[Ki,Vs],blur:["none","",zs,ze],brightness:D(),borderColor:[t],borderRadius:["none","","full",zs,ze],borderSpacing:H(),borderWidth:A(),contrast:D(),grayscale:F(),hueRotate:D(),invert:F(),gap:H(),gradientColorStops:[t],gradientColorStopPositions:[T$,Vs],inset:$(),margin:$(),opacity:D(),padding:H(),saturate:D(),scale:D(),sepia:F(),skew:D(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",ze]}],container:["container"],columns:[{columns:[zs]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...b(),ze]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yc,ze]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ze]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Yc,ze]}],"grid-cols":[{"grid-cols":[Qc]}],"col-start-end":[{col:["auto",{span:["full",Yc,ze]},ze]}],"col-start":[{"col-start":f()}],"col-end":[{"col-end":f()}],"grid-rows":[{"grid-rows":[Qc]}],"row-start-end":[{row:["auto",{span:[Yc,ze]},ze]}],"row-start":[{"row-start":f()}],"row-end":[{"row-end":f()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ze]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ze,e]}],"min-w":[{"min-w":[ze,e,"min","max","fit"]}],"max-w":[{"max-w":[ze,e,"none","full","min","max","fit","prose",{screen:[zs]},zs]}],h:[{h:[ze,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ze,e,"auto","min","max","fit"]}],"font-size":[{text:["base",zs,Vs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gg]}],"font-family":[{font:[Qc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ze]}],"line-clamp":[{"line-clamp":["none",Ol,Gg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ki,ze]}],"list-image":[{"list-image":["none",ze]}],"list-style-type":[{list:["none","disc","decimal",ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...C(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ki,Vs]}],"underline-offset":[{"underline-offset":["auto",Ki,ze]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...b(),C$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",N$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},R$]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...C(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:C()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...C()]}],"outline-offset":[{"outline-offset":[Ki,ze]}],"outline-w":[{outline:[Ki,Vs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[Ki,Vs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",zs,P$]}],"shadow-color":[{shadow:[Qc]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",zs,ze]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[K]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ze]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",ze]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Yc,ze]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[G]}],"skew-y":[{"skew-y":[G]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ze]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ki,Vs,Gg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},B$=v$(j$);function U$(...t){return B$(o$(t))}const F$=({onImageChange:t,error:e})=>{const[n,r]=Y.useState(null),i=o=>{var c;const a=(c=o.target.files)==null?void 0:c[0];if(!a)return;if(!a.type.startsWith("image/")){t(null);return}const l=new FileReader;l.onloadend=()=>{r(l.result)},l.readAsDataURL(a),t(a)},s=()=>{r(null),t(null)};return p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm mb-2",children:"Item Image"}),p.jsx("div",{className:U$("mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md",e?"border-red-300":"border-gray-300 dark:border-dark",n?"bg-gray-50 dark:bg-dark-secondary":"bg-white dark:bg-dark"),children:n?p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:n,alt:"Preview",className:"max-h-48 rounded-md"}),p.jsx("button",{type:"button",onClick:s,className:"absolute -top-2 -right-2 p-1 bg-red-100 dark:bg-red-900/20 rounded-full text-red-600 dark:text-red-400 hover:bg-red-200",children:p.jsx(x7,{className:"h-4 w-4"})})]}):p.jsxs("div",{className:"space-y-1 text-center",children:[p.jsx(u7,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsx("div",{className:"flex text-sm",children:p.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-[#5C50D7] hover:text-[#5C50D7]/80",children:[p.jsx("span",{children:"Upload an image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:i,className:"sr-only"})]})}),p.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})}),e&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:e})]})},V$=({formData:t,onChange:e,errors:n})=>{const r=i=>{const{name:s,value:o}=i.target;e({...t,[s]:o})};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Name"}),p.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",required:!0}),n.name&&p.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.name})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Description"}),p.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:r,rows:4,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",required:!0}),n.description&&p.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.description})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Category"}),p.jsxs("select",{id:"category",name:"category",value:t.category,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:[p.jsx("option",{value:"",children:"Select a category"}),p.jsx("option",{value:"Electronics",children:"Electronics"}),p.jsx("option",{value:"Tools",children:"Tools"}),p.jsx("option",{value:"Sports",children:"Sports"}),p.jsx("option",{value:"Other",children:"Other"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"condition",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Condition"}),p.jsxs("select",{id:"condition",name:"condition",value:t.condition,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:[p.jsx("option",{value:"New",children:"New"}),p.jsx("option",{value:"Like New",children:"Like New"}),p.jsx("option",{value:"Used",children:"Used"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"expectedValue",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Expected Value ($)"}),p.jsx("input",{type:"number",id:"expectedValue",name:"expectedValue",value:t.expectedValue,onChange:r,min:"0",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",required:!0})]})]})},hC=({value:t,onChange:e,maxDistance:n,onMaxDistanceChange:r})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"City"}),p.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:p.jsx(N1,{className:"h-5 w-5 text-accent-purple dark:text-accent-purple"})}),p.jsx("input",{type:"text",value:t.city,onChange:i=>e({...t,city:i.target.value}),className:"block w-full pl-10 rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",placeholder:"Enter city",required:!0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"State"}),p.jsx("input",{type:"text",value:t.state,onChange:i=>e({...t,state:i.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",placeholder:"Enter state",required:!0})]})]}),p.jsxs("div",{className:"sm:w-1/2",children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Postal Code"}),p.jsx("input",{type:"text",value:t.postalCode,onChange:i=>e({...t,postalCode:i.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",placeholder:"Enter postal code",required:!0})]}),r&&p.jsxs("div",{className:"sm:w-1/2",children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Maximum Travel Distance (miles)"}),p.jsx("input",{type:"number",value:n,onChange:i=>r(Number(i.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",min:"0",step:"1",placeholder:"Enter maximum distance"})]})]}),z$=()=>{const t=ar(),[e,n]=Y.useState(!1),[r,i]=Y.useState({}),[s,o]=Y.useState(null),[a,l]=Y.useState({city:"",state:"",postalCode:""}),[c,d]=Y.useState(10),[h,m]=Y.useState({name:"",description:"",category:"",condition:"Used",expectedValue:""}),v=()=>{const S={};return h.name||(S.name="Name is required"),h.description||(S.description="Description is required"),s||(S.image="Image is required"),(!a.city||!a.state||!a.postalCode)&&(S.location="Complete location is required"),i(S),Object.keys(S).length===0},k=async S=>{if(S.preventDefault(),!!v()){n(!0);try{if(!s)throw new Error("Item image is required");const _={name:h.name,description:h.description,expectedValue:Number(h.expectedValue),category:h.category||"Other",condition:h.condition,image:s,location:a,maxTravelDistance:c};await new Promise(T=>setTimeout(T,1e3)),t("/browse-items")}catch(_){console.error("Error creating item:",_),i({submit:_ instanceof Error?_.message:"Failed to create item. Please try again."})}finally{n(!1)}}};return p.jsxs("form",{onSubmit:k,className:"space-y-8",children:[r.submit&&p.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded",children:r.submit}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 space-y-6 transition-colors duration-200",children:[p.jsx("h3",{className:"text-lg font-medium text-accent-purple dark:text-accent-purple",children:"Item Details"}),p.jsx(F$,{onImageChange:o,error:r.image}),p.jsx(V$,{formData:h,onChange:m,errors:r})]}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 space-y-6 transition-colors duration-200",children:[p.jsx("h3",{className:"text-lg font-medium text-accent-purple dark:text-accent-purple",children:"Location Details"}),p.jsx(hC,{value:a,onChange:l,maxDistance:c,onMaxDistanceChange:d}),r.location&&p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.location})]}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-dark-charcoal/20 dark:border-neutral-warm/20 rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-transparent hover:bg-dark-charcoal/5 dark:hover:bg-neutral-warm/5 transition-colors duration-200",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:e,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:e?"Creating...":"Create Listing"})]})]})},W$=()=>p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold text-dark-charcoal dark:text-primary-accent mb-8",children:"List Your Item"}),p.jsx(z$,{})]}),$$=({user:t,onEdit:e})=>p.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("img",{src:t.avatarUrl,alt:t.username,className:"h-16 w-16 rounded-full object-cover"}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.username}),p.jsx("p",{className:"text-gray-600",children:t.email}),p.jsxs("div",{className:"flex items-center mt-1",children:[p.jsx(GN,{className:"h-5 w-5 text-yellow-400 fill-current"}),p.jsxs("span",{className:"ml-1 text-gray-600",children:[t.trustRating,"/5.0"]})]})]})]}),p.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600","aria-label":"Edit profile",children:p.jsx(p7,{className:"h-5 w-5"})})]})});function yi(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ka(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const fC=6048e5,q$=864e5;let H$={};function Em(){return H$}function yd(t,e){var a,l,c,d;const n=Em(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=yi(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function pp(t){return yd(t,{weekStartsOn:1})}function pC(t){const e=yi(t),n=e.getFullYear(),r=ka(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=pp(r),s=ka(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=pp(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Zb(t){const e=yi(t);return e.setHours(0,0,0,0),e}function Xb(t){const e=yi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function K$(t,e){const n=Zb(t),r=Zb(e),i=+n-Xb(n),s=+r-Xb(r);return Math.round((i-s)/q$)}function G$(t){const e=pC(t),n=ka(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),pp(n)}function Y$(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Q$(t){if(!Y$(t)&&typeof t!="number")return!1;const e=yi(t);return!isNaN(Number(e))}function Z$(t){const e=yi(t),n=ka(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const X$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},J$=(t,e,n)=>{let r;const i=X$[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Yg(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const eq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},tq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},nq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rq={date:Yg({formats:eq,defaultWidth:"full"}),time:Yg({formats:tq,defaultWidth:"full"}),dateTime:Yg({formats:nq,defaultWidth:"full"})},iq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sq=(t,e,n,r)=>iq[t];function Zc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const oq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},aq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},lq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},cq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},uq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},dq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hq=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},fq={ordinalNumber:hq,era:Zc({values:oq,defaultWidth:"wide"}),quarter:Zc({values:aq,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Zc({values:lq,defaultWidth:"wide"}),day:Zc({values:cq,defaultWidth:"wide"}),dayPeriod:Zc({values:uq,defaultWidth:"wide",formattingValues:dq,defaultFormattingWidth:"wide"})};function Xc(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?mq(a,h=>h.test(o)):pq(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function pq(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function mq(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function gq(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const yq=/^(\d+)(th|st|nd|rd)?/i,wq=/\d+/i,vq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_q={any:[/^b/i,/^(a|c)/i]},xq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Eq={any:[/1/i,/2/i,/3/i,/4/i]},bq={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Iq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sq={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Tq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Aq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nq={ordinalNumber:gq({matchPattern:yq,parsePattern:wq,valueCallback:t=>parseInt(t,10)}),era:Xc({matchPatterns:vq,defaultMatchWidth:"wide",parsePatterns:_q,defaultParseWidth:"any"}),quarter:Xc({matchPatterns:xq,defaultMatchWidth:"wide",parsePatterns:Eq,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Xc({matchPatterns:bq,defaultMatchWidth:"wide",parsePatterns:Iq,defaultParseWidth:"any"}),day:Xc({matchPatterns:Sq,defaultMatchWidth:"wide",parsePatterns:kq,defaultParseWidth:"any"}),dayPeriod:Xc({matchPatterns:Tq,defaultMatchWidth:"any",parsePatterns:Aq,defaultParseWidth:"any"})},Cq={code:"en-US",formatDistance:J$,formatLong:rq,formatRelative:sq,localize:fq,match:Nq,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mq(t){const e=yi(t);return K$(e,Z$(e))+1}function Rq(t){const e=yi(t),n=+pp(e)-+G$(e);return Math.round(n/fC)+1}function mC(t,e){var d,h,m,v;const n=yi(t),r=n.getFullYear(),i=Em(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(m=i.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=ka(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=yd(o,e),l=ka(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=yd(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function Pq(t,e){var a,l,c,d;const n=Em(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=mC(t,e),s=ka(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),yd(s,e)}function Lq(t,e){const n=yi(t),r=+yd(n,e)-+Pq(n,e);return Math.round(r/fC)+1}function ft(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ws={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ft(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ft(n+1,2)},d(t,e){return ft(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ft(t.getHours()%12||12,e.length)},H(t,e){return ft(t.getHours(),e.length)},m(t,e){return ft(t.getMinutes(),e.length)},s(t,e){return ft(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ft(i,e.length)}},el={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Jb={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ws.y(t,e)},Y:function(t,e,n,r){const i=mC(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return ft(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ft(s,e.length)},R:function(t,e){const n=pC(t);return ft(n,e.length)},u:function(t,e){const n=t.getFullYear();return ft(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ft(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ft(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ws.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ft(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Lq(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ft(i,e.length)},I:function(t,e,n){const r=Rq(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ft(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ws.d(t,e)},D:function(t,e,n){const r=Mq(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ft(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ft(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ft(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ft(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=el.noon:r===0?i=el.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=el.evening:r>=12?i=el.afternoon:r>=4?i=el.morning:i=el.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ws.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ws.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ws.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ws.s(t,e)},S:function(t,e){return Ws.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return tI(r);case"XXXX":case"XX":return Ko(r);case"XXXXX":case"XXX":default:return Ko(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return tI(r);case"xxxx":case"xx":return Ko(r);case"xxxxx":case"xxx":default:return Ko(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+eI(r,":");case"OOOO":default:return"GMT"+Ko(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+eI(r,":");case"zzzz":default:return"GMT"+Ko(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return ft(r,e.length)},T:function(t,e,n){const r=t.getTime();return ft(r,e.length)}};function eI(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ft(s,2)}function tI(t,e){return t%60===0?(t>0?"-":"+")+ft(Math.abs(t)/60,2):Ko(t,e)}function Ko(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ft(Math.trunc(r/60),2),s=ft(r%60,2);return n+i+e+s}const nI=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},gC=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Dq=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return nI(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",nI(r,e)).replace("{{time}}",gC(i,e))},Oq={p:gC,P:Dq},jq=/^D+$/,Bq=/^Y+$/,Uq=["D","DD","YY","YYYY"];function Fq(t){return jq.test(t)}function Vq(t){return Bq.test(t)}function zq(t,e,n){const r=Wq(t,e,n);if(console.warn(r),Uq.includes(t))throw new RangeError(r)}function Wq(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $q=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hq=/^'([^]*?)'?$/,Kq=/''/g,Gq=/[a-zA-Z]/;function Yq(t,e,n){var d,h,m,v;const r=Em(),i=r.locale??Cq,s=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??0,a=yi(t);if(!Q$(a))throw new RangeError("Invalid time value");let l=e.match(qq).map(k=>{const S=k[0];if(S==="p"||S==="P"){const _=Oq[S];return _(k,i.formatLong)}return k}).join("").match($q).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const S=k[0];if(S==="'")return{isToken:!1,value:Qq(k)};if(Jb[S])return{isToken:!0,value:k};if(S.match(Gq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:k}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(k=>{if(!k.isToken)return k.value;const S=k.value;(Vq(S)||Fq(S))&&zq(S,e,String(t));const _=Jb[S[0]];return _(a,S,i.localize,c)}).join("")}function Qq(t){const e=t.match(Hq);return e?e[1].replace(Kq,"'"):t}const Zq=({transactions:t,loading:e,error:n})=>e?p.jsx("div",{className:"flex justify-center items-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-purple"})}):n?p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg flex items-center",children:[p.jsx(Oa,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2"}),p.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})]}):t.length?p.jsx("div",{className:"divide-y divide-gray-200 dark:divide-dark",children:t.map(r=>p.jsxs("div",{className:"py-4",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:r.itemName}),p.jsx("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:Yq(r.timestamp.toDate(),"PPP")})]}),p.jsx("span",{className:`
              px-2 py-1 text-xs font-medium rounded-full
              ${r.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":r.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":r.status==="active"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}
            `,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("p",{className:"text-sm text-dark-charcoal/80 dark:text-neutral-warm/80",children:r.description}),p.jsxs("div",{className:"mt-2 text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:[p.jsxs("span",{className:"mr-4",children:["$",r.price]}),p.jsxs("span",{children:[r.location.city,", ",r.location.state]})]})]})]},r.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(ja,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-dark-charcoal dark:text-neutral-warm mb-2",children:"No Transactions Yet"}),p.jsx("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Your transaction history will appear here once you start trading."})]}),Xq="transactionHistory",Jq=t=>{var n,r,i;const e=t.data();return{id:t.id,category:e.category||"Uncategorized",condition:e.condition||"Not specified",description:e.description||"",images:e.images||[],itemName:e.itemName||"Unnamed Item",listingId:e.listingId||"",location:{city:((n=e.location)==null?void 0:n.city)||"",state:((r=e.location)==null?void 0:r.state)||"",zip:((i=e.location)==null?void 0:i.zip)||0},price:e.price||0,swapPreferences:e.swapPreferences||"",timestamp:e.timestamp||an.now(),userId:e.userId||"",status:e.status||"pending"}},eH=async t=>{try{console.log("Fetching transactions for user:",t);const e=od(Zl(Es,Xq),py("userId","==",t),Zf("timestamp","desc")),n=await ad(e);if(n.empty)return console.log("No transactions found for user:",t),[];const r=n.docs.map(Jq);return console.log(`Found ${r.length} transactions`),r}catch(e){throw console.error("Error fetching user transactions:",e),new Error("Failed to fetch transactions")}},tH=()=>{const t=ar(),{user:e,logout:n}=Zp(),[r,i]=Y.useState([]),[s,o]=Y.useState(!0),[a,l]=Y.useState(null);Y.useEffect(()=>{(async()=>{if(e)try{const h=await eH(e.uid);i(h)}catch(h){console.error("Error fetching transactions:",h),l("Failed to load transaction history")}finally{o(!1)}})()},[e]);const c=async()=>{try{await n(),t("/")}catch(d){console.error("Error logging out:",d)}};return e?p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[p.jsx($$,{user:e,onEdit:()=>t("/edit-profile")}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm mb-4",children:"Transaction History"}),p.jsx(Zq,{transactions:r,loading:s,error:a})]}),p.jsx("div",{className:"flex justify-end",children:p.jsxs("button",{onClick:c,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[p.jsx(HN,{className:"h-4 w-4 mr-2"}),"Logout"]})})]}):null},nH=({provider:t,onClick:e,isLoading:n=!1})=>{const r=()=>{switch(t){case"facebook":return p.jsx(a7,{className:"h-5 w-5"});case"google":return p.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]});default:return p.jsx(A1,{className:"h-5 w-5"})}},i=()=>{switch(t){case"facebook":return"bg-[#1877F2] hover:bg-[#166FE5] text-white";case"google":return"bg-white hover:bg-gray-50 text-gray-700 border border-gray-300";default:return"bg-gray-800 hover:bg-gray-700 text-white"}},s=()=>{switch(t){case"facebook":return"Continue with Facebook";case"google":return"Continue with Google";default:return"Continue with Email"}};return p.jsxs("button",{onClick:e,disabled:n,className:`w-full flex items-center justify-center gap-3 px-4 py-2 rounded-md font-medium transition-colors ${i()} disabled:opacity-50 disabled:cursor-not-allowed`,children:[r(),p.jsx("span",{children:n?"Loading...":s()})]})},rH=()=>{const t=ar(),e=Li(),{user:n,initialized:r}=Zp(),[i,s]=Y.useState(""),[o,a]=Y.useState(""),[l,c]=Y.useState(!1),[d,h]=Y.useState(null);if(Y.useEffect(()=>{var S,_;if(r&&n){const T=((_=(S=e.state)==null?void 0:S.from)==null?void 0:_.pathname)||"/dashboard";t(T,{replace:!0})}},[n,r,t,e]),!r)return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple"})});if(n)return null;const m=S=>{switch(S.code){case"auth/user-not-found":return p.jsxs("span",{children:["No account found with this email."," ",p.jsx(zt,{to:"/sign-up",className:"underline hover:text-accent-purple/80 dark:hover:text-primary-light",children:"Create an account"})]});case"auth/invalid-credential":return p.jsxs("span",{children:["Invalid credentials. Please try again or"," ",p.jsx(zt,{to:"/forgot-password",className:"underline hover:text-accent-purple/80 dark:hover:text-primary-light",children:"reset your password"})]});default:return"Something went wrong. Please try again later."}},v=async S=>{var _,T;S.preventDefault(),c(!0),h(null);try{await YD(Ci,i,o);const I=((T=(_=e.state)==null?void 0:_.from)==null?void 0:T.pathname)||"/dashboard";t(I,{replace:!0})}catch(I){h(m(I)),c(!1)}},k=async()=>{var S,_;try{c(!0),h(null);const T=new Zi;await wO(Ci,T);const I=((_=(S=e.state)==null?void 0:S.from)==null?void 0:_.pathname)||"/dashboard";t(I,{replace:!0})}catch(T){h(m(T)),c(!1)}};return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-lg transition-colors duration-200",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold text-center text-dark-charcoal dark:text-neutral-warm",children:"Sign In"}),p.jsxs("p",{className:"mt-2 text-center text-dark-charcoal/80 dark:text-neutral-warm/80",children:["Don't have an account?"," ",p.jsx(zt,{to:"/sign-up",className:"text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Create one"})]})]}),d&&p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-md flex items-start gap-3",children:[p.jsx(Oa,{className:"h-5 w-5 text-red-500 dark:text-red-400 flex-shrink-0 mt-0.5"}),p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:d})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(nH,{provider:"google",onClick:k,isLoading:l}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-300 dark:border-dark"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-neutral-warm dark:bg-dark-charcoal text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Or continue with"})})]}),p.jsxs("form",{onSubmit:v,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Email"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("input",{type:"email",id:"email",value:i,onChange:S=>{s(S.target.value),h(null)},className:"block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent",required:!0,disabled:l}),p.jsx(A1,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 dark:text-neutral-warm/60"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Password"}),p.jsx("input",{type:"password",id:"password",value:o,onChange:S=>{a(S.target.value),h(null)},className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent",required:!0,disabled:l})]}),p.jsx("div",{className:"flex items-center justify-between",children:p.jsx("div",{className:"text-sm",children:p.jsx(zt,{to:"/forgot-password",className:"text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Forgot your password?"})})}),p.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:l?"Signing in...":"Sign in with Email"})]})]})]})})},iH=()=>{const t=ar(),[e,n]=Y.useState(""),[r,i]=Y.useState(""),[s,o]=Y.useState(""),[a,l]=Y.useState(""),[c,d]=Y.useState(!1),h=()=>r.length<6?(l("Password must be at least 6 characters long"),!1):r!==s?(l("Passwords do not match"),!1):!0,m=async v=>{if(v.preventDefault(),!!h()){d(!0),l("");try{await GD(Ci,e,r),t("/sign-in")}catch(k){l(k.message)}finally{d(!1)}}};return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-lg transition-colors duration-200",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold text-center text-dark-charcoal dark:text-neutral-warm",children:"Create Account"}),p.jsxs("p",{className:"mt-2 text-center text-dark-charcoal/80 dark:text-neutral-warm/80",children:["Already have an account?"," ",p.jsx(zt,{to:"/sign-in",className:"text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Sign in"})]})]}),a&&p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-md flex items-start gap-3",children:[p.jsx(Oa,{className:"h-5 w-5 text-red-500 dark:text-red-400 flex-shrink-0 mt-0.5"}),p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:a})]}),p.jsxs("form",{onSubmit:m,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Email"}),p.jsx("input",{type:"email",id:"email",value:e,onChange:v=>n(v.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent transition-colors duration-200",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Password"}),p.jsx("input",{type:"password",id:"password",value:r,onChange:v=>i(v.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent transition-colors duration-200",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Confirm Password"}),p.jsx("input",{type:"password",id:"confirmPassword",value:s,onChange:v=>o(v.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent transition-colors duration-200",required:!0})]}),p.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:c?"Creating Account...":"Create Account"})]})]})})},sH=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),oH=()=>{const[t,e]=Y.useState(""),[n,r]=Y.useState("idle"),[i,s]=Y.useState(""),o=async a=>{if(a.preventDefault(),!sH(t)){r("error"),s("Please enter a valid email address");return}r("loading");try{await KD(Ci,t),r("success")}catch(l){r("error"),s(l.message)}};return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-lg transition-colors duration-200",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold text-center text-dark-charcoal dark:text-neutral-warm",children:"Reset Password"}),p.jsx("p",{className:"mt-2 text-center text-dark-charcoal/80 dark:text-neutral-warm/80",children:"Enter your email address and we'll send you instructions to reset your password."})]}),n==="success"?p.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-md",children:[p.jsxs("p",{className:"text-green-800 dark:text-green-200",children:["If an account exists for ",t,", you will receive password reset instructions."]}),p.jsx(zt,{to:"/sign-in",className:"mt-4 inline-block text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Return to Sign In"})]}):p.jsxs("form",{onSubmit:o,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Email Address"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("input",{type:"email",id:"email",value:t,onChange:a=>e(a.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent transition-colors duration-200",required:!0}),p.jsx(A1,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 dark:text-neutral-warm/60"})]}),n==="error"&&p.jsxs("div",{className:"mt-2 flex items-start gap-2",children:[p.jsx(Oa,{className:"h-5 w-5 text-red-500 dark:text-red-400 flex-shrink-0"}),p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:i})]})]}),p.jsx("button",{type:"submit",disabled:n==="loading",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:n==="loading"?"Sending...":"Send Reset Link"}),p.jsx("div",{className:"text-center",children:p.jsx(zt,{to:"/sign-in",className:"text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Back to Sign In"})})]})]})})},aH=M1(t=>({isAuthenticated:!1,user:null,login:async(e,n)=>{console.log("Login attempt:",{email:e,password:n}),t({isAuthenticated:!0,user:{username:e.split("@")[0],email:e,avatarUrl:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e",trustRating:4.5}})},logout:()=>t({isAuthenticated:!1,user:null}),updateProfile:e=>t(n=>({user:n.user?{...n.user,...e}:null}))})),lH=()=>{const t=ar(),{user:e,updateProfile:n}=aH(),[r,i]=Y.useState({username:(e==null?void 0:e.username)||"",email:(e==null?void 0:e.email)||"",avatarUrl:(e==null?void 0:e.avatarUrl)||""}),s=o=>{o.preventDefault(),n(r),console.log("Profile updated:",r),t("/user-profile")};return p.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Profile"}),p.jsxs("form",{onSubmit:s,className:"space-y-6 bg-white rounded-lg shadow p-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),p.jsx("input",{type:"text",id:"username",value:r.username,onChange:o=>i(a=>({...a,username:o.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),p.jsx("input",{type:"email",id:"email",value:r.email,onChange:o=>i(a=>({...a,email:o.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"avatarUrl",className:"block text-sm font-medium text-gray-700",children:"Profile Picture URL"}),p.jsx("input",{type:"url",id:"avatarUrl",value:r.avatarUrl,onChange:o=>i(a=>({...a,avatarUrl:o.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{type:"button",onClick:()=>t("/user-profile"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),p.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Save Changes"})]})]})]})},cH=({expectedValue:t,onChange:e})=>{const[n,r]=Y.useState({type:"digital",description:"",value:0,isLocal:!1,useSmartContract:!1}),i=(s,o)=>{if(s==="value"){const l=parseFloat(o);o=isNaN(l)?0:l}const a={...n,[s]:o};r(a),e(a)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Collateral Type"}),p.jsxs("select",{value:n.type,onChange:s=>i("type",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:[p.jsx("option",{value:"digital",children:"Digital Asset (Cryptocurrency/NFT)"}),p.jsx("option",{value:"physical",children:"Physical Item"}),p.jsx("option",{value:"other",children:"Other"})]})]}),n.type==="physical"&&p.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:p.jsxs("div",{className:"flex",children:[p.jsx(Oa,{className:"h-5 w-5 text-yellow-400"}),p.jsxs("div",{className:"ml-3",children:[p.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Physical Collateral Notice"}),p.jsx("p",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:"Physical collateral requires local exchange or smart contract setup. The lender must verify and accept the collateral in person."})]})]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Description"}),p.jsx("textarea",{value:n.description,onChange:s=>i("description",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",rows:3,placeholder:"Describe your collateral in detail..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Estimated Value ($)"}),p.jsx("input",{type:"number",value:n.value||"",onChange:s=>i("value",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",min:"0",step:"0.01"}),p.jsxs("p",{className:"mt-1 text-sm text-accent-purple dark:text-accent-purple",children:["The item's expected value is $",t,". Your collateral should match or exceed this value."]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"isLocal",checked:n.isLocal,onChange:s=>i("isLocal",s.target.checked),className:"h-4 w-4 text-accent-purple focus:ring-accent-purple dark:focus:ring-accent-purple border-gray-300 dark:border-dark rounded transition-colors duration-200"}),p.jsx("label",{htmlFor:"isLocal",className:"ml-2 block text-sm text-accent-purple dark:text-accent-purple",children:"This will be a local exchange (in-person meeting)"})]}),n.isLocal&&n.type==="physical"&&p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"useSmartContract",checked:n.useSmartContract,onChange:s=>i("useSmartContract",s.target.checked),className:"h-4 w-4 text-accent-purple focus:ring-accent-purple dark:focus:ring-accent-purple border-gray-300 dark:border-dark rounded transition-colors duration-200"}),p.jsx("label",{htmlFor:"useSmartContract",className:"ml-2 block text-sm text-accent-purple dark:text-accent-purple",children:"Use smart contract for secure collateral handling"})]})]})},uH="swapRequests",dH=async(t,e,n,r,i)=>{try{if(!e||!n||!r)throw new Error("Missing required fields for swap request");const s={offeredItemId:t||null,requestedItemId:e,senderId:n,receiverId:r,status:"Pending",messages:[{senderId:n,text:i,timestamp:$E()}],timestamp:$E()};return{requestId:(await pB(Zl(Es,uH),s)).id,...s,messages:[{senderId:n,text:i,timestamp:an.now()}],timestamp:an.now()}}catch(s){throw console.error("Error creating swap request:",s),s}},hH=()=>{const t=ar(),{itemId:e}=Ik(),[n,r]=Y.useState(null),[i,s]=Y.useState(!0),[o,a]=Y.useState(null),[l,c]=Y.useState("idle");Y.useState({itemId:e||"",startDate:"",duration:7,collateralOffer:"",notes:""});const[d,h]=Y.useState({city:"",state:"",postalCode:""}),[m,v]=Y.useState({type:"digital",description:"",value:0,isLocal:!1}),[k,S]=Y.useState({location:"",meetingConfirmed:!1,exchangeCompleted:!1});Y.useState({contractCreated:!1,collateralLocked:!1,itemReturned:!1});const _=(I,E)=>{if(!E)return 1/0;const j=gW(I,E);return j===1/0?{distance:null,message:"Unable to calculate exact distance. Please ensure both locations are complete."}:{distance:j,message:yW(I,E)?"Item is in your area!":`${j} miles away`}};Y.useEffect(()=>{(async()=>{if(!e){a("Invalid item ID"),s(!1);return}try{const E=Kp(Es,"listings",e),j=await qv(E);if(!j.exists())a("Item not found");else{const K={id:j.id,...j.data()};r(K)}}catch(E){console.error("Error fetching item:",E),a("Failed to load item details")}finally{s(!1)}})()},[e]);const T=async I=>{if(I.preventDefault(),!d.city||!d.state||!d.postalCode){alert("Please provide your location");return}if(!n){alert("Item not found");return}if(!n.userId){alert("Item owner information is missing");return}const E=n.expectedValue||n.price*20||0;if(m.value<E){alert("Collateral value must be at least equal to the item value");return}if(m.isLocal&&!k.meetingConfirmed){alert("Please confirm the local exchange details");return}c("submitting");try{const j=Ci.currentUser;if(!j){t("/sign-in");return}await dH(null,n.id,j.uid,n.userId,`I would like to borrow this item. Collateral: ${m.description} (Value: $${m.value})`),c("success"),window.scrollTo(0,0)}catch(j){console.error("Error submitting borrow request:",j),c("idle"),j instanceof Error?alert(`Failed to submit request: ${j.message}`):alert("Failed to submit request. Please try again.")}};return i?p.jsx("div",{className:"max-w-2xl mx-auto p-6",children:p.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple dark:border-primary-accent"})})}):o||!n?p.jsx("div",{className:"max-w-2xl mx-auto p-6",children:p.jsxs("div",{className:"text-center",children:[p.jsx(ja,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-600 mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-2",children:o||"Item Not Found"}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 mb-6",children:"The item you're looking for doesn't exist or may have been removed."}),p.jsx("button",{onClick:()=>t("/browse-items"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:"Back to Browse"})]})}):l==="success"?p.jsx("div",{className:"max-w-2xl mx-auto p-6",children:p.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-green-900 dark:text-primary-accent mb-4",children:"Request Submitted!"}),p.jsx("p",{className:"text-green-700 dark:text-primary-accent mb-6",children:"Your request has been sent to the item owner. You'll be notified when they respond."}),p.jsx("button",{onClick:()=>t("/browse-items"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:"Browse More Items"})]})}):p.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-dark-charcoal dark:text-primary-accent mb-8",children:"Request to Borrow"}),p.jsxs("form",{onSubmit:T,className:"space-y-8",children:[p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 transition-colors duration-200",children:[p.jsx("h2",{className:"text-lg font-medium text-dark-charcoal dark:text-primary-accent mb-4",children:"Your Location"}),p.jsx(hC,{value:d,onChange:h}),d.city&&n.location&&p.jsx("div",{className:"mt-4",children:(()=>{const{distance:I,message:E}=_(d,n.location),j=n.maxTravelDistance||10,K=I!==null&&I>j;return p.jsxs("p",{className:"text-sm",children:[p.jsx("span",{className:I===null?"text-yellow-600 dark:text-yellow-400":"text-dark-charcoal dark:text-primary-accent",children:E}),K&&p.jsxs("span",{className:"text-red-600 dark:text-red-400 ml-2",children:["(Outside owner's maximum travel distance of ",j," miles)"]})]})})()})]}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 transition-colors duration-200",children:[p.jsx("h2",{className:"text-lg font-medium text-dark-charcoal dark:text-primary-accent mb-4",children:"Collateral Details"}),p.jsx(cH,{expectedValue:n.expectedValue||n.price*20||0,onChange:v})]}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-dark-charcoal/20 dark:border-neutral-warm/20 rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-primary-accent bg-transparent hover:bg-dark-charcoal/5 dark:hover:bg-neutral-warm/5 transition-colors duration-200",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:l==="submitting",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:l==="submitting"?"Submitting...":"Submit Request"})]})]})]})},P1=({title:t,description:e})=>p.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[p.jsx("h1",{className:"text-4xl font-bold text-dark-charcoal dark:text-primary-accent mb-4 transition-colors duration-200",children:t}),p.jsx("p",{className:"text-lg text-dark-charcoal/80 dark:text-neutral-warm/80 transition-colors duration-200",children:e})]}),fH=()=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-md p-6 transition-colors duration-200",children:[p.jsxs("div",{className:"flex items-center mb-4",children:[p.jsx(C1,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent mr-2"}),p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm",children:"Collateral Management"})]}),p.jsxs("div",{className:"grid gap-4",children:[p.jsx("button",{className:"bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 text-dark-charcoal dark:text-neutral-warm px-4 py-2 rounded transition-colors duration-200",children:"Deposit Collateral"}),p.jsx("button",{className:"border border-accent-purple dark:border-primary-accent text-accent-purple dark:text-primary-accent px-4 py-2 rounded hover:bg-accent-purple/10 dark:hover:bg-primary-accent/10 transition-colors duration-200",children:"Withdraw Collateral"}),p.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-dark rounded transition-colors duration-200",children:[p.jsx("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Current Collateral Balance:"}),p.jsx("p",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm",children:"0.00 SOL"})]})]})]}),pH=()=>{const[t,e]=Y.useState(!1);return p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsx(P1,{title:"Secure Lending",description:"Our platform uses blockchain technology to make every transaction safe and secure."}),p.jsx("div",{className:"text-center",children:p.jsxs("button",{onClick:()=>e(!t),className:"inline-flex items-center gap-1 text-sm text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light transition-colors duration-200",children:["How it works",t?p.jsx(i7,{className:"h-4 w-4"}):p.jsx(r7,{className:"h-4 w-4"})]})}),t&&p.jsx("div",{className:"bg-neutral-warm/50 dark:bg-dark-secondary/50 rounded-lg p-6 animate-fadeIn",children:p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 text-center max-w-3xl mx-auto",children:"A smart contract on the Solana blockchain holds a deposit (collateral) from both parties in escrow. This collateral is only released when the agreed-upon conditions are met, ensuring trust and fairness for everyone involved. Whether you're lending or borrowing, our system protects you by using transparent and reliable technology."})})]}),p.jsx("div",{className:"mt-12",children:p.jsx(fH,{})})]})},mH=[{id:1,username:"Alice",rating:4.9,transactions:156},{id:2,username:"Bob",rating:4.8,transactions:142},{id:3,username:"Charlie",rating:4.7,transactions:128}],gH=()=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-md p-6 transition-colors duration-200",children:[p.jsxs("div",{className:"flex items-center mb-6",children:[p.jsx(y7,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent mr-2"}),p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm",children:"Top Trusted Users"})]}),p.jsx("div",{className:"space-y-4",children:mH.map((t,e)=>p.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark rounded transition-colors duration-200",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"text-lg font-bold text-dark-charcoal/60 dark:text-neutral-warm/60 mr-4",children:["#",e+1]}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-dark-charcoal dark:text-neutral-warm",children:t.username}),p.jsxs("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:[t.transactions," transactions"]})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-lg font-bold text-accent-purple dark:text-primary-accent",children:t.rating}),p.jsx("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:"rating"})]})]},t.id))})]}),yH=()=>p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx(P1,{title:"Trust System",description:"Our trust system helps create a reliable community of lenders and borrowers. Build your reputation through successful transactions and join our top trusted users."}),p.jsx("div",{className:"mt-12",children:p.jsx(gH,{})})]}),wH=[{title:"Create Account",description:"Sign up and verify your identity"},{title:"Browse Items",description:"Find items you want to borrow or list items to lend"},{title:"Secure Transaction",description:"Complete the transaction with our secure smart contract system"},{title:"Build Trust",description:"Rate your experience and build your trust score"}],vH=()=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-md p-6 transition-colors duration-200",children:[p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm mb-6",children:"How It Works"}),p.jsx("div",{className:"space-y-6",children:wH.map((t,e)=>p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"flex-shrink-0 mt-1",children:p.jsx(n7,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent"})}),p.jsxs("div",{className:"ml-4",children:[p.jsx("h3",{className:"font-semibold text-dark-charcoal dark:text-neutral-warm",children:t.title}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]})]},e))})]}),_H=()=>p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx(P1,{title:"Quick Process",description:"Start lending or borrowing in minutes with our streamlined process. Our platform makes peer-to-peer lending simple, fast, and efficient."}),p.jsx("div",{className:"mt-12",children:p.jsx(vH,{})})]}),xH=[{name:"Sarah",title:"Renting Equipment for a Weekend Project",description:"Sarah needed power tools for a DIY project but didn't want to buy them for one-time use. She borrowed a cordless drill and circular saw using Xchainj's secure collateral system."},{name:"Mike",title:"Trading Items with Trust",description:"Mike wanted to trade his unused bike for camping gear. Through Xchainj, he connected with Lisa and safely traded his bike for a tent and sleeping bag using the platform's escrow system."},{name:"David",title:"Earning from Unused Equipment",description:"David occasionally lends his high-quality camera through Xchainj. He earned enough in one month to cover his camera's insurance by setting a reasonable collateral amount."},{name:"Emily",title:"Quick Solution for Urgent Needs",description:"When Emily urgently needed a laptop charger for a presentation, she found one nearby through Xchainj's trust-based collateral system."},{name:"Mark",title:"Smart Business Solutions",description:"Instead of purchasing an expensive aerator for a one-time landscaping job, Mark rented one through Xchainj, making his business more cost-effective."},{name:"Linda",title:"Building Community Connections",description:"Linda shares her board game collection with the community through Xchainj, using the platform's security features to protect her games while connecting with fellow enthusiasts."}],EH=()=>p.jsxs("section",{className:"mb-16",children:[p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-8 text-center",children:"Real User Stories"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:xH.map((t,e)=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal p-6 rounded-lg shadow-sm transition-colors duration-200",children:[p.jsx("div",{className:"flex items-center mb-4",children:p.jsxs("span",{className:"text-sm font-medium text-accent-purple dark:text-primary-accent",children:[t.name,"'s Story"]})}),p.jsx("h3",{className:"text-lg font-semibold text-dark-charcoal dark:text-neutral-warm mb-2",children:t.title}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]},e))})]}),bH=[{icon:C1,title:"Secure Transactions",description:"Every transaction is protected by our blockchain-powered collateral system, ensuring safety for both parties."},{icon:v7,title:"Trust-Based Community",description:"Build your reputation through successful transactions and join a community of trusted users."},{icon:T1,title:"Quick & Easy Process",description:"List or borrow items in minutes with our streamlined platform designed for efficiency."}],IH=()=>p.jsxs("section",{className:"mb-16",children:[p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-8 text-center",children:"Core Features"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:bH.map((t,e)=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal p-6 rounded-lg shadow-sm transition-colors duration-200",children:[p.jsx(t.icon,{className:"h-8 w-8 text-accent-purple dark:text-accent-purple mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm mb-2",children:t.title}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]},e))})]}),SH=()=>p.jsxs("section",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg p-8 text-center transition-colors duration-200",children:[p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-4",children:"Ready to Get Started?"}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 mb-8 max-w-2xl mx-auto",children:"Join our community today and start borrowing, lending, or trading items securely. It only takes a few minutes to create an account and start exploring."}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsxs(zt,{to:"/sign-up",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-dark-charcoal bg-primary-accent hover:bg-primary-light dark:text-dark-charcoal dark:bg-primary-accent dark:hover:bg-primary-light transition-colors duration-200",children:["Join the Community",p.jsx(qN,{className:"ml-2 h-5 w-5"})]}),p.jsx(zt,{to:"/browse-items",className:"inline-flex items-center px-6 py-3 border border-dark-charcoal/20 dark:border-neutral-warm/20 text-base font-medium rounded-md text-dark-charcoal dark:text-neutral-warm bg-transparent hover:bg-dark-charcoal/5 dark:hover:bg-neutral-warm/5 transition-colors duration-200",children:"Browse Items"})]})]}),kH=()=>p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h1",{className:"text-4xl font-bold text-dark-charcoal dark:text-primary-accent sm:text-5xl",children:"How Xchainj Works"}),p.jsx("p",{className:"mt-4 text-xl text-dark-charcoal/80 dark:text-neutral-warm/80 max-w-3xl mx-auto",children:"Xchainj connects people to securely borrow, lend, or trade items with trust and ease. Our platform makes sharing resources simple, safe, and beneficial for everyone."})]}),p.jsx(IH,{}),p.jsx(EH,{}),p.jsx(SH,{})]}),TH=()=>{const t=ar();return Y.useEffect(()=>{const e=Ci.onAuthStateChanged(n=>{t(n?"/dashboard":"/sign-in")});return()=>e()},[t]),p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-purple"})})},rI="transactionHistory",AH=async t=>{try{const e=od(Zl(Es,rI),py("buyerId","==",t),Zf("timestamp","desc")),n=od(Zl(Es,rI),py("sellerId","==",t),Zf("timestamp","desc")),[r,i]=await Promise.all([ad(e),ad(n)]),s=[...r.docs.map(o=>({transactionId:o.id,...o.data()})),...i.docs.map(o=>({transactionId:o.id,...o.data()}))];return s.sort((o,a)=>a.timestamp.seconds-o.timestamp.seconds),s.length===0&&console.log(`No transactions found for user: ${t}`),s}catch(e){return console.error("Error getting user transactions:",e),[]}},NH="userSettings",CH=async t=>{try{const e=Kp(Es,NH,t),n=await qv(e);return n.exists()?{userId:t,...n.data()}:null}catch(e){throw console.error("Error getting user settings:",e),new Error("Failed to get user settings")}},MH=({transactions:t,loading:e=!1,error:n=null})=>e?p.jsx("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow p-6",children:p.jsxs("div",{className:"animate-pulse space-y-4",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-dark-secondary rounded w-1/4"}),p.jsx("div",{className:"space-y-3",children:[1,2,3].map(r=>p.jsx("div",{className:"h-8 bg-gray-200 dark:bg-dark-secondary rounded"},r))})]})}):n?p.jsx("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow p-6",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:n}),p.jsx("button",{onClick:()=>window.location.reload(),className:"text-accent-purple dark:text-primary-accent hover:opacity-80",children:"Try Again"})]})}):!t||t.length===0?p.jsx("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow p-6",children:p.jsxs("div",{className:"text-center py-8",children:[p.jsx(ja,{className:"h-12 w-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-dark-charcoal dark:text-neutral-warm mb-2",children:"No Transactions Yet"}),p.jsx("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60 mb-6",children:"Start browsing items to create your first transaction!"}),p.jsxs(zt,{to:"/browse-items",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:["Browse Items",p.jsx(qN,{className:"ml-2 h-4 w-4"})]})]})}):p.jsx("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow",children:p.jsxs("div",{className:"p-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-dark-charcoal dark:text-neutral-warm mb-4",children:"Transaction History"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-charcoal/60 dark:text-neutral-warm/60 uppercase tracking-wider",children:"Item"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-charcoal/60 dark:text-neutral-warm/60 uppercase tracking-wider",children:"Date"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-charcoal/60 dark:text-neutral-warm/60 uppercase tracking-wider",children:"Status"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark",children:t.map(r=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-dark-charcoal dark:text-neutral-warm",children:r.itemName}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-dark-charcoal dark:text-neutral-warm",children:new Date(r.date).toLocaleDateString()}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":r.status==="Pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:r.status})})]},r.id))})]})})]})}),RH=new y1(lV("devnet"));ku.generate();const PH=async t=>await RH.getBalance(new Ee(t))/1e9,LH=()=>{var d;const t=ar(),[e,n]=Y.useState(!0),[r,i]=Y.useState(null),[s,o]=Y.useState({transactions:[],settings:null,collateralBalance:null}),[a,l]=Y.useState(!1);Y.useEffect(()=>{(async()=>{try{const m=Ci.currentUser;if(!m){t("/sign-in");return}const[v,k]=await Promise.all([AH(m.uid),CH(m.uid)]);let S=null;try{k!=null&&k.walletAddress&&(S=await PH(k.walletAddress),l(!0))}catch(_){console.error("Error fetching wallet balance:",_)}o({transactions:v,settings:k,collateralBalance:S})}catch(m){console.error("Error loading dashboard data:",m),i("Failed to load dashboard data")}finally{n(!1)}})()},[t]);const c=async()=>{try{l(!0)}catch(h){console.error("Error connecting wallet:",h),i("Failed to connect wallet")}};return e?p.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple"})}):p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-8",children:[r&&p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg flex items-center",children:[p.jsx(Oa,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2"}),p.jsx("p",{className:"text-red-600 dark:text-red-400",children:r})]}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg p-6",children:[p.jsxs("h1",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm",children:["Welcome back, ",((d=Ci.currentUser)==null?void 0:d.displayName)||"User"]}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 mt-2",children:"Manage your listings, transactions, and account settings from your dashboard."})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("button",{onClick:()=>t("/list-item"),className:"flex items-center p-4 bg-neutral-warm dark:bg-dark-charcoal rounded-lg hover:bg-neutral-warm/90 dark:hover:bg-dark-charcoal/90 transition-colors",children:[p.jsx(ja,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent"}),p.jsx("span",{className:"ml-3 text-dark-charcoal dark:text-neutral-warm",children:"List New Item"})]}),p.jsxs("button",{onClick:()=>t("/browse-items"),className:"flex items-center p-4 bg-neutral-warm dark:bg-dark-charcoal rounded-lg hover:bg-neutral-warm/90 dark:hover:bg-dark-charcoal/90 transition-colors",children:[p.jsx(T1,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent"}),p.jsx("span",{className:"ml-3 text-dark-charcoal dark:text-neutral-warm",children:"Browse Items"})]}),p.jsxs("button",{onClick:()=>t("/edit-profile"),className:"flex items-center p-4 bg-neutral-warm dark:bg-dark-charcoal rounded-lg hover:bg-neutral-warm/90 dark:hover:bg-dark-charcoal/90 transition-colors",children:[p.jsx(f7,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent"}),p.jsx("span",{className:"ml-3 text-dark-charcoal dark:text-neutral-warm",children:"Settings"})]})]}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm flex items-center",children:[p.jsx(_7,{className:"h-5 w-5 mr-2"}),"Collateral Account"]}),!a&&p.jsx("button",{onClick:c,className:"px-4 py-2 bg-accent-purple dark:bg-primary-accent text-white dark:text-dark-charcoal rounded-md hover:opacity-90 transition-opacity",children:"Connect Wallet"})]}),a?p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm",children:s.collateralBalance!==null?`${s.collateralBalance} SOL`:"Balance unavailable"}),p.jsx("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60 text-sm",children:"Your collateral account is ready for transactions"})]}):p.jsx("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Connect your Solana wallet to manage collateral"})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm",children:"Recent Activity"}),p.jsx(MH,{})]})]})},Jc=({children:t})=>{const{user:e,loading:n,initialized:r}=Zp(),i=Li();return r?!e&&!n?p.jsx(Ak,{to:"/sign-in",state:{from:i},replace:!0}):p.jsx(p.Fragment,{children:t}):p.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple"})})};function DH(){return p.jsx(wB,{children:p.jsx(Qz,{children:p.jsxs(cP,{basename:"/",children:[p.jsx(Xz,{}),p.jsx(tP,{children:p.jsxs(_n,{path:"/",element:p.jsx(lW,{}),children:[p.jsx(_n,{index:!0,element:p.jsx(dW,{})}),p.jsx(_n,{path:"browse-items",element:p.jsx(kW,{})}),p.jsx(_n,{path:"items/:id",element:p.jsx(s$,{})}),p.jsx(_n,{path:"list-item",element:p.jsx(Jc,{children:p.jsx(W$,{})})}),p.jsx(_n,{path:"sign-in",element:p.jsx(rH,{})}),p.jsx(_n,{path:"sign-up",element:p.jsx(iH,{})}),p.jsx(_n,{path:"forgot-password",element:p.jsx(oH,{})}),p.jsx(_n,{path:"secure-lending",element:p.jsx(pH,{})}),p.jsx(_n,{path:"trust-system",element:p.jsx(yH,{})}),p.jsx(_n,{path:"quick-process",element:p.jsx(_H,{})}),p.jsx(_n,{path:"how-it-works",element:p.jsx(kH,{})}),p.jsx(_n,{path:"request-borrow/:itemId",element:p.jsx(Jc,{children:p.jsx(hH,{})})}),p.jsx(_n,{path:"user-profile",element:p.jsx(Jc,{children:p.jsx(tH,{})})}),p.jsx(_n,{path:"dashboard",element:p.jsx(Jc,{children:p.jsx(LH,{})})}),p.jsx(_n,{path:"edit-profile",element:p.jsx(Jc,{children:p.jsx(lH,{})})}),p.jsx(_n,{path:"auth/callback",element:p.jsx(TH,{})}),p.jsx(_n,{path:"*",element:p.jsx(Ak,{to:"/",replace:!0})})]})})]})})})}yk(document.getElementById("root")).render(p.jsx(Y.StrictMode,{children:p.jsx(DH,{})}));export{VA as E,Ee as P,ts as S,ii as T,fd as V,kn as a,ol as b,To as g};
