var _R=Object.defineProperty;var xR=(t,e,n)=>e in t?_R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var kn=(t,e,n)=>xR(t,typeof e!="symbol"?e+"":e,n);function ER(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var yi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function lw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var II={exports:{}},xp={},SI={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=Symbol.for("react.element"),bR=Symbol.for("react.portal"),IR=Symbol.for("react.fragment"),SR=Symbol.for("react.strict_mode"),kR=Symbol.for("react.profiler"),TR=Symbol.for("react.provider"),AR=Symbol.for("react.context"),NR=Symbol.for("react.forward_ref"),CR=Symbol.for("react.suspense"),RR=Symbol.for("react.memo"),MR=Symbol.for("react.lazy"),A_=Symbol.iterator;function PR(t){return t===null||typeof t!="object"?null:(t=A_&&t[A_]||t["@@iterator"],typeof t=="function"?t:null)}var kI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TI=Object.assign,AI={};function mc(t,e,n){this.props=t,this.context=e,this.refs=AI,this.updater=n||kI}mc.prototype.isReactComponent={};mc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function NI(){}NI.prototype=mc.prototype;function cw(t,e,n){this.props=t,this.context=e,this.refs=AI,this.updater=n||kI}var uw=cw.prototype=new NI;uw.constructor=cw;TI(uw,mc.prototype);uw.isPureReactComponent=!0;var N_=Array.isArray,CI=Object.prototype.hasOwnProperty,dw={current:null},RI={key:!0,ref:!0,__self:!0,__source:!0};function MI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)CI.call(e,r)&&!RI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Sd,type:t,key:s,ref:o,props:i,_owner:dw.current}}function LR(t,e){return{$$typeof:Sd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sd}function DR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var C_=/\/+/g;function jm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DR(""+t.key):e.toString(36)}function zh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sd:case bR:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+jm(o,0):r,N_(i)?(n="",t!=null&&(n=t.replace(C_,"$&/")+"/"),zh(i,e,n,"",function(c){return c})):i!=null&&(hw(i)&&(i=LR(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(C_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",N_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+jm(s,a);o+=zh(s,e,n,l,i)}else if(l=PR(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+jm(s,a++),o+=zh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lh(t,e,n){if(t==null)return t;var r=[],i=0;return zh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function OR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gr={current:null},Wh={transition:null},jR={ReactCurrentDispatcher:gr,ReactCurrentBatchConfig:Wh,ReactCurrentOwner:dw};function PI(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:lh,forEach:function(t,e,n){lh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lh(t,function(){e++}),e},toArray:function(t){return lh(t,function(e){return e})||[]},only:function(t){if(!hw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=mc;Ke.Fragment=IR;Ke.Profiler=kR;Ke.PureComponent=cw;Ke.StrictMode=SR;Ke.Suspense=CR;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jR;Ke.act=PI;Ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=TI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)CI.call(e,l)&&!RI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Sd,type:t.type,key:i,ref:s,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:AR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TR,_context:t},t.Consumer=t};Ke.createElement=MI;Ke.createFactory=function(t){var e=MI.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:NR,render:t}};Ke.isValidElement=hw;Ke.lazy=function(t){return{$$typeof:MR,_payload:{_status:-1,_result:t},_init:OR}};Ke.memo=function(t,e){return{$$typeof:RR,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=Wh.transition;Wh.transition={};try{t()}finally{Wh.transition=e}};Ke.unstable_act=PI;Ke.useCallback=function(t,e){return gr.current.useCallback(t,e)};Ke.useContext=function(t){return gr.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return gr.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return gr.current.useEffect(t,e)};Ke.useId=function(){return gr.current.useId()};Ke.useImperativeHandle=function(t,e,n){return gr.current.useImperativeHandle(t,e,n)};Ke.useInsertionEffect=function(t,e){return gr.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return gr.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return gr.current.useMemo(t,e)};Ke.useReducer=function(t,e,n){return gr.current.useReducer(t,e,n)};Ke.useRef=function(t){return gr.current.useRef(t)};Ke.useState=function(t){return gr.current.useState(t)};Ke.useSyncExternalStore=function(t,e,n){return gr.current.useSyncExternalStore(t,e,n)};Ke.useTransition=function(){return gr.current.useTransition()};Ke.version="18.3.1";SI.exports=Ke;var Y=SI.exports;const ce=Co(Y),BR=ER({__proto__:null,default:ce},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UR=Y,FR=Symbol.for("react.element"),VR=Symbol.for("react.fragment"),zR=Object.prototype.hasOwnProperty,WR=UR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$R={key:!0,ref:!0,__self:!0,__source:!0};function LI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zR.call(e,r)&&!$R.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FR,type:t,key:s,ref:o,props:i,_owner:WR.current}}xp.Fragment=VR;xp.jsx=LI;xp.jsxs=LI;II.exports=xp;var p=II.exports,DI={exports:{}},Br={},OI={exports:{}},jI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,F){var q=R.length;R.push(F);e:for(;0<q;){var D=q-1>>>1,v=R[D];if(0<i(v,F))R[D]=F,R[q]=v,q=D;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],q=R.pop();if(q!==F){R[0]=q;e:for(var D=0,v=R.length,V=v>>>1;D<V;){var se=2*(D+1)-1,le=R[se],de=se+1,Ae=R[de];if(0>i(le,q))de<v&&0>i(Ae,le)?(R[D]=Ae,R[de]=q,D=de):(R[D]=le,R[se]=q,D=se);else if(de<v&&0>i(Ae,q))R[D]=Ae,R[de]=q,D=de;else break e}}return F}function i(R,F){var q=R.sortIndex-F.sortIndex;return q!==0?q:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,w=!1,k=!1,I=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=R)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function j(R){if(I=!1,E(R),!k)if(n(l)!==null)k=!0,C(K);else{var F=n(c);F!==null&&M(j,F.startTime-R)}}function K(R,F){k=!1,I&&(I=!1,T(L),L=-1),w=!0;var q=m;try{for(E(F),h=n(l);h!==null&&(!(h.expirationTime>F)||R&&!$());){var D=h.callback;if(typeof D=="function"){h.callback=null,m=h.priorityLevel;var v=D(h.expirationTime<=F);F=t.unstable_now(),typeof v=="function"?h.callback=v:h===n(l)&&r(l),E(F)}else r(l);h=n(l)}if(h!==null)var V=!0;else{var se=n(c);se!==null&&M(j,se.startTime-F),V=!1}return V}finally{h=null,m=q,w=!1}}var G=!1,O=null,L=-1,B=5,W=-1;function $(){return!(t.unstable_now()-W<B)}function H(){if(O!==null){var R=t.unstable_now();W=R;var F=!0;try{F=O(!0,R)}finally{F?A():(G=!1,O=null)}}else G=!1}var A;if(typeof S=="function")A=function(){S(H)};else if(typeof MessageChannel<"u"){var f=new MessageChannel,b=f.port2;f.port1.onmessage=H,A=function(){b.postMessage(null)}}else A=function(){_(H,0)};function C(R){O=R,G||(G=!0,A())}function M(R,F){L=_(function(){R(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){k||w||(k=!0,C(K))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var q=m;m=F;try{return R()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var q=m;m=R;try{return F()}finally{m=q}},t.unstable_scheduleCallback=function(R,F,q){var D=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?D+q:D):q=D,R){case 1:var v=-1;break;case 2:v=250;break;case 5:v=1073741823;break;case 4:v=1e4;break;default:v=5e3}return v=q+v,R={id:d++,callback:F,priorityLevel:R,startTime:q,expirationTime:v,sortIndex:-1},q>D?(R.sortIndex=q,e(c,R),n(l)===null&&R===n(c)&&(I?(T(L),L=-1):I=!0,M(j,q-D))):(R.sortIndex=v,e(l,R),k||w||(k=!0,C(K))),R},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(R){var F=m;return function(){var q=m;m=F;try{return R.apply(this,arguments)}finally{m=q}}}})(jI);OI.exports=jI;var qR=OI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR=Y,jr=qR;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BI=new Set,ju={};function La(t,e){Wl(t,e),Wl(t+"Capture",e)}function Wl(t,e){for(ju[t]=e,t=0;t<e.length;t++)BI.add(e[t])}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),o0=Object.prototype.hasOwnProperty,KR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R_={},M_={};function GR(t){return o0.call(M_,t)?!0:o0.call(R_,t)?!1:KR.test(t)?M_[t]=!0:(R_[t]=!0,!1)}function YR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QR(t,e,n,r){if(e===null||typeof e>"u"||YR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hn[t]=new yr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hn[e]=new yr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hn[t]=new yr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hn[t]=new yr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hn[t]=new yr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hn[t]=new yr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hn[t]=new yr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hn[t]=new yr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hn[t]=new yr(t,5,!1,t.toLowerCase(),null,!1,!1)});var fw=/[\-:]([a-z])/g;function pw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fw,pw);Hn[e]=new yr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fw,pw);Hn[e]=new yr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fw,pw);Hn[e]=new yr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hn[t]=new yr(t,1,!1,t.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new yr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hn[t]=new yr(t,1,!1,t.toLowerCase(),null,!0,!0)});function mw(t,e,n,r){var i=Hn.hasOwnProperty(e)?Hn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QR(e,n,i,r)&&(n=null),r||i===null?GR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var As=HR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ch=Symbol.for("react.element"),fl=Symbol.for("react.portal"),pl=Symbol.for("react.fragment"),gw=Symbol.for("react.strict_mode"),a0=Symbol.for("react.profiler"),UI=Symbol.for("react.provider"),FI=Symbol.for("react.context"),yw=Symbol.for("react.forward_ref"),l0=Symbol.for("react.suspense"),c0=Symbol.for("react.suspense_list"),ww=Symbol.for("react.memo"),Hs=Symbol.for("react.lazy"),VI=Symbol.for("react.offscreen"),P_=Symbol.iterator;function Wc(t){return t===null||typeof t!="object"?null:(t=P_&&t[P_]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,Bm;function ou(t){if(Bm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bm=e&&e[1]||""}return`
`+Bm+t}var Um=!1;function Fm(t,e){if(!t||Um)return"";Um=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Um=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ou(t):""}function ZR(t){switch(t.tag){case 5:return ou(t.type);case 16:return ou("Lazy");case 13:return ou("Suspense");case 19:return ou("SuspenseList");case 0:case 2:case 15:return t=Fm(t.type,!1),t;case 11:return t=Fm(t.type.render,!1),t;case 1:return t=Fm(t.type,!0),t;default:return""}}function u0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pl:return"Fragment";case fl:return"Portal";case a0:return"Profiler";case gw:return"StrictMode";case l0:return"Suspense";case c0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case FI:return(t.displayName||"Context")+".Consumer";case UI:return(t._context.displayName||"Context")+".Provider";case yw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ww:return e=t.displayName||null,e!==null?e:u0(t.type)||"Memo";case Hs:e=t._payload,t=t._init;try{return u0(t(e))}catch{}}return null}function XR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return u0(e);case 8:return e===gw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Io(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JR(t){var e=zI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uh(t){t._valueTracker||(t._valueTracker=JR(t))}function WI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function d0(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function L_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Io(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $I(t,e){e=e.checked,e!=null&&mw(t,"checked",e,!1)}function h0(t,e){$I(t,e);var n=Io(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?f0(t,e.type,n):e.hasOwnProperty("defaultValue")&&f0(t,e.type,Io(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function D_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function f0(t,e,n){(e!=="number"||gf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var au=Array.isArray;function Nl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Io(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function p0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(au(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Io(n)}}function qI(t,e){var n=Io(e.value),r=Io(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function j_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function m0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dh,KI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dh=dh||document.createElement("div"),dh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eM=["Webkit","ms","Moz","O"];Object.keys(wu).forEach(function(t){eM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wu[e]=wu[t]})});function GI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wu.hasOwnProperty(t)&&wu[t]?(""+e).trim():e+"px"}function YI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=GI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tM=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g0(t,e){if(e){if(tM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function y0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w0=null;function vw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var v0=null,Cl=null,Rl=null;function B_(t){if(t=Ad(t)){if(typeof v0!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=kp(e),v0(t.stateNode,t.type,e))}}function QI(t){Cl?Rl?Rl.push(t):Rl=[t]:Cl=t}function ZI(){if(Cl){var t=Cl,e=Rl;if(Rl=Cl=null,B_(t),e)for(t=0;t<e.length;t++)B_(e[t])}}function XI(t,e){return t(e)}function JI(){}var Vm=!1;function eS(t,e,n){if(Vm)return t(e,n);Vm=!0;try{return XI(t,e,n)}finally{Vm=!1,(Cl!==null||Rl!==null)&&(JI(),ZI())}}function Uu(t,e){var n=t.stateNode;if(n===null)return null;var r=kp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var _0=!1;if(ys)try{var $c={};Object.defineProperty($c,"passive",{get:function(){_0=!0}}),window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch{_0=!1}function nM(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var vu=!1,yf=null,wf=!1,x0=null,rM={onError:function(t){vu=!0,yf=t}};function iM(t,e,n,r,i,s,o,a,l){vu=!1,yf=null,nM.apply(rM,arguments)}function sM(t,e,n,r,i,s,o,a,l){if(iM.apply(this,arguments),vu){if(vu){var c=yf;vu=!1,yf=null}else throw Error(ae(198));wf||(wf=!0,x0=c)}}function Da(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U_(t){if(Da(t)!==t)throw Error(ae(188))}function oM(t){var e=t.alternate;if(!e){if(e=Da(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return U_(i),t;if(s===r)return U_(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function nS(t){return t=oM(t),t!==null?rS(t):null}function rS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rS(t);if(e!==null)return e;t=t.sibling}return null}var iS=jr.unstable_scheduleCallback,F_=jr.unstable_cancelCallback,aM=jr.unstable_shouldYield,lM=jr.unstable_requestPaint,hn=jr.unstable_now,cM=jr.unstable_getCurrentPriorityLevel,_w=jr.unstable_ImmediatePriority,sS=jr.unstable_UserBlockingPriority,vf=jr.unstable_NormalPriority,uM=jr.unstable_LowPriority,oS=jr.unstable_IdlePriority,Ep=null,Ai=null;function dM(t){if(Ai&&typeof Ai.onCommitFiberRoot=="function")try{Ai.onCommitFiberRoot(Ep,t,void 0,(t.current.flags&128)===128)}catch{}}var fi=Math.clz32?Math.clz32:pM,hM=Math.log,fM=Math.LN2;function pM(t){return t>>>=0,t===0?32:31-(hM(t)/fM|0)|0}var hh=64,fh=4194304;function lu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _f(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=lu(a):(s&=o,s!==0&&(r=lu(s)))}else o=n&~i,o!==0?r=lu(o):s!==0&&(r=lu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fi(e),i=1<<n,r|=t[n],e&=~i;return r}function mM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-fi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=mM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function E0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aS(){var t=hh;return hh<<=1,!(hh&4194240)&&(hh=64),t}function zm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fi(e),t[e]=n}function yM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-fi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pt=0;function lS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cS,Ew,uS,dS,hS,b0=!1,ph=[],co=null,uo=null,ho=null,Fu=new Map,Vu=new Map,Ys=[],wM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V_(t,e){switch(t){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":Fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(e.pointerId)}}function qc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ad(e),e!==null&&Ew(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vM(t,e,n,r,i){switch(e){case"focusin":return co=qc(co,t,e,n,r,i),!0;case"dragenter":return uo=qc(uo,t,e,n,r,i),!0;case"mouseover":return ho=qc(ho,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fu.set(s,qc(Fu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vu.set(s,qc(Vu.get(s)||null,t,e,n,r,i)),!0}return!1}function fS(t){var e=ta(t.target);if(e!==null){var n=Da(e);if(n!==null){if(e=n.tag,e===13){if(e=tS(n),e!==null){t.blockedOn=e,hS(t.priority,function(){uS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $h(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=I0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);w0=r,n.target.dispatchEvent(r),w0=null}else return e=Ad(n),e!==null&&Ew(e),t.blockedOn=n,!1;e.shift()}return!0}function z_(t,e,n){$h(t)&&n.delete(e)}function _M(){b0=!1,co!==null&&$h(co)&&(co=null),uo!==null&&$h(uo)&&(uo=null),ho!==null&&$h(ho)&&(ho=null),Fu.forEach(z_),Vu.forEach(z_)}function Hc(t,e){t.blockedOn===e&&(t.blockedOn=null,b0||(b0=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,_M)))}function zu(t){function e(i){return Hc(i,t)}if(0<ph.length){Hc(ph[0],t);for(var n=1;n<ph.length;n++){var r=ph[n];r.blockedOn===t&&(r.blockedOn=null)}}for(co!==null&&Hc(co,t),uo!==null&&Hc(uo,t),ho!==null&&Hc(ho,t),Fu.forEach(e),Vu.forEach(e),n=0;n<Ys.length;n++)r=Ys[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ys.length&&(n=Ys[0],n.blockedOn===null);)fS(n),n.blockedOn===null&&Ys.shift()}var Ml=As.ReactCurrentBatchConfig,xf=!0;function xM(t,e,n,r){var i=pt,s=Ml.transition;Ml.transition=null;try{pt=1,bw(t,e,n,r)}finally{pt=i,Ml.transition=s}}function EM(t,e,n,r){var i=pt,s=Ml.transition;Ml.transition=null;try{pt=4,bw(t,e,n,r)}finally{pt=i,Ml.transition=s}}function bw(t,e,n,r){if(xf){var i=I0(t,e,n,r);if(i===null)Xm(t,e,r,Ef,n),V_(t,r);else if(vM(i,t,e,n,r))r.stopPropagation();else if(V_(t,r),e&4&&-1<wM.indexOf(t)){for(;i!==null;){var s=Ad(i);if(s!==null&&cS(s),s=I0(t,e,n,r),s===null&&Xm(t,e,r,Ef,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xm(t,e,r,null,n)}}var Ef=null;function I0(t,e,n,r){if(Ef=null,t=vw(r),t=ta(t),t!==null)if(e=Da(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ef=t,null}function pS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cM()){case _w:return 1;case sS:return 4;case vf:case uM:return 16;case oS:return 536870912;default:return 16}default:return 16}}var to=null,Iw=null,qh=null;function mS(){if(qh)return qh;var t,e=Iw,n=e.length,r,i="value"in to?to.value:to.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return qh=i.slice(t,1<r?1-r:void 0)}function Hh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mh(){return!0}function W_(){return!1}function Ur(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mh:W_,this.isPropagationStopped=W_,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mh)},persist:function(){},isPersistent:mh}),e}var gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sw=Ur(gc),Td=Xt({},gc,{view:0,detail:0}),bM=Ur(Td),Wm,$m,Kc,bp=Xt({},Td,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kc&&(Kc&&t.type==="mousemove"?(Wm=t.screenX-Kc.screenX,$m=t.screenY-Kc.screenY):$m=Wm=0,Kc=t),Wm)},movementY:function(t){return"movementY"in t?t.movementY:$m}}),$_=Ur(bp),IM=Xt({},bp,{dataTransfer:0}),SM=Ur(IM),kM=Xt({},Td,{relatedTarget:0}),qm=Ur(kM),TM=Xt({},gc,{animationName:0,elapsedTime:0,pseudoElement:0}),AM=Ur(TM),NM=Xt({},gc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CM=Ur(NM),RM=Xt({},gc,{data:0}),q_=Ur(RM),MM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LM[t])?!!e[t]:!1}function kw(){return DM}var OM=Xt({},Td,{key:function(t){if(t.key){var e=MM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kw,charCode:function(t){return t.type==="keypress"?Hh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jM=Ur(OM),BM=Xt({},bp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H_=Ur(BM),UM=Xt({},Td,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kw}),FM=Ur(UM),VM=Xt({},gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),zM=Ur(VM),WM=Xt({},bp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$M=Ur(WM),qM=[9,13,27,32],Tw=ys&&"CompositionEvent"in window,_u=null;ys&&"documentMode"in document&&(_u=document.documentMode);var HM=ys&&"TextEvent"in window&&!_u,gS=ys&&(!Tw||_u&&8<_u&&11>=_u),K_=" ",G_=!1;function yS(t,e){switch(t){case"keyup":return qM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ml=!1;function KM(t,e){switch(t){case"compositionend":return wS(e);case"keypress":return e.which!==32?null:(G_=!0,K_);case"textInput":return t=e.data,t===K_&&G_?null:t;default:return null}}function GM(t,e){if(ml)return t==="compositionend"||!Tw&&yS(t,e)?(t=mS(),qh=Iw=to=null,ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gS&&e.locale!=="ko"?null:e.data;default:return null}}var YM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YM[t.type]:e==="textarea"}function vS(t,e,n,r){QI(r),e=bf(e,"onChange"),0<e.length&&(n=new Sw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xu=null,Wu=null;function QM(t){CS(t,0)}function Ip(t){var e=wl(t);if(WI(e))return t}function ZM(t,e){if(t==="change")return e}var _S=!1;if(ys){var Hm;if(ys){var Km="oninput"in document;if(!Km){var Q_=document.createElement("div");Q_.setAttribute("oninput","return;"),Km=typeof Q_.oninput=="function"}Hm=Km}else Hm=!1;_S=Hm&&(!document.documentMode||9<document.documentMode)}function Z_(){xu&&(xu.detachEvent("onpropertychange",xS),Wu=xu=null)}function xS(t){if(t.propertyName==="value"&&Ip(Wu)){var e=[];vS(e,Wu,t,vw(t)),eS(QM,e)}}function XM(t,e,n){t==="focusin"?(Z_(),xu=e,Wu=n,xu.attachEvent("onpropertychange",xS)):t==="focusout"&&Z_()}function JM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ip(Wu)}function e4(t,e){if(t==="click")return Ip(e)}function t4(t,e){if(t==="input"||t==="change")return Ip(e)}function n4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wi=typeof Object.is=="function"?Object.is:n4;function $u(t,e){if(wi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!o0.call(e,i)||!wi(t[i],e[i]))return!1}return!0}function X_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function J_(t,e){var n=X_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=X_(n)}}function ES(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ES(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bS(){for(var t=window,e=gf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gf(t.document)}return e}function Aw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function r4(t){var e=bS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ES(n.ownerDocument.documentElement,n)){if(r!==null&&Aw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=J_(n,s);var o=J_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i4=ys&&"documentMode"in document&&11>=document.documentMode,gl=null,S0=null,Eu=null,k0=!1;function ex(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;k0||gl==null||gl!==gf(r)||(r=gl,"selectionStart"in r&&Aw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Eu&&$u(Eu,r)||(Eu=r,r=bf(S0,"onSelect"),0<r.length&&(e=new Sw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gl)))}function gh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yl={animationend:gh("Animation","AnimationEnd"),animationiteration:gh("Animation","AnimationIteration"),animationstart:gh("Animation","AnimationStart"),transitionend:gh("Transition","TransitionEnd")},Gm={},IS={};ys&&(IS=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function Sp(t){if(Gm[t])return Gm[t];if(!yl[t])return t;var e=yl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IS)return Gm[t]=e[n];return t}var SS=Sp("animationend"),kS=Sp("animationiteration"),TS=Sp("animationstart"),AS=Sp("transitionend"),NS=new Map,tx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ro(t,e){NS.set(t,e),La(e,[t])}for(var Ym=0;Ym<tx.length;Ym++){var Qm=tx[Ym],s4=Qm.toLowerCase(),o4=Qm[0].toUpperCase()+Qm.slice(1);Ro(s4,"on"+o4)}Ro(SS,"onAnimationEnd");Ro(kS,"onAnimationIteration");Ro(TS,"onAnimationStart");Ro("dblclick","onDoubleClick");Ro("focusin","onFocus");Ro("focusout","onBlur");Ro(AS,"onTransitionEnd");Wl("onMouseEnter",["mouseout","mouseover"]);Wl("onMouseLeave",["mouseout","mouseover"]);Wl("onPointerEnter",["pointerout","pointerover"]);Wl("onPointerLeave",["pointerout","pointerover"]);La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));La("onBeforeInput",["compositionend","keypress","textInput","paste"]);La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a4=new Set("cancel close invalid load scroll toggle".split(" ").concat(cu));function nx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sM(r,e,void 0,t),t.currentTarget=null}function CS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;nx(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;nx(i,a,c),s=l}}}if(wf)throw t=x0,wf=!1,x0=null,t}function Pt(t,e){var n=e[R0];n===void 0&&(n=e[R0]=new Set);var r=t+"__bubble";n.has(r)||(RS(e,t,2,!1),n.add(r))}function Zm(t,e,n){var r=0;e&&(r|=4),RS(n,t,r,e)}var yh="_reactListening"+Math.random().toString(36).slice(2);function qu(t){if(!t[yh]){t[yh]=!0,BI.forEach(function(n){n!=="selectionchange"&&(a4.has(n)||Zm(n,!1,t),Zm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yh]||(e[yh]=!0,Zm("selectionchange",!1,e))}}function RS(t,e,n,r){switch(pS(e)){case 1:var i=xM;break;case 4:i=EM;break;default:i=bw}n=i.bind(null,e,n,t),i=void 0,!_0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ta(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}eS(function(){var c=s,d=vw(n),h=[];e:{var m=NS.get(t);if(m!==void 0){var w=Sw,k=t;switch(t){case"keypress":if(Hh(n)===0)break e;case"keydown":case"keyup":w=jM;break;case"focusin":k="focus",w=qm;break;case"focusout":k="blur",w=qm;break;case"beforeblur":case"afterblur":w=qm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=$_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=SM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=FM;break;case SS:case kS:case TS:w=AM;break;case AS:w=zM;break;case"scroll":w=bM;break;case"wheel":w=$M;break;case"copy":case"cut":case"paste":w=CM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=H_}var I=(e&4)!==0,_=!I&&t==="scroll",T=I?m!==null?m+"Capture":null:m;I=[];for(var S=c,E;S!==null;){E=S;var j=E.stateNode;if(E.tag===5&&j!==null&&(E=j,T!==null&&(j=Uu(S,T),j!=null&&I.push(Hu(S,j,E)))),_)break;S=S.return}0<I.length&&(m=new w(m,k,null,n,d),h.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==w0&&(k=n.relatedTarget||n.fromElement)&&(ta(k)||k[ws]))break e;if((w||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,w?(k=n.relatedTarget||n.toElement,w=c,k=k?ta(k):null,k!==null&&(_=Da(k),k!==_||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=c),w!==k)){if(I=$_,j="onMouseLeave",T="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(I=H_,j="onPointerLeave",T="onPointerEnter",S="pointer"),_=w==null?m:wl(w),E=k==null?m:wl(k),m=new I(j,S+"leave",w,n,d),m.target=_,m.relatedTarget=E,j=null,ta(d)===c&&(I=new I(T,S+"enter",k,n,d),I.target=E,I.relatedTarget=_,j=I),_=j,w&&k)t:{for(I=w,T=k,S=0,E=I;E;E=rl(E))S++;for(E=0,j=T;j;j=rl(j))E++;for(;0<S-E;)I=rl(I),S--;for(;0<E-S;)T=rl(T),E--;for(;S--;){if(I===T||T!==null&&I===T.alternate)break t;I=rl(I),T=rl(T)}I=null}else I=null;w!==null&&rx(h,m,w,I,!1),k!==null&&_!==null&&rx(h,_,k,I,!0)}}e:{if(m=c?wl(c):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var K=ZM;else if(Y_(m))if(_S)K=t4;else{K=JM;var G=XM}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(K=e4);if(K&&(K=K(t,c))){vS(h,K,n,d);break e}G&&G(t,m,c),t==="focusout"&&(G=m._wrapperState)&&G.controlled&&m.type==="number"&&f0(m,"number",m.value)}switch(G=c?wl(c):window,t){case"focusin":(Y_(G)||G.contentEditable==="true")&&(gl=G,S0=c,Eu=null);break;case"focusout":Eu=S0=gl=null;break;case"mousedown":k0=!0;break;case"contextmenu":case"mouseup":case"dragend":k0=!1,ex(h,n,d);break;case"selectionchange":if(i4)break;case"keydown":case"keyup":ex(h,n,d)}var O;if(Tw)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else ml?yS(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(gS&&n.locale!=="ko"&&(ml||L!=="onCompositionStart"?L==="onCompositionEnd"&&ml&&(O=mS()):(to=d,Iw="value"in to?to.value:to.textContent,ml=!0)),G=bf(c,L),0<G.length&&(L=new q_(L,t,null,n,d),h.push({event:L,listeners:G}),O?L.data=O:(O=wS(n),O!==null&&(L.data=O)))),(O=HM?KM(t,n):GM(t,n))&&(c=bf(c,"onBeforeInput"),0<c.length&&(d=new q_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=O))}CS(h,e)})}function Hu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Uu(t,n),s!=null&&r.unshift(Hu(t,s,i)),s=Uu(t,e),s!=null&&r.push(Hu(t,s,i))),t=t.return}return r}function rl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rx(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Uu(n,s),l!=null&&o.unshift(Hu(n,l,a))):i||(l=Uu(n,s),l!=null&&o.push(Hu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var l4=/\r\n?/g,c4=/\u0000|\uFFFD/g;function ix(t){return(typeof t=="string"?t:""+t).replace(l4,`
`).replace(c4,"")}function wh(t,e,n){if(e=ix(e),ix(t)!==e&&n)throw Error(ae(425))}function If(){}var T0=null,A0=null;function N0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var C0=typeof setTimeout=="function"?setTimeout:void 0,u4=typeof clearTimeout=="function"?clearTimeout:void 0,sx=typeof Promise=="function"?Promise:void 0,d4=typeof queueMicrotask=="function"?queueMicrotask:typeof sx<"u"?function(t){return sx.resolve(null).then(t).catch(h4)}:C0;function h4(t){setTimeout(function(){throw t})}function Jm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),zu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zu(e)}function fo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ox(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yc=Math.random().toString(36).slice(2),Si="__reactFiber$"+yc,Ku="__reactProps$"+yc,ws="__reactContainer$"+yc,R0="__reactEvents$"+yc,f4="__reactListeners$"+yc,p4="__reactHandles$"+yc;function ta(t){var e=t[Si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ws]||n[Si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ox(t);t!==null;){if(n=t[Si])return n;t=ox(t)}return e}t=n,n=t.parentNode}return null}function Ad(t){return t=t[Si]||t[ws],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function kp(t){return t[Ku]||null}var M0=[],vl=-1;function Mo(t){return{current:t}}function Ot(t){0>vl||(t.current=M0[vl],M0[vl]=null,vl--)}function At(t,e){vl++,M0[vl]=t.current,t.current=e}var So={},lr=Mo(So),br=Mo(!1),ya=So;function $l(t,e){var n=t.type.contextTypes;if(!n)return So;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ir(t){return t=t.childContextTypes,t!=null}function Sf(){Ot(br),Ot(lr)}function ax(t,e,n){if(lr.current!==So)throw Error(ae(168));At(lr,e),At(br,n)}function MS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,XR(t)||"Unknown",i));return Xt({},n,r)}function kf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||So,ya=lr.current,At(lr,t),At(br,br.current),!0}function lx(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=MS(t,e,ya),r.__reactInternalMemoizedMergedChildContext=t,Ot(br),Ot(lr),At(lr,t)):Ot(br),At(br,n)}var Xi=null,Tp=!1,eg=!1;function PS(t){Xi===null?Xi=[t]:Xi.push(t)}function m4(t){Tp=!0,PS(t)}function Po(){if(!eg&&Xi!==null){eg=!0;var t=0,e=pt;try{var n=Xi;for(pt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xi=null,Tp=!1}catch(i){throw Xi!==null&&(Xi=Xi.slice(t+1)),iS(_w,Po),i}finally{pt=e,eg=!1}}return null}var _l=[],xl=0,Tf=null,Af=0,$r=[],qr=0,wa=null,ss=1,os="";function Ko(t,e){_l[xl++]=Af,_l[xl++]=Tf,Tf=t,Af=e}function LS(t,e,n){$r[qr++]=ss,$r[qr++]=os,$r[qr++]=wa,wa=t;var r=ss;t=os;var i=32-fi(r)-1;r&=~(1<<i),n+=1;var s=32-fi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ss=1<<32-fi(e)+i|n<<i|r,os=s+t}else ss=1<<s|n<<i|r,os=t}function Nw(t){t.return!==null&&(Ko(t,1),LS(t,1,0))}function Cw(t){for(;t===Tf;)Tf=_l[--xl],_l[xl]=null,Af=_l[--xl],_l[xl]=null;for(;t===wa;)wa=$r[--qr],$r[qr]=null,os=$r[--qr],$r[qr]=null,ss=$r[--qr],$r[qr]=null}var Dr=null,Pr=null,Vt=!1,li=null;function DS(t,e){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Pr=fo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wa!==null?{id:ss,overflow:os}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,Pr=null,!0):!1;default:return!1}}function P0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function L0(t){if(Vt){var e=Pr;if(e){var n=e;if(!cx(t,e)){if(P0(t))throw Error(ae(418));e=fo(n.nextSibling);var r=Dr;e&&cx(t,e)?DS(r,n):(t.flags=t.flags&-4097|2,Vt=!1,Dr=t)}}else{if(P0(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Vt=!1,Dr=t}}}function ux(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function vh(t){if(t!==Dr)return!1;if(!Vt)return ux(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!N0(t.type,t.memoizedProps)),e&&(e=Pr)){if(P0(t))throw OS(),Error(ae(418));for(;e;)DS(t,e),e=fo(e.nextSibling)}if(ux(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pr=fo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pr=null}}else Pr=Dr?fo(t.stateNode.nextSibling):null;return!0}function OS(){for(var t=Pr;t;)t=fo(t.nextSibling)}function ql(){Pr=Dr=null,Vt=!1}function Rw(t){li===null?li=[t]:li.push(t)}var g4=As.ReactCurrentBatchConfig;function Gc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function _h(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dx(t){var e=t._init;return e(t._payload)}function jS(t){function e(T,S){if(t){var E=T.deletions;E===null?(T.deletions=[S],T.flags|=16):E.push(S)}}function n(T,S){if(!t)return null;for(;S!==null;)e(T,S),S=S.sibling;return null}function r(T,S){for(T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function i(T,S){return T=yo(T,S),T.index=0,T.sibling=null,T}function s(T,S,E){return T.index=E,t?(E=T.alternate,E!==null?(E=E.index,E<S?(T.flags|=2,S):E):(T.flags|=2,S)):(T.flags|=1048576,S)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,S,E,j){return S===null||S.tag!==6?(S=ag(E,T.mode,j),S.return=T,S):(S=i(S,E),S.return=T,S)}function l(T,S,E,j){var K=E.type;return K===pl?d(T,S,E.props.children,j,E.key):S!==null&&(S.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Hs&&dx(K)===S.type)?(j=i(S,E.props),j.ref=Gc(T,S,E),j.return=T,j):(j=Jh(E.type,E.key,E.props,null,T.mode,j),j.ref=Gc(T,S,E),j.return=T,j)}function c(T,S,E,j){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=lg(E,T.mode,j),S.return=T,S):(S=i(S,E.children||[]),S.return=T,S)}function d(T,S,E,j,K){return S===null||S.tag!==7?(S=ha(E,T.mode,j,K),S.return=T,S):(S=i(S,E),S.return=T,S)}function h(T,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=ag(""+S,T.mode,E),S.return=T,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ch:return E=Jh(S.type,S.key,S.props,null,T.mode,E),E.ref=Gc(T,null,S),E.return=T,E;case fl:return S=lg(S,T.mode,E),S.return=T,S;case Hs:var j=S._init;return h(T,j(S._payload),E)}if(au(S)||Wc(S))return S=ha(S,T.mode,E,null),S.return=T,S;_h(T,S)}return null}function m(T,S,E,j){var K=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return K!==null?null:a(T,S,""+E,j);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ch:return E.key===K?l(T,S,E,j):null;case fl:return E.key===K?c(T,S,E,j):null;case Hs:return K=E._init,m(T,S,K(E._payload),j)}if(au(E)||Wc(E))return K!==null?null:d(T,S,E,j,null);_h(T,E)}return null}function w(T,S,E,j,K){if(typeof j=="string"&&j!==""||typeof j=="number")return T=T.get(E)||null,a(S,T,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ch:return T=T.get(j.key===null?E:j.key)||null,l(S,T,j,K);case fl:return T=T.get(j.key===null?E:j.key)||null,c(S,T,j,K);case Hs:var G=j._init;return w(T,S,E,G(j._payload),K)}if(au(j)||Wc(j))return T=T.get(E)||null,d(S,T,j,K,null);_h(S,j)}return null}function k(T,S,E,j){for(var K=null,G=null,O=S,L=S=0,B=null;O!==null&&L<E.length;L++){O.index>L?(B=O,O=null):B=O.sibling;var W=m(T,O,E[L],j);if(W===null){O===null&&(O=B);break}t&&O&&W.alternate===null&&e(T,O),S=s(W,S,L),G===null?K=W:G.sibling=W,G=W,O=B}if(L===E.length)return n(T,O),Vt&&Ko(T,L),K;if(O===null){for(;L<E.length;L++)O=h(T,E[L],j),O!==null&&(S=s(O,S,L),G===null?K=O:G.sibling=O,G=O);return Vt&&Ko(T,L),K}for(O=r(T,O);L<E.length;L++)B=w(O,T,L,E[L],j),B!==null&&(t&&B.alternate!==null&&O.delete(B.key===null?L:B.key),S=s(B,S,L),G===null?K=B:G.sibling=B,G=B);return t&&O.forEach(function($){return e(T,$)}),Vt&&Ko(T,L),K}function I(T,S,E,j){var K=Wc(E);if(typeof K!="function")throw Error(ae(150));if(E=K.call(E),E==null)throw Error(ae(151));for(var G=K=null,O=S,L=S=0,B=null,W=E.next();O!==null&&!W.done;L++,W=E.next()){O.index>L?(B=O,O=null):B=O.sibling;var $=m(T,O,W.value,j);if($===null){O===null&&(O=B);break}t&&O&&$.alternate===null&&e(T,O),S=s($,S,L),G===null?K=$:G.sibling=$,G=$,O=B}if(W.done)return n(T,O),Vt&&Ko(T,L),K;if(O===null){for(;!W.done;L++,W=E.next())W=h(T,W.value,j),W!==null&&(S=s(W,S,L),G===null?K=W:G.sibling=W,G=W);return Vt&&Ko(T,L),K}for(O=r(T,O);!W.done;L++,W=E.next())W=w(O,T,L,W.value,j),W!==null&&(t&&W.alternate!==null&&O.delete(W.key===null?L:W.key),S=s(W,S,L),G===null?K=W:G.sibling=W,G=W);return t&&O.forEach(function(H){return e(T,H)}),Vt&&Ko(T,L),K}function _(T,S,E,j){if(typeof E=="object"&&E!==null&&E.type===pl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ch:e:{for(var K=E.key,G=S;G!==null;){if(G.key===K){if(K=E.type,K===pl){if(G.tag===7){n(T,G.sibling),S=i(G,E.props.children),S.return=T,T=S;break e}}else if(G.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Hs&&dx(K)===G.type){n(T,G.sibling),S=i(G,E.props),S.ref=Gc(T,G,E),S.return=T,T=S;break e}n(T,G);break}else e(T,G);G=G.sibling}E.type===pl?(S=ha(E.props.children,T.mode,j,E.key),S.return=T,T=S):(j=Jh(E.type,E.key,E.props,null,T.mode,j),j.ref=Gc(T,S,E),j.return=T,T=j)}return o(T);case fl:e:{for(G=E.key;S!==null;){if(S.key===G)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){n(T,S.sibling),S=i(S,E.children||[]),S.return=T,T=S;break e}else{n(T,S);break}else e(T,S);S=S.sibling}S=lg(E,T.mode,j),S.return=T,T=S}return o(T);case Hs:return G=E._init,_(T,S,G(E._payload),j)}if(au(E))return k(T,S,E,j);if(Wc(E))return I(T,S,E,j);_h(T,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(n(T,S.sibling),S=i(S,E),S.return=T,T=S):(n(T,S),S=ag(E,T.mode,j),S.return=T,T=S),o(T)):n(T,S)}return _}var Hl=jS(!0),BS=jS(!1),Nf=Mo(null),Cf=null,El=null,Mw=null;function Pw(){Mw=El=Cf=null}function Lw(t){var e=Nf.current;Ot(Nf),t._currentValue=e}function D0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pl(t,e){Cf=t,Mw=El=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Er=!0),t.firstContext=null)}function Zr(t){var e=t._currentValue;if(Mw!==t)if(t={context:t,memoizedValue:e,next:null},El===null){if(Cf===null)throw Error(ae(308));El=t,Cf.dependencies={lanes:0,firstContext:t}}else El=El.next=t;return e}var na=null;function Dw(t){na===null?na=[t]:na.push(t)}function US(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Dw(e)):(n.next=i.next,i.next=n),e.interleaved=n,vs(t,r)}function vs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ks=!1;function Ow(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function po(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vs(t,n)}return i=r.interleaved,i===null?(e.next=e,Dw(r)):(e.next=i.next,i.next=e),r.interleaved=e,vs(t,n)}function Kh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xw(t,n)}}function hx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rf(t,e,n,r){var i=t.updateQueue;Ks=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,w=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,I=a;switch(m=e,w=n,I.tag){case 1:if(k=I.payload,typeof k=="function"){h=k.call(w,h,m);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=I.payload,m=typeof k=="function"?k.call(w,h,m):k,m==null)break e;h=Xt({},h,m);break e;case 2:Ks=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else w={eventTime:w,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=w,l=h):d=d.next=w,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);_a|=o,t.lanes=o,t.memoizedState=h}}function fx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var Nd={},Ni=Mo(Nd),Gu=Mo(Nd),Yu=Mo(Nd);function ra(t){if(t===Nd)throw Error(ae(174));return t}function jw(t,e){switch(At(Yu,e),At(Gu,t),At(Ni,Nd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:m0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=m0(e,t)}Ot(Ni),At(Ni,e)}function Kl(){Ot(Ni),Ot(Gu),Ot(Yu)}function VS(t){ra(Yu.current);var e=ra(Ni.current),n=m0(e,t.type);e!==n&&(At(Gu,t),At(Ni,n))}function Bw(t){Gu.current===t&&(Ot(Ni),Ot(Gu))}var Gt=Mo(0);function Mf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tg=[];function Uw(){for(var t=0;t<tg.length;t++)tg[t]._workInProgressVersionPrimary=null;tg.length=0}var Gh=As.ReactCurrentDispatcher,ng=As.ReactCurrentBatchConfig,va=0,Zt=null,bn=null,Cn=null,Pf=!1,bu=!1,Qu=0,y4=0;function Qn(){throw Error(ae(321))}function Fw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wi(t[n],e[n]))return!1;return!0}function Vw(t,e,n,r,i,s){if(va=s,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gh.current=t===null||t.memoizedState===null?x4:E4,t=n(r,i),bu){s=0;do{if(bu=!1,Qu=0,25<=s)throw Error(ae(301));s+=1,Cn=bn=null,e.updateQueue=null,Gh.current=b4,t=n(r,i)}while(bu)}if(Gh.current=Lf,e=bn!==null&&bn.next!==null,va=0,Cn=bn=Zt=null,Pf=!1,e)throw Error(ae(300));return t}function zw(){var t=Qu!==0;return Qu=0,t}function Ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Zt.memoizedState=Cn=t:Cn=Cn.next=t,Cn}function Xr(){if(bn===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=bn.next;var e=Cn===null?Zt.memoizedState:Cn.next;if(e!==null)Cn=e,bn=t;else{if(t===null)throw Error(ae(310));bn=t,t={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Cn===null?Zt.memoizedState=Cn=t:Cn=Cn.next=t}return Cn}function Zu(t,e){return typeof e=="function"?e(t):e}function rg(t){var e=Xr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=bn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((va&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Zt.lanes|=d,_a|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,wi(r,e.memoizedState)||(Er=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Zt.lanes|=s,_a|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ig(t){var e=Xr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);wi(s,e.memoizedState)||(Er=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function zS(){}function WS(t,e){var n=Zt,r=Xr(),i=e(),s=!wi(r.memoizedState,i);if(s&&(r.memoizedState=i,Er=!0),r=r.queue,Ww(HS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Cn!==null&&Cn.memoizedState.tag&1){if(n.flags|=2048,Xu(9,qS.bind(null,n,r,i,e),void 0,null),Mn===null)throw Error(ae(349));va&30||$S(n,e,i)}return i}function $S(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qS(t,e,n,r){e.value=n,e.getSnapshot=r,KS(e)&&GS(t)}function HS(t,e,n){return n(function(){KS(e)&&GS(t)})}function KS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wi(t,n)}catch{return!0}}function GS(t){var e=vs(t,1);e!==null&&pi(e,t,1,-1)}function px(t){var e=Ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zu,lastRenderedState:t},e.queue=t,t=t.dispatch=_4.bind(null,Zt,t),[e.memoizedState,t]}function Xu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function YS(){return Xr().memoizedState}function Yh(t,e,n,r){var i=Ii();Zt.flags|=t,i.memoizedState=Xu(1|e,n,void 0,r===void 0?null:r)}function Ap(t,e,n,r){var i=Xr();r=r===void 0?null:r;var s=void 0;if(bn!==null){var o=bn.memoizedState;if(s=o.destroy,r!==null&&Fw(r,o.deps)){i.memoizedState=Xu(e,n,s,r);return}}Zt.flags|=t,i.memoizedState=Xu(1|e,n,s,r)}function mx(t,e){return Yh(8390656,8,t,e)}function Ww(t,e){return Ap(2048,8,t,e)}function QS(t,e){return Ap(4,2,t,e)}function ZS(t,e){return Ap(4,4,t,e)}function XS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JS(t,e,n){return n=n!=null?n.concat([t]):null,Ap(4,4,XS.bind(null,e,t),n)}function $w(){}function ek(t,e){var n=Xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tk(t,e){var n=Xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nk(t,e,n){return va&21?(wi(n,e)||(n=aS(),Zt.lanes|=n,_a|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Er=!0),t.memoizedState=n)}function w4(t,e){var n=pt;pt=n!==0&&4>n?n:4,t(!0);var r=ng.transition;ng.transition={};try{t(!1),e()}finally{pt=n,ng.transition=r}}function rk(){return Xr().memoizedState}function v4(t,e,n){var r=go(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ik(t))sk(e,n);else if(n=US(t,e,n,r),n!==null){var i=pr();pi(n,t,r,i),ok(n,e,r)}}function _4(t,e,n){var r=go(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ik(t))sk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,wi(a,o)){var l=e.interleaved;l===null?(i.next=i,Dw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=US(t,e,i,r),n!==null&&(i=pr(),pi(n,t,r,i),ok(n,e,r))}}function ik(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function sk(t,e){bu=Pf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ok(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xw(t,n)}}var Lf={readContext:Zr,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},x4={readContext:Zr,useCallback:function(t,e){return Ii().memoizedState=[t,e===void 0?null:e],t},useContext:Zr,useEffect:mx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yh(4194308,4,XS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yh(4,2,t,e)},useMemo:function(t,e){var n=Ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ii();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=v4.bind(null,Zt,t),[r.memoizedState,t]},useRef:function(t){var e=Ii();return t={current:t},e.memoizedState=t},useState:px,useDebugValue:$w,useDeferredValue:function(t){return Ii().memoizedState=t},useTransition:function(){var t=px(!1),e=t[0];return t=w4.bind(null,t[1]),Ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Zt,i=Ii();if(Vt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Mn===null)throw Error(ae(349));va&30||$S(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,mx(HS.bind(null,r,s,t),[t]),r.flags|=2048,Xu(9,qS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ii(),e=Mn.identifierPrefix;if(Vt){var n=os,r=ss;n=(r&~(1<<32-fi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=y4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},E4={readContext:Zr,useCallback:ek,useContext:Zr,useEffect:Ww,useImperativeHandle:JS,useInsertionEffect:QS,useLayoutEffect:ZS,useMemo:tk,useReducer:rg,useRef:YS,useState:function(){return rg(Zu)},useDebugValue:$w,useDeferredValue:function(t){var e=Xr();return nk(e,bn.memoizedState,t)},useTransition:function(){var t=rg(Zu)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:zS,useSyncExternalStore:WS,useId:rk,unstable_isNewReconciler:!1},b4={readContext:Zr,useCallback:ek,useContext:Zr,useEffect:Ww,useImperativeHandle:JS,useInsertionEffect:QS,useLayoutEffect:ZS,useMemo:tk,useReducer:ig,useRef:YS,useState:function(){return ig(Zu)},useDebugValue:$w,useDeferredValue:function(t){var e=Xr();return bn===null?e.memoizedState=t:nk(e,bn.memoizedState,t)},useTransition:function(){var t=ig(Zu)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:zS,useSyncExternalStore:WS,useId:rk,unstable_isNewReconciler:!1};function si(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function O0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Np={isMounted:function(t){return(t=t._reactInternals)?Da(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pr(),i=go(t),s=hs(r,i);s.payload=e,n!=null&&(s.callback=n),e=po(t,s,i),e!==null&&(pi(e,t,i,r),Kh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pr(),i=go(t),s=hs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=po(t,s,i),e!==null&&(pi(e,t,i,r),Kh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pr(),r=go(t),i=hs(n,r);i.tag=2,e!=null&&(i.callback=e),e=po(t,i,r),e!==null&&(pi(e,t,r,n),Kh(e,t,r))}};function gx(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$u(n,r)||!$u(i,s):!0}function ak(t,e,n){var r=!1,i=So,s=e.contextType;return typeof s=="object"&&s!==null?s=Zr(s):(i=Ir(e)?ya:lr.current,r=e.contextTypes,s=(r=r!=null)?$l(t,i):So),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Np,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Np.enqueueReplaceState(e,e.state,null)}function j0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ow(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zr(s):(s=Ir(e)?ya:lr.current,i.context=$l(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(O0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Np.enqueueReplaceState(i,i.state,null),Rf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gl(t,e){try{var n="",r=e;do n+=ZR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function sg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function B0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var I4=typeof WeakMap=="function"?WeakMap:Map;function lk(t,e,n){n=hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Of||(Of=!0,G0=r),B0(t,e)},n}function ck(t,e,n){n=hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){B0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){B0(t,e),typeof r!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new I4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=B4.bind(null,t,e,n),e.then(t,t))}function vx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _x(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hs(-1,1),e.tag=2,po(n,e,1))),n.lanes|=1),t)}var S4=As.ReactCurrentOwner,Er=!1;function hr(t,e,n,r){e.child=t===null?BS(e,null,n,r):Hl(e,t.child,n,r)}function xx(t,e,n,r,i){n=n.render;var s=e.ref;return Pl(e,i),r=Vw(t,e,n,r,s,i),n=zw(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_s(t,e,i)):(Vt&&n&&Nw(e),e.flags|=1,hr(t,e,r,i),e.child)}function Ex(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Xw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,uk(t,e,s,r,i)):(t=Jh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$u,n(o,r)&&t.ref===e.ref)return _s(t,e,i)}return e.flags|=1,t=yo(s,r),t.ref=e.ref,t.return=e,e.child=t}function uk(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($u(s,r)&&t.ref===e.ref)if(Er=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Er=!0);else return e.lanes=t.lanes,_s(t,e,i)}return U0(t,e,n,r,i)}function dk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Il,Tr),Tr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(Il,Tr),Tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,At(Il,Tr),Tr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,At(Il,Tr),Tr|=r;return hr(t,e,i,n),e.child}function hk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function U0(t,e,n,r,i){var s=Ir(n)?ya:lr.current;return s=$l(e,s),Pl(e,i),n=Vw(t,e,n,r,s,i),r=zw(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_s(t,e,i)):(Vt&&r&&Nw(e),e.flags|=1,hr(t,e,n,i),e.child)}function bx(t,e,n,r,i){if(Ir(n)){var s=!0;kf(e)}else s=!1;if(Pl(e,i),e.stateNode===null)Qh(t,e),ak(e,n,r),j0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zr(c):(c=Ir(n)?ya:lr.current,c=$l(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&yx(e,o,r,c),Ks=!1;var m=e.memoizedState;o.state=m,Rf(e,r,o,i),l=e.memoizedState,a!==r||m!==l||br.current||Ks?(typeof d=="function"&&(O0(e,n,d,r),l=e.memoizedState),(a=Ks||gx(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,FS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:si(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zr(l):(l=Ir(n)?ya:lr.current,l=$l(e,l));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&yx(e,o,r,l),Ks=!1,m=e.memoizedState,o.state=m,Rf(e,r,o,i);var k=e.memoizedState;a!==h||m!==k||br.current||Ks?(typeof w=="function"&&(O0(e,n,w,r),k=e.memoizedState),(c=Ks||gx(e,n,c,r,m,k,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return F0(t,e,n,r,s,i)}function F0(t,e,n,r,i,s){hk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&lx(e,n,!1),_s(t,e,s);r=e.stateNode,S4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hl(e,t.child,null,s),e.child=Hl(e,null,a,s)):hr(t,e,a,s),e.memoizedState=r.state,i&&lx(e,n,!0),e.child}function fk(t){var e=t.stateNode;e.pendingContext?ax(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ax(t,e.context,!1),jw(t,e.containerInfo)}function Ix(t,e,n,r,i){return ql(),Rw(i),e.flags|=256,hr(t,e,n,r),e.child}var V0={dehydrated:null,treeContext:null,retryLane:0};function z0(t){return{baseLanes:t,cachePool:null,transitions:null}}function pk(t,e,n){var r=e.pendingProps,i=Gt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),At(Gt,i&1),t===null)return L0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Mp(o,r,0,null),t=ha(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=z0(n),e.memoizedState=V0,t):qw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return k4(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yo(a,s):(s=ha(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?z0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=V0,r}return s=t.child,t=s.sibling,r=yo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qw(t,e){return e=Mp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xh(t,e,n,r){return r!==null&&Rw(r),Hl(e,t.child,null,n),t=qw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function k4(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=sg(Error(ae(422))),xh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Mp({mode:"visible",children:r.children},i,0,null),s=ha(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Hl(e,t.child,null,o),e.child.memoizedState=z0(o),e.memoizedState=V0,s);if(!(e.mode&1))return xh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=sg(s,r,void 0),xh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Er||a){if(r=Mn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vs(t,i),pi(r,t,i,-1))}return Zw(),r=sg(Error(ae(421))),xh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=U4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pr=fo(i.nextSibling),Dr=e,Vt=!0,li=null,t!==null&&($r[qr++]=ss,$r[qr++]=os,$r[qr++]=wa,ss=t.id,os=t.overflow,wa=e),e=qw(e,r.children),e.flags|=4096,e)}function Sx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),D0(t.return,e,n)}function og(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function mk(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hr(t,e,r.children,n),r=Gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sx(t,n,e);else if(t.tag===19)Sx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(At(Gt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),og(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}og(e,!0,n,null,s);break;case"together":og(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _s(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_a|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=yo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function T4(t,e,n){switch(e.tag){case 3:fk(e),ql();break;case 5:VS(e);break;case 1:Ir(e.type)&&kf(e);break;case 4:jw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;At(Nf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(At(Gt,Gt.current&1),e.flags|=128,null):n&e.child.childLanes?pk(t,e,n):(At(Gt,Gt.current&1),t=_s(t,e,n),t!==null?t.sibling:null);At(Gt,Gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Gt,Gt.current),r)break;return null;case 22:case 23:return e.lanes=0,dk(t,e,n)}return _s(t,e,n)}var gk,W0,yk,wk;gk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};W0=function(){};yk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ra(Ni.current);var s=null;switch(n){case"input":i=d0(t,i),r=d0(t,r),s=[];break;case"select":i=Xt({},i,{value:void 0}),r=Xt({},r,{value:void 0}),s=[];break;case"textarea":i=p0(t,i),r=p0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=If)}g0(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ju.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ju.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};wk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yc(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function A4(t,e,n){var r=e.pendingProps;switch(Cw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Ir(e.type)&&Sf(),Zn(e),null;case 3:return r=e.stateNode,Kl(),Ot(br),Ot(lr),Uw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,li!==null&&(Z0(li),li=null))),W0(t,e),Zn(e),null;case 5:Bw(e);var i=ra(Yu.current);if(n=e.type,t!==null&&e.stateNode!=null)yk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Zn(e),null}if(t=ra(Ni.current),vh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Si]=e,r[Ku]=s,t=(e.mode&1)!==0,n){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(i=0;i<cu.length;i++)Pt(cu[i],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":L_(r,s),Pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pt("invalid",r);break;case"textarea":O_(r,s),Pt("invalid",r)}g0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wh(r.textContent,a,t),i=["children",""+a]):ju.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pt("scroll",r)}switch(n){case"input":uh(r),D_(r,s,!0);break;case"textarea":uh(r),j_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=If)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Si]=e,t[Ku]=r,gk(t,e,!1,!1),e.stateNode=t;e:{switch(o=y0(n,r),n){case"dialog":Pt("cancel",t),Pt("close",t),i=r;break;case"iframe":case"object":case"embed":Pt("load",t),i=r;break;case"video":case"audio":for(i=0;i<cu.length;i++)Pt(cu[i],t);i=r;break;case"source":Pt("error",t),i=r;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),i=r;break;case"details":Pt("toggle",t),i=r;break;case"input":L_(t,r),i=d0(t,r),Pt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xt({},r,{value:void 0}),Pt("invalid",t);break;case"textarea":O_(t,r),i=p0(t,r),Pt("invalid",t);break;default:i=r}g0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?YI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Bu(t,l):typeof l=="number"&&Bu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ju.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pt("scroll",t):l!=null&&mw(t,s,l,o))}switch(n){case"input":uh(t),D_(t,r,!1);break;case"textarea":uh(t),j_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Io(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Nl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Nl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=If)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)wk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=ra(Yu.current),ra(Ni.current),vh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Si]=e,(s=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:wh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Si]=e,e.stateNode=r}return Zn(e),null;case 13:if(Ot(Gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&Pr!==null&&e.mode&1&&!(e.flags&128))OS(),ql(),e.flags|=98560,s=!1;else if(s=vh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Si]=e}else ql(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),s=!1}else li!==null&&(Z0(li),li=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?In===0&&(In=3):Zw())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return Kl(),W0(t,e),t===null&&qu(e.stateNode.containerInfo),Zn(e),null;case 10:return Lw(e.type._context),Zn(e),null;case 17:return Ir(e.type)&&Sf(),Zn(e),null;case 19:if(Ot(Gt),s=e.memoizedState,s===null)return Zn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Yc(s,!1);else{if(In!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mf(t),o!==null){for(e.flags|=128,Yc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return At(Gt,Gt.current&1|2),e.child}t=t.sibling}s.tail!==null&&hn()>Yl&&(e.flags|=128,r=!0,Yc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Mf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Vt)return Zn(e),null}else 2*hn()-s.renderingStartTime>Yl&&n!==1073741824&&(e.flags|=128,r=!0,Yc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hn(),e.sibling=null,n=Gt.current,At(Gt,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return Qw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tr&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function N4(t,e){switch(Cw(e),e.tag){case 1:return Ir(e.type)&&Sf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kl(),Ot(br),Ot(lr),Uw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bw(e),null;case 13:if(Ot(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));ql()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ot(Gt),null;case 4:return Kl(),null;case 10:return Lw(e.type._context),null;case 22:case 23:return Qw(),null;case 24:return null;default:return null}}var Eh=!1,sr=!1,C4=typeof WeakSet=="function"?WeakSet:Set,ye=null;function bl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){on(t,e,r)}else n.current=null}function $0(t,e,n){try{n()}catch(r){on(t,e,r)}}var kx=!1;function R4(t,e){if(T0=xf,t=bS(),Aw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)m=h,h=w;for(;;){if(h===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(w=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(A0={focusedElem:t,selectionRange:n},xf=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var I=k.memoizedProps,_=k.memoizedState,T=e.stateNode,S=T.getSnapshotBeforeUpdate(e.elementType===e.type?I:si(e.type,I),_);T.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(j){on(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return k=kx,kx=!1,k}function Iu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&$0(e,n,s)}i=i.next}while(i!==r)}}function Cp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function q0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vk(t){var e=t.alternate;e!==null&&(t.alternate=null,vk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Si],delete e[Ku],delete e[R0],delete e[f4],delete e[p4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _k(t){return t.tag===5||t.tag===3||t.tag===4}function Tx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_k(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function H0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=If));else if(r!==4&&(t=t.child,t!==null))for(H0(t,e,n),t=t.sibling;t!==null;)H0(t,e,n),t=t.sibling}function K0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(K0(t,e,n),t=t.sibling;t!==null;)K0(t,e,n),t=t.sibling}var Bn=null,ai=!1;function Os(t,e,n){for(n=n.child;n!==null;)xk(t,e,n),n=n.sibling}function xk(t,e,n){if(Ai&&typeof Ai.onCommitFiberUnmount=="function")try{Ai.onCommitFiberUnmount(Ep,n)}catch{}switch(n.tag){case 5:sr||bl(n,e);case 6:var r=Bn,i=ai;Bn=null,Os(t,e,n),Bn=r,ai=i,Bn!==null&&(ai?(t=Bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(ai?(t=Bn,n=n.stateNode,t.nodeType===8?Jm(t.parentNode,n):t.nodeType===1&&Jm(t,n),zu(t)):Jm(Bn,n.stateNode));break;case 4:r=Bn,i=ai,Bn=n.stateNode.containerInfo,ai=!0,Os(t,e,n),Bn=r,ai=i;break;case 0:case 11:case 14:case 15:if(!sr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&$0(n,e,o),i=i.next}while(i!==r)}Os(t,e,n);break;case 1:if(!sr&&(bl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){on(n,e,a)}Os(t,e,n);break;case 21:Os(t,e,n);break;case 22:n.mode&1?(sr=(r=sr)||n.memoizedState!==null,Os(t,e,n),sr=r):Os(t,e,n);break;default:Os(t,e,n)}}function Ax(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new C4),e.forEach(function(r){var i=F4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ri(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bn=a.stateNode,ai=!1;break e;case 3:Bn=a.stateNode.containerInfo,ai=!0;break e;case 4:Bn=a.stateNode.containerInfo,ai=!0;break e}a=a.return}if(Bn===null)throw Error(ae(160));xk(s,o,i),Bn=null,ai=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){on(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ek(e,t),e=e.sibling}function Ek(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ri(e,t),Ei(t),r&4){try{Iu(3,t,t.return),Cp(3,t)}catch(I){on(t,t.return,I)}try{Iu(5,t,t.return)}catch(I){on(t,t.return,I)}}break;case 1:ri(e,t),Ei(t),r&512&&n!==null&&bl(n,n.return);break;case 5:if(ri(e,t),Ei(t),r&512&&n!==null&&bl(n,n.return),t.flags&32){var i=t.stateNode;try{Bu(i,"")}catch(I){on(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&$I(i,s),y0(a,o);var c=y0(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?YI(i,h):d==="dangerouslySetInnerHTML"?KI(i,h):d==="children"?Bu(i,h):mw(i,d,h,c)}switch(a){case"input":h0(i,s);break;case"textarea":qI(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Nl(i,!!s.multiple,w,!1):m!==!!s.multiple&&(s.defaultValue!=null?Nl(i,!!s.multiple,s.defaultValue,!0):Nl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ku]=s}catch(I){on(t,t.return,I)}}break;case 6:if(ri(e,t),Ei(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){on(t,t.return,I)}}break;case 3:if(ri(e,t),Ei(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zu(e.containerInfo)}catch(I){on(t,t.return,I)}break;case 4:ri(e,t),Ei(t);break;case 13:ri(e,t),Ei(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gw=hn())),r&4&&Ax(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(sr=(c=sr)||d,ri(e,t),sr=c):ri(e,t),Ei(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ye=t,d=t.child;d!==null;){for(h=ye=d;ye!==null;){switch(m=ye,w=m.child,m.tag){case 0:case 11:case 14:case 15:Iu(4,m,m.return);break;case 1:bl(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(I){on(r,n,I)}}break;case 5:bl(m,m.return);break;case 22:if(m.memoizedState!==null){Cx(h);continue}}w!==null?(w.return=m,ye=w):Cx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=GI("display",o))}catch(I){on(t,t.return,I)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(I){on(t,t.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ri(e,t),Ei(t),r&4&&Ax(t);break;case 21:break;default:ri(e,t),Ei(t)}}function Ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_k(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bu(i,""),r.flags&=-33);var s=Tx(t);K0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Tx(t);H0(t,a,o);break;default:throw Error(ae(161))}}catch(l){on(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function M4(t,e,n){ye=t,bk(t)}function bk(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var i=ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Eh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||sr;a=Eh;var c=sr;if(Eh=o,(sr=l)&&!c)for(ye=i;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?Rx(i):l!==null?(l.return=o,ye=l):Rx(i);for(;s!==null;)ye=s,bk(s),s=s.sibling;ye=i,Eh=a,sr=c}Nx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ye=s):Nx(t)}}function Nx(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sr||Cp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:si(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fx(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&zu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}sr||e.flags&512&&q0(e)}catch(m){on(e,e.return,m)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Cx(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Rx(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cp(4,e)}catch(l){on(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){on(e,i,l)}}var s=e.return;try{q0(e)}catch(l){on(e,s,l)}break;case 5:var o=e.return;try{q0(e)}catch(l){on(e,o,l)}}}catch(l){on(e,e.return,l)}if(e===t){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var P4=Math.ceil,Df=As.ReactCurrentDispatcher,Hw=As.ReactCurrentOwner,Yr=As.ReactCurrentBatchConfig,Je=0,Mn=null,vn=null,$n=0,Tr=0,Il=Mo(0),In=0,Ju=null,_a=0,Rp=0,Kw=0,Su=null,_r=null,Gw=0,Yl=1/0,Zi=null,Of=!1,G0=null,mo=null,bh=!1,no=null,jf=0,ku=0,Y0=null,Zh=-1,Xh=0;function pr(){return Je&6?hn():Zh!==-1?Zh:Zh=hn()}function go(t){return t.mode&1?Je&2&&$n!==0?$n&-$n:g4.transition!==null?(Xh===0&&(Xh=aS()),Xh):(t=pt,t!==0||(t=window.event,t=t===void 0?16:pS(t.type)),t):1}function pi(t,e,n,r){if(50<ku)throw ku=0,Y0=null,Error(ae(185));kd(t,n,r),(!(Je&2)||t!==Mn)&&(t===Mn&&(!(Je&2)&&(Rp|=n),In===4&&Qs(t,$n)),Sr(t,r),n===1&&Je===0&&!(e.mode&1)&&(Yl=hn()+500,Tp&&Po()))}function Sr(t,e){var n=t.callbackNode;gM(t,e);var r=_f(t,t===Mn?$n:0);if(r===0)n!==null&&F_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&F_(n),e===1)t.tag===0?m4(Mx.bind(null,t)):PS(Mx.bind(null,t)),d4(function(){!(Je&6)&&Po()}),n=null;else{switch(lS(r)){case 1:n=_w;break;case 4:n=sS;break;case 16:n=vf;break;case 536870912:n=oS;break;default:n=vf}n=Rk(n,Ik.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ik(t,e){if(Zh=-1,Xh=0,Je&6)throw Error(ae(327));var n=t.callbackNode;if(Ll()&&t.callbackNode!==n)return null;var r=_f(t,t===Mn?$n:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bf(t,r);else{e=r;var i=Je;Je|=2;var s=kk();(Mn!==t||$n!==e)&&(Zi=null,Yl=hn()+500,da(t,e));do try{O4();break}catch(a){Sk(t,a)}while(!0);Pw(),Df.current=s,Je=i,vn!==null?e=0:(Mn=null,$n=0,e=In)}if(e!==0){if(e===2&&(i=E0(t),i!==0&&(r=i,e=Q0(t,i))),e===1)throw n=Ju,da(t,0),Qs(t,r),Sr(t,hn()),n;if(e===6)Qs(t,r);else{if(i=t.current.alternate,!(r&30)&&!L4(i)&&(e=Bf(t,r),e===2&&(s=E0(t),s!==0&&(r=s,e=Q0(t,s))),e===1))throw n=Ju,da(t,0),Qs(t,r),Sr(t,hn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:Go(t,_r,Zi);break;case 3:if(Qs(t,r),(r&130023424)===r&&(e=Gw+500-hn(),10<e)){if(_f(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=C0(Go.bind(null,t,_r,Zi),e);break}Go(t,_r,Zi);break;case 4:if(Qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-fi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*P4(r/1960))-r,10<r){t.timeoutHandle=C0(Go.bind(null,t,_r,Zi),r);break}Go(t,_r,Zi);break;case 5:Go(t,_r,Zi);break;default:throw Error(ae(329))}}}return Sr(t,hn()),t.callbackNode===n?Ik.bind(null,t):null}function Q0(t,e){var n=Su;return t.current.memoizedState.isDehydrated&&(da(t,e).flags|=256),t=Bf(t,e),t!==2&&(e=_r,_r=n,e!==null&&Z0(e)),t}function Z0(t){_r===null?_r=t:_r.push.apply(_r,t)}function L4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qs(t,e){for(e&=~Kw,e&=~Rp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fi(e),r=1<<n;t[n]=-1,e&=~r}}function Mx(t){if(Je&6)throw Error(ae(327));Ll();var e=_f(t,0);if(!(e&1))return Sr(t,hn()),null;var n=Bf(t,e);if(t.tag!==0&&n===2){var r=E0(t);r!==0&&(e=r,n=Q0(t,r))}if(n===1)throw n=Ju,da(t,0),Qs(t,e),Sr(t,hn()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Go(t,_r,Zi),Sr(t,hn()),null}function Yw(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(Yl=hn()+500,Tp&&Po())}}function xa(t){no!==null&&no.tag===0&&!(Je&6)&&Ll();var e=Je;Je|=1;var n=Yr.transition,r=pt;try{if(Yr.transition=null,pt=1,t)return t()}finally{pt=r,Yr.transition=n,Je=e,!(Je&6)&&Po()}}function Qw(){Tr=Il.current,Ot(Il)}function da(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,u4(n)),vn!==null)for(n=vn.return;n!==null;){var r=n;switch(Cw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sf();break;case 3:Kl(),Ot(br),Ot(lr),Uw();break;case 5:Bw(r);break;case 4:Kl();break;case 13:Ot(Gt);break;case 19:Ot(Gt);break;case 10:Lw(r.type._context);break;case 22:case 23:Qw()}n=n.return}if(Mn=t,vn=t=yo(t.current,null),$n=Tr=e,In=0,Ju=null,Kw=Rp=_a=0,_r=Su=null,na!==null){for(e=0;e<na.length;e++)if(n=na[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}na=null}return t}function Sk(t,e){do{var n=vn;try{if(Pw(),Gh.current=Lf,Pf){for(var r=Zt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pf=!1}if(va=0,Cn=bn=Zt=null,bu=!1,Qu=0,Hw.current=null,n===null||n.return===null){In=1,Ju=e,vn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=$n,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=vx(o);if(w!==null){w.flags&=-257,_x(w,o,a,s,e),w.mode&1&&wx(s,c,e),e=w,l=c;var k=e.updateQueue;if(k===null){var I=new Set;I.add(l),e.updateQueue=I}else k.add(l);break e}else{if(!(e&1)){wx(s,c,e),Zw();break e}l=Error(ae(426))}}else if(Vt&&a.mode&1){var _=vx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),_x(_,o,a,s,e),Rw(Gl(l,a));break e}}s=l=Gl(l,a),In!==4&&(In=2),Su===null?Su=[s]:Su.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=lk(s,l,e);hx(s,T);break e;case 1:a=l;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(mo===null||!mo.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=ck(s,a,e);hx(s,j);break e}}s=s.return}while(s!==null)}Ak(n)}catch(K){e=K,vn===n&&n!==null&&(vn=n=n.return);continue}break}while(!0)}function kk(){var t=Df.current;return Df.current=Lf,t===null?Lf:t}function Zw(){(In===0||In===3||In===2)&&(In=4),Mn===null||!(_a&268435455)&&!(Rp&268435455)||Qs(Mn,$n)}function Bf(t,e){var n=Je;Je|=2;var r=kk();(Mn!==t||$n!==e)&&(Zi=null,da(t,e));do try{D4();break}catch(i){Sk(t,i)}while(!0);if(Pw(),Je=n,Df.current=r,vn!==null)throw Error(ae(261));return Mn=null,$n=0,In}function D4(){for(;vn!==null;)Tk(vn)}function O4(){for(;vn!==null&&!aM();)Tk(vn)}function Tk(t){var e=Ck(t.alternate,t,Tr);t.memoizedProps=t.pendingProps,e===null?Ak(t):vn=e,Hw.current=null}function Ak(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N4(n,e),n!==null){n.flags&=32767,vn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{In=6,vn=null;return}}else if(n=A4(n,e,Tr),n!==null){vn=n;return}if(e=e.sibling,e!==null){vn=e;return}vn=e=t}while(e!==null);In===0&&(In=5)}function Go(t,e,n){var r=pt,i=Yr.transition;try{Yr.transition=null,pt=1,j4(t,e,n,r)}finally{Yr.transition=i,pt=r}return null}function j4(t,e,n,r){do Ll();while(no!==null);if(Je&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yM(t,s),t===Mn&&(vn=Mn=null,$n=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bh||(bh=!0,Rk(vf,function(){return Ll(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Yr.transition,Yr.transition=null;var o=pt;pt=1;var a=Je;Je|=4,Hw.current=null,R4(t,n),Ek(n,t),r4(A0),xf=!!T0,A0=T0=null,t.current=n,M4(n),lM(),Je=a,pt=o,Yr.transition=s}else t.current=n;if(bh&&(bh=!1,no=t,jf=i),s=t.pendingLanes,s===0&&(mo=null),dM(n.stateNode),Sr(t,hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Of)throw Of=!1,t=G0,G0=null,t;return jf&1&&t.tag!==0&&Ll(),s=t.pendingLanes,s&1?t===Y0?ku++:(ku=0,Y0=t):ku=0,Po(),null}function Ll(){if(no!==null){var t=lS(jf),e=Yr.transition,n=pt;try{if(Yr.transition=null,pt=16>t?16:t,no===null)var r=!1;else{if(t=no,no=null,jf=0,Je&6)throw Error(ae(331));var i=Je;for(Je|=4,ye=t.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ye=c;ye!==null;){var d=ye;switch(d.tag){case 0:case 11:case 15:Iu(8,d,s)}var h=d.child;if(h!==null)h.return=d,ye=h;else for(;ye!==null;){d=ye;var m=d.sibling,w=d.return;if(vk(d),d===c){ye=null;break}if(m!==null){m.return=w,ye=m;break}ye=w}}}var k=s.alternate;if(k!==null){var I=k.child;if(I!==null){k.child=null;do{var _=I.sibling;I.sibling=null,I=_}while(I!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Iu(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,ye=T;break e}ye=s.return}}var S=t.current;for(ye=S;ye!==null;){o=ye;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ye=E;else e:for(o=S;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cp(9,a)}}catch(K){on(a,a.return,K)}if(a===o){ye=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,ye=j;break e}ye=a.return}}if(Je=i,Po(),Ai&&typeof Ai.onPostCommitFiberRoot=="function")try{Ai.onPostCommitFiberRoot(Ep,t)}catch{}r=!0}return r}finally{pt=n,Yr.transition=e}}return!1}function Px(t,e,n){e=Gl(n,e),e=lk(t,e,1),t=po(t,e,1),e=pr(),t!==null&&(kd(t,1,e),Sr(t,e))}function on(t,e,n){if(t.tag===3)Px(t,t,n);else for(;e!==null;){if(e.tag===3){Px(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mo===null||!mo.has(r))){t=Gl(n,t),t=ck(e,t,1),e=po(e,t,1),t=pr(),e!==null&&(kd(e,1,t),Sr(e,t));break}}e=e.return}}function B4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pr(),t.pingedLanes|=t.suspendedLanes&n,Mn===t&&($n&n)===n&&(In===4||In===3&&($n&130023424)===$n&&500>hn()-Gw?da(t,0):Kw|=n),Sr(t,e)}function Nk(t,e){e===0&&(t.mode&1?(e=fh,fh<<=1,!(fh&130023424)&&(fh=4194304)):e=1);var n=pr();t=vs(t,e),t!==null&&(kd(t,e,n),Sr(t,n))}function U4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nk(t,n)}function F4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),Nk(t,n)}var Ck;Ck=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||br.current)Er=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Er=!1,T4(t,e,n);Er=!!(t.flags&131072)}else Er=!1,Vt&&e.flags&1048576&&LS(e,Af,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qh(t,e),t=e.pendingProps;var i=$l(e,lr.current);Pl(e,n),i=Vw(null,e,r,t,i,n);var s=zw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ir(r)?(s=!0,kf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ow(e),i.updater=Np,e.stateNode=i,i._reactInternals=e,j0(e,r,t,n),e=F0(null,e,r,!0,s,n)):(e.tag=0,Vt&&s&&Nw(e),hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=z4(r),t=si(r,t),i){case 0:e=U0(null,e,r,t,n);break e;case 1:e=bx(null,e,r,t,n);break e;case 11:e=xx(null,e,r,t,n);break e;case 14:e=Ex(null,e,r,si(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:si(r,i),U0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:si(r,i),bx(t,e,r,i,n);case 3:e:{if(fk(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,FS(t,e),Rf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gl(Error(ae(423)),e),e=Ix(t,e,r,n,i);break e}else if(r!==i){i=Gl(Error(ae(424)),e),e=Ix(t,e,r,n,i);break e}else for(Pr=fo(e.stateNode.containerInfo.firstChild),Dr=e,Vt=!0,li=null,n=BS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ql(),r===i){e=_s(t,e,n);break e}hr(t,e,r,n)}e=e.child}return e;case 5:return VS(e),t===null&&L0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,N0(r,i)?o=null:s!==null&&N0(r,s)&&(e.flags|=32),hk(t,e),hr(t,e,o,n),e.child;case 6:return t===null&&L0(e),null;case 13:return pk(t,e,n);case 4:return jw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hl(e,null,r,n):hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:si(r,i),xx(t,e,r,i,n);case 7:return hr(t,e,e.pendingProps,n),e.child;case 8:return hr(t,e,e.pendingProps.children,n),e.child;case 12:return hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,At(Nf,r._currentValue),r._currentValue=o,s!==null)if(wi(s.value,o)){if(s.children===i.children&&!br.current){e=_s(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=hs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),D0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),D0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Pl(e,n),i=Zr(i),r=r(i),e.flags|=1,hr(t,e,r,n),e.child;case 14:return r=e.type,i=si(r,e.pendingProps),i=si(r.type,i),Ex(t,e,r,i,n);case 15:return uk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:si(r,i),Qh(t,e),e.tag=1,Ir(r)?(t=!0,kf(e)):t=!1,Pl(e,n),ak(e,r,i),j0(e,r,i,n),F0(null,e,r,!0,t,n);case 19:return mk(t,e,n);case 22:return dk(t,e,n)}throw Error(ae(156,e.tag))};function Rk(t,e){return iS(t,e)}function V4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,n,r){return new V4(t,e,n,r)}function Xw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function z4(t){if(typeof t=="function")return Xw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yw)return 11;if(t===ww)return 14}return 2}function yo(t,e){var n=t.alternate;return n===null?(n=Gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Xw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pl:return ha(n.children,i,s,e);case gw:o=8,i|=8;break;case a0:return t=Gr(12,n,e,i|2),t.elementType=a0,t.lanes=s,t;case l0:return t=Gr(13,n,e,i),t.elementType=l0,t.lanes=s,t;case c0:return t=Gr(19,n,e,i),t.elementType=c0,t.lanes=s,t;case VI:return Mp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UI:o=10;break e;case FI:o=9;break e;case yw:o=11;break e;case ww:o=14;break e;case Hs:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Gr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ha(t,e,n,r){return t=Gr(7,t,r,e),t.lanes=n,t}function Mp(t,e,n,r){return t=Gr(22,t,r,e),t.elementType=VI,t.lanes=n,t.stateNode={isHidden:!1},t}function ag(t,e,n){return t=Gr(6,t,null,e),t.lanes=n,t}function lg(t,e,n){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zm(0),this.expirationTimes=zm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jw(t,e,n,r,i,s,o,a,l){return t=new W4(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ow(s),t}function $4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Mk(t){if(!t)return So;t=t._reactInternals;e:{if(Da(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Ir(n))return MS(t,n,e)}return e}function Pk(t,e,n,r,i,s,o,a,l){return t=Jw(n,r,!0,t,i,s,o,a,l),t.context=Mk(null),n=t.current,r=pr(),i=go(n),s=hs(r,i),s.callback=e??null,po(n,s,i),t.current.lanes=i,kd(t,i,r),Sr(t,r),t}function Pp(t,e,n,r){var i=e.current,s=pr(),o=go(i);return n=Mk(n),e.context===null?e.context=n:e.pendingContext=n,e=hs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=po(i,e,o),t!==null&&(pi(t,i,o,s),Kh(t,i,o)),o}function Uf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ev(t,e){Lx(t,e),(t=t.alternate)&&Lx(t,e)}function q4(){return null}var Lk=typeof reportError=="function"?reportError:function(t){console.error(t)};function tv(t){this._internalRoot=t}Lp.prototype.render=tv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Pp(t,e,null,null)};Lp.prototype.unmount=tv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xa(function(){Pp(null,t,null,null)}),e[ws]=null}};function Lp(t){this._internalRoot=t}Lp.prototype.unstable_scheduleHydration=function(t){if(t){var e=dS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ys.length&&e!==0&&e<Ys[n].priority;n++);Ys.splice(n,0,t),n===0&&fS(t)}};function nv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dx(){}function H4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Uf(o);s.call(c)}}var o=Pk(e,r,t,0,null,!1,!1,"",Dx);return t._reactRootContainer=o,t[ws]=o.current,qu(t.nodeType===8?t.parentNode:t),xa(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Uf(l);a.call(c)}}var l=Jw(t,0,!1,null,null,!1,!1,"",Dx);return t._reactRootContainer=l,t[ws]=l.current,qu(t.nodeType===8?t.parentNode:t),xa(function(){Pp(e,l,n,r)}),l}function Op(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Uf(o);a.call(l)}}Pp(e,o,t,i)}else o=H4(n,e,t,i,r);return Uf(o)}cS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lu(e.pendingLanes);n!==0&&(xw(e,n|1),Sr(e,hn()),!(Je&6)&&(Yl=hn()+500,Po()))}break;case 13:xa(function(){var r=vs(t,1);if(r!==null){var i=pr();pi(r,t,1,i)}}),ev(t,1)}};Ew=function(t){if(t.tag===13){var e=vs(t,134217728);if(e!==null){var n=pr();pi(e,t,134217728,n)}ev(t,134217728)}};uS=function(t){if(t.tag===13){var e=go(t),n=vs(t,e);if(n!==null){var r=pr();pi(n,t,e,r)}ev(t,e)}};dS=function(){return pt};hS=function(t,e){var n=pt;try{return pt=t,e()}finally{pt=n}};v0=function(t,e,n){switch(e){case"input":if(h0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kp(r);if(!i)throw Error(ae(90));WI(r),h0(r,i)}}}break;case"textarea":qI(t,n);break;case"select":e=n.value,e!=null&&Nl(t,!!n.multiple,e,!1)}};XI=Yw;JI=xa;var K4={usingClientEntryPoint:!1,Events:[Ad,wl,kp,QI,ZI,Yw]},Qc={findFiberByHostInstance:ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G4={bundleType:Qc.bundleType,version:Qc.version,rendererPackageName:Qc.rendererPackageName,rendererConfig:Qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:As.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nS(t),t===null?null:t.stateNode},findFiberByHostInstance:Qc.findFiberByHostInstance||q4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{Ep=Ih.inject(G4),Ai=Ih}catch{}}Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K4;Br.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nv(e))throw Error(ae(200));return $4(t,e,null,n)};Br.createRoot=function(t,e){if(!nv(t))throw Error(ae(299));var n=!1,r="",i=Lk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jw(t,1,!1,null,null,n,!1,r,i),t[ws]=e.current,qu(t.nodeType===8?t.parentNode:t),new tv(e)};Br.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=nS(e),t=t===null?null:t.stateNode,t};Br.flushSync=function(t){return xa(t)};Br.hydrate=function(t,e,n){if(!Dp(e))throw Error(ae(200));return Op(null,t,e,!0,n)};Br.hydrateRoot=function(t,e,n){if(!nv(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Lk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Pk(e,null,t,1,n??null,i,!1,s,o),t[ws]=e.current,qu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Lp(e)};Br.render=function(t,e,n){if(!Dp(e))throw Error(ae(200));return Op(null,t,e,!1,n)};Br.unmountComponentAtNode=function(t){if(!Dp(t))throw Error(ae(40));return t._reactRootContainer?(xa(function(){Op(null,null,t,!1,function(){t._reactRootContainer=null,t[ws]=null})}),!0):!1};Br.unstable_batchedUpdates=Yw;Br.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dp(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Op(t,e,n,!1,r)};Br.version="18.3.1-next-f1338f8080-20240426";function Dk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dk)}catch(t){console.error(t)}}Dk(),DI.exports=Br;var Ok=DI.exports,jk,Ox=Ok;jk=Ox.createRoot,Ox.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ed.apply(this,arguments)}var ro;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ro||(ro={}));const jx="popstate";function Y4(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return X0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ff(i)}return Z4(e,n,null,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q4(){return Math.random().toString(36).substr(2,8)}function Bx(t,e){return{usr:t.state,key:t.key,idx:e}}function X0(t,e,n,r){return n===void 0&&(n=null),ed({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wc(e):e,{state:n,key:e&&e.key||r||Q4()})}function Ff(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Z4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ro.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ed({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ro.Pop;let _=d(),T=_==null?null:_-c;c=_,l&&l({action:a,location:I.location,delta:T})}function m(_,T){a=ro.Push;let S=X0(I.location,_,T);c=d()+1;let E=Bx(S,c),j=I.createHref(S);try{o.pushState(E,"",j)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(j)}s&&l&&l({action:a,location:I.location,delta:1})}function w(_,T){a=ro.Replace;let S=X0(I.location,_,T);c=d();let E=Bx(S,c),j=I.createHref(S);o.replaceState(E,"",j),s&&l&&l({action:a,location:I.location,delta:0})}function k(_){let T=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof _=="string"?_:Ff(_);return S=S.replace(/ $/,"%20"),pn(T,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,T)}let I={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jx,h),l=_,()=>{i.removeEventListener(jx,h),l=null}},createHref(_){return e(i,_)},createURL:k,encodeLocation(_){let T=k(_);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:w,go(_){return o.go(_)}};return I}var Ux;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ux||(Ux={}));function X4(t,e,n){return n===void 0&&(n="/"),J4(t,e,n,!1)}function J4(t,e,n,r){let i=typeof e=="string"?wc(e):e,s=rv(i.pathname||"/",n);if(s==null)return null;let o=Uk(t);eP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=dP(s);a=cP(o[l],c,r)}return a}function Uk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(pn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=wo([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(pn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Uk(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:aP(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Fk(s.path))i(s,o,l)}),e}function Fk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Fk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function eP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const tP=/^:[\w-]+$/,nP=3,rP=2,iP=1,sP=10,oP=-2,Fx=t=>t==="*";function aP(t,e){let n=t.split("/"),r=n.length;return n.some(Fx)&&(r+=oP),e&&(r+=rP),n.filter(i=>!Fx(i)).reduce((i,s)=>i+(tP.test(s)?nP:s===""?iP:sP),r)}function lP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function cP(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Vx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Vx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:wo([s,h.pathname]),pathnameBase:mP(wo([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=wo([s,h.pathnameBase]))}return o}function Vx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:m,isOptional:w}=d;if(m==="*"){let I=a[h]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const k=a[h];return w&&!k?c[m]=void 0:c[m]=(k||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function uP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Bk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function dP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?wc(t):t;return{pathname:n?n.startsWith("/")?n:fP(n,e):e,search:gP(r),hash:yP(i)}}function fP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function cg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iv(t,e){let n=pP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=wc(t):(i=ed({},t),pn(!i.pathname||!i.pathname.includes("?"),cg("?","pathname","search",i)),pn(!i.pathname||!i.pathname.includes("#"),cg("#","pathname","hash",i)),pn(!i.search||!i.search.includes("#"),cg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=hP(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const wo=t=>t.join("/").replace(/\/\/+/g,"/"),mP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Vk=["post","put","patch","delete"];new Set(Vk);const vP=["get",...Vk];new Set(vP);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},td.apply(this,arguments)}const ov=Y.createContext(null),_P=Y.createContext(null),Lo=Y.createContext(null),jp=Y.createContext(null),ji=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),zk=Y.createContext(null);function xP(t,e){let{relative:n}=e===void 0?{}:e;vc()||pn(!1);let{basename:r,navigator:i}=Y.useContext(Lo),{hash:s,pathname:o,search:a}=qk(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:wo([r,o])),i.createHref({pathname:l,search:a,hash:s})}function vc(){return Y.useContext(jp)!=null}function Bi(){return vc()||pn(!1),Y.useContext(jp).location}function Wk(t){Y.useContext(Lo).static||Y.useLayoutEffect(t)}function ur(){let{isDataRoute:t}=Y.useContext(ji);return t?OP():EP()}function EP(){vc()||pn(!1);let t=Y.useContext(ov),{basename:e,future:n,navigator:r}=Y.useContext(Lo),{matches:i}=Y.useContext(ji),{pathname:s}=Bi(),o=JSON.stringify(iv(i,n.v7_relativeSplatPath)),a=Y.useRef(!1);return Wk(()=>{a.current=!0}),Y.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=sv(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}const bP=Y.createContext(null);function IP(t){let e=Y.useContext(ji).outlet;return e&&Y.createElement(bP.Provider,{value:t},e)}function $k(){let{matches:t}=Y.useContext(ji),e=t[t.length-1];return e?e.params:{}}function qk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=Y.useContext(Lo),{matches:i}=Y.useContext(ji),{pathname:s}=Bi(),o=JSON.stringify(iv(i,r.v7_relativeSplatPath));return Y.useMemo(()=>sv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function SP(t,e){return kP(t,e)}function kP(t,e,n,r){vc()||pn(!1);let{navigator:i}=Y.useContext(Lo),{matches:s}=Y.useContext(ji),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Bi(),d;if(e){var h;let _=typeof e=="string"?wc(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||pn(!1),d=_}else d=c;let m=d.pathname||"/",w=m;if(l!=="/"){let _=l.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let k=X4(t,{pathname:w}),I=RP(k&&k.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:wo([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:wo([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&I?Y.createElement(jp.Provider,{value:{location:td({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ro.Pop}},I):I}function TP(){let t=DP(),e=wP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:i},n):null,null)}const AP=Y.createElement(TP,null);class NP extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Y.createElement(ji.Provider,{value:this.props.routeContext},Y.createElement(zk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CP(t){let{routeContext:e,match:n,children:r}=t,i=Y.useContext(ov);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Y.createElement(ji.Provider,{value:e},r)}function RP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||pn(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:w}=n,k=h.route.loader&&m[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||k){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let w,k=!1,I=null,_=null;n&&(w=a&&h.route.id?a[h.route.id]:void 0,I=h.route.errorElement||AP,l&&(c<0&&m===0?(k=!0,_=null):c===m&&(k=!0,_=h.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,m+1)),S=()=>{let E;return w?E=I:k?E=_:h.route.Component?E=Y.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,Y.createElement(CP,{match:h,routeContext:{outlet:d,matches:T,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?Y.createElement(NP,{location:n.location,revalidation:n.revalidation,component:I,error:w,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}var Hk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Hk||{}),Vf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vf||{});function MP(t){let e=Y.useContext(ov);return e||pn(!1),e}function PP(t){let e=Y.useContext(_P);return e||pn(!1),e}function LP(t){let e=Y.useContext(ji);return e||pn(!1),e}function Kk(t){let e=LP(),n=e.matches[e.matches.length-1];return n.route.id||pn(!1),n.route.id}function DP(){var t;let e=Y.useContext(zk),n=PP(Vf.UseRouteError),r=Kk(Vf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function OP(){let{router:t}=MP(Hk.UseNavigateStable),e=Kk(Vf.UseNavigateStable),n=Y.useRef(!1);return Wk(()=>{n.current=!0}),Y.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,td({fromRouteId:e},s)))},[t,e])}const zx={};function jP(t,e){zx[e]||(zx[e]=!0,console.warn(e))}const Wx=(t,e,n)=>jP(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function BP(t,e){(t==null?void 0:t.v7_startTransition)===void 0&&Wx("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(t==null?void 0:t.v7_relativeSplatPath)===void 0&&!e&&Wx("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Gk(t){let{to:e,replace:n,state:r,relative:i}=t;vc()||pn(!1);let{future:s,static:o}=Y.useContext(Lo),{matches:a}=Y.useContext(ji),{pathname:l}=Bi(),c=ur(),d=sv(e,iv(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return Y.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function UP(t){return IP(t.context)}function En(t){pn(!1)}function FP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ro.Pop,navigator:s,static:o=!1,future:a}=t;vc()&&pn(!1);let l=e.replace(/^\/*/,"/"),c=Y.useMemo(()=>({basename:l,navigator:s,static:o,future:td({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=wc(r));let{pathname:d="/",search:h="",hash:m="",state:w=null,key:k="default"}=r,I=Y.useMemo(()=>{let _=rv(d,l);return _==null?null:{location:{pathname:_,search:h,hash:m,state:w,key:k},navigationType:i}},[l,d,h,m,w,k,i]);return I==null?null:Y.createElement(Lo.Provider,{value:c},Y.createElement(jp.Provider,{children:n,value:I}))}function VP(t){let{children:e,location:n}=t;return SP(J0(e),n)}new Promise(()=>{});function J0(t,e){e===void 0&&(e=[]);let n=[];return Y.Children.forEach(t,(r,i)=>{if(!Y.isValidElement(r))return;let s=[...e,i];if(r.type===Y.Fragment){n.push.apply(n,J0(r.props.children,s));return}r.type!==En&&pn(!1),!r.props.index||!r.props.children||pn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=J0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ey(){return ey=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ey.apply(this,arguments)}function zP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function WP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $P(t,e){return t.button===0&&(!e||e==="_self")&&!WP(t)}function ty(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function qP(t,e){let n=ty(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const HP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],KP="6";try{window.__reactRouterVersion=KP}catch{}const GP="startTransition",$x=BR[GP];function YP(t){let{basename:e,children:n,future:r,window:i}=t,s=Y.useRef();s.current==null&&(s.current=Y4({window:i,v5Compat:!0}));let o=s.current,[a,l]=Y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=Y.useCallback(h=>{c&&$x?$x(()=>l(h)):l(h)},[l,c]);return Y.useLayoutEffect(()=>o.listen(d),[o,d]),Y.useEffect(()=>BP(r),[r]),Y.createElement(FP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const QP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zt=Y.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,m=zP(e,HP),{basename:w}=Y.useContext(Lo),k,I=!1;if(typeof c=="string"&&ZP.test(c)&&(k=c,QP))try{let E=new URL(window.location.href),j=c.startsWith("//")?new URL(E.protocol+c):new URL(c),K=rv(j.pathname,w);j.origin===E.origin&&K!=null?c=K+j.search+j.hash:I=!0}catch{}let _=xP(c,{relative:i}),T=XP(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function S(E){r&&r(E),E.defaultPrevented||T(E)}return Y.createElement("a",ey({},m,{href:k||_,onClick:I||s?r:S,ref:n,target:l}))});var qx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qx||(qx={}));var Hx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Hx||(Hx={}));function XP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ur(),c=Bi(),d=qk(t,{relative:o});return Y.useCallback(h=>{if($P(h,n)){h.preventDefault();let m=r!==void 0?r:Ff(c)===Ff(d);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}function JP(t){let e=Y.useRef(ty(t)),n=Y.useRef(!1),r=Bi(),i=Y.useMemo(()=>qP(r.search,n.current?null:e.current),[r.search]),s=ur(),o=Y.useCallback((a,l)=>{const c=ty(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var Kx={MANPATH:"/opt/homebrew/share/man::",TERM_PROGRAM:"Apple_Terminal",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/b3/0x1h3p456wxfhqw79t6qrcpm0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"455",COLOR:"1",TERM_SESSION_ID:"663C3619-2C50-454B-9980-7E40AA3EFF64",npm_config_noproxy:"",npm_config_local_prefix:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project",USER:"justincurtsinger",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.CMyud4jOmQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project/node_modules/.bin:/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/node_modules/.bin:/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/node_modules/.bin:/Users/justincurtsinger/Documents/BusinessIdeas/node_modules/.bin:/Users/justincurtsinger/Documents/node_modules/.bin:/Users/justincurtsinger/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Library/Frameworks/Python.framework/Versions/3.12/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/usr/local/share/dotnet:~/.dotnet/tools",npm_package_json:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project/package.json",_:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project/node_modules/.bin/vite",npm_config_userconfig:"/Users/justincurtsinger/.npmrc",npm_config_init_module:"/Users/justincurtsinger/.npm-init.js",__CFBundleIdentifier:"com.apple.Terminal",npm_command:"run-script",PWD:"/Users/justincurtsinger/Documents/BusinessIdeas/Xchainj/Iterations/project",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"p2p-lending-platform",LANG:"en_US.UTF-8",npm_config_npm_version:"10.5.0",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.0.0",XPC_SERVICE_NAME:"0",HOME:"/Users/justincurtsinger",SHLVL:"2",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/justincurtsinger/.npm",LOGNAME:"justincurtsinger",npm_lifecycle_script:"vite build",npm_config_user_agent:"npm/10.5.0 node/v21.7.1 darwin arm64 workspaces/false",INFOPATH:"/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",NODE_ENV:"production"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Qk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,w=c&63;l||(w=64,o||(m=64)),r.push(n[d],n[h],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new tL;const m=s<<2|a>>4;if(r.push(m),c!==64){const w=a<<4&240|c>>2;if(r.push(w),h!==64){const k=c<<6&192|h;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nL=function(t){const e=Yk(t);return Qk.encodeByteArray(e,!0)},zf=function(t){return nL(t).replace(/\./g,"")},Zk=function(t){try{return Qk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=()=>rL().__FIREBASE_DEFAULTS__,sL=()=>{if(typeof process>"u"||typeof Kx>"u")return;const t=Kx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Zk(t[1]);return e&&JSON.parse(e)},Bp=()=>{try{return iL()||sL()||oL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xk=t=>{var e,n;return(n=(e=Bp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Jk=t=>{const e=Xk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},eT=()=>{var t;return(t=Bp())===null||t===void 0?void 0:t.config},tT=t=>{var e;return(e=Bp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zf(JSON.stringify(n)),zf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cr())}function cL(){var t;const e=(t=Bp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fL(){const t=cr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pL(){return!cL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mL(){try{return typeof indexedDB=="object"}catch{return!1}}function gL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL="FirebaseError";class Ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yL,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cd.prototype.create)}}class Cd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ui(i,a,r)}}function wL(t,e){return t.replace(vL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vL=/\{\$([^}]+)}/g;function _L(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Gx(s)&&Gx(o)){if(!Wf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Gx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function du(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xL(t,e){const n=new EL(t,e);return n.subscribe.bind(n)}class EL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ug),i.error===void 0&&(i.error=ug),i.complete===void 0&&(i.complete=ug);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ug(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t){return t&&t._delegate?t._delegate:t}class ko{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kL(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SL(t){return t===Yo?void 0:t}function kL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const AL={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},NL=Ze.INFO,CL={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},RL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=CL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class av{constructor(e){this.name=e,this._logLevel=NL,this._logHandler=RL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const ML=(t,e)=>e.some(n=>t instanceof n);let Yx,Qx;function PL(){return Yx||(Yx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LL(){return Qx||(Qx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rT=new WeakMap,ny=new WeakMap,iT=new WeakMap,dg=new WeakMap,lv=new WeakMap;function DL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(vo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rT.set(n,t)}).catch(()=>{}),lv.set(e,t),e}function OL(t){if(ny.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ny.set(t,e)}let ry={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ny.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jL(t){ry=t(ry)}function BL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hg(this),e,...n);return iT.set(r,e.sort?e.sort():[e]),vo(r)}:LL().includes(t)?function(...e){return t.apply(hg(this),e),vo(rT.get(this))}:function(...e){return vo(t.apply(hg(this),e))}}function UL(t){return typeof t=="function"?BL(t):(t instanceof IDBTransaction&&OL(t),ML(t,PL())?new Proxy(t,ry):t)}function vo(t){if(t instanceof IDBRequest)return DL(t);if(dg.has(t))return dg.get(t);const e=UL(t);return e!==t&&(dg.set(t,e),lv.set(e,t)),e}const hg=t=>lv.get(t);function FL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=vo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(vo(o.result),l.oldVersion,l.newVersion,vo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const VL=["get","getKey","getAll","getAllKeys","count"],zL=["put","add","delete","clear"],fg=new Map;function Zx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fg.get(e))return fg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=zL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return fg.set(e,s),s}jL(t=>({...t,get:(e,n,r)=>Zx(e,n)||t.get(e,n,r),has:(e,n)=>!!Zx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($L(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $L(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const iy="@firebase/app",Xx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new av("@firebase/app"),qL="@firebase/app-compat",HL="@firebase/analytics-compat",KL="@firebase/analytics",GL="@firebase/app-check-compat",YL="@firebase/app-check",QL="@firebase/auth",ZL="@firebase/auth-compat",XL="@firebase/database",JL="@firebase/data-connect",eD="@firebase/database-compat",tD="@firebase/functions",nD="@firebase/functions-compat",rD="@firebase/installations",iD="@firebase/installations-compat",sD="@firebase/messaging",oD="@firebase/messaging-compat",aD="@firebase/performance",lD="@firebase/performance-compat",cD="@firebase/remote-config",uD="@firebase/remote-config-compat",dD="@firebase/storage",hD="@firebase/storage-compat",fD="@firebase/firestore",pD="@firebase/vertexai-preview",mD="@firebase/firestore-compat",gD="firebase",yD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="[DEFAULT]",wD={[iy]:"fire-core",[qL]:"fire-core-compat",[KL]:"fire-analytics",[HL]:"fire-analytics-compat",[YL]:"fire-app-check",[GL]:"fire-app-check-compat",[QL]:"fire-auth",[ZL]:"fire-auth-compat",[XL]:"fire-rtdb",[JL]:"fire-data-connect",[eD]:"fire-rtdb-compat",[tD]:"fire-fn",[nD]:"fire-fn-compat",[rD]:"fire-iid",[iD]:"fire-iid-compat",[sD]:"fire-fcm",[oD]:"fire-fcm-compat",[aD]:"fire-perf",[lD]:"fire-perf-compat",[cD]:"fire-rc",[uD]:"fire-rc-compat",[dD]:"fire-gcs",[hD]:"fire-gcs-compat",[fD]:"fire-fst",[mD]:"fire-fst-compat",[pD]:"fire-vertex","fire-js":"fire-js",[gD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Map,vD=new Map,oy=new Map;function Jx(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ea(t){const e=t.name;if(oy.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;oy.set(e,t);for(const n of $f.values())Jx(n,t);for(const n of vD.values())Jx(n,t);return!0}function Up(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ui(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new Cd("app","Firebase",_D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=yD;function sT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _o.create("bad-app-name",{appName:String(i)});if(n||(n=eT()),!n)throw _o.create("no-options");const s=$f.get(i);if(s){if(Wf(n,s.options)&&Wf(r,s.config))return s;throw _o.create("duplicate-app",{appName:i})}const o=new TL(i);for(const l of oy.values())o.addComponent(l);const a=new xD(n,r,o);return $f.set(i,a),a}function cv(t=sy){const e=$f.get(t);if(!e&&t===sy&&eT())return sT();if(!e)throw _o.create("no-app",{appName:t});return e}function Ci(t,e,n){var r;let i=(r=wD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(a.join(" "));return}Ea(new ko(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="firebase-heartbeat-database",bD=1,nd="firebase-heartbeat-store";let pg=null;function oT(){return pg||(pg=FL(ED,bD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nd)}catch(n){console.warn(n)}}}}).catch(t=>{throw _o.create("idb-open",{originalErrorMessage:t.message})})),pg}async function ID(t){try{const n=(await oT()).transaction(nd),r=await n.objectStore(nd).get(aT(t));return await n.done,r}catch(e){if(e instanceof Ui)xs.warn(e.message);else{const n=_o.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(n.message)}}}async function eE(t,e){try{const r=(await oT()).transaction(nd,"readwrite");await r.objectStore(nd).put(e,aT(t)),await r.done}catch(n){if(n instanceof Ui)xs.warn(n.message);else{const r=_o.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xs.warn(r.message)}}}function aT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=1024,kD=30*24*60*60*1e3;class TD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ND(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=kD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tE(),{heartbeatsToSend:r,unsentEntries:i}=AD(this._heartbeatsCache.heartbeats),s=zf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return xs.warn(n),""}}}function tE(){return new Date().toISOString().substring(0,10)}function AD(t,e=SD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),nE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ND{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mL()?gL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ID(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nE(t){return zf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t){Ea(new ko("platform-logger",e=>new WL(e),"PRIVATE")),Ea(new ko("heartbeat",e=>new TD(e),"PRIVATE")),Ci(iy,Xx,t),Ci(iy,Xx,"esm2017"),Ci("fire-js","")}CD("");var RD="firebase",MD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(RD,MD,"app");function uv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function lT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PD=lT,cT=new Cd("auth","Firebase",lT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new av("@firebase/auth");function LD(t,...e){qf.logLevel<=Ze.WARN&&qf.warn(`Auth (${Oa}): ${t}`,...e)}function ef(t,...e){qf.logLevel<=Ze.ERROR&&qf.error(`Auth (${Oa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,...e){throw hv(t,...e)}function mi(t,...e){return hv(t,...e)}function dv(t,e,n){const r=Object.assign(Object.assign({},PD()),{[e]:n});return new Cd("auth","Firebase",r).create(e,{appName:t.name})}function fs(t){return dv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function DD(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jr(t,"argument-error"),dv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cT.create(t,...e)}function Ne(t,e,...n){if(!t)throw hv(e,...n)}function as(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ef(e),new Error(e)}function Es(t,e){t||as(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OD(){return rE()==="http:"||rE()==="https:"}function rE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OD()||dL()||"connection"in navigator)?navigator.onLine:!0}function BD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.shortDelay=e,this.longDelay=n,Es(n>e,"Short delay should be less than long delay!"),this.isMobile=lL()||hL()}get(){return jD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t,e){Es(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new Md(3e4,6e4);function Ns(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cs(t,e,n,r,i={}){return dT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Rd(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return uL()||(c.referrerPolicy="no-referrer"),uT.fetch()(hT(t,t.config.apiHost,n,a),c)})}async function dT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},UD),e);try{const i=new zD(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Sh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Sh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Sh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw dv(t,d,c);Jr(t,d)}}catch(i){if(i instanceof Ui)throw i;Jr(t,"network-request-failed",{message:String(i)})}}async function Pd(t,e,n,r,i={}){const s=await Cs(t,e,n,r,i);return"mfaPendingCredential"in s&&Jr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function hT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?fv(t.config,i):`${t.config.apiScheme}://${i}`}function VD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mi(this.auth,"network-request-failed")),FD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mi(t,e,r);return i.customData._tokenResponse=n,i}function iE(t){return t!==void 0&&t.enterprise!==void 0}class WD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function $D(t,e){return Cs(t,"GET","/v2/recaptchaConfig",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e){return Cs(t,"POST","/v1/accounts:delete",e)}async function fT(t,e){return Cs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HD(t,e=!1){const n=Sn(t),r=await n.getIdToken(e),i=pv(r);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Tu(mg(i.auth_time)),issuedAtTime:Tu(mg(i.iat)),expirationTime:Tu(mg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function mg(t){return Number(t)*1e3}function pv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ef("JWT malformed, contained fewer than 3 sections"),null;try{const i=Zk(n);return i?JSON.parse(i):(ef("Failed to decode base64 JWT payload"),null)}catch(i){return ef("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function sE(t){const e=pv(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ui&&KD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function KD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await rd(t,fT(n,{idToken:r}));Ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pT(s.providerUserInfo):[],a=QD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ly(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function YD(t){const e=Sn(t);await Hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pT(t){return t.map(e=>{var{providerId:n}=e,r=uv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(t,e){const n=await dT(t,{},async()=>{const r=Rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=hT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",uT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XD(t,e){return Cs(t,"POST","/v2/accounts:revokeToken",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=sE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ZD(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Dl;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ls{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=uv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ly(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await rd(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HD(this,e)}reload(){return YD(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ls(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(fs(this.auth));const e=await this.getIdToken();return await rd(this,qD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,S=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:j,isAnonymous:K,providerData:G,stsTokenManager:O}=n;Ne(E&&O,e,"internal-error");const L=Dl.fromJSON(this.name,O);Ne(typeof E=="string",e,"internal-error"),js(h,e.name),js(m,e.name),Ne(typeof j=="boolean",e,"internal-error"),Ne(typeof K=="boolean",e,"internal-error"),js(w,e.name),js(k,e.name),js(I,e.name),js(_,e.name),js(T,e.name),js(S,e.name);const B=new ls({uid:E,auth:e,email:m,emailVerified:j,displayName:h,isAnonymous:K,photoURL:k,phoneNumber:w,tenantId:I,stsTokenManager:L,createdAt:T,lastLoginAt:S});return G&&Array.isArray(G)&&(B.providerData=G.map(W=>Object.assign({},W))),_&&(B._redirectEventId=_),B}static async _fromIdTokenResponse(e,n,r=!1){const i=new Dl;i.updateFromServerResponse(n);const s=new ls({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Dl;a.updateFromIdToken(r);const l=new ls({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ly(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=new Map;function cs(t){Es(t instanceof Function,"Expected a class definition");let e=oE.get(t);return e?(Es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mT.type="NONE";const aE=mT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t,e,n){return`firebase:${t}:${e}:${n}`}class Ol{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=tf(this.userKey,i.apiKey,s),this.fullPersistenceKey=tf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ls._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ol(cs(aE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||cs(aE);const o=tf(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ls._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ol(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ol(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xT(e))return"Blackberry";if(ET(e))return"Webos";if(yT(e))return"Safari";if((e.includes("chrome/")||wT(e))&&!e.includes("edge/"))return"Chrome";if(_T(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gT(t=cr()){return/firefox\//i.test(t)}function yT(t=cr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wT(t=cr()){return/crios\//i.test(t)}function vT(t=cr()){return/iemobile/i.test(t)}function _T(t=cr()){return/android/i.test(t)}function xT(t=cr()){return/blackberry/i.test(t)}function ET(t=cr()){return/webos/i.test(t)}function mv(t=cr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JD(t=cr()){var e;return mv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eO(){return fL()&&document.documentMode===10}function bT(t=cr()){return mv(t)||_T(t)||ET(t)||xT(t)||/windows phone/i.test(t)||vT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e=[]){let n;switch(t){case"Browser":n=lE(cr());break;case"Worker":n=`${lE(cr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e={}){return Cs(t,"GET","/v2/passwordPolicy",Ns(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=6;class iO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cE(this),this.idTokenSubscription=new cE(this),this.beforeStateQueue=new tO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cs(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fT(this,{idToken:e}),r=await ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ui(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ui(this.app))return Promise.reject(fs(this));const n=e?Sn(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ui(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nO(this),n=new iO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await XD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cs(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[cs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&LD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rs(t){return Sn(t)}class cE{constructor(e){this.auth=e,this.observer=null,this.addObserver=xL(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oO(t){Fp=t}function ST(t){return Fp.loadJS(t)}function aO(){return Fp.recaptchaEnterpriseScript}function lO(){return Fp.gapiScript}function cO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const uO="recaptcha-enterprise",dO="NO_RECAPTCHA";class hO{constructor(e){this.type=uO,this.auth=Rs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{$D(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new WD(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;iE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(dO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&iE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=aO();l.length!==0&&(l+=a),ST(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function uE(t,e,n,r=!1){const i=new hO(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Kf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await uE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await uE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t,e){const n=Up(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Wf(s,e??{}))return i;Jr(i,"already-initialized")}return n.initialize({options:e})}function pO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mO(t,e,n){const r=Rs(t);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=kT(e),{host:o,port:a}=gO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),yO()}function kT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gO(t){const e=kT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:dE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:dE(o)}}}function dE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,n){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}async function wO(t,e){return Cs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t,e){return Pd(t,"POST","/v1/accounts:signInWithPassword",Ns(t,e))}async function _O(t,e){return Cs(t,"POST","/v1/accounts:sendOobCode",Ns(t,e))}async function xO(t,e){return _O(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(t,e){return Pd(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}async function bO(t,e){return Pd(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends gv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new id(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new id(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kf(e,n,"signInWithPassword",vO);case"emailLink":return EO(e,{email:this._email,oobCode:this._password});default:Jr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kf(e,r,"signUpPassword",wO);case"emailLink":return bO(e,{idToken:n,email:this._email,oobCode:this._password});default:Jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t,e){return Pd(t,"POST","/v1/accounts:signInWithIdp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="http://localhost";class ba extends gv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=uv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ba(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return jl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jl(e,n)}buildRequest(){const e={requestUri:IO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kO(t){const e=uu(du(t)).link,n=e?uu(du(e)).deep_link_id:null,r=uu(du(t)).deep_link_id;return(r?uu(du(r)).link:null)||r||n||e||t}class yv{constructor(e){var n,r,i,s,o,a;const l=uu(du(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=SO((i=l.mode)!==null&&i!==void 0?i:null);Ne(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=kO(e);try{return new yv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.providerId=_c.PROVIDER_ID}static credential(e,n){return id._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yv.parseLink(n);return Ne(r,"argument-error"),id._fromEmailAndCode(e,r.code,r.tenantId)}}_c.PROVIDER_ID="password";_c.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_c.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends wv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Ld{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Ld{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ba._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return es.credential(n,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Ld{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Ld{constructor(){super("twitter.com")}static credential(e,n){return ba._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Js.credential(n,r)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e){return Pd(t,"POST","/v1/accounts:signUp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ls._fromIdTokenResponse(e,r,i),o=hE(r);return new Ia({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=hE(r);return new Ia({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function hE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends Ui{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Gf(e,n,r,i)}}function TT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Gf._fromErrorAndOperation(t,s,e,r):s})}async function AO(t,e,n=!1){const r=await rd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ia._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e,n=!1){const{auth:r}=t;if(ui(r.app))return Promise.reject(fs(r));const i="reauthenticate";try{const s=await rd(t,TT(r,i,e,t),n);Ne(s.idToken,r,"internal-error");const o=pv(s.idToken);Ne(o,r,"internal-error");const{sub:a}=o;return Ne(t.uid===a,r,"user-mismatch"),Ia._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(t,e,n=!1){if(ui(t.app))return Promise.reject(fs(t));const r="signIn",i=await TT(t,r,e),s=await Ia._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function CO(t,e){return AT(Rs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(t){const e=Rs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RO(t,e,n){const r=Rs(t);await Kf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",xO)}async function MO(t,e,n){if(ui(t.app))return Promise.reject(fs(t));const r=Rs(t),o=await Kf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&NT(t),l}),a=await Ia._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function PO(t,e,n){return ui(t.app)?Promise.reject(fs(t)):CO(Sn(t),_c.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&NT(t),r})}function LO(t,e,n,r){return Sn(t).onIdTokenChanged(e,n,r)}function DO(t,e,n){return Sn(t).beforeAuthStateChanged(e,n)}function OO(t){return Sn(t).signOut()}const Yf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yf,"1"),this.storage.removeItem(Yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=1e3,BO=10;class RT extends CT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);eO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RT.type="LOCAL";const UO=RT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT extends CT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}MT.type="SESSION";const PT=MT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Vp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await FO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=vv("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(){return window}function zO(t){Ri().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return typeof Ri().WorkerGlobalScope<"u"&&typeof Ri().importScripts=="function"}async function WO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $O(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qO(){return LT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="firebaseLocalStorageDb",HO=1,Qf="firebaseLocalStorage",OT="fbase_key";class Dd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zp(t,e){return t.transaction([Qf],e?"readwrite":"readonly").objectStore(Qf)}function KO(){const t=indexedDB.deleteDatabase(DT);return new Dd(t).toPromise()}function cy(){const t=indexedDB.open(DT,HO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qf,{keyPath:OT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qf)?e(r):(r.close(),await KO(),e(await cy()))})})}async function fE(t,e,n){const r=zp(t,!0).put({[OT]:e,value:n});return new Dd(r).toPromise()}async function GO(t,e){const n=zp(t,!1).get(e),r=await new Dd(n).toPromise();return r===void 0?null:r.value}function pE(t,e){const n=zp(t,!0).delete(e);return new Dd(n).toPromise()}const YO=800,QO=3;class jT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vp._getInstance(qO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await WO(),!this.activeServiceWorker)return;this.sender=new VO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$O()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cy();return await fE(e,Yf,"1"),await pE(e,Yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zp(i,!1).getAll();return new Dd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jT.type="LOCAL";const ZO=jT;new Md(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e){return e?cs(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends gv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XO(t){return AT(t.auth,new _v(t),t.bypassAuthState)}function JO(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),NO(n,new _v(t),t.bypassAuthState)}async function e3(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),AO(n,new _v(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XO;case"linkViaPopup":case"linkViaRedirect":return e3;case"reauthViaPopup":case"reauthViaRedirect":return JO;default:Jr(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=new Md(2e3,1e4);async function n3(t,e,n){if(ui(t.app))return Promise.reject(mi(t,"operation-not-supported-in-this-environment"));const r=Rs(t);DD(t,e,wv);const i=BT(r,n);return new ia(r,"signInViaPopup",e,i).executeNotNull()}class ia extends UT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ia.currentPopupAction&&ia.currentPopupAction.cancel(),ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t3.get())};e()}}ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="pendingRedirect",nf=new Map;class i3 extends UT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nf.get(this.auth._key());if(!e){try{const r=await s3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nf.set(this.auth._key(),e)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s3(t,e){const n=l3(e),r=a3(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function o3(t,e){nf.set(t._key(),e)}function a3(t){return cs(t._redirectPersistence)}function l3(t){return tf(r3,t.config.apiKey,t.name)}async function c3(t,e,n=!1){if(ui(t.app))return Promise.reject(fs(t));const r=Rs(t),i=BT(r,e),o=await new i3(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=10*60*1e3;class d3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u3&&this.cachedEventUids.clear(),this.cachedEventUids.has(mE(e))}saveEventToCache(e){this.cachedEventUids.add(mE(e)),this.lastProcessedEventTime=Date.now()}}function mE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(t,e={}){return Cs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m3=/^https?/;async function g3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f3(t);for(const n of e)try{if(y3(n))return}catch{}Jr(t,"unauthorized-domain")}function y3(t){const e=ay(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!m3.test(n))return!1;if(p3.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=new Md(3e4,6e4);function gE(){const t=Ri().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function v3(t){return new Promise((e,n)=>{var r,i,s;function o(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),n(mi(t,"network-request-failed"))},timeout:w3.get()})}if(!((i=(r=Ri().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ri().gapi)===null||s===void 0)&&s.load)o();else{const a=cO("iframefcb");return Ri()[a]=()=>{gapi.load?o():n(mi(t,"network-request-failed"))},ST(`${lO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw rf=null,e})}let rf=null;function _3(t){return rf=rf||v3(t),rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=new Md(5e3,15e3),E3="__/auth/iframe",b3="emulator/auth/iframe",I3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k3(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fv(e,b3):`https://${t.config.authDomain}/${E3}`,r={apiKey:e.apiKey,appName:t.name,v:Oa},i=S3.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rd(r).slice(1)}`}async function T3(t){const e=await _3(t),n=Ri().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:k3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:I3,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=mi(t,"network-request-failed"),a=Ri().setTimeout(()=>{s(o)},x3.get());function l(){Ri().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N3=500,C3=600,R3="_blank",M3="http://localhost";class yE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P3(t,e,n,r=N3,i=C3){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},A3),{width:r.toString(),height:i.toString(),top:s,left:o}),c=cr().toLowerCase();n&&(a=wT(c)?R3:n),gT(c)&&(e=e||M3,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[w,k])=>`${m}${w}=${k},`,"");if(JD(c)&&a!=="_self")return L3(e||"",a),new yE(null);const h=window.open(e||"",a,d);Ne(h,t,"popup-blocked");try{h.focus()}catch{}return new yE(h)}function L3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="__/auth/handler",O3="emulator/auth/handler",j3=encodeURIComponent("fac");async function wE(t,e,n,r,i,s){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oa,eventId:i};if(e instanceof wv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_L(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Ld){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${j3}=${encodeURIComponent(l)}`:"";return`${B3(t)}?${Rd(a).slice(1)}${c}`}function B3({config:t}){return t.emulator?fv(t,O3):`https://${t.authDomain}/${D3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="webStorageSupport";class U3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PT,this._completeRedirectFn=c3,this._overrideRedirectResult=o3}async _openPopup(e,n,r,i){var s;Es((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await wE(e,n,r,ay(),i);return P3(e,o,vv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await wE(e,n,r,ay(),i);return zO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Es(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await T3(e),r=new d3(e);return n.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gg,{type:gg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gg];o!==void 0&&n(!!o),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=g3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bT()||yT()||mv()}}const F3=U3;var vE="@firebase/auth",_E="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W3(t){Ea(new ko("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IT(t)},c=new sO(r,i,s,l);return pO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ea(new ko("auth-internal",e=>{const n=Rs(e.getProvider("auth").getImmediate());return(r=>new V3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(vE,_E,z3(t)),Ci(vE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=5*60,q3=tT("authIdTokenMaxAge")||$3;let xE=null;const H3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>q3)return;const i=n==null?void 0:n.token;xE!==i&&(xE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function K3(t=cv()){const e=Up(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fO(t,{popupRedirectResolver:F3,persistence:[ZO,UO,PT]}),r=tT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=H3(s.toString());DO(n,o,()=>o(n.currentUser)),LO(n,a=>o(a))}}const i=Xk("auth");return i&&mO(n,`http://${i}`),n}function G3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=mi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",G3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W3("Browser");var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fa,VT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,L){function B(){}B.prototype=L.prototype,O.D=L.prototype,O.prototype=new B,O.prototype.constructor=O,O.C=function(W,$,H){for(var A=Array(arguments.length-2),f=2;f<arguments.length;f++)A[f-2]=arguments[f];return L.prototype[$].apply(W,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,L,B){B||(B=0);var W=Array(16);if(typeof L=="string")for(var $=0;16>$;++$)W[$]=L.charCodeAt(B++)|L.charCodeAt(B++)<<8|L.charCodeAt(B++)<<16|L.charCodeAt(B++)<<24;else for($=0;16>$;++$)W[$]=L[B++]|L[B++]<<8|L[B++]<<16|L[B++]<<24;L=O.g[0],B=O.g[1],$=O.g[2];var H=O.g[3],A=L+(H^B&($^H))+W[0]+3614090360&4294967295;L=B+(A<<7&4294967295|A>>>25),A=H+($^L&(B^$))+W[1]+3905402710&4294967295,H=L+(A<<12&4294967295|A>>>20),A=$+(B^H&(L^B))+W[2]+606105819&4294967295,$=H+(A<<17&4294967295|A>>>15),A=B+(L^$&(H^L))+W[3]+3250441966&4294967295,B=$+(A<<22&4294967295|A>>>10),A=L+(H^B&($^H))+W[4]+4118548399&4294967295,L=B+(A<<7&4294967295|A>>>25),A=H+($^L&(B^$))+W[5]+1200080426&4294967295,H=L+(A<<12&4294967295|A>>>20),A=$+(B^H&(L^B))+W[6]+2821735955&4294967295,$=H+(A<<17&4294967295|A>>>15),A=B+(L^$&(H^L))+W[7]+4249261313&4294967295,B=$+(A<<22&4294967295|A>>>10),A=L+(H^B&($^H))+W[8]+1770035416&4294967295,L=B+(A<<7&4294967295|A>>>25),A=H+($^L&(B^$))+W[9]+2336552879&4294967295,H=L+(A<<12&4294967295|A>>>20),A=$+(B^H&(L^B))+W[10]+4294925233&4294967295,$=H+(A<<17&4294967295|A>>>15),A=B+(L^$&(H^L))+W[11]+2304563134&4294967295,B=$+(A<<22&4294967295|A>>>10),A=L+(H^B&($^H))+W[12]+1804603682&4294967295,L=B+(A<<7&4294967295|A>>>25),A=H+($^L&(B^$))+W[13]+4254626195&4294967295,H=L+(A<<12&4294967295|A>>>20),A=$+(B^H&(L^B))+W[14]+2792965006&4294967295,$=H+(A<<17&4294967295|A>>>15),A=B+(L^$&(H^L))+W[15]+1236535329&4294967295,B=$+(A<<22&4294967295|A>>>10),A=L+($^H&(B^$))+W[1]+4129170786&4294967295,L=B+(A<<5&4294967295|A>>>27),A=H+(B^$&(L^B))+W[6]+3225465664&4294967295,H=L+(A<<9&4294967295|A>>>23),A=$+(L^B&(H^L))+W[11]+643717713&4294967295,$=H+(A<<14&4294967295|A>>>18),A=B+(H^L&($^H))+W[0]+3921069994&4294967295,B=$+(A<<20&4294967295|A>>>12),A=L+($^H&(B^$))+W[5]+3593408605&4294967295,L=B+(A<<5&4294967295|A>>>27),A=H+(B^$&(L^B))+W[10]+38016083&4294967295,H=L+(A<<9&4294967295|A>>>23),A=$+(L^B&(H^L))+W[15]+3634488961&4294967295,$=H+(A<<14&4294967295|A>>>18),A=B+(H^L&($^H))+W[4]+3889429448&4294967295,B=$+(A<<20&4294967295|A>>>12),A=L+($^H&(B^$))+W[9]+568446438&4294967295,L=B+(A<<5&4294967295|A>>>27),A=H+(B^$&(L^B))+W[14]+3275163606&4294967295,H=L+(A<<9&4294967295|A>>>23),A=$+(L^B&(H^L))+W[3]+4107603335&4294967295,$=H+(A<<14&4294967295|A>>>18),A=B+(H^L&($^H))+W[8]+1163531501&4294967295,B=$+(A<<20&4294967295|A>>>12),A=L+($^H&(B^$))+W[13]+2850285829&4294967295,L=B+(A<<5&4294967295|A>>>27),A=H+(B^$&(L^B))+W[2]+4243563512&4294967295,H=L+(A<<9&4294967295|A>>>23),A=$+(L^B&(H^L))+W[7]+1735328473&4294967295,$=H+(A<<14&4294967295|A>>>18),A=B+(H^L&($^H))+W[12]+2368359562&4294967295,B=$+(A<<20&4294967295|A>>>12),A=L+(B^$^H)+W[5]+4294588738&4294967295,L=B+(A<<4&4294967295|A>>>28),A=H+(L^B^$)+W[8]+2272392833&4294967295,H=L+(A<<11&4294967295|A>>>21),A=$+(H^L^B)+W[11]+1839030562&4294967295,$=H+(A<<16&4294967295|A>>>16),A=B+($^H^L)+W[14]+4259657740&4294967295,B=$+(A<<23&4294967295|A>>>9),A=L+(B^$^H)+W[1]+2763975236&4294967295,L=B+(A<<4&4294967295|A>>>28),A=H+(L^B^$)+W[4]+1272893353&4294967295,H=L+(A<<11&4294967295|A>>>21),A=$+(H^L^B)+W[7]+4139469664&4294967295,$=H+(A<<16&4294967295|A>>>16),A=B+($^H^L)+W[10]+3200236656&4294967295,B=$+(A<<23&4294967295|A>>>9),A=L+(B^$^H)+W[13]+681279174&4294967295,L=B+(A<<4&4294967295|A>>>28),A=H+(L^B^$)+W[0]+3936430074&4294967295,H=L+(A<<11&4294967295|A>>>21),A=$+(H^L^B)+W[3]+3572445317&4294967295,$=H+(A<<16&4294967295|A>>>16),A=B+($^H^L)+W[6]+76029189&4294967295,B=$+(A<<23&4294967295|A>>>9),A=L+(B^$^H)+W[9]+3654602809&4294967295,L=B+(A<<4&4294967295|A>>>28),A=H+(L^B^$)+W[12]+3873151461&4294967295,H=L+(A<<11&4294967295|A>>>21),A=$+(H^L^B)+W[15]+530742520&4294967295,$=H+(A<<16&4294967295|A>>>16),A=B+($^H^L)+W[2]+3299628645&4294967295,B=$+(A<<23&4294967295|A>>>9),A=L+($^(B|~H))+W[0]+4096336452&4294967295,L=B+(A<<6&4294967295|A>>>26),A=H+(B^(L|~$))+W[7]+1126891415&4294967295,H=L+(A<<10&4294967295|A>>>22),A=$+(L^(H|~B))+W[14]+2878612391&4294967295,$=H+(A<<15&4294967295|A>>>17),A=B+(H^($|~L))+W[5]+4237533241&4294967295,B=$+(A<<21&4294967295|A>>>11),A=L+($^(B|~H))+W[12]+1700485571&4294967295,L=B+(A<<6&4294967295|A>>>26),A=H+(B^(L|~$))+W[3]+2399980690&4294967295,H=L+(A<<10&4294967295|A>>>22),A=$+(L^(H|~B))+W[10]+4293915773&4294967295,$=H+(A<<15&4294967295|A>>>17),A=B+(H^($|~L))+W[1]+2240044497&4294967295,B=$+(A<<21&4294967295|A>>>11),A=L+($^(B|~H))+W[8]+1873313359&4294967295,L=B+(A<<6&4294967295|A>>>26),A=H+(B^(L|~$))+W[15]+4264355552&4294967295,H=L+(A<<10&4294967295|A>>>22),A=$+(L^(H|~B))+W[6]+2734768916&4294967295,$=H+(A<<15&4294967295|A>>>17),A=B+(H^($|~L))+W[13]+1309151649&4294967295,B=$+(A<<21&4294967295|A>>>11),A=L+($^(B|~H))+W[4]+4149444226&4294967295,L=B+(A<<6&4294967295|A>>>26),A=H+(B^(L|~$))+W[11]+3174756917&4294967295,H=L+(A<<10&4294967295|A>>>22),A=$+(L^(H|~B))+W[2]+718787259&4294967295,$=H+(A<<15&4294967295|A>>>17),A=B+(H^($|~L))+W[9]+3951481745&4294967295,O.g[0]=O.g[0]+L&4294967295,O.g[1]=O.g[1]+($+(A<<21&4294967295|A>>>11))&4294967295,O.g[2]=O.g[2]+$&4294967295,O.g[3]=O.g[3]+H&4294967295}r.prototype.u=function(O,L){L===void 0&&(L=O.length);for(var B=L-this.blockSize,W=this.B,$=this.h,H=0;H<L;){if($==0)for(;H<=B;)i(this,O,H),H+=this.blockSize;if(typeof O=="string"){for(;H<L;)if(W[$++]=O.charCodeAt(H++),$==this.blockSize){i(this,W),$=0;break}}else for(;H<L;)if(W[$++]=O[H++],$==this.blockSize){i(this,W),$=0;break}}this.h=$,this.o+=L},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var L=1;L<O.length-8;++L)O[L]=0;var B=8*this.o;for(L=O.length-8;L<O.length;++L)O[L]=B&255,B/=256;for(this.u(O),O=Array(16),L=B=0;4>L;++L)for(var W=0;32>W;W+=8)O[B++]=this.g[L]>>>W&255;return O};function s(O,L){var B=a;return Object.prototype.hasOwnProperty.call(B,O)?B[O]:B[O]=L(O)}function o(O,L){this.h=L;for(var B=[],W=!0,$=O.length-1;0<=$;$--){var H=O[$]|0;W&&H==L||(B[$]=H,W=!1)}this.g=B}var a={};function l(O){return-128<=O&&128>O?s(O,function(L){return new o([L|0],0>L?-1:0)}):new o([O|0],0>O?-1:0)}function c(O){if(isNaN(O)||!isFinite(O))return h;if(0>O)return _(c(-O));for(var L=[],B=1,W=0;O>=B;W++)L[W]=O/B|0,B*=4294967296;return new o(L,0)}function d(O,L){if(O.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(O.charAt(0)=="-")return _(d(O.substring(1),L));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=c(Math.pow(L,8)),W=h,$=0;$<O.length;$+=8){var H=Math.min(8,O.length-$),A=parseInt(O.substring($,$+H),L);8>H?(H=c(Math.pow(L,H)),W=W.j(H).add(c(A))):(W=W.j(B),W=W.add(c(A)))}return W}var h=l(0),m=l(1),w=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-_(this).m();for(var O=0,L=1,B=0;B<this.g.length;B++){var W=this.i(B);O+=(0<=W?W:4294967296+W)*L,L*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(k(this))return"0";if(I(this))return"-"+_(this).toString(O);for(var L=c(Math.pow(O,6)),B=this,W="";;){var $=j(B,L).g;B=T(B,$.j(L));var H=((0<B.g.length?B.g[0]:B.h)>>>0).toString(O);if(B=$,k(B))return H+W;for(;6>H.length;)H="0"+H;W=H+W}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function k(O){if(O.h!=0)return!1;for(var L=0;L<O.g.length;L++)if(O.g[L]!=0)return!1;return!0}function I(O){return O.h==-1}t.l=function(O){return O=T(this,O),I(O)?-1:k(O)?0:1};function _(O){for(var L=O.g.length,B=[],W=0;W<L;W++)B[W]=~O.g[W];return new o(B,~O.h).add(m)}t.abs=function(){return I(this)?_(this):this},t.add=function(O){for(var L=Math.max(this.g.length,O.g.length),B=[],W=0,$=0;$<=L;$++){var H=W+(this.i($)&65535)+(O.i($)&65535),A=(H>>>16)+(this.i($)>>>16)+(O.i($)>>>16);W=A>>>16,H&=65535,A&=65535,B[$]=A<<16|H}return new o(B,B[B.length-1]&-2147483648?-1:0)};function T(O,L){return O.add(_(L))}t.j=function(O){if(k(this)||k(O))return h;if(I(this))return I(O)?_(this).j(_(O)):_(_(this).j(O));if(I(O))return _(this.j(_(O)));if(0>this.l(w)&&0>O.l(w))return c(this.m()*O.m());for(var L=this.g.length+O.g.length,B=[],W=0;W<2*L;W++)B[W]=0;for(W=0;W<this.g.length;W++)for(var $=0;$<O.g.length;$++){var H=this.i(W)>>>16,A=this.i(W)&65535,f=O.i($)>>>16,b=O.i($)&65535;B[2*W+2*$]+=A*b,S(B,2*W+2*$),B[2*W+2*$+1]+=H*b,S(B,2*W+2*$+1),B[2*W+2*$+1]+=A*f,S(B,2*W+2*$+1),B[2*W+2*$+2]+=H*f,S(B,2*W+2*$+2)}for(W=0;W<L;W++)B[W]=B[2*W+1]<<16|B[2*W];for(W=L;W<2*L;W++)B[W]=0;return new o(B,0)};function S(O,L){for(;(O[L]&65535)!=O[L];)O[L+1]+=O[L]>>>16,O[L]&=65535,L++}function E(O,L){this.g=O,this.h=L}function j(O,L){if(k(L))throw Error("division by zero");if(k(O))return new E(h,h);if(I(O))return L=j(_(O),L),new E(_(L.g),_(L.h));if(I(L))return L=j(O,_(L)),new E(_(L.g),L.h);if(30<O.g.length){if(I(O)||I(L))throw Error("slowDivide_ only works with positive integers.");for(var B=m,W=L;0>=W.l(O);)B=K(B),W=K(W);var $=G(B,1),H=G(W,1);for(W=G(W,2),B=G(B,2);!k(W);){var A=H.add(W);0>=A.l(O)&&($=$.add(B),H=A),W=G(W,1),B=G(B,1)}return L=T(O,$.j(L)),new E($,L)}for($=h;0<=O.l(L);){for(B=Math.max(1,Math.floor(O.m()/L.m())),W=Math.ceil(Math.log(B)/Math.LN2),W=48>=W?1:Math.pow(2,W-48),H=c(B),A=H.j(L);I(A)||0<A.l(O);)B-=W,H=c(B),A=H.j(L);k(H)&&(H=m),$=$.add(H),O=T(O,A)}return new E($,O)}t.A=function(O){return j(this,O).h},t.and=function(O){for(var L=Math.max(this.g.length,O.g.length),B=[],W=0;W<L;W++)B[W]=this.i(W)&O.i(W);return new o(B,this.h&O.h)},t.or=function(O){for(var L=Math.max(this.g.length,O.g.length),B=[],W=0;W<L;W++)B[W]=this.i(W)|O.i(W);return new o(B,this.h|O.h)},t.xor=function(O){for(var L=Math.max(this.g.length,O.g.length),B=[],W=0;W<L;W++)B[W]=this.i(W)^O.i(W);return new o(B,this.h^O.h)};function K(O){for(var L=O.g.length+1,B=[],W=0;W<L;W++)B[W]=O.i(W)<<1|O.i(W-1)>>>31;return new o(B,O.h)}function G(O,L){var B=L>>5;L%=32;for(var W=O.g.length-B,$=[],H=0;H<W;H++)$[H]=0<L?O.i(H+B)>>>L|O.i(H+B+1)<<32-L:O.i(H+B);return new o($,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,fa=o}).apply(typeof EE<"u"?EE:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zT,hu,WT,sf,uy,$T,qT,HT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,N){return u==Array.prototype||u==Object.prototype||(u[g]=N.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var g=0;g<u.length;++g){var N=u[g];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function i(u,g){if(g)e:{var N=r;u=u.split(".");for(var U=0;U<u.length-1;U++){var X=u[U];if(!(X in N))break e;N=N[X]}u=u[u.length-1],U=N[u],g=g(U),g!=U&&g!=null&&e(N,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var N=0,U=!1,X={next:function(){if(!U&&N<u.length){var ne=N++;return{value:g(ne,u[ne]),done:!1}}return U=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(u){return u||function(){return s(this,function(g,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,N){return u.call.apply(u.bind,arguments)}function h(u,g,N){if(!u)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,U),u.apply(g,X)}}return function(){return u.apply(g,arguments)}}function m(u,g,N){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function w(u,g){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),u.apply(this,U)}}function k(u,g){function N(){}N.prototype=g.prototype,u.aa=g.prototype,u.prototype=new N,u.prototype.constructor=u,u.Qb=function(U,X,ne){for(var he=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)he[Et-2]=arguments[Et];return g.prototype[X].apply(U,he)}}function I(u){const g=u.length;if(0<g){const N=Array(g);for(let U=0;U<g;U++)N[U]=u[U];return N}return[]}function _(u,g){for(let N=1;N<arguments.length;N++){const U=arguments[N];if(l(U)){const X=u.length||0,ne=U.length||0;u.length=X+ne;for(let he=0;he<ne;he++)u[X+he]=U[he]}else u.push(U)}}class T{constructor(g,N){this.i=g,this.j=N,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function S(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var K=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function G(u,g,N){for(const U in u)g.call(N,u[U],U,u)}function O(u,g){for(const N in u)g.call(void 0,u[N],N,u)}function L(u){const g={};for(const N in u)g[N]=u[N];return g}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(u,g){let N,U;for(let X=1;X<arguments.length;X++){U=arguments[X];for(N in U)u[N]=U[N];for(let ne=0;ne<B.length;ne++)N=B[ne],Object.prototype.hasOwnProperty.call(U,N)&&(u[N]=U[N])}}function $(u){var g=1;u=u.split(":");const N=[];for(;0<g&&u.length;)N.push(u.shift()),g--;return u.length&&N.push(u.join(":")),N}function H(u){a.setTimeout(()=>{throw u},0)}function A(){var u=F;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class f{constructor(){this.h=this.g=null}add(g,N){const U=b.get();U.set(g,N),this.h?this.h.next=U:this.g=U,this.h=U}}var b=new T(()=>new C,u=>u.reset());class C{constructor(){this.next=this.g=this.h=null}set(g,N){this.h=g,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let M,R=!1,F=new f,q=()=>{const u=a.Promise.resolve(void 0);M=()=>{u.then(D)}};var D=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(N){H(N)}var g=b;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}R=!1};function v(){this.s=this.s,this.C=this.C}v.prototype.s=!1,v.prototype.ma=function(){this.s||(this.s=!0,this.N())},v.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const N=()=>{};a.addEventListener("test",N,g),a.removeEventListener("test",N,g)}catch{}return u}();function le(u,g){if(V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var N=this.type=u.type,U=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(K){e:{try{j(g.nodeName);var X=!0;break e}catch{}X=!1}X||(g=null)}}else N=="mouseover"?g=u.fromElement:N=="mouseout"&&(g=u.toElement);this.relatedTarget=g,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:de[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&le.aa.h.call(this)}}k(le,V);var de={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Ce(u,g,N,U,X){this.listener=u,this.proxy=null,this.src=g,this.type=N,this.capture=!!U,this.ha=X,this.key=++Ie,this.da=this.fa=!1}function vt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ue(u){this.src=u,this.g={},this.h=0}Ue.prototype.add=function(u,g,N,U,X){var ne=u.toString();u=this.g[ne],u||(u=this.g[ne]=[],this.h++);var he=jt(u,g,U,X);return-1<he?(g=u[he],N||(g.fa=!1)):(g=new Ce(g,this.src,ne,!!U,X),g.fa=N,u.push(g)),g};function Oe(u,g){var N=g.type;if(N in u.g){var U=u.g[N],X=Array.prototype.indexOf.call(U,g,void 0),ne;(ne=0<=X)&&Array.prototype.splice.call(U,X,1),ne&&(vt(g),u.g[N].length==0&&(delete u.g[N],u.h--))}}function jt(u,g,N,U){for(var X=0;X<u.length;++X){var ne=u[X];if(!ne.da&&ne.listener==g&&ne.capture==!!N&&ne.ha==U)return X}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),Ge={};function $i(u,g,N,U,X){if(Array.isArray(g)){for(var ne=0;ne<g.length;ne++)$i(u,g[ne],N,U,X);return null}return N=Ln(N),u&&u[Ae]?u.K(g,N,c(U)?!!U.capture:!!U,X):yt(u,g,N,!1,U,X)}function yt(u,g,N,U,X,ne){if(!g)throw Error("Invalid event type");var he=c(X)?!!X.capture:!!X,Et=ot(u);if(Et||(u[qe]=Et=new Ue(u)),N=Et.add(g,N,U,he,ne),N.proxy)return N;if(U=bt(),N.proxy=U,U.src=u,U.listener=N,u.addEventListener)se||(X=he),X===void 0&&(X=!1),u.addEventListener(g.toString(),U,X);else if(u.attachEvent)u.attachEvent(st(g.toString()),U);else if(u.addListener&&u.removeListener)u.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return N}function bt(){function u(N){return g.call(u.src,u.listener,N)}const g=xn;return u}function qi(u,g,N,U,X){if(Array.isArray(g))for(var ne=0;ne<g.length;ne++)qi(u,g[ne],N,U,X);else U=c(U)?!!U.capture:!!U,N=Ln(N),u&&u[Ae]?(u=u.i,g=String(g).toString(),g in u.g&&(ne=u.g[g],N=jt(ne,N,U,X),-1<N&&(vt(ne[N]),Array.prototype.splice.call(ne,N,1),ne.length==0&&(delete u.g[g],u.h--)))):u&&(u=ot(u))&&(g=u.g[g.toString()],u=-1,g&&(u=jt(g,N,U,X)),(N=-1<u?g[u]:null)&&ct(N))}function ct(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ae])Oe(g.i,u);else{var N=u.type,U=u.proxy;g.removeEventListener?g.removeEventListener(N,U,u.capture):g.detachEvent?g.detachEvent(st(N),U):g.addListener&&g.removeListener&&g.removeListener(U),(N=ot(g))?(Oe(N,u),N.h==0&&(N.src=null,g[qe]=null)):vt(u)}}}function st(u){return u in Ge?Ge[u]:Ge[u]="on"+u}function xn(u,g){if(u.da)u=!0;else{g=new le(g,this);var N=u.listener,U=u.ha||u.src;u.fa&&ct(u),u=N.call(U,g)}return u}function ot(u){return u=u[qe],u instanceof Ue?u:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ln(u){return typeof u=="function"?u:(u[ut]||(u[ut]=function(g){return u.handleEvent(g)}),u[ut])}function Fe(){v.call(this),this.i=new Ue(this),this.M=this,this.F=null}k(Fe,v),Fe.prototype[Ae]=!0,Fe.prototype.removeEventListener=function(u,g,N,U){qi(this,u,g,N,U)};function P(u,g){var N,U=u.F;if(U)for(N=[];U;U=U.F)N.push(U);if(u=u.M,U=g.type||g,typeof g=="string")g=new V(g,u);else if(g instanceof V)g.target=g.target||u;else{var X=g;g=new V(U,u),W(g,X)}if(X=!0,N)for(var ne=N.length-1;0<=ne;ne--){var he=g.g=N[ne];X=y(he,U,!0,g)&&X}if(he=g.g=u,X=y(he,U,!0,g)&&X,X=y(he,U,!1,g)&&X,N)for(ne=0;ne<N.length;ne++)he=g.g=N[ne],X=y(he,U,!1,g)&&X}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var N=u.g[g],U=0;U<N.length;U++)vt(N[U]);delete u.g[g],u.h--}}this.F=null},Fe.prototype.K=function(u,g,N,U){return this.i.add(String(u),g,!1,N,U)},Fe.prototype.L=function(u,g,N,U){return this.i.add(String(u),g,!0,N,U)};function y(u,g,N,U){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var X=!0,ne=0;ne<g.length;++ne){var he=g[ne];if(he&&!he.da&&he.capture==N){var Et=he.listener,Dn=he.ha||he.src;he.fa&&Oe(u.i,he),X=Et.call(Dn,U)!==!1&&X}}return X&&!U.defaultPrevented}function x(u,g,N){if(typeof u=="function")N&&(u=m(u,N));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function z(u){u.g=x(()=>{u.g=null,u.i&&(u.i=!1,z(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Q extends v{constructor(g,N){super(),this.m=g,this.l=N,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:z(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(u){v.call(this),this.h=u,this.g={}}k(Z,v);var te=[];function je(u){G(u.g,function(g,N){this.g.hasOwnProperty(N)&&ct(g)},u),u.g={}}Z.prototype.N=function(){Z.aa.N.call(this),je(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=a.JSON.stringify,Me=a.JSON.parse,_t=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ke(){}ke.prototype.h=null;function Wt(u){return u.h||(u.h=u.i())}function Mc(){}var It={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bt(){V.call(this,"d")}k(Bt,V);function $a(){V.call(this,"c")}k($a,V);var wt={},$t=null;function Bo(){return $t=$t||new Fe}wt.La="serverreachability";function qt(u){V.call(this,wt.La,u)}k(qt,V);function St(u){const g=Bo();P(g,new qt(g))}wt.STAT_EVENT="statevent";function Pc(u,g){V.call(this,wt.STAT_EVENT,u),this.stat=g}k(Pc,V);function Ye(u){const g=Bo();P(g,new Pc(g,u))}wt.Ma="timingevent";function Ht(u,g){V.call(this,wt.Ma,u),this.size=g}k(Ht,V);function Ms(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function kt(){this.g=!0}kt.prototype.xa=function(){this.g=!1};function tn(u,g,N,U,X,ne){u.info(function(){if(u.g)if(ne)for(var he="",Et=ne.split("&"),Dn=0;Dn<Et.length;Dn++){var et=Et[Dn].split("=");if(1<et.length){var Gn=et[0];et=et[1];var Yn=Gn.split("_");he=2<=Yn.length&&Yn[1]=="type"?he+(Gn+"="+et+"&"):he+(Gn+"=redacted&")}}else he=null;else he=ne;return"XMLHTTP REQ ("+U+") [attempt "+X+"]: "+g+`
`+N+`
`+he})}function Yd(u,g,N,U,X,ne,he){u.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+X+"]: "+g+`
`+N+`
`+ne+" "+he})}function xt(u,g,N,U){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Qd(u,N)+(U?" "+U:"")})}function nn(u,g){u.info(function(){return"TIMEOUT: "+g})}kt.prototype.info=function(){};function Qd(u,g){if(!u.g)return g;if(!g)return null;try{var N=JSON.parse(g);if(N){for(u=0;u<N.length;u++)if(Array.isArray(N[u])){var U=N[u];if(!(2>U.length)){var X=U[1];if(Array.isArray(X)&&!(1>X.length)){var ne=X[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var he=1;he<X.length;he++)X[he]=""}}}}return Re(N)}catch{return g}}var Nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qa;function Ct(){}k(Ct,ke),Ct.prototype.g=function(){return new XMLHttpRequest},Ct.prototype.i=function(){return{}},qa=new Ct;function dt(u,g,N,U){this.j=u,this.i=g,this.l=N,this.R=U||1,this.U=new Z(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ha}function Ha(){this.i=null,this.g="",this.h=!1}var Ka={},Uo={};function Fo(u,g,N){u.L=1,u.v=Jd(Ki(g)),u.m=N,u.P=!0,Ga(u,null)}function Ga(u,g){u.F=Date.now(),Ps(u),u.A=Ki(u.v);var N=u.A,U=u.R;Array.isArray(U)||(U=[String(U)]),o_(N.i,"t",U),u.C=0,N=u.j.J,u.h=new Ha,u.g=I_(u.j,N?g:null,!u.m),0<u.O&&(u.M=new Q(m(u.Y,u,u.g),u.O)),g=u.U,N=u.g,U=u.ca;var X="readystatechange";Array.isArray(X)||(X&&(te[0]=X.toString()),X=te);for(var ne=0;ne<X.length;ne++){var he=$i(N,X[ne],U||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=u.H?L(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),St(),tn(u.i,u.u,u.A,u.l,u.R,u.m)}dt.prototype.ca=function(u){u=u.target;const g=this.M;g&&Gi(u)==3?g.j():this.Y(u)},dt.prototype.Y=function(u){try{if(u==this.g)e:{const Yn=Gi(this.g);var g=this.g.Ba();const nl=this.g.Z();if(!(3>Yn)&&(Yn!=3||this.g&&(this.h.h||this.g.oa()||f_(this.g)))){this.J||Yn!=4||g==7||(g==8||0>=nl?St(3):St(2)),Vo(this);var N=this.g.Z();this.X=N;t:if(Ya(this)){var U=f_(this.g);u="";var X=U.length,ne=Gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),Hi(this);var he="";break t}this.h.i=new a.TextDecoder}for(g=0;g<X;g++)this.h.h=!0,u+=this.h.i.decode(U[g],{stream:!(ne&&g==X-1)});U.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=N==200,Yd(this.i,this.u,this.A,this.l,this.R,Yn,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,Dn=this.g;if((Et=Dn.g?Dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Et)){var et=Et;break t}}et=null}if(N=et)xt(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zo(this,N);else{this.o=!1,this.s=3,Ye(12),ti(this),Hi(this);break e}}if(this.P){N=!0;let ni;for(;!this.J&&this.C<he.length;)if(ni=Lc(this,he),ni==Uo){Yn==4&&(this.s=4,Ye(14),N=!1),xt(this.i,this.l,null,"[Incomplete Response]");break}else if(ni==Ka){this.s=4,Ye(15),xt(this.i,this.l,he,"[Invalid Chunk]"),N=!1;break}else xt(this.i,this.l,ni,null),zo(this,ni);if(Ya(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yn!=4||he.length!=0||this.h.h||(this.s=1,Ye(16),N=!1),this.o=this.o&&N,!N)xt(this.i,this.l,he,"[Invalid Chunked Response]"),ti(this),Hi(this);else if(0<he.length&&!this.W){this.W=!0;var Gn=this.j;Gn.g==this&&Gn.ba&&!Gn.M&&(Gn.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Dm(Gn),Gn.M=!0,Ye(11))}}else xt(this.i,this.l,he,null),zo(this,he);Yn==4&&ti(this),this.o&&!this.J&&(Yn==4?__(this.j,this):(this.o=!1,Ps(this)))}else wR(this.g),N==400&&0<he.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),ti(this),Hi(this)}}}catch{}finally{}};function Ya(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Lc(u,g){var N=u.C,U=g.indexOf(`
`,N);return U==-1?Uo:(N=Number(g.substring(N,U)),isNaN(N)?Ka:(U+=1,U+N>g.length?Uo:(g=g.slice(U,U+N),u.C=U+N,g)))}dt.prototype.cancel=function(){this.J=!0,ti(this)};function Ps(u){u.S=Date.now()+u.I,Qa(u,u.I)}function Qa(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ms(m(u.ba,u),g)}function Vo(u){u.B&&(a.clearTimeout(u.B),u.B=null)}dt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(nn(this.i,this.A),this.L!=2&&(St(),Ye(17)),ti(this),this.s=2,Hi(this)):Qa(this,this.S-u)};function Hi(u){u.j.G==0||u.J||__(u.j,u)}function ti(u){Vo(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,je(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function zo(u,g){try{var N=u.j;if(N.G!=0&&(N.g==u||Wo(N.h,u))){if(!u.K&&Wo(N.h,u)&&N.G==3){try{var U=N.Da.g.parse(g)}catch{U=null}if(Array.isArray(U)&&U.length==3){var X=U;if(X[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<u.F)sh(N),rh(N);else break e;Lm(N),Ye(18)}}else N.za=X[1],0<N.za-N.T&&37500>X[2]&&N.F&&N.v==0&&!N.C&&(N.C=Ms(m(N.Za,N),6e3));if(1>=Ja(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else Ho(N,11)}else if((u.K||N.g==u)&&sh(N),!S(g))for(X=N.Da.g.parse(g),g=0;g<X.length;g++){let et=X[g];if(N.T=et[0],et=et[1],N.G==2)if(et[0]=="c"){N.K=et[1],N.ia=et[2];const Gn=et[3];Gn!=null&&(N.la=Gn,N.j.info("VER="+N.la));const Yn=et[4];Yn!=null&&(N.Aa=Yn,N.j.info("SVER="+N.Aa));const nl=et[5];nl!=null&&typeof nl=="number"&&0<nl&&(U=1.5*nl,N.L=U,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;const ni=u.g;if(ni){const ah=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ah){var ne=U.h;ne.g||ah.indexOf("spdy")==-1&&ah.indexOf("quic")==-1&&ah.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&($o(ne,ne.h),ne.h=null))}if(U.D){const Om=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Om&&(U.ya=Om,Rt(U.I,U.D,Om))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-u.F,N.j.info("Handshake RTT: "+N.R+"ms")),U=N;var he=u;if(U.qa=b_(U,U.J?U.ia:null,U.W),he.K){X1(U.h,he);var Et=he,Dn=U.L;Dn&&(Et.I=Dn),Et.B&&(Vo(Et),Ps(Et)),U.g=he}else w_(U);0<N.i.length&&ih(N)}else et[0]!="stop"&&et[0]!="close"||Ho(N,7);else N.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Ho(N,7):Pm(N):et[0]!="noop"&&N.l&&N.l.ta(et),N.v=0)}}St(4)}catch{}}var Dc=class{constructor(u,g){this.g=u,this.map=g}};function Za(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ja(u){return u.h?1:u.g?u.g.size:0}function Wo(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function $o(u,g){u.g?u.g.add(g):u.h=g}function X1(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Za.prototype.cancel=function(){if(this.i=J1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function J1(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const N of u.g.values())g=g.concat(N.D);return g}return I(u.i)}function rR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],N=u.length,U=0;U<N;U++)g.push(u[U]);return g}g=[],N=0;for(U in u)g[N++]=u[U];return g}function iR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var N=0;N<u;N++)g.push(N);return g}g=[],N=0;for(const U in u)g[N++]=U;return g}}}function e_(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var N=iR(u),U=rR(u),X=U.length,ne=0;ne<X;ne++)g.call(void 0,U[ne],N&&N[ne],u)}var t_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sR(u,g){if(u){u=u.split("&");for(var N=0;N<u.length;N++){var U=u[N].indexOf("="),X=null;if(0<=U){var ne=u[N].substring(0,U);X=u[N].substring(U+1)}else ne=u[N];g(ne,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function qo(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof qo){this.h=u.h,Zd(this,u.j),this.o=u.o,this.g=u.g,Xd(this,u.s),this.l=u.l;var g=u.i,N=new Bc;N.i=g.i,g.g&&(N.g=new Map(g.g),N.h=g.h),n_(this,N),this.m=u.m}else u&&(g=String(u).match(t_))?(this.h=!1,Zd(this,g[1]||"",!0),this.o=Oc(g[2]||""),this.g=Oc(g[3]||"",!0),Xd(this,g[4]),this.l=Oc(g[5]||"",!0),n_(this,g[6]||"",!0),this.m=Oc(g[7]||"")):(this.h=!1,this.i=new Bc(null,this.h))}qo.prototype.toString=function(){var u=[],g=this.j;g&&u.push(jc(g,r_,!0),":");var N=this.g;return(N||g=="file")&&(u.push("//"),(g=this.o)&&u.push(jc(g,r_,!0),"@"),u.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&u.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&u.push("/"),u.push(jc(N,N.charAt(0)=="/"?lR:aR,!0))),(N=this.i.toString())&&u.push("?",N),(N=this.m)&&u.push("#",jc(N,uR)),u.join("")};function Ki(u){return new qo(u)}function Zd(u,g,N){u.j=N?Oc(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Xd(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function n_(u,g,N){g instanceof Bc?(u.i=g,dR(u.i,u.h)):(N||(g=jc(g,cR)),u.i=new Bc(g,u.h))}function Rt(u,g,N){u.i.set(g,N)}function Jd(u){return Rt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oc(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function jc(u,g,N){return typeof u=="string"?(u=encodeURI(u).replace(g,oR),N&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function oR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var r_=/[#\/\?@]/g,aR=/[#\?:]/g,lR=/[#\?]/g,cR=/[#\?@]/g,uR=/#/g;function Bc(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Ls(u){u.g||(u.g=new Map,u.h=0,u.i&&sR(u.i,function(g,N){u.add(decodeURIComponent(g.replace(/\+/g," ")),N)}))}t=Bc.prototype,t.add=function(u,g){Ls(this),this.i=null,u=el(this,u);var N=this.g.get(u);return N||this.g.set(u,N=[]),N.push(g),this.h+=1,this};function i_(u,g){Ls(u),g=el(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function s_(u,g){return Ls(u),g=el(u,g),u.g.has(g)}t.forEach=function(u,g){Ls(this),this.g.forEach(function(N,U){N.forEach(function(X){u.call(g,X,U,this)},this)},this)},t.na=function(){Ls(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),N=[];for(let U=0;U<g.length;U++){const X=u[U];for(let ne=0;ne<X.length;ne++)N.push(g[U])}return N},t.V=function(u){Ls(this);let g=[];if(typeof u=="string")s_(this,u)&&(g=g.concat(this.g.get(el(this,u))));else{u=Array.from(this.g.values());for(let N=0;N<u.length;N++)g=g.concat(u[N])}return g},t.set=function(u,g){return Ls(this),this.i=null,u=el(this,u),s_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function o_(u,g,N){i_(u,g),0<N.length&&(u.i=null,u.g.set(el(u,g),I(N)),u.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var N=0;N<g.length;N++){var U=g[N];const ne=encodeURIComponent(String(U)),he=this.V(U);for(U=0;U<he.length;U++){var X=ne;he[U]!==""&&(X+="="+encodeURIComponent(String(he[U]))),u.push(X)}}return this.i=u.join("&")};function el(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function dR(u,g){g&&!u.j&&(Ls(u),u.i=null,u.g.forEach(function(N,U){var X=U.toLowerCase();U!=X&&(i_(this,U),o_(this,X,N))},u)),u.j=g}function hR(u,g){const N=new kt;if(a.Image){const U=new Image;U.onload=w(Ds,N,"TestLoadImage: loaded",!0,g,U),U.onerror=w(Ds,N,"TestLoadImage: error",!1,g,U),U.onabort=w(Ds,N,"TestLoadImage: abort",!1,g,U),U.ontimeout=w(Ds,N,"TestLoadImage: timeout",!1,g,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=u}else g(!1)}function fR(u,g){const N=new kt,U=new AbortController,X=setTimeout(()=>{U.abort(),Ds(N,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:U.signal}).then(ne=>{clearTimeout(X),ne.ok?Ds(N,"TestPingServer: ok",!0,g):Ds(N,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(X),Ds(N,"TestPingServer: error",!1,g)})}function Ds(u,g,N,U,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),U(N)}catch{}}function pR(){this.g=new _t}function mR(u,g,N){const U=N||"";try{e_(u,function(X,ne){let he=X;c(X)&&(he=Re(X)),g.push(U+ne+"="+encodeURIComponent(he))})}catch(X){throw g.push(U+"type="+encodeURIComponent("_badmap")),X}}function eh(u){this.l=u.Ub||null,this.j=u.eb||!1}k(eh,ke),eh.prototype.g=function(){return new th(this.l,this.j)},eh.prototype.i=function(u){return function(){return u}}({});function th(u,g){Fe.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(th,Fe),t=th.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Fc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fc(this)),this.g&&(this.readyState=3,Fc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;a_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function a_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Uc(this):Fc(this),this.readyState==3&&a_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Uc(this))},t.Qa=function(u){this.g&&(this.response=u,Uc(this))},t.ga=function(){this.g&&Uc(this)};function Uc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Fc(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var N=g.next();!N.done;)N=N.value,u.push(N[0]+": "+N[1]),N=g.next();return u.join(`\r
`)};function Fc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(th.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function l_(u){let g="";return G(u,function(N,U){g+=U,g+=":",g+=N,g+=`\r
`}),g}function Mm(u,g,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=l_(N),typeof u=="string"?N!=null&&encodeURIComponent(String(N)):Rt(u,g,N))}function rn(u){Fe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(rn,Fe);var gR=/^https?$/i,yR=["POST","PUT"];t=rn.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qa.g(),this.v=this.o?Wt(this.o):Wt(qa),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(ne){c_(this,ne);return}if(u=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var X in U)N.set(X,U[X]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ne of U.keys())N.set(ne,U.get(ne));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(N.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yR,g,void 0))||U||X||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,he]of N)this.g.setRequestHeader(ne,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{h_(this),this.u=!0,this.g.send(u),this.u=!1}catch(ne){c_(this,ne)}};function c_(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,u_(u),nh(u)}function u_(u){u.A||(u.A=!0,P(u,"complete"),P(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,P(this,"complete"),P(this,"abort"),nh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nh(this,!0)),rn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?d_(this):this.bb())},t.bb=function(){d_(this)};function d_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Gi(u)!=4||u.Z()!=2)){if(u.u&&Gi(u)==4)x(u.Ea,0,u);else if(P(u,"readystatechange"),Gi(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var N;if(!(N=g)){var U;if(U=he===0){var X=String(u.D).match(t_)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),U=!gR.test(X?X.toLowerCase():"")}N=U}if(N)P(u,"complete"),P(u,"success");else{u.m=6;try{var ne=2<Gi(u)?u.g.statusText:""}catch{ne=""}u.l=ne+" ["+u.Z()+"]",u_(u)}}finally{nh(u)}}}}function nh(u,g){if(u.g){h_(u);const N=u.g,U=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||P(u,"ready");try{N.onreadystatechange=U}catch{}}}function h_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Gi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Me(g)}};function f_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wR(u){const g={};u=(u.g&&2<=Gi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<u.length;U++){if(S(u[U]))continue;var N=$(u[U]);const X=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ne=g[X]||[];g[X]=ne,ne.push(N)}O(g,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vc(u,g,N){return N&&N.internalChannelParams&&N.internalChannelParams[u]||g}function p_(u){this.Aa=0,this.i=[],this.j=new kt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vc("baseRetryDelayMs",5e3,u),this.cb=Vc("retryDelaySeedMs",1e4,u),this.Wa=Vc("forwardChannelMaxRetries",2,u),this.wa=Vc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Za(u&&u.concurrentRequestLimit),this.Da=new pR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=p_.prototype,t.la=8,t.G=1,t.connect=function(u,g,N,U){Ye(0),this.W=u,this.H=g||{},N&&U!==void 0&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.I=b_(this,null,this.W),ih(this)};function Pm(u){if(m_(u),u.G==3){var g=u.U++,N=Ki(u.I);if(Rt(N,"SID",u.K),Rt(N,"RID",g),Rt(N,"TYPE","terminate"),zc(u,N),g=new dt(u,u.j,g),g.L=2,g.v=Jd(Ki(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=g.v,N=!0),N||(g.g=I_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ps(g)}E_(u)}function rh(u){u.g&&(Dm(u),u.g.cancel(),u.g=null)}function m_(u){rh(u),u.u&&(a.clearTimeout(u.u),u.u=null),sh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ih(u){if(!Xa(u.h)&&!u.s){u.s=!0;var g=u.Ga;M||q(),R||(M(),R=!0),F.add(g,u),u.B=0}}function vR(u,g){return Ja(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ms(m(u.Ga,u,g),x_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const X=new dt(this,this.j,u);let ne=this.o;if(this.S&&(ne?(ne=L(ne),W(ne,this.S)):ne=this.S),this.m!==null||this.O||(X.H=ne,ne=null),this.P)e:{for(var g=0,N=0;N<this.i.length;N++){t:{var U=this.i[N];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(g+=U,4096<g){g=N;break e}if(g===4096||N===this.i.length-1){g=N+1;break e}}g=1e3}else g=1e3;g=y_(this,X,g),N=Ki(this.I),Rt(N,"RID",u),Rt(N,"CVER",22),this.D&&Rt(N,"X-HTTP-Session-Id",this.D),zc(this,N),ne&&(this.O?g="headers="+encodeURIComponent(String(l_(ne)))+"&"+g:this.m&&Mm(N,this.m,ne)),$o(this.h,X),this.Ua&&Rt(N,"TYPE","init"),this.P?(Rt(N,"$req",g),Rt(N,"SID","null"),X.T=!0,Fo(X,N,null)):Fo(X,N,g),this.G=2}}else this.G==3&&(u?g_(this,u):this.i.length==0||Xa(this.h)||g_(this))};function g_(u,g){var N;g?N=g.l:N=u.U++;const U=Ki(u.I);Rt(U,"SID",u.K),Rt(U,"RID",N),Rt(U,"AID",u.T),zc(u,U),u.m&&u.o&&Mm(U,u.m,u.o),N=new dt(u,u.j,N,u.B+1),u.m===null&&(N.H=u.o),g&&(u.i=g.D.concat(u.i)),g=y_(u,N,1e3),N.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$o(u.h,N),Fo(N,U,g)}function zc(u,g){u.H&&G(u.H,function(N,U){Rt(g,U,N)}),u.l&&e_({},function(N,U){Rt(g,U,N)})}function y_(u,g,N){N=Math.min(u.i.length,N);var U=u.l?m(u.l.Na,u.l,u):null;e:{var X=u.i;let ne=-1;for(;;){const he=["count="+N];ne==-1?0<N?(ne=X[0].g,he.push("ofs="+ne)):ne=0:he.push("ofs="+ne);let Et=!0;for(let Dn=0;Dn<N;Dn++){let et=X[Dn].g;const Gn=X[Dn].map;if(et-=ne,0>et)ne=Math.max(0,X[Dn].g-100),Et=!1;else try{mR(Gn,he,"req"+et+"_")}catch{U&&U(Gn)}}if(Et){U=he.join("&");break e}}}return u=u.i.splice(0,N),g.D=u,U}function w_(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;M||q(),R||(M(),R=!0),F.add(g,u),u.v=0}}function Lm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ms(m(u.Fa,u),x_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,v_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ms(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),rh(this),v_(this))};function Dm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function v_(u){u.g=new dt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Ki(u.qa);Rt(g,"RID","rpc"),Rt(g,"SID",u.K),Rt(g,"AID",u.T),Rt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Rt(g,"TO",u.ja),Rt(g,"TYPE","xmlhttp"),zc(u,g),u.m&&u.o&&Mm(g,u.m,u.o),u.L&&(u.g.I=u.L);var N=u.g;u=u.ia,N.L=1,N.v=Jd(Ki(g)),N.m=null,N.P=!0,Ga(N,u)}t.Za=function(){this.C!=null&&(this.C=null,rh(this),Lm(this),Ye(19))};function sh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function __(u,g){var N=null;if(u.g==g){sh(u),Dm(u),u.g=null;var U=2}else if(Wo(u.h,g))N=g.D,X1(u.h,g),U=1;else return;if(u.G!=0){if(g.o)if(U==1){N=g.m?g.m.length:0,g=Date.now()-g.F;var X=u.B;U=Bo(),P(U,new Ht(U,N)),ih(u)}else w_(u);else if(X=g.s,X==3||X==0&&0<g.X||!(U==1&&vR(u,g)||U==2&&Lm(u)))switch(N&&0<N.length&&(g=u.h,g.i=g.i.concat(N)),X){case 1:Ho(u,5);break;case 4:Ho(u,10);break;case 3:Ho(u,6);break;default:Ho(u,2)}}}function x_(u,g){let N=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(N*=2),N*g}function Ho(u,g){if(u.j.info("Error code "+g),g==2){var N=m(u.fb,u),U=u.Xa;const X=!U;U=new qo(U||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zd(U,"https"),Jd(U),X?hR(U.toString(),N):fR(U.toString(),N)}else Ye(2);u.G=0,u.l&&u.l.sa(g),E_(u),m_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function E_(u){if(u.G=0,u.ka=[],u.l){const g=J1(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function b_(u,g,N){var U=N instanceof qo?Ki(N):new qo(N);if(U.g!="")g&&(U.g=g+"."+U.g),Xd(U,U.s);else{var X=a.location;U=X.protocol,g=g?g+"."+X.hostname:X.hostname,X=+X.port;var ne=new qo(null);U&&Zd(ne,U),g&&(ne.g=g),X&&Xd(ne,X),N&&(ne.l=N),U=ne}return N=u.D,g=u.ya,N&&g&&Rt(U,N,g),Rt(U,"VER",u.la),zc(u,U),U}function I_(u,g,N){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new rn(new eh({eb:N})):new rn(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function S_(){}t=S_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function oh(){}oh.prototype.g=function(u,g){return new kr(u,g)};function kr(u,g){Fe.call(this),this.g=new p_(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!S(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!S(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new tl(this)}k(kr,Fe),kr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kr.prototype.close=function(){Pm(this.g)},kr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var N={};N.__data__=u,u=N}else this.u&&(N={},N.__data__=Re(u),u=N);g.i.push(new Dc(g.Ya++,u)),g.G==3&&ih(g)},kr.prototype.N=function(){this.g.l=null,delete this.j,Pm(this.g),delete this.g,kr.aa.N.call(this)};function k_(u){Bt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const N in g){u=N;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}k(k_,Bt);function T_(){$a.call(this),this.status=1}k(T_,$a);function tl(u){this.g=u}k(tl,S_),tl.prototype.ua=function(){P(this.g,"a")},tl.prototype.ta=function(u){P(this.g,new k_(u))},tl.prototype.sa=function(u){P(this.g,new T_)},tl.prototype.ra=function(){P(this.g,"b")},oh.prototype.createWebChannel=oh.prototype.g,kr.prototype.send=kr.prototype.o,kr.prototype.open=kr.prototype.m,kr.prototype.close=kr.prototype.close,HT=function(){return new oh},qT=function(){return Bo()},$T=wt,uy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nt.NO_ERROR=0,Nt.TIMEOUT=8,Nt.HTTP_ERROR=6,sf=Nt,Kt.COMPLETE="complete",WT=Kt,Mc.EventType=It,It.OPEN="a",It.CLOSE="b",It.ERROR="c",It.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,hu=Mc,rn.prototype.listenOnce=rn.prototype.L,rn.prototype.getLastError=rn.prototype.Ka,rn.prototype.getLastErrorCode=rn.prototype.Ba,rn.prototype.getStatus=rn.prototype.Z,rn.prototype.getResponseJson=rn.prototype.Oa,rn.prototype.getResponseText=rn.prototype.oa,rn.prototype.send=rn.prototype.ea,rn.prototype.setWithCredentials=rn.prototype.Ha,zT=rn}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const bE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ir=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new av("@firebase/firestore");function Zc(){return Sa.logLevel}function we(t,...e){if(Sa.logLevel<=Ze.DEBUG){const n=e.map(xv);Sa.debug(`Firestore (${xc}): ${t}`,...n)}}function bs(t,...e){if(Sa.logLevel<=Ze.ERROR){const n=e.map(xv);Sa.error(`Firestore (${xc}): ${t}`,...n)}}function Ql(t,...e){if(Sa.logLevel<=Ze.WARN){const n=e.map(xv);Sa.warn(`Firestore (${xc}): ${t}`,...n)}}function xv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: `+t;throw bs(e),new Error(e)}function mt(t,e){t||Pe()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ir.UNAUTHENTICATED))}shutdown(){}}class Q3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z3{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){mt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ps;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ps,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ps)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string"),new KT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string"),new ir(e)}}class X3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class J3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new X3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ej{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){mt(this.o===void 0);const r=s=>{s.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,we("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(mt(typeof n.token=="string"),this.R=n.token,new ej(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function Zl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return an.fromMillis(Date.now())}static fromDate(e){return an.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new an(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Le(e)}static min(){return new Le(new an(0,0))}static max(){return new Le(new an(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(),r===void 0?r=e.length-n:r>e.length-n&&Pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Dt extends sd{construct(e,n,r){return new Dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Dt(n)}static emptyPath(){return new Dt([])}}const rj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends sd{construct(e,n,r){return new Wn(e,n,r)}static isValidIdentifier(e){return rj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(n)}static emptyPath(){return new Wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(Dt.fromString(e))}static fromName(e){return new be(Dt.fromString(e).popFirst(5))}static empty(){return new be(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new Dt(e.slice()))}}function ij(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new an(n+1,0):new an(n,r));return new To(i,be.empty(),e)}function sj(t){return new To(t.readTime,t.key,-1)}class To{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new To(Le.min(),be.empty(),-1)}static max(){return new To(Le.max(),be.empty(),-1)}}function oj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==aj)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,r)=>{n(e)})}static reject(e){return new oe((n,r)=>{r(e)})}static waitFor(e){return new oe((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next(i=>i?oe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new oe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new oe((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function cj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ev.oe=-1;function Wp(t){return t==null}function Zf(t){return t===0&&1/t==-1/0}function uj(t){return typeof t=="number"&&Number.isInteger(t)&&!Zf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ec(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Th(this.root,e,this.comparator,!1)}getReverseIterator(){return new Th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Th(this.root,e,this.comparator,!0)}}class Th{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Fn.RED,this.left=i??Fn.EMPTY,this.right=s??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Fn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Fn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SE(this.data.getIterator())}getIteratorFrom(e){return new SE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qn(this.comparator);return n.data=e,n}}class SE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new di([])}unionWith(e){let n=new qn(Wn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new QT("Invalid base64 string: "+s):s}}(e);return new Kn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const dj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(t){if(mt(!!t),typeof t=="string"){let e=0;const n=dj.exec(t);if(mt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dn(t.seconds),nanos:dn(t.nanos)}}function dn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ka(t){return typeof t=="string"?Kn.fromBase64String(t):Kn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Iv(t){const e=t.mapValue.fields.__previous_value__;return bv(e)?Iv(e):e}function od(t){const e=Ao(t.mapValue.fields.__local_write_time__.timestampValue);return new an(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ad{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ad("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ad&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bv(t)?4:pj(t)?9007199254740991:fj(t)?10:11:Pe()}function Li(t,e){if(t===e)return!0;const n=Ta(t);if(n!==Ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return od(t).isEqual(od(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ao(i.timestampValue),a=Ao(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ka(i.bytesValue).isEqual(ka(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dn(i.geoPointValue.latitude)===dn(s.geoPointValue.latitude)&&dn(i.geoPointValue.longitude)===dn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dn(i.integerValue)===dn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dn(i.doubleValue),a=dn(s.doubleValue);return o===a?Zf(o)===Zf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Zl(t.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IE(o)!==IE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Li(o[l],a[l])))return!1;return!0}(t,e);default:return Pe()}}function ld(t,e){return(t.values||[]).find(n=>Li(n,e))!==void 0}function Xl(t,e){if(t===e)return 0;const n=Ta(t),r=Ta(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dn(s.integerValue||s.doubleValue),l=dn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return kE(t.timestampValue,e.timestampValue);case 4:return kE(od(t),od(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ka(s),l=ka(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=rt(a[c],l[c]);if(d!==0)return d}return rt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=rt(dn(s.latitude),dn(o.latitude));return a!==0?a:rt(dn(s.longitude),dn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return TE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},m=o.fields||{},w=(a=h.value)===null||a===void 0?void 0:a.arrayValue,k=(l=m.value)===null||l===void 0?void 0:l.arrayValue,I=rt(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=k==null?void 0:k.values)===null||d===void 0?void 0:d.length)||0);return I!==0?I:TE(w,k)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ah.mapValue&&o===Ah.mapValue)return 0;if(s===Ah.mapValue)return 1;if(o===Ah.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=rt(l[h],d[h]);if(m!==0)return m;const w=Xl(a[l[h]],c[d[h]]);if(w!==0)return w}return rt(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Pe()}}function kE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=Ao(t),r=Ao(e),i=rt(n.seconds,r.seconds);return i!==0?i:rt(n.nanos,r.nanos)}function TE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Xl(n[i],r[i]);if(s)return s}return rt(n.length,r.length)}function Jl(t){return dy(t)}function dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ao(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ka(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=dy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${dy(n.fields[o])}`;return i+"}"}(t.mapValue):Pe()}function AE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hy(t){return!!t&&"integerValue"in t}function Sv(t){return!!t&&"arrayValue"in t}function NE(t){return!!t&&"nullValue"in t}function CE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function of(t){return!!t&&"mapValue"in t}function fj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Au(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ec(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Au(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Au(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!of(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(n)}setAll(e){let n=Wn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Au(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());of(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];of(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ec(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hr(Au(this.value))}}function ZT(t){const e=[];return Ec(t.fields,(n,r)=>{const i=new Wn([n]);if(of(r)){const s=ZT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new or(e,0,Le.min(),Le.min(),Le.min(),Hr.empty(),0)}static newFoundDocument(e,n,r,i){return new or(e,1,n,Le.min(),r,i,0)}static newNoDocument(e,n){return new or(e,2,n,Le.min(),Le.min(),Hr.empty(),0)}static newUnknownDocument(e,n){return new or(e,3,n,Le.min(),Le.min(),Hr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n){this.position=e,this.inclusive=n}}function RE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=be.comparator(be.fromName(o.referenceValue),n.key):r=Xl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ME(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Li(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n="asc"){this.field=e,this.dir=n}}function mj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XT=class{};class _n extends XT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yj(e,n,r):n==="array-contains"?new _j(e,r):n==="in"?new xj(e,r):n==="not-in"?new Ej(e,r):n==="array-contains-any"?new bj(e,r):new _n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wj(e,r):new vj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Xl(n,this.value)):n!==null&&Ta(this.value)===Ta(n)&&this.matchesComparison(Xl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends XT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new vi(e,n)}matches(e){return JT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function JT(t){return t.op==="and"}function e2(t){return gj(t)&&JT(t)}function gj(t){for(const e of t.filters)if(e instanceof vi)return!1;return!0}function fy(t){if(t instanceof _n)return t.field.canonicalString()+t.op.toString()+Jl(t.value);if(e2(t))return t.filters.map(e=>fy(e)).join(",");{const e=t.filters.map(n=>fy(n)).join(",");return`${t.op}(${e})`}}function t2(t,e){return t instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.field.isEqual(i.field)&&Li(r.value,i.value)}(t,e):t instanceof vi?function(r,i){return i instanceof vi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&t2(o,i.filters[a]),!0):!1}(t,e):void Pe()}function n2(t){return t instanceof _n?function(n){return`${n.field.canonicalString()} ${n.op} ${Jl(n.value)}`}(t):t instanceof vi?function(n){return n.op.toString()+" {"+n.getFilters().map(n2).join(" ,")+"}"}(t):"Filter"}class yj extends _n{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class wj extends _n{constructor(e,n){super(e,"in",n),this.keys=r2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vj extends _n{constructor(e,n){super(e,"not-in",n),this.keys=r2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class _j extends _n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sv(n)&&ld(n.arrayValue,this.value)}}class xj extends _n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ld(this.value.arrayValue,n)}}class Ej extends _n{constructor(e,n){super(e,"not-in",n)}matches(e){if(ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ld(this.value.arrayValue,n)}}class bj extends _n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ld(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function PE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ij(t,e,n,r,i,s,o)}function kv(t){const e=De(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jl(r)).join(",")),e.ue=n}return e.ue}function Tv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ME(t.startAt,e.startAt)&&ME(t.endAt,e.endAt)}function py(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Sj(t,e,n,r,i,s,o,a){return new bc(t,e,n,r,i,s,o,a)}function Av(t){return new bc(t)}function LE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i2(t){return t.collectionGroup!==null}function Nu(t){const e=De(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qn(Wn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new cd(s,r))}),n.has(Wn.keyField().canonicalString())||e.ce.push(new cd(Wn.keyField(),r))}return e.ce}function Mi(t){const e=De(t);return e.le||(e.le=kj(e,Nu(t))),e.le}function kj(t,e){if(t.limitType==="F")return PE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new cd(i.field,s)});const n=t.endAt?new Xf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xf(t.startAt.position,t.startAt.inclusive):null;return PE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function my(t,e){const n=t.filters.concat([e]);return new bc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jf(t,e,n){return new bc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $p(t,e){return Tv(Mi(t),Mi(e))&&t.limitType===e.limitType}function s2(t){return`${kv(Mi(t))}|lt:${t.limitType}`}function al(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>n2(i)).join(", ")}]`),Wp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jl(i)).join(",")),`Target(${r})`}(Mi(t))}; limitType=${t.limitType})`}function qp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Nu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=RE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Nu(r),i)||r.endAt&&!function(o,a,l){const c=RE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Nu(r),i))}(t,e)}function Tj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function o2(t){return(e,n)=>{let r=!1;for(const i of Nu(t)){const s=Aj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Aj(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Xl(l,c):Pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ec(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return YT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=new Jt(be.comparator);function Is(){return Nj}const a2=new Jt(be.comparator);function fu(...t){let e=a2;for(const n of t)e=e.insert(n.key,n);return e}function l2(t){let e=a2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function sa(){return Cu()}function c2(){return Cu()}function Cu(){return new Ic(t=>t.toString(),(t,e)=>t.isEqual(e))}const Cj=new Jt(be.comparator),Rj=new qn(be.comparator);function Qe(...t){let e=Rj;for(const n of t)e=e.add(n);return e}const Mj=new qn(rt);function Pj(){return Mj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zf(e)?"-0":e}}function u2(t){return{integerValue:""+t}}function Lj(t,e){return uj(e)?u2(e):Nv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this._=void 0}}function Dj(t,e,n){return t instanceof ud?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bv(s)&&(s=Iv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof dd?h2(t,e):t instanceof hd?f2(t,e):function(i,s){const o=d2(i,s),a=DE(o)+DE(i.Pe);return hy(o)&&hy(i.Pe)?u2(a):Nv(i.serializer,a)}(t,e)}function Oj(t,e,n){return t instanceof dd?h2(t,e):t instanceof hd?f2(t,e):n}function d2(t,e){return t instanceof ep?function(r){return hy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ud extends Hp{}class dd extends Hp{constructor(e){super(),this.elements=e}}function h2(t,e){const n=p2(e);for(const r of t.elements)n.some(i=>Li(i,r))||n.push(r);return{arrayValue:{values:n}}}class hd extends Hp{constructor(e){super(),this.elements=e}}function f2(t,e){let n=p2(e);for(const r of t.elements)n=n.filter(i=>!Li(i,r));return{arrayValue:{values:n}}}class ep extends Hp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function DE(t){return dn(t.integerValue||t.doubleValue)}function p2(t){return Sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.field=e,this.transform=n}}function Bj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof dd&&i instanceof dd||r instanceof hd&&i instanceof hd?Zl(r.elements,i.elements,Li):r instanceof ep&&i instanceof ep?Li(r.Pe,i.Pe):r instanceof ud&&i instanceof ud}(t.transform,e.transform)}class Uj{constructor(e,n){this.version=e,this.transformResults=n}}class ms{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function af(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kp{}function m2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y2(t.key,ms.none()):new Bd(t.key,t.data,ms.none());{const n=t.data,r=Hr.empty();let i=new qn(Wn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ja(t.key,r,new di(i.toArray()),ms.none())}}function Fj(t,e,n){t instanceof Bd?function(i,s,o){const a=i.value.clone(),l=jE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ja?function(i,s,o){if(!af(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=jE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(g2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ru(t,e,n,r){return t instanceof Bd?function(s,o,a,l){if(!af(s.precondition,o))return a;const c=s.value.clone(),d=BE(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ja?function(s,o,a,l){if(!af(s.precondition,o))return a;const c=BE(s.fieldTransforms,l,o),d=o.data;return d.setAll(g2(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return af(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Vj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=d2(r.transform,i||null);s!=null&&(n===null&&(n=Hr.empty()),n.set(r.field,s))}return n||null}function OE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zl(r,i,(s,o)=>Bj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bd extends Kp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ja extends Kp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function g2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jE(t,e,n){const r=new Map;mt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Oj(o,a,n[i]))}return r}function BE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Dj(s,o,e))}return r}class y2 extends Kp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zj extends Kp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Fj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ru(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=c2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=m2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(n,r)=>OE(n,r))&&Zl(this.baseMutations,e.baseMutations,(n,r)=>OE(n,r))}}class Cv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){mt(e.mutations.length===r.length);let i=function(){return Cj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Cv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,Xe;function Hj(t){switch(t){default:return Pe();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function w2(t){if(t===void 0)return bs("GRPC error has no .code"),re.UNKNOWN;switch(t){case mn.OK:return re.OK;case mn.CANCELLED:return re.CANCELLED;case mn.UNKNOWN:return re.UNKNOWN;case mn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case mn.INTERNAL:return re.INTERNAL;case mn.UNAVAILABLE:return re.UNAVAILABLE;case mn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case mn.NOT_FOUND:return re.NOT_FOUND;case mn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case mn.ABORTED:return re.ABORTED;case mn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case mn.DATA_LOSS:return re.DATA_LOSS;default:return Pe()}}(Xe=mn||(mn={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new fa([4294967295,4294967295],0);function UE(t){const e=Kj().encode(t),n=new VT;return n.update(e),new Uint8Array(n.digest())}function FE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fa([n,r],0),new fa([i,s],0)]}class Rv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pu(`Invalid padding: ${n}`);if(r<0)throw new pu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=fa.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(fa.fromNumber(r)));return i.compare(Gj)===1&&(i=new fa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=UE(e),[r,i]=FE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Rv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=UE(e),[r,i]=FE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ud.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gp(Le.min(),i,new Jt(rt),Is(),Qe())}}class Ud{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ud(r,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class v2{constructor(e,n){this.targetId=e,this.me=n}}class _2{constructor(e,n,r=Kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class VE{constructor(){this.fe=0,this.ge=WE(),this.pe=Kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qe(),n=Qe(),r=Qe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pe()}}),new Ud(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=WE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Yj{constructor(e){this.Le=e,this.Be=new Map,this.ke=Is(),this.qe=zE(),this.Qe=new Jt(rt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(py(s))if(r===0){const o=new be(s.path);this.Ue(n,o,or.newNoDocument(o,Le.min()))}else mt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ka(r).toUint8Array()}catch(l){if(l instanceof QT)return Ql("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rv(o,i,s)}catch(l){return Ql(l instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&py(a.target)){const l=new be(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,or.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Qe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Gp(e,n,this.Qe,this.ke,r);return this.ke=Is(),this.qe=zE(),this.Qe=new Jt(rt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new VE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qn(rt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new VE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function zE(){return new Jt(be.comparator)}function WE(){return new Jt(be.comparator)}const Qj={asc:"ASCENDING",desc:"DESCENDING"},Zj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xj={and:"AND",or:"OR"};class Jj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gy(t,e){return t.useProto3Json||Wp(e)?e:{value:e}}function tp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function e6(t,e){return tp(t,e.toTimestamp())}function Pi(t){return mt(!!t),Le.fromTimestamp(function(n){const r=Ao(n);return new an(r.seconds,r.nanos)}(t))}function Mv(t,e){return yy(t,e).canonicalString()}function yy(t,e){const n=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function E2(t){const e=Dt.fromString(t);return mt(T2(e)),e}function wy(t,e){return Mv(t.databaseId,e.path)}function yg(t,e){const n=E2(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(I2(n))}function b2(t,e){return Mv(t.databaseId,e)}function t6(t){const e=E2(t);return e.length===4?Dt.emptyPath():I2(e)}function vy(t){return new Dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I2(t){return mt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $E(t,e,n){return{name:wy(t,e),fields:n.value.mapValue.fields}}function n6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(mt(d===void 0||typeof d=="string"),Kn.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Kn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?re.UNKNOWN:w2(c.code);return new ge(d,c.message||"")}(o);n=new _2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yg(t,r.document.name),s=Pi(r.document.updateTime),o=r.document.createTime?Pi(r.document.createTime):Le.min(),a=new Hr({mapValue:{fields:r.document.fields}}),l=or.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new lf(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yg(t,r.document),s=r.readTime?Pi(r.readTime):Le.min(),o=or.newNoDocument(i,s),a=r.removedTargetIds||[];n=new lf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yg(t,r.document),s=r.removedTargetIds||[];n=new lf([],s,i,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new qj(i,s),a=r.targetId;n=new v2(a,o)}}return n}function r6(t,e){let n;if(e instanceof Bd)n={update:$E(t,e.key,e.value)};else if(e instanceof y2)n={delete:wy(t,e.key)};else if(e instanceof ja)n={update:$E(t,e.key,e.data),updateMask:h6(e.fieldMask)};else{if(!(e instanceof zj))return Pe();n={verify:wy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ud)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ep)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:e6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe()}(t,e.precondition)),n}function i6(t,e){return t&&t.length>0?(mt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Pi(i.updateTime):Pi(s);return o.isEqual(Le.min())&&(o=Pi(s)),new Uj(o,i.transformResults||[])}(n,e))):[]}function s6(t,e){return{documents:[b2(t,e.path)]}}function o6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=b2(t,i);const s=function(c){if(c.length!==0)return k2(vi.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:ll(m.field),direction:c6(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function a6(t){let e=t6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){mt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=S2(h);return m instanceof vi&&e2(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(k){return new cd(cl(k.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Wp(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,w=h.values||[];return new Xf(w,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,w=h.values||[];return new Xf(w,m)}(n.endAt)),Sj(e,i,o,s,a,"F",l,c)}function l6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cl(n.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=cl(n.unaryFilter.field);return _n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=cl(n.unaryFilter.field);return _n.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cl(n.unaryFilter.field);return _n.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(t):t.fieldFilter!==void 0?function(n){return _n.create(cl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vi.create(n.compositeFilter.filters.map(r=>S2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe()}}(n.compositeFilter.op))}(t):Pe()}function c6(t){return Qj[t]}function u6(t){return Zj[t]}function d6(t){return Xj[t]}function ll(t){return{fieldPath:t.canonicalString()}}function cl(t){return Wn.fromServerFormat(t.fieldPath)}function k2(t){return t instanceof _n?function(n){if(n.op==="=="){if(CE(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NAN"}};if(NE(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(CE(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NAN"}};if(NE(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(n.field),op:u6(n.op),value:n.value}}}(t):t instanceof vi?function(n){const r=n.getFilters().map(i=>k2(i));return r.length===1?r[0]:{compositeFilter:{op:d6(n.op),filters:r}}}(t):Pe()}function h6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function T2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,r,i,s=Le.min(),o=Le.min(),a=Kn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new io(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.ct=e}}function p6(t){const e=a6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.un=new g6}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(To.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(To.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class g6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qn(Dt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qn(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ec(0)}static kn(){return new ec(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(){this.changes=new Ic(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ru(r.mutation,i,di.empty(),an.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Qe()){const i=sa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=fu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=sa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Qe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Is();const o=Cu(),a=function(){return Cu()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ja)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ru(d.mutation,c,d.mutation.getFieldMask(),an.now())):o.set(c.key,di.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new w6(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Cu();let i=new Jt((o,a)=>o-a),s=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||di.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||Qe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=c2();d.forEach(m=>{if(!s.has(m)){const w=m2(n.get(m),r.get(m));w!==null&&h.set(m,w),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return oe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):oe.resolve(sa());let a=-1,l=s;return o.next(c=>oe.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?oe.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Qe())).next(d=>({batchId:a,changes:l2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let i=fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=fu();return this.indexManager.getCollectionParents(e,s).next(a=>oe.forEach(a,l=>{const c=function(h,m){return new bc(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,or.newInvalidDocument(d)))});let a=fu();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Ru(d.mutation,c,di.empty(),an.now()),qp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pi(i.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:p6(i.bundledQuery),readTime:Pi(i.readTime)}}(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(){this.overlays=new Jt(be.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sa();return oe.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),oe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const i=sa(),s=n.length+1,o=new be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Jt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=sa(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=sa(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return oe.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $j(n,r));let s=this.Ir.get(n);s===void 0&&(s=Qe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.sessionToken=Kn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Tr=new qn(An.Er),this.dr=new qn(An.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new An(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new An(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new be(new Dt([])),r=new An(n,e),i=new An(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new be(new Dt([])),r=new An(n,e),i=new An(n,e+1);let s=Qe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new An(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class An{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return be.comparator(e.key,n.key)||rt(e.wr,n.wr)}static Ar(e,n){return rt(e.wr,n.wr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new qn(An.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Wj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new An(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new An(n,0),i=new An(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qn(rt);return n.forEach(i=>{const s=new An(i,0),o=new An(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const o=new An(new be(s),0);let a=new qn(rt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),oe.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){mt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(n.mutations,i=>{const s=new An(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new An(n,0),i=this.br.firstAfterOrEqual(r);return oe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.Mr=e,this.docs=function(){return new Jt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():or.newInvalidDocument(n))}getEntries(e,n){let r=Is();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():or.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Is();const o=n.path,a=new be(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||oj(sj(d),r)<=0||(i.has(d.key)||qp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Pe()}Or(e,n){return oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new S6(this)}getSize(e){return oe.resolve(this.size)}}class S6 extends y6{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.persistence=e,this.Nr=new Ic(n=>kv(n),Tv),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pv,this.targetCount=0,this.kr=ec.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ec(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ev(0),this.Kr=!1,this.Kr=!0,this.$r=new E6,this.referenceDelegate=e(this),this.Ur=new k6(this),this.indexManager=new m6,this.remoteDocumentCache=function(i){return new I6(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new f6(n),this.Gr=new _6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new x6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new b6(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const i=new A6(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return oe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class A6 extends lj{constructor(e){super(),this.currentSequenceNumber=e}}class Lv{constructor(e){this.persistence=e,this.Jr=new Pv,this.Yr=null}static Zr(e){return new Lv(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,r=>{const i=be.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Qe(),i=Qe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Dv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return pL()?8:cj(cr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new N6;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Zc()<=Ze.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(Zc()<=Ze.DEBUG&&we("QueryEngine","Query:",al(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zc()<=Ze.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):oe.resolve())}Yi(e,n){if(LE(n))return oe.resolve(null);let r=Mi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Jf(n,null,"F"),r=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Qe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Jf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return LE(n)||i.isEqual(Le.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?oe.resolve(null):(Zc()<=Ze.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),al(n)),this.rs(e,o,n,ij(i,-1)).next(a=>a))})}ts(e,n){let r=new qn(o2(e));return n.forEach((i,s)=>{qp(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Zc()<=Ze.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",al(n)),this.Ji.getDocumentsMatchingQuery(e,n,To.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Jt(rt),this._s=new Ic(s=>kv(s),Tv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v6(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function M6(t,e,n,r){return new R6(t,e,n,r)}async function A2(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Qe();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function P6(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let w=oe.resolve();return m.forEach(k=>{w=w.next(()=>d.getEntry(l,k)).next(I=>{const _=c.docVersions.get(k);mt(_!==null),I.version.compareTo(_)<0&&(h.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),d.addEntry(I)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Qe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function N2(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function L6(t,e){const n=De(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let w=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(Kn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),i=i.insert(h,w),function(I,_,T){return I.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,w,d)&&a.push(n.Ur.updateTargetData(s,w))});let l=Is(),c=Qe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(D6(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Le.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return oe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function D6(t,e,n){let r=Qe(),i=Qe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Is();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):we("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function O6(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function j6(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new io(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function _y(t,e,n){const r=De(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!jd(o))throw o;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function qE(t,e,n){const r=De(t);let i=Le.min(),s=Qe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=De(l),m=h._s.get(d);return m!==void 0?oe.resolve(h.os.get(m)):h.Ur.getTargetData(c,d)}(r,o,Mi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Le.min(),n?s:Qe())).next(a=>(B6(r,Tj(e),a),{documents:a,Ts:s})))}function B6(t,e,n){let r=t.us.get(e)||Le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class HE{constructor(){this.activeTargetIds=Pj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U6{constructor(){this.so=new HE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new HE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function wg(){return Nh===null?Nh=function(){return 268435456+Math.round(2147483648*Math.random())}():Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class W6 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=wg(),l=this.xo(n,r.toUriEncodedString());we("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(d=>(we("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Ql("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=V6[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=wg();return new Promise((o,a)=>{const l=new zT;l.setWithCredentials(!0),l.listenOnce(WT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case sf.NO_ERROR:const d=l.getResponseJson();we(Xn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case sf.TIMEOUT:we(Xn,`RPC '${e}' ${s} timed out`),a(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const h=l.getStatus();if(we(Xn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m==null?void 0:m.error;if(w&&w.status&&w.message){const k=function(_){const T=_.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(T)>=0?T:re.UNKNOWN}(w.status);a(new ge(k,w.message))}else a(new ge(re.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{we(Xn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);we(Xn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=wg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=HT(),a=qT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");we(Xn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,w=!1;const k=new z6({Io:_=>{w?we(Xn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(m||(we(Xn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),we(Xn,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},To:()=>h.close()}),I=(_,T,S)=>{_.listen(T,E=>{try{S(E)}catch(j){setTimeout(()=>{throw j},0)}})};return I(h,hu.EventType.OPEN,()=>{w||(we(Xn,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),I(h,hu.EventType.CLOSE,()=>{w||(w=!0,we(Xn,`RPC '${e}' stream ${i} transport closed`),k.So())}),I(h,hu.EventType.ERROR,_=>{w||(w=!0,Ql(Xn,`RPC '${e}' stream ${i} transport errored:`,_),k.So(new ge(re.UNAVAILABLE,"The operation could not be completed")))}),I(h,hu.EventType.MESSAGE,_=>{var T;if(!w){const S=_.data[0];mt(!!S);const E=S,j=E.error||((T=E[0])===null||T===void 0?void 0:T.error);if(j){we(Xn,`RPC '${e}' stream ${i} received error:`,j);const K=j.status;let G=function(B){const W=mn[B];if(W!==void 0)return w2(W)}(K),O=j.message;G===void 0&&(G=re.INTERNAL,O="Unknown error status: "+K+" with message "+j.message),w=!0,k.So(new ge(G,O)),h.close()}else we(Xn,`RPC '${e}' stream ${i} received:`,S),k.bo(S)}}),I(a,$T.STAT_EVENT,_=>{_.stat===uy.PROXY?we(Xn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===uy.NOPROXY&&we(Xn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function vg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t){return new Jj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new C2(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(bs(n.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ge(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $6 extends R2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=n6(this.serializer,e),r=function(s){if(!("targetChange"in s))return Le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?Pi(o.readTime):Le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=vy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=py(l)?{documents:s6(s,l)}:{query:o6(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=x2(s,o.resumeToken);const c=gy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=tp(s,o.snapshotVersion.toTimestamp());const c=gy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=l6(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=vy(this.serializer),n.removeTarget=e,this.a_(n)}}class q6 extends R2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return mt(!!e.streamToken),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=i6(e.writeResults,e.commitTime),r=Pi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=vy(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>r6(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,yy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(re.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,yy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(re.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class K6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bs(n),this.D_=!1):we("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ba(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=De(l);c.L_.add(4),await Fd(c),c.q_.set("Unknown"),c.L_.delete(4),await Qp(c)}(this))})}),this.q_=new K6(r,i)}}async function Qp(t){if(Ba(t))for(const e of t.B_)await e(!0)}async function Fd(t){for(const e of t.B_)await e(!1)}function M2(t,e){const n=De(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Uv(n)?Bv(n):Sc(n).r_()&&jv(n,e))}function Ov(t,e){const n=De(t),r=Sc(n);n.N_.delete(e),r.r_()&&P2(n,e),n.N_.size===0&&(r.r_()?r.o_():Ba(n)&&n.q_.set("Unknown"))}function jv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sc(t).A_(e)}function P2(t,e){t.Q_.xe(e),Sc(t).R_(e)}function Bv(t){t.Q_=new Yj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Sc(t).start(),t.q_.v_()}function Uv(t){return Ba(t)&&!Sc(t).n_()&&t.N_.size>0}function Ba(t){return De(t).L_.size===0}function L2(t){t.Q_=void 0}async function Y6(t){t.q_.set("Online")}async function Q6(t){t.N_.forEach((e,n)=>{jv(t,e)})}async function Z6(t,e){L2(t),Uv(t)?(t.q_.M_(e),Bv(t)):t.q_.set("Unknown")}async function X6(t,e,n){if(t.q_.set("Online"),e instanceof _2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await np(t,r)}else if(e instanceof lf?t.Q_.Ke(e):e instanceof v2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Le.min()))try{const r=await N2(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Kn.EMPTY_BYTE_STRING,d.snapshotVersion)),P2(s,l);const h=new io(d.target,l,c,d.sequenceNumber);jv(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){we("RemoteStore","Failed to raise snapshot:",r),await np(t,r)}}async function np(t,e,n){if(!jd(e))throw e;t.L_.add(1),await Fd(t),t.q_.set("Offline"),n||(n=()=>N2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Qp(t)})}function D2(t,e){return e().catch(n=>np(t,n,e))}async function Zp(t){const e=De(t),n=No(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;J6(e);)try{const i=await O6(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,eB(e,i)}catch(i){await np(e,i)}O2(e)&&j2(e)}function J6(t){return Ba(t)&&t.O_.length<10}function eB(t,e){t.O_.push(e);const n=No(t);n.r_()&&n.V_&&n.m_(e.mutations)}function O2(t){return Ba(t)&&!No(t).n_()&&t.O_.length>0}function j2(t){No(t).start()}async function tB(t){No(t).p_()}async function nB(t){const e=No(t);for(const n of t.O_)e.m_(n.mutations)}async function rB(t,e,n){const r=t.O_.shift(),i=Cv.from(r,e,n);await D2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Zp(t)}async function iB(t,e){e&&No(t).V_&&await async function(r,i){if(function(o){return Hj(o)&&o!==re.ABORTED}(i.code)){const s=r.O_.shift();No(r).s_(),await D2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Zp(r)}}(t,e),O2(t)&&j2(t)}async function GE(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const r=Ba(n);n.L_.add(3),await Fd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Qp(n)}async function sB(t,e){const n=De(t);e?(n.L_.delete(2),await Qp(n)):e||(n.L_.add(2),await Fd(n),n.q_.set("Unknown"))}function Sc(t){return t.K_||(t.K_=function(n,r,i){const s=De(n);return s.w_(),new $6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Y6.bind(null,t),Ro:Q6.bind(null,t),mo:Z6.bind(null,t),d_:X6.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Uv(t)?Bv(t):t.q_.set("Unknown")):(await t.K_.stop(),L2(t))})),t.K_}function No(t){return t.U_||(t.U_=function(n,r,i){const s=De(n);return s.w_(),new q6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tB.bind(null,t),mo:iB.bind(null,t),f_:nB.bind(null,t),g_:rB.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Zp(t)):(await t.U_.stop(),t.O_.length>0&&(we("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Fv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vv(t,e){if(bs("AsyncQueue",`${e}: ${t}`),jd(t))return new ge(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=fu(),this.sortedSet=new Jt(this.comparator)}static emptySet(e){return new Bl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.W_=new Jt(be.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class tc{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new tc(e,n,Bl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class aB{constructor(){this.queries=QE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=De(n),s=i.queries;i.queries=QE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function QE(){return new Ic(t=>s2(t),$p)}async function B2(t,e){const n=De(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new oB,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Vv(o,`Initialization of query '${al(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&zv(n)}async function U2(t,e){const n=De(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lB(t,e){const n=De(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&zv(n)}function cB(t,e,n){const r=De(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function zv(t){t.Y_.forEach(e=>{e.next()})}var xy,ZE;(ZE=xy||(xy={})).ea="default",ZE.Cache="cache";class F2{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new tc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.key=e}}class z2{constructor(e){this.key=e}}class uB{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qe(),this.mutatedKeys=Qe(),this.Aa=o2(e),this.Ra=new Bl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new YE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),w=qp(this.query,h)?h:null,k=!!m&&this.mutatedKeys.has(m.key),I=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;m&&w?m.data.isEqual(w.data)?k!==I&&(r.track({type:3,doc:w}),_=!0):this.ga(m,w)||(r.track({type:2,doc:w}),_=!0,(l&&this.Aa(w,l)>0||c&&this.Aa(w,c)<0)&&(a=!0)):!m&&w?(r.track({type:0,doc:w}),_=!0):m&&!w&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(w?(o=o.add(w),s=I?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(w,k){const I=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return I(w)-I(k)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new tc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new YE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new z2(r))}),this.da.forEach(r=>{e.has(r)||n.push(new V2(r))}),n}ba(e){this.Ta=e.Ts,this.da=Qe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return tc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class dB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hB{constructor(e){this.key=e,this.va=!1}}class fB{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ic(a=>s2(a),$p),this.Ma=new Map,this.xa=new Set,this.Oa=new Jt(be.comparator),this.Na=new Map,this.La=new Pv,this.Ba={},this.ka=new Map,this.qa=ec.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pB(t,e,n=!0){const r=G2(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await W2(r,e,n,!0),i}async function mB(t,e){const n=G2(t);await W2(n,e,!0,!1)}async function W2(t,e,n,r){const i=await j6(t.localStore,Mi(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await gB(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&M2(t.remoteStore,i),a}async function gB(t,e,n,r,i){t.Ka=(h,m,w)=>async function(I,_,T,S){let E=_.view.ma(T);E.ns&&(E=await qE(I.localStore,_.query,!1).then(({documents:O})=>_.view.ma(O,E)));const j=S&&S.targetChanges.get(_.targetId),K=S&&S.targetMismatches.get(_.targetId)!=null,G=_.view.applyChanges(E,I.isPrimaryClient,j,K);return JE(I,_.targetId,G.wa),G.snapshot}(t,h,m,w);const s=await qE(t.localStore,e,!0),o=new uB(e,s.Ts),a=o.ma(s.documents),l=Ud.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);JE(t,n,c.wa);const d=new dB(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function yB(t,e,n){const r=De(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!$p(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _y(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ov(r.remoteStore,i.targetId),Ey(r,i.targetId)}).catch(Od)):(Ey(r,i.targetId),await _y(r.localStore,i.targetId,!0))}async function wB(t,e){const n=De(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ov(n.remoteStore,r.targetId))}async function vB(t,e,n){const r=kB(t);try{const i=await function(o,a){const l=De(o),c=an.now(),d=a.reduce((w,k)=>w.add(k.key),Qe());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let k=Is(),I=Qe();return l.cs.getEntries(w,d).next(_=>{k=_,k.forEach((T,S)=>{S.isValidDocument()||(I=I.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,k)).next(_=>{h=_;const T=[];for(const S of a){const E=Vj(S,h.get(S.key).overlayedDocument);E!=null&&T.push(new ja(S.key,E,ZT(E.value.mapValue),ms.exists(!0)))}return l.mutationQueue.addMutationBatch(w,c,T,a)}).next(_=>{m=_;const T=_.applyToLocalDocumentSet(h,I);return l.documentOverlayCache.saveOverlays(w,_.batchId,T)})}).then(()=>({batchId:m.batchId,changes:l2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Jt(rt)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Vd(r,i.changes),await Zp(r.remoteStore)}catch(i){const s=Vv(i,"Failed to persist write");n.reject(s)}}async function $2(t,e){const n=De(t);try{const r=await L6(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?mt(o.va):i.removedDocuments.size>0&&(mt(o.va),o.va=!1))}),await Vd(n,r,e)}catch(r){await Od(r)}}function XE(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=De(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.j_)m.Z_(a)&&(c=!0)}),c&&zv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _B(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Jt(be.comparator);o=o.insert(s,or.newNoDocument(s,Le.min()));const a=Qe().add(s),l=new Gp(Le.min(),new Map,new Jt(rt),o,a);await $2(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Wv(r)}else await _y(r.localStore,e,!1).then(()=>Ey(r,e,n)).catch(Od)}async function xB(t,e){const n=De(t),r=e.batch.batchId;try{const i=await P6(n.localStore,e);H2(n,r,null),q2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vd(n,i)}catch(i){await Od(i)}}async function EB(t,e,n){const r=De(t);try{const i=await function(o,a){const l=De(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(mt(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);H2(r,e,n),q2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vd(r,i)}catch(i){await Od(i)}}function q2(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function H2(t,e,n){const r=De(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ey(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||K2(t,r)})}function K2(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ov(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Wv(t))}function JE(t,e,n){for(const r of n)r instanceof V2?(t.La.addReference(r.key,e),bB(t,r)):r instanceof z2?(we("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||K2(t,r.key)):Pe()}function bB(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(we("SyncEngine","New document in limbo: "+n),t.xa.add(r),Wv(t))}function Wv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new be(Dt.fromString(e)),r=t.qa.next();t.Na.set(r,new hB(n)),t.Oa=t.Oa.insert(n,r),M2(t.remoteStore,new io(Mi(Av(n.path)),r,"TargetPurposeLimboResolution",Ev.oe))}}async function Vd(t,e,n){const r=De(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Dv.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=De(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>oe.forEach(c,m=>oe.forEach(m.$i,w=>d.persistence.referenceDelegate.addReference(h,m.targetId,w)).next(()=>oe.forEach(m.Ui,w=>d.persistence.referenceDelegate.removeReference(h,m.targetId,w)))))}catch(h){if(!jd(h))throw h;we("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const w=d.os.get(m),k=w.snapshotVersion,I=w.withLastLimboFreeSnapshotVersion(k);d.os=d.os.insert(m,I)}}}(r.localStore,s))}async function IB(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const r=await A2(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ge(re.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vd(n,r.hs)}}function SB(t,e){const n=De(t),r=n.Na.get(e);if(r&&r.va)return Qe().add(r.key);{let i=Qe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function G2(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_B.bind(null,e),e.Ca.d_=lB.bind(null,e.eventManager),e.Ca.$a=cB.bind(null,e.eventManager),e}function kB(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EB.bind(null,e),e}class rp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return M6(this.persistence,new C6,e.initialUser,this.serializer)}Ga(e){return new T6(Lv.Zr,this.serializer)}Wa(e){return new U6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rp.provider={build:()=>new rp};class by{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IB.bind(null,this.syncEngine),await sB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aB}()}createDatastore(e){const n=Yp(e.databaseInfo.databaseId),r=function(s){return new W6(s)}(e.databaseInfo);return function(s,o,a,l){return new H6(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new G6(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>XE(this.syncEngine,n,0),function(){return KE.D()?new KE:new F6}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new fB(i,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=De(i);we("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Fd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}by.provider={build:()=>new by};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):bs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ir.UNAUTHENTICATED,this.clientId=GT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{we("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(we("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _g(t,e){t.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await A2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AB(t);we("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>GE(e.remoteStore,i)),t._onlineComponents=e}async function AB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await _g(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ql("Error using user provided cache. Falling back to memory cache: "+n),await _g(t,new rp)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await _g(t,new rp);return t._offlineComponents}async function Q2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await eb(t,t._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await eb(t,new by))),t._onlineComponents}function NB(t){return Q2(t).then(e=>e.syncEngine)}async function Z2(t){const e=await Q2(t),n=e.eventManager;return n.onListen=pB.bind(null,e.syncEngine),n.onUnlisten=yB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wB.bind(null,e.syncEngine),n}function CB(t,e,n={}){const r=new ps;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Y2({next:m=>{d.Za(),o.enqueueAndForget(()=>U2(s,h));const w=m.docs.has(a);!w&&m.fromCache?c.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&l&&l.source==="server"?c.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new F2(Av(a.path),d,{includeMetadataChanges:!0,_a:!0});return B2(s,h)}(await Z2(t),t.asyncQueue,e,n,r)),r.promise}function RB(t,e,n={}){const r=new ps;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Y2({next:m=>{d.Za(),o.enqueueAndForget(()=>U2(s,h)),m.fromCache&&l.source==="server"?c.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new F2(a,d,{includeMetadataChanges:!0,_a:!0});return B2(s,h)}(await Z2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t,e,n){if(!n)throw new ge(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MB(t,e,n,r){if(e===!0&&r===!0)throw new ge(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nb(t){if(!be.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rb(t){if(be.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function nc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xp(t);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function PB(t,e){if(e<=0)throw new ge(re.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ib({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ib(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Y3;switch(r.type){case"firstParty":return new J3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tb.get(n);r&&(we("ComponentProvider","Removing Datastore"),tb.delete(n),r.terminate())}(this),Promise.resolve()}}function LB(t,e,n,r={}){var i;const s=(t=nc(t,Jp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ir.MOCK_USER;else{a=nT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ir(c)}t._authCredentials=new Q3(new KT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Do(this.firestore,e,this._query)}}class Or{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Or(this.firestore,e,this._key)}}class xo extends Do{constructor(e,n,r){super(e,n,Av(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Or(this.firestore,null,new be(e))}withConverter(e){return new xo(this.firestore,e,this._path)}}function Aa(t,e,...n){if(t=Sn(t),J2("collection","path",e),t instanceof Jp){const r=Dt.fromString(e,...n);return rb(r),new xo(t,null,r)}{if(!(t instanceof Or||t instanceof xo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return rb(r),new xo(t.firestore,null,r)}}function em(t,e,...n){if(t=Sn(t),arguments.length===1&&(e=GT.newId()),J2("doc","path",e),t instanceof Jp){const r=Dt.fromString(e,...n);return nb(r),new Or(t,null,new be(r))}{if(!(t instanceof Or||t instanceof xo))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return nb(r),new Or(t.firestore,t instanceof xo?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new C2(this,"async_queue_retry"),this.Vu=()=>{const r=vg();r&&we("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=vg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=vg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ps;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!jd(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw bs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Fv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class tm extends Jp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new sb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sb(e),this._firestoreClient=void 0,await e}}}function DB(t,e){const n=typeof t=="object"?t:cv(),r=typeof t=="string"?t:"(default)",i=Up(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Jk("firestore");s&&LB(i,...s)}return i}function $v(t){if(t._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OB(t),t._firestoreClient}function OB(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new hj(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,X2(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new TB(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rc(Kn.fromBase64String(e))}catch(n){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rc(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB=/^__.*__$/;class BB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ja(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bd(e,this.data,n,this.fieldTransforms)}}function eA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Yv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Yv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ip(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(eA(this.Cu)&&jB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class UB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yp(e)}Qu(e,n,r,i=!1){return new Yv({Cu:e,methodName:n,qu:r,path:Wn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tA(t){const e=t._freezeSettings(),n=Yp(t._databaseId);return new UB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FB(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);iA("Data must be an object, but it was:",o,r);const a=nA(r,o);let l,c;if(s.merge)l=new di(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=zB(e,h,n);if(!o.contains(m))throw new ge(re.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);$B(d,m)||d.push(m)}l=new di(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new BB(new Hr(a),l,c)}class Qv extends Hv{_toFieldTransform(e){return new jj(e.path,new ud)}isEqual(e){return e instanceof Qv}}function VB(t,e,n,r=!1){return Zv(n,t.Qu(r?4:3,e))}function Zv(t,e){if(rA(t=Sn(t)))return iA("Unsupported field value:",e,t),nA(t,e);if(t instanceof Hv)return function(r,i){if(!eA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Zv(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Lj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=an.fromDate(r);return{timestampValue:tp(i.serializer,s)}}if(r instanceof an){const s=new an(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tp(i.serializer,s)}}if(r instanceof Kv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rc)return{bytesValue:x2(i.serializer,r._byteString)};if(r instanceof Or){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Mv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Nv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Xp(r)}`)}(t,e)}function nA(t,e){const n={};return YT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ec(t,(r,i)=>{const s=Zv(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function rA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof an||t instanceof Kv||t instanceof rc||t instanceof Or||t instanceof Hv||t instanceof Gv)}function iA(t,e,n){if(!rA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Xp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zB(t,e,n){if((e=Sn(e))instanceof qv)return e._internalPath;if(typeof e=="string")return sA(t,e);throw ip("Field path arguments must be of type string or ",t,!1,void 0,n)}const WB=new RegExp("[~\\*/\\[\\]]");function sA(t,e,n){if(e.search(WB)>=0)throw ip(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qv(...e.split("."))._internalPath}catch{throw ip(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ip(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ge(re.INVALID_ARGUMENT,a+t+l)}function $B(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qB extends oA{data(){return super.data()}}function nm(t,e){return typeof e=="string"?sA(t,e):e instanceof qv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xv{}class Jv extends Xv{}function fd(t,e,...n){let r=[];e instanceof Xv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof e1).length,a=s.filter(l=>l instanceof rm).length;if(o>1||o>0&&a>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class rm extends Jv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rm(e,n,r)}_apply(e){const n=this._parse(e);return aA(e._query,n),new Do(e.firestore,e.converter,my(e._query,n))}_parse(e){const n=tA(e.firestore);return function(s,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){ab(h,d);const w=[];for(const k of h)w.push(ob(l,s,k));m={arrayValue:{values:w}}}else m=ob(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||ab(h,d),m=VB(a,o,h,d==="in"||d==="not-in");return _n.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Iy(t,e,n){const r=e,i=nm("where",t);return rm._create(i,r,n)}class e1 extends Xv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new e1(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)aA(o,l),o=my(o,l)}(e._query,n),new Do(e.firestore,e.converter,my(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class t1 extends Jv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t1(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cd(s,o)}(e._query,this._field,this._direction);return new Do(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new bc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function sp(t,e="asc"){const n=e,r=nm("orderBy",t);return t1._create(r,n)}class n1 extends Jv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new n1(e,n,r)}_apply(e){return new Do(e.firestore,e.converter,Jf(e._query,this._limit,this._limitType))}}function KB(t){return PB("limit",t),n1._create("limit",t,"F")}function ob(t,e,n){if(typeof(n=Sn(n))=="string"){if(n==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i2(e)&&n.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Dt.fromString(n));if(!be.isDocumentKey(r))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return AE(t,new be(r))}if(n instanceof Or)return AE(t,n._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(n)}.`)}function ab(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class GB{convertValue(e,n="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ec(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>dn(o.doubleValue));return new Gv(s)}convertGeoPoint(e){return new Kv(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Iv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(od(e));default:return null}}convertTimestamp(e){const n=Ao(e);return new an(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dt.fromString(e);mt(T2(r));const i=new ad(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(n)||bs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lA extends oA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cf extends lA{data(e={}){return super.data(e)}}class QB{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new mu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cf(this._firestore,this._userDataWriter,r.key,r,new mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new cf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new cf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:ZB(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ZB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t){t=nc(t,Or);const e=nc(t.firestore,tm);return CB($v(e),t._key).then(n=>JB(e,t,n))}class cA extends GB{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Or(this.firestore,null,n)}}function pd(t){t=nc(t,Do);const e=nc(t.firestore,tm),n=$v(e),r=new cA(e);return HB(t._query),RB(n,t._query).then(i=>new QB(e,r,t,i))}function uA(t,e){const n=nc(t.firestore,tm),r=em(t),i=YB(t.converter,e);return XB(n,[FB(tA(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ms.exists(!1))]).then(()=>r)}function XB(t,e){return function(r,i){const s=new ps;return r.asyncQueue.enqueueAndForget(async()=>vB(await NB(r),i,s)),s.promise}($v(t),e)}function JB(t,e,n){const r=n.docs.get(e._key),i=new cA(t);return new lA(t,i,e._key,r,new mu(n.hasPendingWrites,n.fromCache),e.converter)}function Sy(){return new Qv("serverTimestamp")}(function(e,n=!0){(function(i){xc=i})(Oa),Ea(new ko("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new tm(new Z3(r.getProvider("auth-internal")),new tj(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ad(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ci(bE,"4.7.3",e),Ci(bE,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="firebasestorage.googleapis.com",hA="storageBucket",e5=2*60*1e3,t5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends Ui{constructor(e,n,r=0){super(xg(e),`Firebase Storage: ${n} (${xg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ln||(ln={}));function xg(t){return"storage/"+t}function r1(){const t="An unknown error occurred, please check the error payload for server response.";return new cn(ln.UNKNOWN,t)}function n5(t){return new cn(ln.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function r5(t){return new cn(ln.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function i5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new cn(ln.UNAUTHENTICATED,t)}function s5(){return new cn(ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function o5(t){return new cn(ln.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function a5(){return new cn(ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function l5(){return new cn(ln.CANCELED,"User canceled the upload/download.")}function c5(t){return new cn(ln.INVALID_URL,"Invalid URL '"+t+"'.")}function u5(t){return new cn(ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function d5(){return new cn(ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hA+"' property when initializing the app?")}function h5(){return new cn(ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function f5(){return new cn(ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function p5(t){return new cn(ln.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ky(t){return new cn(ln.INVALID_ARGUMENT,t)}function fA(){return new cn(ln.APP_DELETED,"The Firebase app was deleted.")}function m5(t){return new cn(ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mu(t,e){return new cn(ln.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Xc(t){throw new cn(ln.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Lr.makeFromUrl(e,n)}catch{return new Lr(e,"")}if(r.path==="")return r;throw u5(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(j){j.path_=decodeURIComponent(j.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",w=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),k={bucket:1,path:3},I=n===dA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",T=new RegExp(`^https?://${I}/${i}/${_}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:w,indices:k,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let j=0;j<E.length;j++){const K=E[j],G=K.regex.exec(e);if(G){const O=G[K.indices.bucket];let L=G[K.indices.path];L||(L=""),r=new Lr(O,L),K.postModify(r);break}}if(r==null)throw c5(e);return r}}class g5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(w,l())},_)}function m(){s&&clearTimeout(s)}function w(_,...T){if(c){m();return}if(_){m(),d.call(null,_,...T);return}if(l()||o){m(),d.call(null,_,...T);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let k=!1;function I(_){k||(k=!0,m(),!c&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,I(!0)},n),I}function w5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){return t!==void 0}function _5(t){return typeof t=="object"&&!Array.isArray(t)}function i1(t){return typeof t=="string"||t instanceof String}function lb(t){return s1()&&t instanceof Blob}function s1(){return typeof Blob<"u"}function cb(t,e,n,r){if(r<e)throw ky(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ky(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function pA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var pa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(pa||(pa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e,n,r,i,s,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ch(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===pa.NO_ERROR,l=s.getStatus();if(!a||x5(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===pa.ABORT;r(!1,new Ch(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ch(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());v5(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=r1();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?fA():l5();o(l)}else{const l=a5();o(l)}};this.canceled_?n(!1,new Ch(!1,null,!0)):this.backoffId_=y5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&w5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ch{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function b5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function I5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function S5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function k5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function T5(t,e,n,r,i,s,o=!0){const a=pA(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return S5(c,e),b5(c,n),I5(c,s),k5(c,r),new E5(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function N5(...t){const e=A5();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(s1())return new Blob(t);throw new cn(ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(t){if(typeof atob>"u")throw p5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Eg{constructor(e,n){this.data=e,this.contentType=n||null}}function M5(t,e){switch(t){case Ti.RAW:return new Eg(mA(e));case Ti.BASE64:case Ti.BASE64URL:return new Eg(gA(t,e));case Ti.DATA_URL:return new Eg(L5(e),D5(e))}throw r1()}function mA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function P5(t){let e;try{e=decodeURIComponent(t)}catch{throw Mu(Ti.DATA_URL,"Malformed data URL.")}return mA(e)}function gA(t,e){switch(t){case Ti.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Mu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ti.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Mu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=R5(e)}catch(i){throw i.message.includes("polyfill")?i:Mu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class yA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Mu(Ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=O5(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function L5(t){const e=new yA(t);return e.base64?gA(Ti.BASE64,e.rest):P5(e.rest)}function D5(t){return new yA(t).contentType}function O5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){let r=0,i="";lb(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(lb(this.data_)){const r=this.data_,i=C5(r,e,n);return i===null?null:new eo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new eo(r,!0)}}static getBlob(...e){if(s1()){const n=e.map(r=>r instanceof eo?r.data_:r);return new eo(N5.apply(null,n))}else{const n=e.map(o=>i1(o)?M5(Ti.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new eo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){let e;try{e=JSON.parse(t)}catch{return null}return _5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B5(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function vA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t,e){return e}class dr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||U5}}let Rh=null;function F5(t){return!i1(t)||t.length<2?t:vA(t)}function _A(){if(Rh)return Rh;const t=[];t.push(new dr("bucket")),t.push(new dr("generation")),t.push(new dr("metageneration")),t.push(new dr("name","fullPath",!0));function e(s,o){return F5(o)}const n=new dr("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new dr("size");return i.xform=r,t.push(i),t.push(new dr("timeCreated")),t.push(new dr("updated")),t.push(new dr("md5Hash",null,!0)),t.push(new dr("cacheControl",null,!0)),t.push(new dr("contentDisposition",null,!0)),t.push(new dr("contentEncoding",null,!0)),t.push(new dr("contentLanguage",null,!0)),t.push(new dr("contentType",null,!0)),t.push(new dr("metadata","customMetadata",!0)),Rh=t,Rh}function V5(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Lr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function z5(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return V5(r,t),r}function xA(t,e,n){const r=wA(e);return r===null?null:z5(t,r,n)}function W5(t,e,n,r){const i=wA(e);if(i===null||!i1(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),w=sm(m,n,r),k=pA({alt:"media",token:c});return w+k})[0]}function $5(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class o1{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){if(!t)throw r1()}function q5(t,e){function n(r,i){const s=xA(t,i,e);return EA(s!==null),s}return n}function H5(t,e){function n(r,i){const s=xA(t,i,e);return EA(s!==null),W5(s,i,t.host,t._protocol)}return n}function bA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=s5():i=i5():n.getStatus()===402?i=r5(t.bucket):n.getStatus()===403?i=o5(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function IA(t){const e=bA(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=n5(t.path)),s.serverResponse=i.serverResponse,s}return n}function K5(t,e,n){const r=e.fullServerUrl(),i=sm(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new o1(i,s,H5(t,n),o);return a.errorHandler=IA(e),a}function G5(t,e){const n=e.fullServerUrl(),r=sm(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new o1(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=IA(e),a}function Y5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Q5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Y5(null,e)),r}function Z5(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let j=0;j<2;j++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Q5(e,r,i),d=$5(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",w=eo.getBlob(h,r,m);if(w===null)throw h5();const k={name:c.fullPath},I=sm(s,t.host,t._protocol),_="POST",T=t.maxUploadRetryTime,S=new o1(I,_,q5(t,n),T);return S.urlParams=k,S.headers=o,S.body=w.uploadData(),S.errorHandler=bA(e),S}class X5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Xc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class J5 extends X5{initXhr(){this.xhr_.responseType="text"}}function a1(){return new J5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this._service=e,n instanceof Lr?this._location=n:this._location=Lr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Na(e,n)}get root(){const e=new Lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vA(this._location.path)}get storage(){return this._service}get parent(){const e=j5(this._location.path);if(e===null)return null;const n=new Lr(this._location.bucket,e);return new Na(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw m5(e)}}function e8(t,e,n){t._throwIfRoot("uploadBytes");const r=Z5(t.storage,t._location,_A(),new eo(e,!0),n);return t.storage.makeRequestWithTokens(r,a1).then(i=>({metadata:i,ref:t}))}function t8(t){t._throwIfRoot("getDownloadURL");const e=K5(t.storage,t._location,_A());return t.storage.makeRequestWithTokens(e,a1).then(n=>{if(n===null)throw f5();return n})}function n8(t){t._throwIfRoot("deleteObject");const e=G5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,a1)}function r8(t,e){const n=B5(t._location.path,e),r=new Lr(t._location.bucket,n);return new Na(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t){return/^[A-Za-z]+:\/\//.test(t)}function s8(t,e){return new Na(t,e)}function SA(t,e){if(t instanceof l1){const n=t;if(n._bucket==null)throw d5();const r=new Na(n,n._bucket);return e!=null?SA(r,e):r}else return e!==void 0?r8(t,e):t}function o8(t,e){if(e&&i8(e)){if(t instanceof l1)return s8(t,e);throw ky("To use ref(service, url), the first argument must be a Storage instance.")}else return SA(t,e)}function ub(t,e){const n=e==null?void 0:e[hA];return n==null?null:Lr.makeFromBucketSpec(n,t)}function a8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:nT(i,t.app.options.projectId))}class l1{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=dA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=e5,this._maxUploadRetryTime=t5,this._requests=new Set,i!=null?this._bucket=Lr.makeFromBucketSpec(i,this._host):this._bucket=ub(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Lr.makeFromBucketSpec(this._url,e):this._bucket=ub(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Na(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new g5(fA());{const o=T5(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const db="@firebase/storage",hb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="storage";function l8(t,e,n){return t=Sn(t),e8(t,e,n)}function c8(t){return t=Sn(t),t8(t)}function u8(t){return t=Sn(t),n8(t)}function TA(t,e){return t=Sn(t),o8(t,e)}function d8(t=cv(),e){t=Sn(t);const r=Up(t,kA).getImmediate({identifier:e}),i=Jk("storage");return i&&h8(r,...i),r}function h8(t,e,n,r={}){a8(t,e,n,r)}function f8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new l1(n,r,i,e,Oa)}function p8(){Ea(new ko(kA,f8,"PUBLIC").setMultipleInstances(!0)),Ci(db,hb,""),Ci(db,hb,"esm2017")}p8();const m8={apiKey:"AIzaSyCmgORmeslowUkNeAhkf-V07fNXs9GB2wk",authDomain:"xchainj-8b61b.firebaseapp.com",projectId:"xchainj-8b61b",storageBucket:"xchainj-8b61b.firebasestorage.app",messagingSenderId:"906788087014",appId:"1:906788087014:web:df01c89cbca8459ef94727"},c1=sT(m8),ei=K3(c1),Di=DB(c1),AA=d8(c1,"gs://xchainj-8b61b.appspot.com"),NA=Y.createContext({user:null,loading:!0,initialized:!1}),om=()=>Y.useContext(NA),g8=({children:t})=>{const[e,n]=Y.useState(null),[r,i]=Y.useState(!0),[s,o]=Y.useState(!1);return Y.useEffect(()=>{const a=ei.onAuthStateChanged(l=>{n(l),i(!1),o(!0)});return()=>a()},[]),p.jsx(NA.Provider,{value:{user:e,loading:r,initialized:s},children:t})};var Be={},am={};am.byteLength=v8;am.toByteArray=x8;am.fromByteArray=I8;var ki=[],zr=[],y8=typeof Uint8Array<"u"?Uint8Array:Array,bg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var il=0,w8=bg.length;il<w8;++il)ki[il]=bg[il],zr[bg.charCodeAt(il)]=il;zr[45]=62;zr[95]=63;function CA(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function v8(t){var e=CA(t),n=e[0],r=e[1];return(n+r)*3/4-r}function _8(t,e,n){return(e+n)*3/4-n}function x8(t){var e,n=CA(t),r=n[0],i=n[1],s=new y8(_8(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=zr[t.charCodeAt(l)]<<18|zr[t.charCodeAt(l+1)]<<12|zr[t.charCodeAt(l+2)]<<6|zr[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=zr[t.charCodeAt(l)]<<2|zr[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=zr[t.charCodeAt(l)]<<10|zr[t.charCodeAt(l+1)]<<4|zr[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function E8(t){return ki[t>>18&63]+ki[t>>12&63]+ki[t>>6&63]+ki[t&63]}function b8(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(E8(r));return i.join("")}function I8(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(b8(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(ki[e>>2]+ki[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(ki[e>>10]+ki[e>>4&63]+ki[e<<2&63]+"=")),i.join("")}var u1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */u1.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,w=t[e+h];for(h+=m,s=w&(1<<-d)-1,w>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(w?-1:1)*o*Math.pow(2,s-r)};u1.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:s-1,k=r?1:-1,I=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+w]=a&255,w+=k,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+w]=o&255,w+=k,o/=256,c-=8);t[n+w-k]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=am,n=u1,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const P=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(P,y),P.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(P){if(P>i)throw new RangeError('The value "'+P+'" is invalid for option "size"');const y=new Uint8Array(P);return Object.setPrototypeOf(y,a.prototype),y}function a(P,y,x){if(typeof P=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(P)}return l(P,y,x)}a.poolSize=8192;function l(P,y,x){if(typeof P=="string")return m(P,y);if(ArrayBuffer.isView(P))return k(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(xn(P,ArrayBuffer)||P&&xn(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xn(P,SharedArrayBuffer)||P&&xn(P.buffer,SharedArrayBuffer)))return I(P,y,x);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=P.valueOf&&P.valueOf();if(z!=null&&z!==P)return a.from(z,y,x);const Q=_(P);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return a.from(P[Symbol.toPrimitive]("string"),y,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}a.from=function(P,y,x){return l(P,y,x)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function d(P,y,x){return c(P),P<=0?o(P):y!==void 0?typeof x=="string"?o(P).fill(y,x):o(P).fill(y):o(P)}a.alloc=function(P,y,x){return d(P,y,x)};function h(P){return c(P),o(P<0?0:T(P)|0)}a.allocUnsafe=function(P){return h(P)},a.allocUnsafeSlow=function(P){return h(P)};function m(P,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const x=E(P,y)|0;let z=o(x);const Q=z.write(P,y);return Q!==x&&(z=z.slice(0,Q)),z}function w(P){const y=P.length<0?0:T(P.length)|0,x=o(y);for(let z=0;z<y;z+=1)x[z]=P[z]&255;return x}function k(P){if(xn(P,Uint8Array)){const y=new Uint8Array(P);return I(y.buffer,y.byteOffset,y.byteLength)}return w(P)}function I(P,y,x){if(y<0||P.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<y+(x||0))throw new RangeError('"length" is outside of buffer bounds');let z;return y===void 0&&x===void 0?z=new Uint8Array(P):x===void 0?z=new Uint8Array(P,y):z=new Uint8Array(P,y,x),Object.setPrototypeOf(z,a.prototype),z}function _(P){if(a.isBuffer(P)){const y=T(P.length)|0,x=o(y);return x.length===0||P.copy(x,0,0,y),x}if(P.length!==void 0)return typeof P.length!="number"||ot(P.length)?o(0):w(P);if(P.type==="Buffer"&&Array.isArray(P.data))return w(P.data)}function T(P){if(P>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return P|0}function S(P){return+P!=P&&(P=0),a.alloc(+P)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,x){if(xn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),xn(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(y)||!a.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===x)return 0;let z=y.length,Q=x.length;for(let Z=0,te=Math.min(z,Q);Z<te;++Z)if(y[Z]!==x[Z]){z=y[Z],Q=x[Z];break}return z<Q?-1:Q<z?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,x){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let z;if(x===void 0)for(x=0,z=0;z<y.length;++z)x+=y[z].length;const Q=a.allocUnsafe(x);let Z=0;for(z=0;z<y.length;++z){let te=y[z];if(xn(te,Uint8Array))Z+te.length>Q.length?(a.isBuffer(te)||(te=a.from(te)),te.copy(Q,Z)):Uint8Array.prototype.set.call(Q,te,Z);else if(a.isBuffer(te))te.copy(Q,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=te.length}return Q};function E(P,y){if(a.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||xn(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);const x=P.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&x===0)return 0;let Q=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return yt(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return ct(P).length;default:if(Q)return z?-1:yt(P).length;y=(""+y).toLowerCase(),Q=!0}}a.byteLength=E;function j(P,y,x){let z=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,y>>>=0,x<=y))return"";for(P||(P="utf8");;)switch(P){case"hex":return F(this,y,x);case"utf8":case"utf-8":return f(this,y,x);case"ascii":return M(this,y,x);case"latin1":case"binary":return R(this,y,x);case"base64":return A(this,y,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,y,x);default:if(z)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),z=!0}}a.prototype._isBuffer=!0;function K(P,y,x){const z=P[y];P[y]=P[x],P[x]=z}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<y;x+=2)K(this,x,x+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<y;x+=4)K(this,x,x+3),K(this,x+1,x+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<y;x+=8)K(this,x,x+7),K(this,x+1,x+6),K(this,x+2,x+5),K(this,x+3,x+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?f(this,0,y):j.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const x=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,x,z,Q,Z){if(xn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(x===void 0&&(x=0),z===void 0&&(z=y?y.length:0),Q===void 0&&(Q=0),Z===void 0&&(Z=this.length),x<0||z>y.length||Q<0||Z>this.length)throw new RangeError("out of range index");if(Q>=Z&&x>=z)return 0;if(Q>=Z)return-1;if(x>=z)return 1;if(x>>>=0,z>>>=0,Q>>>=0,Z>>>=0,this===y)return 0;let te=Z-Q,je=z-x;const Re=Math.min(te,je),Me=this.slice(Q,Z),_t=y.slice(x,z);for(let ke=0;ke<Re;++ke)if(Me[ke]!==_t[ke]){te=Me[ke],je=_t[ke];break}return te<je?-1:je<te?1:0};function G(P,y,x,z,Q){if(P.length===0)return-1;if(typeof x=="string"?(z=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,ot(x)&&(x=Q?0:P.length-1),x<0&&(x=P.length+x),x>=P.length){if(Q)return-1;x=P.length-1}else if(x<0)if(Q)x=0;else return-1;if(typeof y=="string"&&(y=a.from(y,z)),a.isBuffer(y))return y.length===0?-1:O(P,y,x,z,Q);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(P,y,x):Uint8Array.prototype.lastIndexOf.call(P,y,x):O(P,[y],x,z,Q);throw new TypeError("val must be string, number or Buffer")}function O(P,y,x,z,Q){let Z=1,te=P.length,je=y.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(P.length<2||y.length<2)return-1;Z=2,te/=2,je/=2,x/=2}function Re(_t,ke){return Z===1?_t[ke]:_t.readUInt16BE(ke*Z)}let Me;if(Q){let _t=-1;for(Me=x;Me<te;Me++)if(Re(P,Me)===Re(y,_t===-1?0:Me-_t)){if(_t===-1&&(_t=Me),Me-_t+1===je)return _t*Z}else _t!==-1&&(Me-=Me-_t),_t=-1}else for(x+je>te&&(x=te-je),Me=x;Me>=0;Me--){let _t=!0;for(let ke=0;ke<je;ke++)if(Re(P,Me+ke)!==Re(y,ke)){_t=!1;break}if(_t)return Me}return-1}a.prototype.includes=function(y,x,z){return this.indexOf(y,x,z)!==-1},a.prototype.indexOf=function(y,x,z){return G(this,y,x,z,!0)},a.prototype.lastIndexOf=function(y,x,z){return G(this,y,x,z,!1)};function L(P,y,x,z){x=Number(x)||0;const Q=P.length-x;z?(z=Number(z),z>Q&&(z=Q)):z=Q;const Z=y.length;z>Z/2&&(z=Z/2);let te;for(te=0;te<z;++te){const je=parseInt(y.substr(te*2,2),16);if(ot(je))return te;P[x+te]=je}return te}function B(P,y,x,z){return st(yt(y,P.length-x),P,x,z)}function W(P,y,x,z){return st(bt(y),P,x,z)}function $(P,y,x,z){return st(ct(y),P,x,z)}function H(P,y,x,z){return st(qi(y,P.length-x),P,x,z)}a.prototype.write=function(y,x,z,Q){if(x===void 0)Q="utf8",z=this.length,x=0;else if(z===void 0&&typeof x=="string")Q=x,z=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(z)?(z=z>>>0,Q===void 0&&(Q="utf8")):(Q=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-x;if((z===void 0||z>Z)&&(z=Z),y.length>0&&(z<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let te=!1;for(;;)switch(Q){case"hex":return L(this,y,x,z);case"utf8":case"utf-8":return B(this,y,x,z);case"ascii":case"latin1":case"binary":return W(this,y,x,z);case"base64":return $(this,y,x,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,y,x,z);default:if(te)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(P,y,x){return y===0&&x===P.length?e.fromByteArray(P):e.fromByteArray(P.slice(y,x))}function f(P,y,x){x=Math.min(P.length,x);const z=[];let Q=y;for(;Q<x;){const Z=P[Q];let te=null,je=Z>239?4:Z>223?3:Z>191?2:1;if(Q+je<=x){let Re,Me,_t,ke;switch(je){case 1:Z<128&&(te=Z);break;case 2:Re=P[Q+1],(Re&192)===128&&(ke=(Z&31)<<6|Re&63,ke>127&&(te=ke));break;case 3:Re=P[Q+1],Me=P[Q+2],(Re&192)===128&&(Me&192)===128&&(ke=(Z&15)<<12|(Re&63)<<6|Me&63,ke>2047&&(ke<55296||ke>57343)&&(te=ke));break;case 4:Re=P[Q+1],Me=P[Q+2],_t=P[Q+3],(Re&192)===128&&(Me&192)===128&&(_t&192)===128&&(ke=(Z&15)<<18|(Re&63)<<12|(Me&63)<<6|_t&63,ke>65535&&ke<1114112&&(te=ke))}}te===null?(te=65533,je=1):te>65535&&(te-=65536,z.push(te>>>10&1023|55296),te=56320|te&1023),z.push(te),Q+=je}return C(z)}const b=4096;function C(P){const y=P.length;if(y<=b)return String.fromCharCode.apply(String,P);let x="",z=0;for(;z<y;)x+=String.fromCharCode.apply(String,P.slice(z,z+=b));return x}function M(P,y,x){let z="";x=Math.min(P.length,x);for(let Q=y;Q<x;++Q)z+=String.fromCharCode(P[Q]&127);return z}function R(P,y,x){let z="";x=Math.min(P.length,x);for(let Q=y;Q<x;++Q)z+=String.fromCharCode(P[Q]);return z}function F(P,y,x){const z=P.length;(!y||y<0)&&(y=0),(!x||x<0||x>z)&&(x=z);let Q="";for(let Z=y;Z<x;++Z)Q+=ut[P[Z]];return Q}function q(P,y,x){const z=P.slice(y,x);let Q="";for(let Z=0;Z<z.length-1;Z+=2)Q+=String.fromCharCode(z[Z]+z[Z+1]*256);return Q}a.prototype.slice=function(y,x){const z=this.length;y=~~y,x=x===void 0?z:~~x,y<0?(y+=z,y<0&&(y=0)):y>z&&(y=z),x<0?(x+=z,x<0&&(x=0)):x>z&&(x=z),x<y&&(x=y);const Q=this.subarray(y,x);return Object.setPrototypeOf(Q,a.prototype),Q};function D(P,y,x){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+y>x)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,x,z){y=y>>>0,x=x>>>0,z||D(y,x,this.length);let Q=this[y],Z=1,te=0;for(;++te<x&&(Z*=256);)Q+=this[y+te]*Z;return Q},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,x,z){y=y>>>0,x=x>>>0,z||D(y,x,this.length);let Q=this[y+--x],Z=1;for(;x>0&&(Z*=256);)Q+=this[y+--x]*Z;return Q},a.prototype.readUint8=a.prototype.readUInt8=function(y,x){return y=y>>>0,x||D(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,x){return y=y>>>0,x||D(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,x){return y=y>>>0,x||D(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,x){return y=y>>>0,x||D(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,x){return y=y>>>0,x||D(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=Ln(function(y){y=y>>>0,jt(y,"offset");const x=this[y],z=this[y+7];(x===void 0||z===void 0)&&qe(y,this.length-8);const Q=x+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,Z=this[++y]+this[++y]*2**8+this[++y]*2**16+z*2**24;return BigInt(Q)+(BigInt(Z)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ln(function(y){y=y>>>0,jt(y,"offset");const x=this[y],z=this[y+7];(x===void 0||z===void 0)&&qe(y,this.length-8);const Q=x*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],Z=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+z;return(BigInt(Q)<<BigInt(32))+BigInt(Z)}),a.prototype.readIntLE=function(y,x,z){y=y>>>0,x=x>>>0,z||D(y,x,this.length);let Q=this[y],Z=1,te=0;for(;++te<x&&(Z*=256);)Q+=this[y+te]*Z;return Z*=128,Q>=Z&&(Q-=Math.pow(2,8*x)),Q},a.prototype.readIntBE=function(y,x,z){y=y>>>0,x=x>>>0,z||D(y,x,this.length);let Q=x,Z=1,te=this[y+--Q];for(;Q>0&&(Z*=256);)te+=this[y+--Q]*Z;return Z*=128,te>=Z&&(te-=Math.pow(2,8*x)),te},a.prototype.readInt8=function(y,x){return y=y>>>0,x||D(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,x){y=y>>>0,x||D(y,2,this.length);const z=this[y]|this[y+1]<<8;return z&32768?z|4294901760:z},a.prototype.readInt16BE=function(y,x){y=y>>>0,x||D(y,2,this.length);const z=this[y+1]|this[y]<<8;return z&32768?z|4294901760:z},a.prototype.readInt32LE=function(y,x){return y=y>>>0,x||D(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,x){return y=y>>>0,x||D(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=Ln(function(y){y=y>>>0,jt(y,"offset");const x=this[y],z=this[y+7];(x===void 0||z===void 0)&&qe(y,this.length-8);const Q=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(z<<24);return(BigInt(Q)<<BigInt(32))+BigInt(x+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=Ln(function(y){y=y>>>0,jt(y,"offset");const x=this[y],z=this[y+7];(x===void 0||z===void 0)&&qe(y,this.length-8);const Q=(x<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(Q)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+z)}),a.prototype.readFloatLE=function(y,x){return y=y>>>0,x||D(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,x){return y=y>>>0,x||D(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,x){return y=y>>>0,x||D(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,x){return y=y>>>0,x||D(y,8,this.length),n.read(this,y,!1,52,8)};function v(P,y,x,z,Q,Z){if(!a.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>Q||y<Z)throw new RangeError('"value" argument is out of bounds');if(x+z>P.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,x,z,Q){if(y=+y,x=x>>>0,z=z>>>0,!Q){const je=Math.pow(2,8*z)-1;v(this,y,x,z,je,0)}let Z=1,te=0;for(this[x]=y&255;++te<z&&(Z*=256);)this[x+te]=y/Z&255;return x+z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,x,z,Q){if(y=+y,x=x>>>0,z=z>>>0,!Q){const je=Math.pow(2,8*z)-1;v(this,y,x,z,je,0)}let Z=z-1,te=1;for(this[x+Z]=y&255;--Z>=0&&(te*=256);)this[x+Z]=y/te&255;return x+z},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,1,255,0),this[x]=y&255,x+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,2,65535,0),this[x]=y&255,this[x+1]=y>>>8,x+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,2,65535,0),this[x]=y>>>8,this[x+1]=y&255,x+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,4,4294967295,0),this[x+3]=y>>>24,this[x+2]=y>>>16,this[x+1]=y>>>8,this[x]=y&255,x+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,4,4294967295,0),this[x]=y>>>24,this[x+1]=y>>>16,this[x+2]=y>>>8,this[x+3]=y&255,x+4};function V(P,y,x,z,Q){Oe(y,z,Q,P,x,7);let Z=Number(y&BigInt(4294967295));P[x++]=Z,Z=Z>>8,P[x++]=Z,Z=Z>>8,P[x++]=Z,Z=Z>>8,P[x++]=Z;let te=Number(y>>BigInt(32)&BigInt(4294967295));return P[x++]=te,te=te>>8,P[x++]=te,te=te>>8,P[x++]=te,te=te>>8,P[x++]=te,x}function se(P,y,x,z,Q){Oe(y,z,Q,P,x,7);let Z=Number(y&BigInt(4294967295));P[x+7]=Z,Z=Z>>8,P[x+6]=Z,Z=Z>>8,P[x+5]=Z,Z=Z>>8,P[x+4]=Z;let te=Number(y>>BigInt(32)&BigInt(4294967295));return P[x+3]=te,te=te>>8,P[x+2]=te,te=te>>8,P[x+1]=te,te=te>>8,P[x]=te,x+8}a.prototype.writeBigUInt64LE=Ln(function(y,x=0){return V(this,y,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ln(function(y,x=0){return se(this,y,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,x,z,Q){if(y=+y,x=x>>>0,!Q){const Re=Math.pow(2,8*z-1);v(this,y,x,z,Re-1,-Re)}let Z=0,te=1,je=0;for(this[x]=y&255;++Z<z&&(te*=256);)y<0&&je===0&&this[x+Z-1]!==0&&(je=1),this[x+Z]=(y/te>>0)-je&255;return x+z},a.prototype.writeIntBE=function(y,x,z,Q){if(y=+y,x=x>>>0,!Q){const Re=Math.pow(2,8*z-1);v(this,y,x,z,Re-1,-Re)}let Z=z-1,te=1,je=0;for(this[x+Z]=y&255;--Z>=0&&(te*=256);)y<0&&je===0&&this[x+Z+1]!==0&&(je=1),this[x+Z]=(y/te>>0)-je&255;return x+z},a.prototype.writeInt8=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,1,127,-128),y<0&&(y=255+y+1),this[x]=y&255,x+1},a.prototype.writeInt16LE=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,2,32767,-32768),this[x]=y&255,this[x+1]=y>>>8,x+2},a.prototype.writeInt16BE=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,2,32767,-32768),this[x]=y>>>8,this[x+1]=y&255,x+2},a.prototype.writeInt32LE=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,4,2147483647,-2147483648),this[x]=y&255,this[x+1]=y>>>8,this[x+2]=y>>>16,this[x+3]=y>>>24,x+4},a.prototype.writeInt32BE=function(y,x,z){return y=+y,x=x>>>0,z||v(this,y,x,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[x]=y>>>24,this[x+1]=y>>>16,this[x+2]=y>>>8,this[x+3]=y&255,x+4},a.prototype.writeBigInt64LE=Ln(function(y,x=0){return V(this,y,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ln(function(y,x=0){return se(this,y,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function le(P,y,x,z,Q,Z){if(x+z>P.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function de(P,y,x,z,Q){return y=+y,x=x>>>0,Q||le(P,y,x,4),n.write(P,y,x,z,23,4),x+4}a.prototype.writeFloatLE=function(y,x,z){return de(this,y,x,!0,z)},a.prototype.writeFloatBE=function(y,x,z){return de(this,y,x,!1,z)};function Ae(P,y,x,z,Q){return y=+y,x=x>>>0,Q||le(P,y,x,8),n.write(P,y,x,z,52,8),x+8}a.prototype.writeDoubleLE=function(y,x,z){return Ae(this,y,x,!0,z)},a.prototype.writeDoubleBE=function(y,x,z){return Ae(this,y,x,!1,z)},a.prototype.copy=function(y,x,z,Q){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(z||(z=0),!Q&&Q!==0&&(Q=this.length),x>=y.length&&(x=y.length),x||(x=0),Q>0&&Q<z&&(Q=z),Q===z||y.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),y.length-x<Q-z&&(Q=y.length-x+z);const Z=Q-z;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,z,Q):Uint8Array.prototype.set.call(y,this.subarray(z,Q),x),Z},a.prototype.fill=function(y,x,z,Q){if(typeof y=="string"){if(typeof x=="string"?(Q=x,x=0,z=this.length):typeof z=="string"&&(Q=z,z=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!a.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(y.length===1){const te=y.charCodeAt(0);(Q==="utf8"&&te<128||Q==="latin1")&&(y=te)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(x<0||this.length<x||this.length<z)throw new RangeError("Out of range index");if(z<=x)return this;x=x>>>0,z=z===void 0?this.length:z>>>0,y||(y=0);let Z;if(typeof y=="number")for(Z=x;Z<z;++Z)this[Z]=y;else{const te=a.isBuffer(y)?y:a.from(y,Q),je=te.length;if(je===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(Z=0;Z<z-x;++Z)this[Z+x]=te[Z%je]}return this};const Ie={};function Ce(P,y,x){Ie[P]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${P}]`,this.stack,delete this.name}get code(){return P}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${P}]: ${this.message}`}}}Ce("ERR_BUFFER_OUT_OF_BOUNDS",function(P){return P?`${P} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ce("ERR_INVALID_ARG_TYPE",function(P,y){return`The "${P}" argument must be of type number. Received type ${typeof y}`},TypeError),Ce("ERR_OUT_OF_RANGE",function(P,y,x){let z=`The value of "${P}" is out of range.`,Q=x;return Number.isInteger(x)&&Math.abs(x)>2**32?Q=vt(String(x)):typeof x=="bigint"&&(Q=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(Q=vt(Q)),Q+="n"),z+=` It must be ${y}. Received ${Q}`,z},RangeError);function vt(P){let y="",x=P.length;const z=P[0]==="-"?1:0;for(;x>=z+4;x-=3)y=`_${P.slice(x-3,x)}${y}`;return`${P.slice(0,x)}${y}`}function Ue(P,y,x){jt(y,"offset"),(P[y]===void 0||P[y+x]===void 0)&&qe(y,P.length-(x+1))}function Oe(P,y,x,z,Q,Z){if(P>x||P<y){const te=typeof y=="bigint"?"n":"";let je;throw y===0||y===BigInt(0)?je=`>= 0${te} and < 2${te} ** ${(Z+1)*8}${te}`:je=`>= -(2${te} ** ${(Z+1)*8-1}${te}) and < 2 ** ${(Z+1)*8-1}${te}`,new Ie.ERR_OUT_OF_RANGE("value",je,P)}Ue(z,Q,Z)}function jt(P,y){if(typeof P!="number")throw new Ie.ERR_INVALID_ARG_TYPE(y,"number",P)}function qe(P,y,x){throw Math.floor(P)!==P?(jt(P,x),new Ie.ERR_OUT_OF_RANGE("offset","an integer",P)):y<0?new Ie.ERR_BUFFER_OUT_OF_BOUNDS:new Ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,P)}const Ge=/[^+/0-9A-Za-z-_]/g;function $i(P){if(P=P.split("=")[0],P=P.trim().replace(Ge,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function yt(P,y){y=y||1/0;let x;const z=P.length;let Q=null;const Z=[];for(let te=0;te<z;++te){if(x=P.charCodeAt(te),x>55295&&x<57344){if(!Q){if(x>56319){(y-=3)>-1&&Z.push(239,191,189);continue}else if(te+1===z){(y-=3)>-1&&Z.push(239,191,189);continue}Q=x;continue}if(x<56320){(y-=3)>-1&&Z.push(239,191,189),Q=x;continue}x=(Q-55296<<10|x-56320)+65536}else Q&&(y-=3)>-1&&Z.push(239,191,189);if(Q=null,x<128){if((y-=1)<0)break;Z.push(x)}else if(x<2048){if((y-=2)<0)break;Z.push(x>>6|192,x&63|128)}else if(x<65536){if((y-=3)<0)break;Z.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((y-=4)<0)break;Z.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return Z}function bt(P){const y=[];for(let x=0;x<P.length;++x)y.push(P.charCodeAt(x)&255);return y}function qi(P,y){let x,z,Q;const Z=[];for(let te=0;te<P.length&&!((y-=2)<0);++te)x=P.charCodeAt(te),z=x>>8,Q=x%256,Z.push(Q),Z.push(z);return Z}function ct(P){return e.toByteArray($i(P))}function st(P,y,x,z){let Q;for(Q=0;Q<z&&!(Q+x>=y.length||Q>=P.length);++Q)y[Q+x]=P[Q];return Q}function xn(P,y){return P instanceof y||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===y.name}function ot(P){return P!==P}const ut=function(){const P="0123456789abcdef",y=new Array(256);for(let x=0;x<16;++x){const z=x*16;for(let Q=0;Q<16;++Q)y[z+Q]=P[x]+P[Q]}return y}();function Ln(P){return typeof BigInt>"u"?Fe:P}function Fe(){throw new Error("BigInt not supported")}})(Be);function fb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function S8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lm(t,...e){if(!S8(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function k8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");fb(t.outputLen),fb(t.blockLen)}function op(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function T8(t,e){lm(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const sl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ig=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),bi=(t,e)=>t<<32-e|t>>>e;function A8(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function d1(t){return typeof t=="string"&&(t=A8(t)),lm(t),t}function N8(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];lm(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class RA{clone(){return this._cloneInto()}}function MA(t){const e=r=>t().update(d1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function PA(t=32){if(sl&&typeof sl.getRandomValues=="function")return sl.getRandomValues(new Uint8Array(t));if(sl&&typeof sl.randomBytes=="function")return sl.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function C8(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}const R8=(t,e,n)=>t&e^~t&n,M8=(t,e,n)=>t&e^t&n^e&n;class LA extends RA{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ig(this.buffer)}update(e){op(this);const{view:n,buffer:r,blockLen:i}=this;e=d1(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Ig(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){op(this),T8(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;C8(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Ig(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const Mh=BigInt(2**32-1),Ty=BigInt(32);function DA(t,e=!1){return e?{h:Number(t&Mh),l:Number(t>>Ty&Mh)}:{h:Number(t>>Ty&Mh)|0,l:Number(t&Mh)|0}}function P8(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=DA(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const L8=(t,e)=>BigInt(t>>>0)<<Ty|BigInt(e>>>0),D8=(t,e,n)=>t>>>n,O8=(t,e,n)=>t<<32-n|e>>>n,j8=(t,e,n)=>t>>>n|e<<32-n,B8=(t,e,n)=>t<<32-n|e>>>n,U8=(t,e,n)=>t<<64-n|e>>>n-32,F8=(t,e,n)=>t>>>n-32|e<<64-n,V8=(t,e)=>e,z8=(t,e)=>t,W8=(t,e,n)=>t<<n|e>>>32-n,$8=(t,e,n)=>e<<n|t>>>32-n,q8=(t,e,n)=>e<<n-32|t>>>64-n,H8=(t,e,n)=>t<<n-32|e>>>64-n;function K8(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const G8=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Y8=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Q8=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Z8=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,X8=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),J8=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,We={fromBig:DA,split:P8,toBig:L8,shrSH:D8,shrSL:O8,rotrSH:j8,rotrSL:B8,rotrBH:U8,rotrBL:F8,rotr32H:V8,rotr32L:z8,rotlSH:W8,rotlSL:$8,rotlBH:q8,rotlBL:H8,add:K8,add3L:G8,add3H:Y8,add4L:Q8,add4H:Z8,add5H:J8,add5L:X8},[eU,tU]=We.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Bs=new Uint32Array(80),Us=new Uint32Array(80);class nU extends LA{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:d,Fh:h,Fl:m,Gh:w,Gl:k,Hh:I,Hl:_}=this;return[e,n,r,i,s,o,a,l,c,d,h,m,w,k,I,_]}set(e,n,r,i,s,o,a,l,c,d,h,m,w,k,I,_){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=h|0,this.Fl=m|0,this.Gh=w|0,this.Gl=k|0,this.Hh=I|0,this.Hl=_|0}process(e,n){for(let E=0;E<16;E++,n+=4)Bs[E]=e.getUint32(n),Us[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const j=Bs[E-15]|0,K=Us[E-15]|0,G=We.rotrSH(j,K,1)^We.rotrSH(j,K,8)^We.shrSH(j,K,7),O=We.rotrSL(j,K,1)^We.rotrSL(j,K,8)^We.shrSL(j,K,7),L=Bs[E-2]|0,B=Us[E-2]|0,W=We.rotrSH(L,B,19)^We.rotrBH(L,B,61)^We.shrSH(L,B,6),$=We.rotrSL(L,B,19)^We.rotrBL(L,B,61)^We.shrSL(L,B,6),H=We.add4L(O,$,Us[E-7],Us[E-16]),A=We.add4H(H,G,W,Bs[E-7],Bs[E-16]);Bs[E]=A|0,Us[E]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:d,Eh:h,El:m,Fh:w,Fl:k,Gh:I,Gl:_,Hh:T,Hl:S}=this;for(let E=0;E<80;E++){const j=We.rotrSH(h,m,14)^We.rotrSH(h,m,18)^We.rotrBH(h,m,41),K=We.rotrSL(h,m,14)^We.rotrSL(h,m,18)^We.rotrBL(h,m,41),G=h&w^~h&I,O=m&k^~m&_,L=We.add5L(S,K,O,tU[E],Us[E]),B=We.add5H(L,T,j,G,eU[E],Bs[E]),W=L|0,$=We.rotrSH(r,i,28)^We.rotrBH(r,i,34)^We.rotrBH(r,i,39),H=We.rotrSL(r,i,28)^We.rotrBL(r,i,34)^We.rotrBL(r,i,39),A=r&s^r&a^s&a,f=i&o^i&l^o&l;T=I|0,S=_|0,I=w|0,_=k|0,w=h|0,k=m|0,{h,l:m}=We.add(c|0,d|0,B|0,W|0),c=a|0,d=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const b=We.add3L(W,H,f);r=We.add3H(b,B,$,A),i=b|0}({h:r,l:i}=We.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=We.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=We.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=We.add(this.Dh|0,this.Dl|0,c|0,d|0),{h,l:m}=We.add(this.Eh|0,this.El|0,h|0,m|0),{h:w,l:k}=We.add(this.Fh|0,this.Fl|0,w|0,k|0),{h:I,l:_}=We.add(this.Gh|0,this.Gl|0,I|0,_|0),{h:T,l:S}=We.add(this.Hh|0,this.Hl|0,T|0,S|0),this.set(r,i,s,o,a,l,c,d,h,m,w,k,I,_,T,S)}roundClean(){Bs.fill(0),Us.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const rU=MA(()=>new nU);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cm=BigInt(0),um=BigInt(1),iU=BigInt(2);function Ca(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zd(t){if(!Ca(t))throw new Error("Uint8Array expected")}function gs(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const sU=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ra(t){zd(t);let e="";for(let n=0;n<t.length;n++)e+=sU[t[n]];return e}function Sl(t){const e=t.toString(16);return e.length&1?"0"+e:e}function h1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?cm:BigInt("0x"+t)}const Yi={_0:48,_9:57,A:65,F:70,a:97,f:102};function pb(t){if(t>=Yi._0&&t<=Yi._9)return t-Yi._0;if(t>=Yi.A&&t<=Yi.F)return t-(Yi.A-10);if(t>=Yi.a&&t<=Yi.f)return t-(Yi.a-10)}function ic(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=pb(t.charCodeAt(s)),a=pb(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function ma(t){return h1(Ra(t))}function Ul(t){return zd(t),h1(Ra(Uint8Array.from(t).reverse()))}function sc(t,e){return ic(t.toString(16).padStart(e*2,"0"))}function md(t,e){return sc(t,e).reverse()}function oU(t){return ic(Sl(t))}function yn(t,e,n){let r;if(typeof e=="string")try{r=ic(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Ca(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Ma(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];zd(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function aU(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function lU(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Sg=t=>typeof t=="bigint"&&cm<=t;function dm(t,e,n){return Sg(t)&&Sg(e)&&Sg(n)&&e<=t&&t<n}function Kr(t,e,n,r){if(!dm(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function OA(t){let e;for(e=0;t>cm;t>>=um,e+=1);return e}function cU(t,e){return t>>BigInt(e)&um}function uU(t,e,n){return t|(n?um:cm)<<BigInt(e)}const f1=t=>(iU<<BigInt(t-1))-um,kg=t=>new Uint8Array(t),mb=t=>Uint8Array.from(t);function jA(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=kg(t),i=kg(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),l=(h=kg())=>{i=a(mb([0]),h),r=a(),h.length!==0&&(i=a(mb([1]),h),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const m=[];for(;h<e;){r=a();const w=r.slice();m.push(w),h+=r.length}return Ma(...m)};return(h,m)=>{o(),l(h);let w;for(;!(w=m(c()));)l();return o(),w}}const dU={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ca(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function kc(t,e,n={}){const r=(i,s,o)=>{const a=dU[s];if(typeof a!="function")throw new Error("invalid validator function");const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+l)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const hU=()=>{throw new Error("not implemented")};function gd(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const fU=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Kr,abool:gs,abytes:zd,bitGet:cU,bitLen:OA,bitMask:f1,bitSet:uU,bytesToHex:Ra,bytesToNumberBE:ma,bytesToNumberLE:Ul,concatBytes:Ma,createHmacDrbg:jA,ensureBytes:yn,equalBytes:aU,hexToBytes:ic,hexToNumber:h1,inRange:dm,isBytes:Ca,memoized:gd,notImplemented:hU,numberToBytesBE:sc,numberToBytesLE:md,numberToHexUnpadded:Sl,numberToVarBytesBE:oU,utf8ToBytes:lU,validateObject:kc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rn=BigInt(0),Qt=BigInt(1),Xo=BigInt(2),pU=BigInt(3),Ay=BigInt(4),gb=BigInt(5),yb=BigInt(8);function Ft(t,e){const n=t%e;return n>=Rn?n:e+n}function mU(t,e,n){if(e<Rn)throw new Error("invalid exponent, negatives unsupported");if(n<=Rn)throw new Error("invalid modulus");if(n===Qt)return Rn;let r=Qt;for(;e>Rn;)e&Qt&&(r=r*t%n),t=t*t%n,e>>=Qt;return r}function sn(t,e,n){let r=t;for(;e-- >Rn;)r*=r,r%=n;return r}function Ny(t,e){if(t===Rn)throw new Error("invert: expected non-zero number");if(e<=Rn)throw new Error("invert: expected positive modulus, got "+e);let n=Ft(t,e),r=e,i=Rn,s=Qt;for(;n!==Rn;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==Qt)throw new Error("invert: does not exist");return Ft(i,e)}function gU(t){const e=(t-Qt)/Xo;let n,r,i;for(n=t-Qt,r=0;n%Xo===Rn;n/=Xo,r++);for(i=Xo;i<t&&mU(i,e,t)!==t-Qt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Qt)/Ay;return function(l,c){const d=l.pow(c,o);if(!l.eql(l.sqr(d),c))throw new Error("Cannot find square root");return d}}const s=(n+Qt)/Xo;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,d=a.pow(a.mul(a.ONE,i),n),h=a.pow(l,s),m=a.pow(l,n);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let w=1;for(let I=a.sqr(m);w<c&&!a.eql(I,a.ONE);w++)I=a.sqr(I);const k=a.pow(d,Qt<<BigInt(c-w-1));d=a.sqr(k),h=a.mul(h,k),m=a.mul(m,d),c=w}return h}}function yU(t){if(t%Ay===pU){const e=(t+Qt)/Ay;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%yb===gb){const e=(t-gb)/yb;return function(r,i){const s=r.mul(i,Xo),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,Xo),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return gU(t)}const wU=(t,e)=>(Ft(t,e)&Qt)===Qt,vU=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _U(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=vU.reduce((r,i)=>(r[i]="function",r),e);return kc(t,n)}function xU(t,e,n){if(n<Rn)throw new Error("invalid exponent, negatives unsupported");if(n===Rn)return t.ONE;if(n===Qt)return e;let r=t.ONE,i=e;for(;n>Rn;)n&Qt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Qt;return r}function EU(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function BA(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function hm(t,e,n=!1,r={}){if(t<=Rn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=BA(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:f1(i),ZERO:Rn,ONE:Qt,create:l=>Ft(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Rn<=l&&l<t},is0:l=>l===Rn,isOdd:l=>(l&Qt)===Qt,neg:l=>Ft(-l,t),eql:(l,c)=>l===c,sqr:l=>Ft(l*l,t),add:(l,c)=>Ft(l+c,t),sub:(l,c)=>Ft(l-c,t),mul:(l,c)=>Ft(l*c,t),pow:(l,c)=>xU(a,l,c),div:(l,c)=>Ft(l*Ny(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Ny(l,t),sqrt:r.sqrt||(l=>(o||(o=yU(t)),o(a,l))),invertBatch:l=>EU(a,l),cmov:(l,c,d)=>d?c:l,toBytes:l=>n?md(l,s):sc(l,s),fromBytes:l=>{if(l.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);return n?Ul(l):ma(l)}});return Object.freeze(a)}function UA(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function FA(t){const e=UA(t);return e+Math.ceil(e/2)}function bU(t,e,n=!1){const r=t.length,i=UA(e),s=FA(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?Ul(t):ma(t),a=Ft(o,e-Qt)+Qt;return n?md(a,i):sc(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wb=BigInt(0),Ph=BigInt(1);function Tg(t,e){const n=e.negate();return t?n:e}function VA(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ag(t,e){VA(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function IU(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function SU(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ng=new WeakMap,zA=new WeakMap;function Cg(t){return zA.get(t)||1}function WA(t,e){return{constTimeNegate:Tg,hasPrecomputes(n){return Cg(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>wb;)r&Ph&&(i=i.add(s)),s=s.double(),r>>=Ph;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=Ag(r,e),o=[];let a=n,l=a;for(let c=0;c<i;c++){l=a,o.push(l);for(let d=1;d<s;d++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=Ag(n,e);let a=t.ZERO,l=t.BASE;const c=BigInt(2**n-1),d=2**n,h=BigInt(n);for(let m=0;m<s;m++){const w=m*o;let k=Number(i&c);i>>=h,k>o&&(k-=d,i+=Ph);const I=w,_=w+Math.abs(k)-1,T=m%2!==0,S=k<0;k===0?l=l.add(Tg(T,r[I])):a=a.add(Tg(S,r[_]))}return{p:a,f:l}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=Ag(n,e),l=BigInt(2**n-1),c=2**n,d=BigInt(n);for(let h=0;h<o;h++){const m=h*a;if(i===wb)break;let w=Number(i&l);if(i>>=d,w>a&&(w-=c,i+=Ph),w===0)continue;let k=r[m+Math.abs(w)-1];w<0&&(k=k.negate()),s=s.add(k)}return s},getPrecomputes(n,r,i){let s=Ng.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&Ng.set(r,i(s))),s},wNAFCached(n,r,i){const s=Cg(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Cg(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){VA(r,e),zA.set(n,r),Ng.delete(n)}}}function $A(t,e,n,r){if(IU(n,t),SU(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=OA(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=new Array(a+1).fill(i),c=Math.floor((e.BITS-1)/o)*o;let d=i;for(let h=c;h>=0;h-=o){l.fill(i);for(let w=0;w<r.length;w++){const k=r[w],I=Number(k>>BigInt(h)&BigInt(a));l[I]=l[I].add(n[w])}let m=i;for(let w=l.length-1,k=i;w>0;w--)k=k.add(l[w]),m=m.add(k);if(d=d.add(m),h!==0)for(let w=0;w<o;w++)d=d.double()}return d}function p1(t){return _U(t.Fp),kc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...BA(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ii=BigInt(0),wr=BigInt(1),Lh=BigInt(2),kU=BigInt(8),TU={zip215:!0};function AU(t){const e=p1(t);return kc(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function NU(t){const e=AU(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,c=Lh<<BigInt(a*8)-wr,d=n.create,h=hm(e.n,e.nBitLength),m=e.uvRatio||((C,M)=>{try{return{isValid:!0,value:n.sqrt(C*n.inv(M))}}catch{return{isValid:!1,value:ii}}}),w=e.adjustScalarBytes||(C=>C),k=e.domain||((C,M,R)=>{if(gs("phflag",R),M.length||R)throw new Error("Contexts/pre-hash are not supported");return C});function I(C,M){Kr("coordinate "+C,M,ii,c)}function _(C){if(!(C instanceof E))throw new Error("ExtendedPoint expected")}const T=gd((C,M)=>{const{ex:R,ey:F,ez:q}=C,D=C.is0();M==null&&(M=D?kU:n.inv(q));const v=d(R*M),V=d(F*M),se=d(q*M);if(D)return{x:ii,y:wr};if(se!==wr)throw new Error("invZ was invalid");return{x:v,y:V}}),S=gd(C=>{const{a:M,d:R}=e;if(C.is0())throw new Error("bad point: ZERO");const{ex:F,ey:q,ez:D,et:v}=C,V=d(F*F),se=d(q*q),le=d(D*D),de=d(le*le),Ae=d(V*M),Ie=d(le*d(Ae+se)),Ce=d(de+d(R*d(V*se)));if(Ie!==Ce)throw new Error("bad point: equation left != right (1)");const vt=d(F*q),Ue=d(D*v);if(vt!==Ue)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(M,R,F,q){this.ex=M,this.ey=R,this.ez=F,this.et=q,I("x",M),I("y",R),I("z",F),I("t",q),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(M){if(M instanceof E)throw new Error("extended point not allowed");const{x:R,y:F}=M||{};return I("x",R),I("y",F),new E(R,F,wr,d(R*F))}static normalizeZ(M){const R=n.invertBatch(M.map(F=>F.ez));return M.map((F,q)=>F.toAffine(R[q])).map(E.fromAffine)}static msm(M,R){return $A(E,h,M,R)}_setWindowSize(M){G.setWindowSize(this,M)}assertValidity(){S(this)}equals(M){_(M);const{ex:R,ey:F,ez:q}=this,{ex:D,ey:v,ez:V}=M,se=d(R*V),le=d(D*q),de=d(F*V),Ae=d(v*q);return se===le&&de===Ae}is0(){return this.equals(E.ZERO)}negate(){return new E(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:M}=e,{ex:R,ey:F,ez:q}=this,D=d(R*R),v=d(F*F),V=d(Lh*d(q*q)),se=d(M*D),le=R+F,de=d(d(le*le)-D-v),Ae=se+v,Ie=Ae-V,Ce=se-v,vt=d(de*Ie),Ue=d(Ae*Ce),Oe=d(de*Ce),jt=d(Ie*Ae);return new E(vt,Ue,jt,Oe)}add(M){_(M);const{a:R,d:F}=e,{ex:q,ey:D,ez:v,et:V}=this,{ex:se,ey:le,ez:de,et:Ae}=M;if(R===BigInt(-1)){const ct=d((D-q)*(le+se)),st=d((D+q)*(le-se)),xn=d(st-ct);if(xn===ii)return this.double();const ot=d(v*Lh*Ae),ut=d(V*Lh*de),Ln=ut+ot,Fe=st+ct,P=ut-ot,y=d(Ln*xn),x=d(Fe*P),z=d(Ln*P),Q=d(xn*Fe);return new E(y,x,Q,z)}const Ie=d(q*se),Ce=d(D*le),vt=d(V*F*Ae),Ue=d(v*de),Oe=d((q+D)*(se+le)-Ie-Ce),jt=Ue-vt,qe=Ue+vt,Ge=d(Ce-R*Ie),$i=d(Oe*jt),yt=d(qe*Ge),bt=d(Oe*Ge),qi=d(jt*qe);return new E($i,yt,qi,bt)}subtract(M){return this.add(M.negate())}wNAF(M){return G.wNAFCached(this,M,E.normalizeZ)}multiply(M){const R=M;Kr("scalar",R,wr,r);const{p:F,f:q}=this.wNAF(R);return E.normalizeZ([F,q])[0]}multiplyUnsafe(M,R=E.ZERO){const F=M;return Kr("scalar",F,ii,r),F===ii?K:this.is0()||F===wr?this:G.wNAFCachedUnsafe(this,F,E.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return G.unsafeLadder(this,r).is0()}toAffine(M){return T(this,M)}clearCofactor(){const{h:M}=e;return M===wr?this:this.multiplyUnsafe(M)}static fromHex(M,R=!1){const{d:F,a:q}=e,D=n.BYTES;M=yn("pointHex",M,D),gs("zip215",R);const v=M.slice(),V=M[D-1];v[D-1]=V&-129;const se=Ul(v),le=R?c:n.ORDER;Kr("pointHex.y",se,ii,le);const de=d(se*se),Ae=d(de-wr),Ie=d(F*de-q);let{isValid:Ce,value:vt}=m(Ae,Ie);if(!Ce)throw new Error("Point.fromHex: invalid y coordinate");const Ue=(vt&wr)===wr,Oe=(V&128)!==0;if(!R&&vt===ii&&Oe)throw new Error("Point.fromHex: x=0 and x_0=1");return Oe!==Ue&&(vt=d(-vt)),E.fromAffine({x:vt,y:se})}static fromPrivateKey(M){return B(M).point}toRawBytes(){const{x:M,y:R}=this.toAffine(),F=md(R,n.BYTES);return F[F.length-1]|=M&wr?128:0,F}toHex(){return Ra(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,wr,d(e.Gx*e.Gy)),E.ZERO=new E(ii,wr,wr,ii);const{BASE:j,ZERO:K}=E,G=WA(E,a*8);function O(C){return Ft(C,r)}function L(C){return O(Ul(C))}function B(C){const M=n.BYTES;C=yn("private key",C,M);const R=yn("hashed private key",s(C),2*M),F=w(R.slice(0,M)),q=R.slice(M,2*M),D=L(F),v=j.multiply(D),V=v.toRawBytes();return{head:F,prefix:q,scalar:D,point:v,pointBytes:V}}function W(C){return B(C).pointBytes}function $(C=new Uint8Array,...M){const R=Ma(...M);return L(s(k(R,yn("context",C),!!i)))}function H(C,M,R={}){C=yn("message",C),i&&(C=i(C));const{prefix:F,scalar:q,pointBytes:D}=B(M),v=$(R.context,F,C),V=j.multiply(v).toRawBytes(),se=$(R.context,V,D,C),le=O(v+se*q);Kr("signature.s",le,ii,r);const de=Ma(V,md(le,n.BYTES));return yn("result",de,n.BYTES*2)}const A=TU;function f(C,M,R,F=A){const{context:q,zip215:D}=F,v=n.BYTES;C=yn("signature",C,2*v),M=yn("message",M),R=yn("publicKey",R,v),D!==void 0&&gs("zip215",D),i&&(M=i(M));const V=Ul(C.slice(v,2*v));let se,le,de;try{se=E.fromHex(R,D),le=E.fromHex(C.slice(0,v),D),de=j.multiplyUnsafe(V)}catch{return!1}if(!D&&se.isSmallOrder())return!1;const Ae=$(q,le.toRawBytes(),se.toRawBytes(),M);return le.add(se.multiplyUnsafe(Ae)).subtract(de).clearCofactor().equals(E.ZERO)}return j._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:H,verify:f,ExtendedPoint:E,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(n.BYTES),precompute(C=8,M=E.BASE){return M._setWindowSize(C),M.multiply(BigInt(3)),M}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m1=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),vb=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const CU=BigInt(1),_b=BigInt(2);BigInt(3);const RU=BigInt(5),MU=BigInt(8);function PU(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=m1,a=t*t%s*t%s,l=sn(a,_b,s)*a%s,c=sn(l,CU,s)*t%s,d=sn(c,RU,s)*c%s,h=sn(d,e,s)*d%s,m=sn(h,n,s)*h%s,w=sn(m,r,s)*m%s,k=sn(w,i,s)*w%s,I=sn(k,i,s)*w%s,_=sn(I,e,s)*d%s;return{pow_p_5_8:sn(_,_b,s)*t%s,b2:a}}function LU(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function DU(t,e){const n=m1,r=Ft(e*e*e,n),i=Ft(r*r*e,n),s=PU(t*i).pow_p_5_8;let o=Ft(t*r*s,n);const a=Ft(e*o*o,n),l=o,c=Ft(o*vb,n),d=a===t,h=a===Ft(-t,n),m=a===Ft(-t*vb,n);return d&&(o=l),(h||m)&&(o=c),wU(o,n)&&(o=Ft(-o,n)),{isValid:d||h,value:o}}const OU=hm(m1,void 0,!0),jU={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:OU,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:MU,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:rU,randomBytes:PA,adjustScalarBytes:LU,uvRatio:DU},Wd=NU(jU);var g1={exports:{}};const BU={},UU=Object.freeze(Object.defineProperty({__proto__:null,default:BU},Symbol.toStringTag,{value:"Module"})),FU=lw(UU);g1.exports;(function(t){(function(e,n){function r(A,f){if(!A)throw new Error(f||"Assertion failed")}function i(A,f){A.super_=f;var b=function(){};b.prototype=f.prototype,A.prototype=new b,A.prototype.constructor=A}function s(A,f,b){if(s.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((f==="le"||f==="be")&&(b=f,f=10),this._init(A||0,f||10,b||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=FU.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,b){return f.cmp(b)>0?f:b},s.min=function(f,b){return f.cmp(b)<0?f:b},s.prototype._init=function(f,b,C){if(typeof f=="number")return this._initNumber(f,b,C);if(typeof f=="object")return this._initArray(f,b,C);b==="hex"&&(b=16),r(b===(b|0)&&b>=2&&b<=36),f=f.toString().replace(/\s+/g,"");var M=0;f[0]==="-"&&(M++,this.negative=1),M<f.length&&(b===16?this._parseHex(f,M,C):(this._parseBase(f,b,M),C==="le"&&this._initArray(this.toArray(),b,C)))},s.prototype._initNumber=function(f,b,C){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),b,C)},s.prototype._initArray=function(f,b,C){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R,F,q=0;if(C==="be")for(M=f.length-1,R=0;M>=0;M-=3)F=f[M]|f[M-1]<<8|f[M-2]<<16,this.words[R]|=F<<q&67108863,this.words[R+1]=F>>>26-q&67108863,q+=24,q>=26&&(q-=26,R++);else if(C==="le")for(M=0,R=0;M<f.length;M+=3)F=f[M]|f[M+1]<<8|f[M+2]<<16,this.words[R]|=F<<q&67108863,this.words[R+1]=F>>>26-q&67108863,q+=24,q>=26&&(q-=26,R++);return this._strip()};function a(A,f){var b=A.charCodeAt(f);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;r(!1,"Invalid character in "+A)}function l(A,f,b){var C=a(A,b);return b-1>=f&&(C|=a(A,b-1)<<4),C}s.prototype._parseHex=function(f,b,C){this.length=Math.ceil((f.length-b)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R=0,F=0,q;if(C==="be")for(M=f.length-1;M>=b;M-=2)q=l(f,b,M)<<R,this.words[F]|=q&67108863,R>=18?(R-=18,F+=1,this.words[F]|=q>>>26):R+=8;else{var D=f.length-b;for(M=D%2===0?b+1:b;M<f.length;M+=2)q=l(f,b,M)<<R,this.words[F]|=q&67108863,R>=18?(R-=18,F+=1,this.words[F]|=q>>>26):R+=8}this._strip()};function c(A,f,b,C){for(var M=0,R=0,F=Math.min(A.length,b),q=f;q<F;q++){var D=A.charCodeAt(q)-48;M*=C,D>=49?R=D-49+10:D>=17?R=D-17+10:R=D,r(D>=0&&R<C,"Invalid character"),M+=R}return M}s.prototype._parseBase=function(f,b,C){this.words=[0],this.length=1;for(var M=0,R=1;R<=67108863;R*=b)M++;M--,R=R/b|0;for(var F=f.length-C,q=F%M,D=Math.min(F,F-q)+C,v=0,V=C;V<D;V+=M)v=c(f,V,V+M,b),this.imuln(R),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(q!==0){var se=1;for(v=c(f,V,f.length,b),V=0;V<q;V++)se*=b;this.imuln(se),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this._strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var b=0;b<this.length;b++)f.words[b]=this.words[b];f.length=this.length,f.negative=this.negative,f.red=this.red};function d(A,f){A.words=f.words,A.length=f.length,A.negative=f.negative,A.red=f.red}if(s.prototype._move=function(f){d(f,this)},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],k=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,b){f=f||10,b=b|0||1;var C;if(f===16||f==="hex"){C="";for(var M=0,R=0,F=0;F<this.length;F++){var q=this.words[F],D=((q<<M|R)&16777215).toString(16);R=q>>>24-M&16777215,M+=2,M>=26&&(M-=26,F--),R!==0||F!==this.length-1?C=m[6-D.length]+D+C:C=D+C}for(R!==0&&(C=R.toString(16)+C);C.length%b!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(f===(f|0)&&f>=2&&f<=36){var v=w[f],V=k[f];C="";var se=this.clone();for(se.negative=0;!se.isZero();){var le=se.modrn(V).toString(f);se=se.idivn(V),se.isZero()?C=le+C:C=m[v-le.length]+le+C}for(this.isZero()&&(C="0"+C);C.length%b!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(f,b){return this.toArrayLike(o,f,b)}),s.prototype.toArray=function(f,b){return this.toArrayLike(Array,f,b)};var I=function(f,b){return f.allocUnsafe?f.allocUnsafe(b):new f(b)};s.prototype.toArrayLike=function(f,b,C){this._strip();var M=this.byteLength(),R=C||Math.max(1,M);r(M<=R,"byte array longer than desired length"),r(R>0,"Requested array length <= 0");var F=I(f,R),q=b==="le"?"LE":"BE";return this["_toArrayLike"+q](F,M),F},s.prototype._toArrayLikeLE=function(f,b){for(var C=0,M=0,R=0,F=0;R<this.length;R++){var q=this.words[R]<<F|M;f[C++]=q&255,C<f.length&&(f[C++]=q>>8&255),C<f.length&&(f[C++]=q>>16&255),F===6?(C<f.length&&(f[C++]=q>>24&255),M=0,F=0):(M=q>>>24,F+=2)}if(C<f.length)for(f[C++]=M;C<f.length;)f[C++]=0},s.prototype._toArrayLikeBE=function(f,b){for(var C=f.length-1,M=0,R=0,F=0;R<this.length;R++){var q=this.words[R]<<F|M;f[C--]=q&255,C>=0&&(f[C--]=q>>8&255),C>=0&&(f[C--]=q>>16&255),F===6?(C>=0&&(f[C--]=q>>24&255),M=0,F=0):(M=q>>>24,F+=2)}if(C>=0)for(f[C--]=M;C>=0;)f[C--]=0},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var b=f,C=0;return b>=4096&&(C+=13,b>>>=13),b>=64&&(C+=7,b>>>=7),b>=8&&(C+=4,b>>>=4),b>=2&&(C+=2,b>>>=2),C+b},s.prototype._zeroBits=function(f){if(f===0)return 26;var b=f,C=0;return b&8191||(C+=13,b>>>=13),b&127||(C+=7,b>>>=7),b&15||(C+=4,b>>>=4),b&3||(C+=2,b>>>=2),b&1||C++,C},s.prototype.bitLength=function(){var f=this.words[this.length-1],b=this._countBits(f);return(this.length-1)*26+b};function _(A){for(var f=new Array(A.bitLength()),b=0;b<f.length;b++){var C=b/26|0,M=b%26;f[b]=A.words[C]>>>M&1}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,b=0;b<this.length;b++){var C=this._zeroBits(this.words[b]);if(f+=C,C!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var b=0;b<f.length;b++)this.words[b]=this.words[b]|f.words[b];return this._strip()},s.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var b;this.length>f.length?b=f:b=this;for(var C=0;C<b.length;C++)this.words[C]=this.words[C]&f.words[C];return this.length=b.length,this._strip()},s.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var b,C;this.length>f.length?(b=this,C=f):(b=f,C=this);for(var M=0;M<C.length;M++)this.words[M]=b.words[M]^C.words[M];if(this!==b)for(;M<b.length;M++)this.words[M]=b.words[M];return this.length=b.length,this._strip()},s.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var b=Math.ceil(f/26)|0,C=f%26;this._expand(b),C>0&&b--;for(var M=0;M<b;M++)this.words[M]=~this.words[M]&67108863;return C>0&&(this.words[M]=~this.words[M]&67108863>>26-C),this._strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,b){r(typeof f=="number"&&f>=0);var C=f/26|0,M=f%26;return this._expand(C+1),b?this.words[C]=this.words[C]|1<<M:this.words[C]=this.words[C]&~(1<<M),this._strip()},s.prototype.iadd=function(f){var b;if(this.negative!==0&&f.negative===0)return this.negative=0,b=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,b=this.isub(f),f.negative=1,b._normSign();var C,M;this.length>f.length?(C=this,M=f):(C=f,M=this);for(var R=0,F=0;F<M.length;F++)b=(C.words[F]|0)+(M.words[F]|0)+R,this.words[F]=b&67108863,R=b>>>26;for(;R!==0&&F<C.length;F++)b=(C.words[F]|0)+R,this.words[F]=b&67108863,R=b>>>26;if(this.length=C.length,R!==0)this.words[this.length]=R,this.length++;else if(C!==this)for(;F<C.length;F++)this.words[F]=C.words[F];return this},s.prototype.add=function(f){var b;return f.negative!==0&&this.negative===0?(f.negative=0,b=this.sub(f),f.negative^=1,b):f.negative===0&&this.negative!==0?(this.negative=0,b=f.sub(this),this.negative=1,b):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var b=this.iadd(f);return f.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var C=this.cmp(f);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,R;C>0?(M=this,R=f):(M=f,R=this);for(var F=0,q=0;q<R.length;q++)b=(M.words[q]|0)-(R.words[q]|0)+F,F=b>>26,this.words[q]=b&67108863;for(;F!==0&&q<M.length;q++)b=(M.words[q]|0)+F,F=b>>26,this.words[q]=b&67108863;if(F===0&&q<M.length&&M!==this)for(;q<M.length;q++)this.words[q]=M.words[q];return this.length=Math.max(this.length,q),M!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function T(A,f,b){b.negative=f.negative^A.negative;var C=A.length+f.length|0;b.length=C,C=C-1|0;var M=A.words[0]|0,R=f.words[0]|0,F=M*R,q=F&67108863,D=F/67108864|0;b.words[0]=q;for(var v=1;v<C;v++){for(var V=D>>>26,se=D&67108863,le=Math.min(v,f.length-1),de=Math.max(0,v-A.length+1);de<=le;de++){var Ae=v-de|0;M=A.words[Ae]|0,R=f.words[de]|0,F=M*R+se,V+=F/67108864|0,se=F&67108863}b.words[v]=se|0,D=V|0}return D!==0?b.words[v]=D|0:b.length--,b._strip()}var S=function(f,b,C){var M=f.words,R=b.words,F=C.words,q=0,D,v,V,se=M[0]|0,le=se&8191,de=se>>>13,Ae=M[1]|0,Ie=Ae&8191,Ce=Ae>>>13,vt=M[2]|0,Ue=vt&8191,Oe=vt>>>13,jt=M[3]|0,qe=jt&8191,Ge=jt>>>13,$i=M[4]|0,yt=$i&8191,bt=$i>>>13,qi=M[5]|0,ct=qi&8191,st=qi>>>13,xn=M[6]|0,ot=xn&8191,ut=xn>>>13,Ln=M[7]|0,Fe=Ln&8191,P=Ln>>>13,y=M[8]|0,x=y&8191,z=y>>>13,Q=M[9]|0,Z=Q&8191,te=Q>>>13,je=R[0]|0,Re=je&8191,Me=je>>>13,_t=R[1]|0,ke=_t&8191,Wt=_t>>>13,Mc=R[2]|0,It=Mc&8191,Bt=Mc>>>13,$a=R[3]|0,wt=$a&8191,$t=$a>>>13,Bo=R[4]|0,qt=Bo&8191,St=Bo>>>13,Pc=R[5]|0,Ye=Pc&8191,Ht=Pc>>>13,Ms=R[6]|0,kt=Ms&8191,tn=Ms>>>13,Yd=R[7]|0,xt=Yd&8191,nn=Yd>>>13,Qd=R[8]|0,Nt=Qd&8191,Kt=Qd>>>13,qa=R[9]|0,Ct=qa&8191,dt=qa>>>13;C.negative=f.negative^b.negative,C.length=19,D=Math.imul(le,Re),v=Math.imul(le,Me),v=v+Math.imul(de,Re)|0,V=Math.imul(de,Me);var Ha=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Ha>>>26)|0,Ha&=67108863,D=Math.imul(Ie,Re),v=Math.imul(Ie,Me),v=v+Math.imul(Ce,Re)|0,V=Math.imul(Ce,Me),D=D+Math.imul(le,ke)|0,v=v+Math.imul(le,Wt)|0,v=v+Math.imul(de,ke)|0,V=V+Math.imul(de,Wt)|0;var Ka=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Ka>>>26)|0,Ka&=67108863,D=Math.imul(Ue,Re),v=Math.imul(Ue,Me),v=v+Math.imul(Oe,Re)|0,V=Math.imul(Oe,Me),D=D+Math.imul(Ie,ke)|0,v=v+Math.imul(Ie,Wt)|0,v=v+Math.imul(Ce,ke)|0,V=V+Math.imul(Ce,Wt)|0,D=D+Math.imul(le,It)|0,v=v+Math.imul(le,Bt)|0,v=v+Math.imul(de,It)|0,V=V+Math.imul(de,Bt)|0;var Uo=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Uo>>>26)|0,Uo&=67108863,D=Math.imul(qe,Re),v=Math.imul(qe,Me),v=v+Math.imul(Ge,Re)|0,V=Math.imul(Ge,Me),D=D+Math.imul(Ue,ke)|0,v=v+Math.imul(Ue,Wt)|0,v=v+Math.imul(Oe,ke)|0,V=V+Math.imul(Oe,Wt)|0,D=D+Math.imul(Ie,It)|0,v=v+Math.imul(Ie,Bt)|0,v=v+Math.imul(Ce,It)|0,V=V+Math.imul(Ce,Bt)|0,D=D+Math.imul(le,wt)|0,v=v+Math.imul(le,$t)|0,v=v+Math.imul(de,wt)|0,V=V+Math.imul(de,$t)|0;var Fo=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Fo>>>26)|0,Fo&=67108863,D=Math.imul(yt,Re),v=Math.imul(yt,Me),v=v+Math.imul(bt,Re)|0,V=Math.imul(bt,Me),D=D+Math.imul(qe,ke)|0,v=v+Math.imul(qe,Wt)|0,v=v+Math.imul(Ge,ke)|0,V=V+Math.imul(Ge,Wt)|0,D=D+Math.imul(Ue,It)|0,v=v+Math.imul(Ue,Bt)|0,v=v+Math.imul(Oe,It)|0,V=V+Math.imul(Oe,Bt)|0,D=D+Math.imul(Ie,wt)|0,v=v+Math.imul(Ie,$t)|0,v=v+Math.imul(Ce,wt)|0,V=V+Math.imul(Ce,$t)|0,D=D+Math.imul(le,qt)|0,v=v+Math.imul(le,St)|0,v=v+Math.imul(de,qt)|0,V=V+Math.imul(de,St)|0;var Ga=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Ga>>>26)|0,Ga&=67108863,D=Math.imul(ct,Re),v=Math.imul(ct,Me),v=v+Math.imul(st,Re)|0,V=Math.imul(st,Me),D=D+Math.imul(yt,ke)|0,v=v+Math.imul(yt,Wt)|0,v=v+Math.imul(bt,ke)|0,V=V+Math.imul(bt,Wt)|0,D=D+Math.imul(qe,It)|0,v=v+Math.imul(qe,Bt)|0,v=v+Math.imul(Ge,It)|0,V=V+Math.imul(Ge,Bt)|0,D=D+Math.imul(Ue,wt)|0,v=v+Math.imul(Ue,$t)|0,v=v+Math.imul(Oe,wt)|0,V=V+Math.imul(Oe,$t)|0,D=D+Math.imul(Ie,qt)|0,v=v+Math.imul(Ie,St)|0,v=v+Math.imul(Ce,qt)|0,V=V+Math.imul(Ce,St)|0,D=D+Math.imul(le,Ye)|0,v=v+Math.imul(le,Ht)|0,v=v+Math.imul(de,Ye)|0,V=V+Math.imul(de,Ht)|0;var Ya=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Ya>>>26)|0,Ya&=67108863,D=Math.imul(ot,Re),v=Math.imul(ot,Me),v=v+Math.imul(ut,Re)|0,V=Math.imul(ut,Me),D=D+Math.imul(ct,ke)|0,v=v+Math.imul(ct,Wt)|0,v=v+Math.imul(st,ke)|0,V=V+Math.imul(st,Wt)|0,D=D+Math.imul(yt,It)|0,v=v+Math.imul(yt,Bt)|0,v=v+Math.imul(bt,It)|0,V=V+Math.imul(bt,Bt)|0,D=D+Math.imul(qe,wt)|0,v=v+Math.imul(qe,$t)|0,v=v+Math.imul(Ge,wt)|0,V=V+Math.imul(Ge,$t)|0,D=D+Math.imul(Ue,qt)|0,v=v+Math.imul(Ue,St)|0,v=v+Math.imul(Oe,qt)|0,V=V+Math.imul(Oe,St)|0,D=D+Math.imul(Ie,Ye)|0,v=v+Math.imul(Ie,Ht)|0,v=v+Math.imul(Ce,Ye)|0,V=V+Math.imul(Ce,Ht)|0,D=D+Math.imul(le,kt)|0,v=v+Math.imul(le,tn)|0,v=v+Math.imul(de,kt)|0,V=V+Math.imul(de,tn)|0;var Lc=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Lc>>>26)|0,Lc&=67108863,D=Math.imul(Fe,Re),v=Math.imul(Fe,Me),v=v+Math.imul(P,Re)|0,V=Math.imul(P,Me),D=D+Math.imul(ot,ke)|0,v=v+Math.imul(ot,Wt)|0,v=v+Math.imul(ut,ke)|0,V=V+Math.imul(ut,Wt)|0,D=D+Math.imul(ct,It)|0,v=v+Math.imul(ct,Bt)|0,v=v+Math.imul(st,It)|0,V=V+Math.imul(st,Bt)|0,D=D+Math.imul(yt,wt)|0,v=v+Math.imul(yt,$t)|0,v=v+Math.imul(bt,wt)|0,V=V+Math.imul(bt,$t)|0,D=D+Math.imul(qe,qt)|0,v=v+Math.imul(qe,St)|0,v=v+Math.imul(Ge,qt)|0,V=V+Math.imul(Ge,St)|0,D=D+Math.imul(Ue,Ye)|0,v=v+Math.imul(Ue,Ht)|0,v=v+Math.imul(Oe,Ye)|0,V=V+Math.imul(Oe,Ht)|0,D=D+Math.imul(Ie,kt)|0,v=v+Math.imul(Ie,tn)|0,v=v+Math.imul(Ce,kt)|0,V=V+Math.imul(Ce,tn)|0,D=D+Math.imul(le,xt)|0,v=v+Math.imul(le,nn)|0,v=v+Math.imul(de,xt)|0,V=V+Math.imul(de,nn)|0;var Ps=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,D=Math.imul(x,Re),v=Math.imul(x,Me),v=v+Math.imul(z,Re)|0,V=Math.imul(z,Me),D=D+Math.imul(Fe,ke)|0,v=v+Math.imul(Fe,Wt)|0,v=v+Math.imul(P,ke)|0,V=V+Math.imul(P,Wt)|0,D=D+Math.imul(ot,It)|0,v=v+Math.imul(ot,Bt)|0,v=v+Math.imul(ut,It)|0,V=V+Math.imul(ut,Bt)|0,D=D+Math.imul(ct,wt)|0,v=v+Math.imul(ct,$t)|0,v=v+Math.imul(st,wt)|0,V=V+Math.imul(st,$t)|0,D=D+Math.imul(yt,qt)|0,v=v+Math.imul(yt,St)|0,v=v+Math.imul(bt,qt)|0,V=V+Math.imul(bt,St)|0,D=D+Math.imul(qe,Ye)|0,v=v+Math.imul(qe,Ht)|0,v=v+Math.imul(Ge,Ye)|0,V=V+Math.imul(Ge,Ht)|0,D=D+Math.imul(Ue,kt)|0,v=v+Math.imul(Ue,tn)|0,v=v+Math.imul(Oe,kt)|0,V=V+Math.imul(Oe,tn)|0,D=D+Math.imul(Ie,xt)|0,v=v+Math.imul(Ie,nn)|0,v=v+Math.imul(Ce,xt)|0,V=V+Math.imul(Ce,nn)|0,D=D+Math.imul(le,Nt)|0,v=v+Math.imul(le,Kt)|0,v=v+Math.imul(de,Nt)|0,V=V+Math.imul(de,Kt)|0;var Qa=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Qa>>>26)|0,Qa&=67108863,D=Math.imul(Z,Re),v=Math.imul(Z,Me),v=v+Math.imul(te,Re)|0,V=Math.imul(te,Me),D=D+Math.imul(x,ke)|0,v=v+Math.imul(x,Wt)|0,v=v+Math.imul(z,ke)|0,V=V+Math.imul(z,Wt)|0,D=D+Math.imul(Fe,It)|0,v=v+Math.imul(Fe,Bt)|0,v=v+Math.imul(P,It)|0,V=V+Math.imul(P,Bt)|0,D=D+Math.imul(ot,wt)|0,v=v+Math.imul(ot,$t)|0,v=v+Math.imul(ut,wt)|0,V=V+Math.imul(ut,$t)|0,D=D+Math.imul(ct,qt)|0,v=v+Math.imul(ct,St)|0,v=v+Math.imul(st,qt)|0,V=V+Math.imul(st,St)|0,D=D+Math.imul(yt,Ye)|0,v=v+Math.imul(yt,Ht)|0,v=v+Math.imul(bt,Ye)|0,V=V+Math.imul(bt,Ht)|0,D=D+Math.imul(qe,kt)|0,v=v+Math.imul(qe,tn)|0,v=v+Math.imul(Ge,kt)|0,V=V+Math.imul(Ge,tn)|0,D=D+Math.imul(Ue,xt)|0,v=v+Math.imul(Ue,nn)|0,v=v+Math.imul(Oe,xt)|0,V=V+Math.imul(Oe,nn)|0,D=D+Math.imul(Ie,Nt)|0,v=v+Math.imul(Ie,Kt)|0,v=v+Math.imul(Ce,Nt)|0,V=V+Math.imul(Ce,Kt)|0,D=D+Math.imul(le,Ct)|0,v=v+Math.imul(le,dt)|0,v=v+Math.imul(de,Ct)|0,V=V+Math.imul(de,dt)|0;var Vo=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Vo>>>26)|0,Vo&=67108863,D=Math.imul(Z,ke),v=Math.imul(Z,Wt),v=v+Math.imul(te,ke)|0,V=Math.imul(te,Wt),D=D+Math.imul(x,It)|0,v=v+Math.imul(x,Bt)|0,v=v+Math.imul(z,It)|0,V=V+Math.imul(z,Bt)|0,D=D+Math.imul(Fe,wt)|0,v=v+Math.imul(Fe,$t)|0,v=v+Math.imul(P,wt)|0,V=V+Math.imul(P,$t)|0,D=D+Math.imul(ot,qt)|0,v=v+Math.imul(ot,St)|0,v=v+Math.imul(ut,qt)|0,V=V+Math.imul(ut,St)|0,D=D+Math.imul(ct,Ye)|0,v=v+Math.imul(ct,Ht)|0,v=v+Math.imul(st,Ye)|0,V=V+Math.imul(st,Ht)|0,D=D+Math.imul(yt,kt)|0,v=v+Math.imul(yt,tn)|0,v=v+Math.imul(bt,kt)|0,V=V+Math.imul(bt,tn)|0,D=D+Math.imul(qe,xt)|0,v=v+Math.imul(qe,nn)|0,v=v+Math.imul(Ge,xt)|0,V=V+Math.imul(Ge,nn)|0,D=D+Math.imul(Ue,Nt)|0,v=v+Math.imul(Ue,Kt)|0,v=v+Math.imul(Oe,Nt)|0,V=V+Math.imul(Oe,Kt)|0,D=D+Math.imul(Ie,Ct)|0,v=v+Math.imul(Ie,dt)|0,v=v+Math.imul(Ce,Ct)|0,V=V+Math.imul(Ce,dt)|0;var Hi=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,D=Math.imul(Z,It),v=Math.imul(Z,Bt),v=v+Math.imul(te,It)|0,V=Math.imul(te,Bt),D=D+Math.imul(x,wt)|0,v=v+Math.imul(x,$t)|0,v=v+Math.imul(z,wt)|0,V=V+Math.imul(z,$t)|0,D=D+Math.imul(Fe,qt)|0,v=v+Math.imul(Fe,St)|0,v=v+Math.imul(P,qt)|0,V=V+Math.imul(P,St)|0,D=D+Math.imul(ot,Ye)|0,v=v+Math.imul(ot,Ht)|0,v=v+Math.imul(ut,Ye)|0,V=V+Math.imul(ut,Ht)|0,D=D+Math.imul(ct,kt)|0,v=v+Math.imul(ct,tn)|0,v=v+Math.imul(st,kt)|0,V=V+Math.imul(st,tn)|0,D=D+Math.imul(yt,xt)|0,v=v+Math.imul(yt,nn)|0,v=v+Math.imul(bt,xt)|0,V=V+Math.imul(bt,nn)|0,D=D+Math.imul(qe,Nt)|0,v=v+Math.imul(qe,Kt)|0,v=v+Math.imul(Ge,Nt)|0,V=V+Math.imul(Ge,Kt)|0,D=D+Math.imul(Ue,Ct)|0,v=v+Math.imul(Ue,dt)|0,v=v+Math.imul(Oe,Ct)|0,V=V+Math.imul(Oe,dt)|0;var ti=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(ti>>>26)|0,ti&=67108863,D=Math.imul(Z,wt),v=Math.imul(Z,$t),v=v+Math.imul(te,wt)|0,V=Math.imul(te,$t),D=D+Math.imul(x,qt)|0,v=v+Math.imul(x,St)|0,v=v+Math.imul(z,qt)|0,V=V+Math.imul(z,St)|0,D=D+Math.imul(Fe,Ye)|0,v=v+Math.imul(Fe,Ht)|0,v=v+Math.imul(P,Ye)|0,V=V+Math.imul(P,Ht)|0,D=D+Math.imul(ot,kt)|0,v=v+Math.imul(ot,tn)|0,v=v+Math.imul(ut,kt)|0,V=V+Math.imul(ut,tn)|0,D=D+Math.imul(ct,xt)|0,v=v+Math.imul(ct,nn)|0,v=v+Math.imul(st,xt)|0,V=V+Math.imul(st,nn)|0,D=D+Math.imul(yt,Nt)|0,v=v+Math.imul(yt,Kt)|0,v=v+Math.imul(bt,Nt)|0,V=V+Math.imul(bt,Kt)|0,D=D+Math.imul(qe,Ct)|0,v=v+Math.imul(qe,dt)|0,v=v+Math.imul(Ge,Ct)|0,V=V+Math.imul(Ge,dt)|0;var zo=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(zo>>>26)|0,zo&=67108863,D=Math.imul(Z,qt),v=Math.imul(Z,St),v=v+Math.imul(te,qt)|0,V=Math.imul(te,St),D=D+Math.imul(x,Ye)|0,v=v+Math.imul(x,Ht)|0,v=v+Math.imul(z,Ye)|0,V=V+Math.imul(z,Ht)|0,D=D+Math.imul(Fe,kt)|0,v=v+Math.imul(Fe,tn)|0,v=v+Math.imul(P,kt)|0,V=V+Math.imul(P,tn)|0,D=D+Math.imul(ot,xt)|0,v=v+Math.imul(ot,nn)|0,v=v+Math.imul(ut,xt)|0,V=V+Math.imul(ut,nn)|0,D=D+Math.imul(ct,Nt)|0,v=v+Math.imul(ct,Kt)|0,v=v+Math.imul(st,Nt)|0,V=V+Math.imul(st,Kt)|0,D=D+Math.imul(yt,Ct)|0,v=v+Math.imul(yt,dt)|0,v=v+Math.imul(bt,Ct)|0,V=V+Math.imul(bt,dt)|0;var Dc=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Dc>>>26)|0,Dc&=67108863,D=Math.imul(Z,Ye),v=Math.imul(Z,Ht),v=v+Math.imul(te,Ye)|0,V=Math.imul(te,Ht),D=D+Math.imul(x,kt)|0,v=v+Math.imul(x,tn)|0,v=v+Math.imul(z,kt)|0,V=V+Math.imul(z,tn)|0,D=D+Math.imul(Fe,xt)|0,v=v+Math.imul(Fe,nn)|0,v=v+Math.imul(P,xt)|0,V=V+Math.imul(P,nn)|0,D=D+Math.imul(ot,Nt)|0,v=v+Math.imul(ot,Kt)|0,v=v+Math.imul(ut,Nt)|0,V=V+Math.imul(ut,Kt)|0,D=D+Math.imul(ct,Ct)|0,v=v+Math.imul(ct,dt)|0,v=v+Math.imul(st,Ct)|0,V=V+Math.imul(st,dt)|0;var Za=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Za>>>26)|0,Za&=67108863,D=Math.imul(Z,kt),v=Math.imul(Z,tn),v=v+Math.imul(te,kt)|0,V=Math.imul(te,tn),D=D+Math.imul(x,xt)|0,v=v+Math.imul(x,nn)|0,v=v+Math.imul(z,xt)|0,V=V+Math.imul(z,nn)|0,D=D+Math.imul(Fe,Nt)|0,v=v+Math.imul(Fe,Kt)|0,v=v+Math.imul(P,Nt)|0,V=V+Math.imul(P,Kt)|0,D=D+Math.imul(ot,Ct)|0,v=v+Math.imul(ot,dt)|0,v=v+Math.imul(ut,Ct)|0,V=V+Math.imul(ut,dt)|0;var Xa=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Xa>>>26)|0,Xa&=67108863,D=Math.imul(Z,xt),v=Math.imul(Z,nn),v=v+Math.imul(te,xt)|0,V=Math.imul(te,nn),D=D+Math.imul(x,Nt)|0,v=v+Math.imul(x,Kt)|0,v=v+Math.imul(z,Nt)|0,V=V+Math.imul(z,Kt)|0,D=D+Math.imul(Fe,Ct)|0,v=v+Math.imul(Fe,dt)|0,v=v+Math.imul(P,Ct)|0,V=V+Math.imul(P,dt)|0;var Ja=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Ja>>>26)|0,Ja&=67108863,D=Math.imul(Z,Nt),v=Math.imul(Z,Kt),v=v+Math.imul(te,Nt)|0,V=Math.imul(te,Kt),D=D+Math.imul(x,Ct)|0,v=v+Math.imul(x,dt)|0,v=v+Math.imul(z,Ct)|0,V=V+Math.imul(z,dt)|0;var Wo=(q+D|0)+((v&8191)<<13)|0;q=(V+(v>>>13)|0)+(Wo>>>26)|0,Wo&=67108863,D=Math.imul(Z,Ct),v=Math.imul(Z,dt),v=v+Math.imul(te,Ct)|0,V=Math.imul(te,dt);var $o=(q+D|0)+((v&8191)<<13)|0;return q=(V+(v>>>13)|0)+($o>>>26)|0,$o&=67108863,F[0]=Ha,F[1]=Ka,F[2]=Uo,F[3]=Fo,F[4]=Ga,F[5]=Ya,F[6]=Lc,F[7]=Ps,F[8]=Qa,F[9]=Vo,F[10]=Hi,F[11]=ti,F[12]=zo,F[13]=Dc,F[14]=Za,F[15]=Xa,F[16]=Ja,F[17]=Wo,F[18]=$o,q!==0&&(F[19]=q,C.length++),C};Math.imul||(S=T);function E(A,f,b){b.negative=f.negative^A.negative,b.length=A.length+f.length;for(var C=0,M=0,R=0;R<b.length-1;R++){var F=M;M=0;for(var q=C&67108863,D=Math.min(R,f.length-1),v=Math.max(0,R-A.length+1);v<=D;v++){var V=R-v,se=A.words[V]|0,le=f.words[v]|0,de=se*le,Ae=de&67108863;F=F+(de/67108864|0)|0,Ae=Ae+q|0,q=Ae&67108863,F=F+(Ae>>>26)|0,M+=F>>>26,F&=67108863}b.words[R]=q,C=F,F=M}return C!==0?b.words[R]=C:b.length--,b._strip()}function j(A,f,b){return E(A,f,b)}s.prototype.mulTo=function(f,b){var C,M=this.length+f.length;return this.length===10&&f.length===10?C=S(this,f,b):M<63?C=T(this,f,b):M<1024?C=E(this,f,b):C=j(this,f,b),C},s.prototype.mul=function(f){var b=new s(null);return b.words=new Array(this.length+f.length),this.mulTo(f,b)},s.prototype.mulf=function(f){var b=new s(null);return b.words=new Array(this.length+f.length),j(this,f,b)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){var b=f<0;b&&(f=-f),r(typeof f=="number"),r(f<67108864);for(var C=0,M=0;M<this.length;M++){var R=(this.words[M]|0)*f,F=(R&67108863)+(C&67108863);C>>=26,C+=R/67108864|0,C+=F>>>26,this.words[M]=F&67108863}return C!==0&&(this.words[M]=C,this.length++),b?this.ineg():this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var b=_(f);if(b.length===0)return new s(1);for(var C=this,M=0;M<b.length&&b[M]===0;M++,C=C.sqr());if(++M<b.length)for(var R=C.sqr();M<b.length;M++,R=R.sqr())b[M]!==0&&(C=C.mul(R));return C},s.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var b=f%26,C=(f-b)/26,M=67108863>>>26-b<<26-b,R;if(b!==0){var F=0;for(R=0;R<this.length;R++){var q=this.words[R]&M,D=(this.words[R]|0)-q<<b;this.words[R]=D|F,F=q>>>26-b}F&&(this.words[R]=F,this.length++)}if(C!==0){for(R=this.length-1;R>=0;R--)this.words[R+C]=this.words[R];for(R=0;R<C;R++)this.words[R]=0;this.length+=C}return this._strip()},s.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,b,C){r(typeof f=="number"&&f>=0);var M;b?M=(b-b%26)/26:M=0;var R=f%26,F=Math.min((f-R)/26,this.length),q=67108863^67108863>>>R<<R,D=C;if(M-=F,M=Math.max(0,M),D){for(var v=0;v<F;v++)D.words[v]=this.words[v];D.length=F}if(F!==0)if(this.length>F)for(this.length-=F,v=0;v<this.length;v++)this.words[v]=this.words[v+F];else this.words[0]=0,this.length=1;var V=0;for(v=this.length-1;v>=0&&(V!==0||v>=M);v--){var se=this.words[v]|0;this.words[v]=V<<26-R|se>>>R,V=se&q}return D&&V!==0&&(D.words[D.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(f,b,C){return r(this.negative===0),this.iushrn(f,b,C)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var b=f%26,C=(f-b)/26,M=1<<b;if(this.length<=C)return!1;var R=this.words[C];return!!(R&M)},s.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var b=f%26,C=(f-b)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(b!==0&&C++,this.length=Math.min(C,this.length),b!==0){var M=67108863^67108863>>>b<<b;this.words[this.length-1]&=M}return this._strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,b,C){var M=f.length+C,R;this._expand(M);var F,q=0;for(R=0;R<f.length;R++){F=(this.words[R+C]|0)+q;var D=(f.words[R]|0)*b;F-=D&67108863,q=(F>>26)-(D/67108864|0),this.words[R+C]=F&67108863}for(;R<this.length-C;R++)F=(this.words[R+C]|0)+q,q=F>>26,this.words[R+C]=F&67108863;if(q===0)return this._strip();for(r(q===-1),q=0,R=0;R<this.length;R++)F=-(this.words[R]|0)+q,q=F>>26,this.words[R]=F&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(f,b){var C=this.length-f.length,M=this.clone(),R=f,F=R.words[R.length-1]|0,q=this._countBits(F);C=26-q,C!==0&&(R=R.ushln(C),M.iushln(C),F=R.words[R.length-1]|0);var D=M.length-R.length,v;if(b!=="mod"){v=new s(null),v.length=D+1,v.words=new Array(v.length);for(var V=0;V<v.length;V++)v.words[V]=0}var se=M.clone()._ishlnsubmul(R,1,D);se.negative===0&&(M=se,v&&(v.words[D]=1));for(var le=D-1;le>=0;le--){var de=(M.words[R.length+le]|0)*67108864+(M.words[R.length+le-1]|0);for(de=Math.min(de/F|0,67108863),M._ishlnsubmul(R,de,le);M.negative!==0;)de--,M.negative=0,M._ishlnsubmul(R,1,le),M.isZero()||(M.negative^=1);v&&(v.words[le]=de)}return v&&v._strip(),M._strip(),b!=="div"&&C!==0&&M.iushrn(C),{div:v||null,mod:M}},s.prototype.divmod=function(f,b,C){if(r(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var M,R,F;return this.negative!==0&&f.negative===0?(F=this.neg().divmod(f,b),b!=="mod"&&(M=F.div.neg()),b!=="div"&&(R=F.mod.neg(),C&&R.negative!==0&&R.iadd(f)),{div:M,mod:R}):this.negative===0&&f.negative!==0?(F=this.divmod(f.neg(),b),b!=="mod"&&(M=F.div.neg()),{div:M,mod:F.mod}):this.negative&f.negative?(F=this.neg().divmod(f.neg(),b),b!=="div"&&(R=F.mod.neg(),C&&R.negative!==0&&R.isub(f)),{div:F.div,mod:R}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?b==="div"?{div:this.divn(f.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modrn(f.words[0]))}:this._wordDiv(f,b)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var b=this.divmod(f);if(b.mod.isZero())return b.div;var C=b.div.negative!==0?b.mod.isub(f):b.mod,M=f.ushrn(1),R=f.andln(1),F=C.cmp(M);return F<0||R===1&&F===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modrn=function(f){var b=f<0;b&&(f=-f),r(f<=67108863);for(var C=(1<<26)%f,M=0,R=this.length-1;R>=0;R--)M=(C*M+(this.words[R]|0))%f;return b?-M:M},s.prototype.modn=function(f){return this.modrn(f)},s.prototype.idivn=function(f){var b=f<0;b&&(f=-f),r(f<=67108863);for(var C=0,M=this.length-1;M>=0;M--){var R=(this.words[M]|0)+C*67108864;this.words[M]=R/f|0,C=R%f}return this._strip(),b?this.ineg():this},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var b=this,C=f.clone();b.negative!==0?b=b.umod(f):b=b.clone();for(var M=new s(1),R=new s(0),F=new s(0),q=new s(1),D=0;b.isEven()&&C.isEven();)b.iushrn(1),C.iushrn(1),++D;for(var v=C.clone(),V=b.clone();!b.isZero();){for(var se=0,le=1;!(b.words[0]&le)&&se<26;++se,le<<=1);if(se>0)for(b.iushrn(se);se-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(v),R.isub(V)),M.iushrn(1),R.iushrn(1);for(var de=0,Ae=1;!(C.words[0]&Ae)&&de<26;++de,Ae<<=1);if(de>0)for(C.iushrn(de);de-- >0;)(F.isOdd()||q.isOdd())&&(F.iadd(v),q.isub(V)),F.iushrn(1),q.iushrn(1);b.cmp(C)>=0?(b.isub(C),M.isub(F),R.isub(q)):(C.isub(b),F.isub(M),q.isub(R))}return{a:F,b:q,gcd:C.iushln(D)}},s.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var b=this,C=f.clone();b.negative!==0?b=b.umod(f):b=b.clone();for(var M=new s(1),R=new s(0),F=C.clone();b.cmpn(1)>0&&C.cmpn(1)>0;){for(var q=0,D=1;!(b.words[0]&D)&&q<26;++q,D<<=1);if(q>0)for(b.iushrn(q);q-- >0;)M.isOdd()&&M.iadd(F),M.iushrn(1);for(var v=0,V=1;!(C.words[0]&V)&&v<26;++v,V<<=1);if(v>0)for(C.iushrn(v);v-- >0;)R.isOdd()&&R.iadd(F),R.iushrn(1);b.cmp(C)>=0?(b.isub(C),M.isub(R)):(C.isub(b),R.isub(M))}var se;return b.cmpn(1)===0?se=M:se=R,se.cmpn(0)<0&&se.iadd(f),se},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var b=this.clone(),C=f.clone();b.negative=0,C.negative=0;for(var M=0;b.isEven()&&C.isEven();M++)b.iushrn(1),C.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;C.isEven();)C.iushrn(1);var R=b.cmp(C);if(R<0){var F=b;b=C,C=F}else if(R===0||C.cmpn(1)===0)break;b.isub(C)}while(!0);return C.iushln(M)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){r(typeof f=="number");var b=f%26,C=(f-b)/26,M=1<<b;if(this.length<=C)return this._expand(C+1),this.words[C]|=M,this;for(var R=M,F=C;R!==0&&F<this.length;F++){var q=this.words[F]|0;q+=R,R=q>>>26,q&=67108863,this.words[F]=q}return R!==0&&(this.words[F]=R,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var b=f<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var C;if(this.length>1)C=1;else{b&&(f=-f),r(f<=67108863,"Number is too big");var M=this.words[0]|0;C=M===f?0:M<f?-1:1}return this.negative!==0?-C|0:C},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var b=this.ucmp(f);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var b=0,C=this.length-1;C>=0;C--){var M=this.words[C]|0,R=f.words[C]|0;if(M!==R){M<R?b=-1:M>R&&(b=1);break}}return b},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new $(f)},s.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var K={k256:null,p224:null,p192:null,p25519:null};function G(A,f){this.name=A,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},G.prototype.ireduce=function(f){var b=f,C;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),C=b.bitLength();while(C>this.n);var M=C<this.n?-1:b.ucmp(this.p);return M===0?(b.words[0]=0,b.length=1):M>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},G.prototype.split=function(f,b){f.iushrn(this.n,0,b)},G.prototype.imulK=function(f){return f.imul(this.k)};function O(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(O,G),O.prototype.split=function(f,b){for(var C=4194303,M=Math.min(f.length,9),R=0;R<M;R++)b.words[R]=f.words[R];if(b.length=M,f.length<=9){f.words[0]=0,f.length=1;return}var F=f.words[9];for(b.words[b.length++]=F&C,R=10;R<f.length;R++){var q=f.words[R]|0;f.words[R-10]=(q&C)<<4|F>>>22,F=q}F>>>=22,f.words[R-10]=F,F===0&&f.length>10?f.length-=10:f.length-=9},O.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var b=0,C=0;C<f.length;C++){var M=f.words[C]|0;b+=M*977,f.words[C]=b&67108863,b=M*64+(b/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function L(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(L,G);function B(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,G);function W(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(W,G),W.prototype.imulK=function(f){for(var b=0,C=0;C<f.length;C++){var M=(f.words[C]|0)*19+b,R=M&67108863;M>>>=26,f.words[C]=R,b=M}return b!==0&&(f.words[f.length++]=b),f},s._prime=function(f){if(K[f])return K[f];var b;if(f==="k256")b=new O;else if(f==="p224")b=new L;else if(f==="p192")b=new B;else if(f==="p25519")b=new W;else throw new Error("Unknown prime "+f);return K[f]=b,b};function $(A){if(typeof A=="string"){var f=s._prime(A);this.m=f.p,this.prime=f}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}$.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},$.prototype._verify2=function(f,b){r((f.negative|b.negative)===0,"red works only with positives"),r(f.red&&f.red===b.red,"red works only with red numbers")},$.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(d(f,f.umod(this.m)._forceRed(this)),f)},$.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},$.prototype.add=function(f,b){this._verify2(f,b);var C=f.add(b);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},$.prototype.iadd=function(f,b){this._verify2(f,b);var C=f.iadd(b);return C.cmp(this.m)>=0&&C.isub(this.m),C},$.prototype.sub=function(f,b){this._verify2(f,b);var C=f.sub(b);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},$.prototype.isub=function(f,b){this._verify2(f,b);var C=f.isub(b);return C.cmpn(0)<0&&C.iadd(this.m),C},$.prototype.shl=function(f,b){return this._verify1(f),this.imod(f.ushln(b))},$.prototype.imul=function(f,b){return this._verify2(f,b),this.imod(f.imul(b))},$.prototype.mul=function(f,b){return this._verify2(f,b),this.imod(f.mul(b))},$.prototype.isqr=function(f){return this.imul(f,f.clone())},$.prototype.sqr=function(f){return this.mul(f,f)},$.prototype.sqrt=function(f){if(f.isZero())return f.clone();var b=this.m.andln(3);if(r(b%2===1),b===3){var C=this.m.add(new s(1)).iushrn(2);return this.pow(f,C)}for(var M=this.m.subn(1),R=0;!M.isZero()&&M.andln(1)===0;)R++,M.iushrn(1);r(!M.isZero());var F=new s(1).toRed(this),q=F.redNeg(),D=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new s(2*v*v).toRed(this);this.pow(v,D).cmp(q)!==0;)v.redIAdd(q);for(var V=this.pow(v,M),se=this.pow(f,M.addn(1).iushrn(1)),le=this.pow(f,M),de=R;le.cmp(F)!==0;){for(var Ae=le,Ie=0;Ae.cmp(F)!==0;Ie++)Ae=Ae.redSqr();r(Ie<de);var Ce=this.pow(V,new s(1).iushln(de-Ie-1));se=se.redMul(Ce),V=Ce.redSqr(),le=le.redMul(V),de=Ie}return se},$.prototype.invm=function(f){var b=f._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},$.prototype.pow=function(f,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return f.clone();var C=4,M=new Array(1<<C);M[0]=new s(1).toRed(this),M[1]=f;for(var R=2;R<M.length;R++)M[R]=this.mul(M[R-1],f);var F=M[0],q=0,D=0,v=b.bitLength()%26;for(v===0&&(v=26),R=b.length-1;R>=0;R--){for(var V=b.words[R],se=v-1;se>=0;se--){var le=V>>se&1;if(F!==M[0]&&(F=this.sqr(F)),le===0&&q===0){D=0;continue}q<<=1,q|=le,D++,!(D!==C&&(R!==0||se!==0))&&(F=this.mul(F,M[q]),D=0,q=0)}v=26}return F},$.prototype.convertTo=function(f){var b=f.umod(this.m);return b===f?b.clone():b},$.prototype.convertFrom=function(f){var b=f.clone();return b.red=null,b},s.mont=function(f){return new H(f)};function H(A){$.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(H,$),H.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},H.prototype.convertFrom=function(f){var b=this.imod(f.mul(this.rinv));return b.red=null,b},H.prototype.imul=function(f,b){if(f.isZero()||b.isZero())return f.words[0]=0,f.length=1,f;var C=f.imul(b),M=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=C.isub(M).iushrn(this.shift),F=R;return R.cmp(this.m)>=0?F=R.isub(this.m):R.cmpn(0)<0&&(F=R.iadd(this.m)),F._forceRed(this)},H.prototype.mul=function(f,b){if(f.isZero()||b.isZero())return new s(0)._forceRed(this);var C=f.mul(b),M=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=C.isub(M).iushrn(this.shift),F=R;return R.cmp(this.m)>=0?F=R.isub(this.m):R.cmpn(0)<0&&(F=R.iadd(this.m)),F._forceRed(this)},H.prototype.invm=function(f){var b=this.imod(f._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,yi)})(g1);var qA=g1.exports;const xb=Co(qA);var Cy={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=Be,r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(Cy,Cy.exports);var VU=Cy.exports,Dh=VU.Buffer;function zU(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function d(w){if((Array.isArray(w)||w instanceof Uint8Array)&&(w=Dh.from(w)),!Dh.isBuffer(w))throw new TypeError("Expected Buffer");if(w.length===0)return"";for(var k=0,I=0,_=0,T=w.length;_!==T&&w[_]===0;)_++,k++;for(var S=(T-_)*c+1>>>0,E=new Uint8Array(S);_!==T;){for(var j=w[_],K=0,G=S-1;(j!==0||K<I)&&G!==-1;G--,K++)j+=256*E[G]>>>0,E[G]=j%o>>>0,j=j/o>>>0;if(j!==0)throw new Error("Non-zero carry");I=K,_++}for(var O=S-I;O!==S&&E[O]===0;)O++;for(var L=a.repeat(k);O<S;++O)L+=t.charAt(E[O]);return L}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return Dh.alloc(0);for(var k=0,I=0,_=0;w[k]===a;)I++,k++;for(var T=(w.length-k)*l+1>>>0,S=new Uint8Array(T);k<w.length;){var E=e[w.charCodeAt(k)];if(E===255)return;for(var j=0,K=T-1;(E!==0||j<_)&&K!==-1;K--,j++)E+=o*S[K]>>>0,S[K]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");_=j,k++}for(var G=T-_;G!==T&&S[G]===0;)G++;var O=Dh.allocUnsafe(I+(T-G));O.fill(0,0,I);for(var L=I;G!==T;)O[L++]=S[G++];return O}function m(w){var k=h(w);if(k)return k;throw new Error("Non-base"+o+" character")}return{encode:d,decodeUnsafe:h,decode:m}}var WU=zU,$U=WU,qU="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",HA=$U(qU);const zn=Co(HA),HU=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vs=new Uint32Array(64);class KU extends LA{constructor(){super(64,32,8,!1),this.A=Fs[0]|0,this.B=Fs[1]|0,this.C=Fs[2]|0,this.D=Fs[3]|0,this.E=Fs[4]|0,this.F=Fs[5]|0,this.G=Fs[6]|0,this.H=Fs[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)Vs[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=Vs[h-15],w=Vs[h-2],k=bi(m,7)^bi(m,18)^m>>>3,I=bi(w,17)^bi(w,19)^w>>>10;Vs[h]=I+Vs[h-7]+k+Vs[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:d}=this;for(let h=0;h<64;h++){const m=bi(a,6)^bi(a,11)^bi(a,25),w=d+m+R8(a,l,c)+HU[h]+Vs[h]|0,I=(bi(r,2)^bi(r,13)^bi(r,22))+M8(r,i,s)|0;d=c,c=l,l=a,a=o+w|0,o=s,s=i,i=r,r=w+I|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,l,c,d)}roundClean(){Vs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ry=MA(()=>new KU);var Vn={};function ts(t,e,n){return e<=t&&t<=n}function fm(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function GU(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function YU(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var ap=-1;function y1(t){this.tokens=[].slice.call(t)}y1.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ap},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var oc=-1;function Rg(t,e){if(t)throw TypeError("Decoder error");return e||65533}var lp="utf-8";function cp(t,e){if(!(this instanceof cp))return new cp(t,e);if(t=t!==void 0?String(t).toLowerCase():lp,t!==lp)throw new Error("Encoding not supported. Only utf-8 is supported");e=fm(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}cp.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=fm(n),this._streaming||(this._decoder=new QU({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new y1(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==oc);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===oc)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),YU(s)}};function up(t,e){if(!(this instanceof up))return new up(t,e);if(t=t!==void 0?String(t).toLowerCase():lp,t!==lp)throw new Error("Encoding not supported. Only utf-8 is supported");e=fm(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}up.prototype={encode:function(e,n){e=e?String(e):"",n=fm(n),this._streaming||(this._encoder=new ZU(this._options)),this._streaming=!!n.stream;for(var r=[],i=new y1(GU(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==oc);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==oc;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function QU(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===ap&&i!==0)return i=0,Rg(e);if(l===ap)return oc;if(i===0){if(ts(l,0,127))return l;if(ts(l,194,223))i=1,n=l-192;else if(ts(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if(ts(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return Rg(e);return n=n<<6*i,null}if(!ts(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),Rg(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function ZU(t){t.fatal,this.handler=function(e,n){if(n===ap)return oc;if(ts(n,0,127))return n;var r,i;ts(n,128,2047)?(r=1,i=192):ts(n,2048,65535)?(r=2,i=224):ts(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const XU=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:cp,TextEncoder:up},Symbol.toStringTag,{value:"Module"})),JU=lw(XU);var eF=yi&&yi.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),tF=yi&&yi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fi=yi&&yi.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},nF=yi&&yi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&eF(e,t,n);return tF(e,t),e},KA=yi&&yi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vn,"__esModule",{value:!0});var GA=Vn.deserializeUnchecked=eN=Vn.deserialize=JA=Vn.serialize=Vn.BinaryReader=Vn.BinaryWriter=Vn.BorshError=Vn.baseDecode=Vn.baseEncode=void 0;const so=KA(qA),YA=KA(HA),rF=nF(JU),iF=typeof TextDecoder!="function"?rF.TextDecoder:TextDecoder,sF=new iF("utf-8",{fatal:!0});function oF(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),YA.default.encode(Buffer.from(t))}Vn.baseEncode=oF;function aF(t){return Buffer.from(YA.default.decode(t))}Vn.baseDecode=aF;const Mg=1024;class fr extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Vn.BorshError=fr;class QA{constructor(){this.buf=Buffer.alloc(Mg),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Mg)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new so.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new so.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new so.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new so.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Mg)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}Vn.BinaryWriter=QA;function Vi(t,e,n){const r=n.value;n.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new fr("Reached the end of buffer when deserializing")}throw s}}}class Fr{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new so.default(e,"le")}readU128(){const e=this.readBuffer(16);return new so.default(e,"le")}readU256(){const e=this.readBuffer(32);return new so.default(e,"le")}readU512(){const e=this.readBuffer(64);return new so.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new fr(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return sF.decode(n)}catch(r){throw new fr(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let i=0;i<n;++i)r.push(e());return r}}Fi([Vi],Fr.prototype,"readU8",null);Fi([Vi],Fr.prototype,"readU16",null);Fi([Vi],Fr.prototype,"readU32",null);Fi([Vi],Fr.prototype,"readU64",null);Fi([Vi],Fr.prototype,"readU128",null);Fi([Vi],Fr.prototype,"readU256",null);Fi([Vi],Fr.prototype,"readU512",null);Fi([Vi],Fr.prototype,"readString",null);Fi([Vi],Fr.prototype,"readFixedArray",null);Fi([Vi],Fr.prototype,"readArray",null);Vn.BinaryReader=Fr;function ZA(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Jo(t,e,n,r,i){try{if(typeof r=="string")i[`write${ZA(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new fr(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new fr(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let s=0;s<r[1];s++)Jo(t,null,n[s],r[0],i)}else i.writeArray(n,s=>{Jo(t,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?i.writeU8(0):(i.writeU8(1),Jo(t,e,n,r.type,i));break}case"map":{i.writeU32(n.size),n.forEach((s,o)=>{Jo(t,e,o,r.key,i),Jo(t,e,s,r.value,i)});break}default:throw new fr(`FieldType ${r} unrecognized`)}else XA(t,n,i)}catch(s){throw s instanceof fr&&s.addToFieldPath(e),s}}function XA(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new fr(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{Jo(t,i,e[i],s,n)});else if(r.kind==="enum"){const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){n.writeU8(s),Jo(t,o,e[o],a,n);break}}}else throw new fr(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function lF(t,e,n=QA){const r=new n;return XA(t,e,r),r.toArray()}var JA=Vn.serialize=lF;function ea(t,e,n,r){try{if(typeof n=="string")return r[`read${ZA(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const i=[];for(let s=0;s<n[1];s++)i.push(ea(t,null,n[0],r));return i}else return r.readArray(()=>ea(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?ea(t,e,n.type,r):void 0;if(n.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=ea(t,e,n.key,r),l=ea(t,e,n.value,r);i.set(a,l)}return i}return w1(t,n,r)}catch(i){throw i instanceof fr&&i.addToFieldPath(e),i}}function w1(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new fr(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of t.get(e).fields)i[s]=ea(t,s,o,n);return new e(i)}if(r.kind==="enum"){const i=n.readU8();if(i>=r.values.length)throw new fr(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=ea(t,s,o,n);return new e({[s]:a})}throw new fr(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function cF(t,e,n,r=Fr){const i=new r(n),s=w1(t,e,i);if(i.offset<n.length)throw new fr(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return s}var eN=Vn.deserialize=cF;function uF(t,e,n,r=Fr){const i=new r(n);return w1(t,e,i)}GA=Vn.deserializeUnchecked=uF;var ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.s16=ee.s8=ee.nu64be=ee.u48be=ee.u40be=ee.u32be=ee.u24be=ee.u16be=jn=ee.nu64=ee.u48=ee.u40=Se=ee.u32=ee.u24=Wr=ee.u16=at=ee.u8=ga=ee.offset=ee.greedy=ee.Constant=ee.UTF8=ee.CString=ee.Blob=ee.Boolean=ee.BitField=ee.BitStructure=ee.VariantLayout=ee.Union=ee.UnionLayoutDiscriminator=ee.UnionDiscriminator=ee.Structure=ee.Sequence=ee.DoubleBE=ee.Double=ee.FloatBE=ee.Float=ee.NearInt64BE=ee.NearInt64=ee.NearUInt64BE=ee.NearUInt64=ee.IntBE=ee.Int=ee.UIntBE=ee.UInt=ee.OffsetLayout=ee.GreedyCount=ee.ExternalLayout=ee.bindConstructorLayout=ee.nameWithProperty=ee.Layout=ee.uint8ArrayToBuffer=ee.checkUint8Array=void 0;ee.constant=ee.utf8=ee.cstr=Lt=ee.blob=ee.unionLayoutDiscriminator=ee.union=ar=ee.seq=ee.bits=ve=ee.struct=ee.f64be=ee.f64=ee.f32be=ee.f32=ee.ns64be=ee.s48be=ee.s40be=ee.s32be=ee.s24be=ee.s16be=Nr=ee.ns64=ee.s48=ee.s40=ee.s32=ee.s24=void 0;const v1=Be;function Tc(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ee.checkUint8Array=Tc;function it(t){return Tc(t),v1.Buffer.from(t.buffer,t.byteOffset,t.length)}ee.uint8ArrayToBuffer=it;let gt=class{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}};ee.Layout=gt;function _1(t,e){return e.property?t+"["+e.property+"]":t}ee.nameWithProperty=_1;function dF(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof gt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}ee.bindConstructorLayout=dF;class xr extends gt{isCount(){throw new Error("ExternalLayout is abstract")}}ee.ExternalLayout=xr;class tN extends xr{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){Tc(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}ee.GreedyCount=tN;class x1 extends xr{constructor(e,n=0,r){if(!(e instanceof gt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Qr||this.layout instanceof gi}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}ee.OffsetLayout=x1;class Qr extends gt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return it(e).readUIntLE(n,this.span)}encode(e,n,r=0){return it(n).writeUIntLE(e,r,this.span),this.span}}ee.UInt=Qr;class gi extends gt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return it(e).readUIntBE(n,this.span)}encode(e,n,r=0){return it(n).writeUIntBE(e,r,this.span),this.span}}ee.UIntBE=gi;class Ua extends gt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return it(e).readIntLE(n,this.span)}encode(e,n,r=0){return it(n).writeIntLE(e,r,this.span),this.span}}ee.Int=Ua;class Ac extends gt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return it(e).readIntBE(n,this.span)}encode(e,n,r=0){return it(n).writeIntBE(e,r,this.span),this.span}}ee.IntBE=Ac;const My=Math.pow(2,32);function pm(t){const e=Math.floor(t/My),n=t-e*My;return{hi32:e,lo32:n}}function mm(t,e){return t*My+e}class nN extends gt{constructor(e){super(8,e)}decode(e,n=0){const r=it(e),i=r.readUInt32LE(n),s=r.readUInt32LE(n+4);return mm(s,i)}encode(e,n,r=0){const i=pm(e),s=it(n);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}ee.NearUInt64=nN;class rN extends gt{constructor(e){super(8,e)}decode(e,n=0){const r=it(e),i=r.readUInt32BE(n),s=r.readUInt32BE(n+4);return mm(i,s)}encode(e,n,r=0){const i=pm(e),s=it(n);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}ee.NearUInt64BE=rN;class iN extends gt{constructor(e){super(8,e)}decode(e,n=0){const r=it(e),i=r.readUInt32LE(n),s=r.readInt32LE(n+4);return mm(s,i)}encode(e,n,r=0){const i=pm(e),s=it(n);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}ee.NearInt64=iN;class sN extends gt{constructor(e){super(8,e)}decode(e,n=0){const r=it(e),i=r.readInt32BE(n),s=r.readUInt32BE(n+4);return mm(i,s)}encode(e,n,r=0){const i=pm(e),s=it(n);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}ee.NearInt64BE=sN;class oN extends gt{constructor(e){super(4,e)}decode(e,n=0){return it(e).readFloatLE(n)}encode(e,n,r=0){return it(n).writeFloatLE(e,r),4}}ee.Float=oN;class aN extends gt{constructor(e){super(4,e)}decode(e,n=0){return it(e).readFloatBE(n)}encode(e,n,r=0){return it(n).writeFloatBE(e,r),4}}ee.FloatBE=aN;class lN extends gt{constructor(e){super(8,e)}decode(e,n=0){return it(e).readDoubleLE(n)}encode(e,n,r=0){return it(n).writeDoubleLE(e,r),8}}ee.Double=lN;class cN extends gt{constructor(e){super(8,e)}decode(e,n=0){return it(e).readDoubleBE(n)}encode(e,n,r=0){return it(n).writeDoubleBE(e,r),8}}ee.DoubleBE=cN;class uN extends gt{constructor(e,n,r){if(!(e instanceof gt))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof xr&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(n instanceof xr)&&0<e.span&&(i=n*e.span),super(i,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof xr&&(i=i.decode(e,n)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,n+r),++s}return r}decode(e,n=0){const r=[];let i=0,s=this.count;for(s instanceof xr&&(s=s.decode(e,n));i<s;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),i+=1;return r}encode(e,n,r=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,n,r+o),0);return this.count instanceof xr&&this.count.encode(e.length,n,r),s}}ee.Sequence=uN;class dN extends gt{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof gt,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(e,n);return n+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){Tc(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,n)),n+=i.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const c=e[a.property];c!==void 0&&(o=a.encode(c,n,r),0>l&&(l=a.getSpan(n,r)))}s=r,r+=l}return s+o-i}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}ee.Structure=dN;class E1{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}ee.UnionDiscriminator=E1;class dp extends E1{constructor(e,n){if(!(e instanceof xr&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}ee.UnionLayoutDiscriminator=dp;class b1 extends gt{constructor(e,n,r){let i;if(e instanceof Qr||e instanceof gi)i=new dp(new x1(e));else if(e instanceof xr&&e.isCount())i=new dp(e);else if(e instanceof E1)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof gt))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let s=-1;n&&(s=n.span,0<=s&&(e instanceof Qr||e instanceof gi)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Qr||e instanceof gi,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const i=this.discriminator,s=i.decode(e,n),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,n+l)}else r=o.decode(e,n);return r}encode(e,n,r=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],n,r),a+o.encode(e[o.property],n,r+a)}return i.encode(e,n,r)}addVariant(e,n,r){const i=new hN(this,e,n,r);return this.registry[e]=i,i}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}ee.Union=b1;class hN extends gt{constructor(e,n,r,i){if(!(e instanceof b1))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof gt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,n+r)),r+i}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],n,r+i),s+=this.layout.getSpan(n,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}ee.VariantLayout=hN;function ul(t){return 0>t&&(t+=4294967296),t}class I1 extends gt{constructor(e,n,r){if(!(e instanceof Qr||e instanceof gi))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let i=0;this._packedSetValue=function(s){return i=ul(s),this},this._packedGetValue=function(){return i}}decode(e,n=0){const r=this.makeDestinationObject(),i=this.word.decode(e,n);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,n,r=0){const i=this.word.decode(n,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new S1(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new fN(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}ee.BitStructure=I1;class S1{constructor(e,n,r){if(!(e instanceof I1))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(n+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-n),this.wordMask=ul(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return ul(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==ul(e&this.valueMask))throw new TypeError(_1("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=ul(e<<this.start);this.container._packedSetValue(ul(n&~this.wordMask)|r)}}ee.BitField=S1;let fN=class extends S1{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};ee.Boolean=fN;let pN=class extends gt{constructor(e,n){if(!(e instanceof xr&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof xr||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),it(e).slice(n,n+r)}encode(e,n,r){let i=this.length;if(this.length instanceof xr&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(_1("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>n.length)throw new RangeError("encoding overruns Uint8Array");const s=it(e);return it(n).write(s.toString("hex"),r,i,"hex"),this.length instanceof xr&&this.length.encode(i,n,r),i}};ee.Blob=pN;class mN extends gt{constructor(e){super(-1,e)}getSpan(e,n=0){Tc(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return it(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const i=v1.Buffer.from(e,"utf8"),s=i.length;if(r+s>n.length)throw new RangeError("encoding overruns Buffer");const o=it(n);return i.copy(o,r),o[r+s]=0,s+1}}ee.CString=mN;class gN extends gt{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return Tc(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return it(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const i=v1.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>n.length)throw new RangeError("encoding overruns Buffer");return i.copy(it(n),r),s}}ee.UTF8=gN;class yN extends gt{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}ee.Constant=yN;ee.greedy=(t,e)=>new tN(t,e);var ga=ee.offset=(t,e,n)=>new x1(t,e,n),at=ee.u8=t=>new Qr(1,t),Wr=ee.u16=t=>new Qr(2,t);ee.u24=t=>new Qr(3,t);var Se=ee.u32=t=>new Qr(4,t);ee.u40=t=>new Qr(5,t);ee.u48=t=>new Qr(6,t);var jn=ee.nu64=t=>new nN(t);ee.u16be=t=>new gi(2,t);ee.u24be=t=>new gi(3,t);ee.u32be=t=>new gi(4,t);ee.u40be=t=>new gi(5,t);ee.u48be=t=>new gi(6,t);ee.nu64be=t=>new rN(t);ee.s8=t=>new Ua(1,t);ee.s16=t=>new Ua(2,t);ee.s24=t=>new Ua(3,t);ee.s32=t=>new Ua(4,t);ee.s40=t=>new Ua(5,t);ee.s48=t=>new Ua(6,t);var Nr=ee.ns64=t=>new iN(t);ee.s16be=t=>new Ac(2,t);ee.s24be=t=>new Ac(3,t);ee.s32be=t=>new Ac(4,t);ee.s40be=t=>new Ac(5,t);ee.s48be=t=>new Ac(6,t);ee.ns64be=t=>new sN(t);ee.f32=t=>new oN(t);ee.f32be=t=>new aN(t);ee.f64=t=>new lN(t);ee.f64be=t=>new cN(t);var ve=ee.struct=(t,e,n)=>new dN(t,e,n);ee.bits=(t,e,n)=>new I1(t,e,n);var ar=ee.seq=(t,e,n)=>new uN(t,e,n);ee.union=(t,e,n)=>new b1(t,e,n);ee.unionLayoutDiscriminator=(t,e)=>new dp(t,e);var Lt=ee.blob=(t,e)=>new pN(t,e);ee.cstr=t=>new mN(t);ee.utf8=(t,e)=>new gN(t,e);ee.constant=(t,e)=>new yN(t,e);var $d={};Object.defineProperty($d,"__esModule",{value:!0});function hF(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var fF=$d.toBigIntLE=hF;function pF(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}$d.toBigIntBE=pF;function mF(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var gF=$d.toBufferLE=mF;function yF(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}$d.toBufferBE=yF;class wF extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function vF(t){return qd(t)&&typeof t[Symbol.iterator]=="function"}function qd(t){return typeof t=="object"&&t!=null}function hp(t){return qd(t)&&!Array.isArray(t)}function _i(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function _F(t){const{done:e,value:n}=t.next();return e?void 0:n}function xF(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${_i(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*Eb(t,e,n,r){vF(t)||(t=[t]);for(const i of t){const s=xF(i,e,n,r);s&&(yield s)}}function*k1(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,d,h]of e.entries(t,a)){const m=k1(d,h,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,d],coerce:s,mask:o,message:n.message});for(const w of m)w[0]?(l=w[0].refinement!=null?"not_refined":"not_valid",yield[w[0],void 0]):s&&(d=w[1],c===void 0?t=d:t instanceof Map?t.set(c,d):t instanceof Set?t.add(d):qd(t)&&(d!==void 0||c in t)&&(t[c]=d))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let zi=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const d=i(l,c);return Eb(d,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const d=s(l,c);return Eb(d,c,this,l)}:this.refiner=()=>[]}assert(e,n){return EF(e,this,n)}create(e,n){return fe(e,this,n)}is(e){return wN(e,this)}mask(e,n){return bF(e,this,n)}validate(e,n={}){return Hd(e,this,n)}};function EF(t,e,n){const r=Hd(t,e,{message:n});if(r[0])throw r[0]}function fe(t,e,n){const r=Hd(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function bF(t,e,n){const r=Hd(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function wN(t,e){return!Hd(t,e)[0]}function Hd(t,e,n={}){const r=k1(t,e,n),i=_F(r);return i[0]?[new wF(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Fa(t,e){return new zi({type:t,schema:null,validator:e})}function IF(){return Fa("any",()=>!0)}function pe(t){return new zi({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${_i(e)}`}})}function Oi(){return Fa("boolean",t=>typeof t=="boolean")}function T1(t){return Fa("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${_i(e)}`)}function Yt(t){const e=_i(t),n=typeof t;return new zi({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${_i(r)}`}})}function SF(){return Fa("never",()=>!1)}function me(t){return new zi({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function J(){return Fa("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${_i(t)}`)}function Te(t){return new zi({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function vN(t,e){return new zi({type:"record",schema:null,*entries(n){if(qd(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return hp(n)||`Expected an object, but received: ${_i(n)}`},coercer(n){return hp(n)?{...n}:n}})}function ue(){return Fa("string",t=>typeof t=="string"||`Expected a string, but received: ${_i(t)}`)}function A1(t){const e=SF();return new zi({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${_i(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function ie(t){const e=Object.keys(t);return new zi({type:"type",schema:t,*entries(n){if(qd(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return hp(n)||`Expected an object, but received: ${_i(n)}`},coercer(n){return hp(n)?{...n}:n}})}function mr(t){const e=t.map(n=>n.type).join(" | ");return new zi({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=k1(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${_i(n)}`,...i]}})}function Nc(){return Fa("unknown",()=>!0)}function Kd(t,e,n){return new zi({...t,coercer:(r,i)=>wN(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var Oh,kF=new Uint8Array(16);function _N(){if(!Oh&&(Oh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Oh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oh(kF)}const TF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function gm(t){return typeof t=="string"&&TF.test(t)}var On=[];for(var Pg=0;Pg<256;++Pg)On.push((Pg+256).toString(16).substr(1));function ym(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(On[t[e+0]]+On[t[e+1]]+On[t[e+2]]+On[t[e+3]]+"-"+On[t[e+4]]+On[t[e+5]]+"-"+On[t[e+6]]+On[t[e+7]]+"-"+On[t[e+8]]+On[t[e+9]]+"-"+On[t[e+10]]+On[t[e+11]]+On[t[e+12]]+On[t[e+13]]+On[t[e+14]]+On[t[e+15]]).toLowerCase();if(!gm(n))throw TypeError("Stringified UUID is invalid");return n}var bb,Lg,Dg=0,Og=0;function AF(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||bb,o=t.clockseq!==void 0?t.clockseq:Lg;if(s==null||o==null){var a=t.random||(t.rng||_N)();s==null&&(s=bb=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Lg=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:Og+1,d=l-Dg+(c-Og)/1e4;if(d<0&&t.clockseq===void 0&&(o=o+1&16383),(d<0||l>Dg)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dg=l,Og=c,Lg=o,l+=122192928e5;var h=((l&268435455)*1e4+c)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=h&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var w=0;w<6;++w)i[r+w]=s[w];return e||ym(i)}function xN(t){if(!gm(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function NF(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var CF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",RF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function EN(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=NF(i)),typeof s=="string"&&(s=xN(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return ym(l)}try{r.name=t}catch{}return r.DNS=CF,r.URL=RF,r}function MF(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return PF(LF(DF(t),t.length*8))}function PF(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function bN(t){return(t+64>>>9<<4)+14+1}function LF(t,e){t[e>>5]|=128<<e%32,t[bN(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,d=s;n=Jn(n,r,i,s,t[o],7,-680876936),s=Jn(s,n,r,i,t[o+1],12,-389564586),i=Jn(i,s,n,r,t[o+2],17,606105819),r=Jn(r,i,s,n,t[o+3],22,-1044525330),n=Jn(n,r,i,s,t[o+4],7,-176418897),s=Jn(s,n,r,i,t[o+5],12,1200080426),i=Jn(i,s,n,r,t[o+6],17,-1473231341),r=Jn(r,i,s,n,t[o+7],22,-45705983),n=Jn(n,r,i,s,t[o+8],7,1770035416),s=Jn(s,n,r,i,t[o+9],12,-1958414417),i=Jn(i,s,n,r,t[o+10],17,-42063),r=Jn(r,i,s,n,t[o+11],22,-1990404162),n=Jn(n,r,i,s,t[o+12],7,1804603682),s=Jn(s,n,r,i,t[o+13],12,-40341101),i=Jn(i,s,n,r,t[o+14],17,-1502002290),r=Jn(r,i,s,n,t[o+15],22,1236535329),n=er(n,r,i,s,t[o+1],5,-165796510),s=er(s,n,r,i,t[o+6],9,-1069501632),i=er(i,s,n,r,t[o+11],14,643717713),r=er(r,i,s,n,t[o],20,-373897302),n=er(n,r,i,s,t[o+5],5,-701558691),s=er(s,n,r,i,t[o+10],9,38016083),i=er(i,s,n,r,t[o+15],14,-660478335),r=er(r,i,s,n,t[o+4],20,-405537848),n=er(n,r,i,s,t[o+9],5,568446438),s=er(s,n,r,i,t[o+14],9,-1019803690),i=er(i,s,n,r,t[o+3],14,-187363961),r=er(r,i,s,n,t[o+8],20,1163531501),n=er(n,r,i,s,t[o+13],5,-1444681467),s=er(s,n,r,i,t[o+2],9,-51403784),i=er(i,s,n,r,t[o+7],14,1735328473),r=er(r,i,s,n,t[o+12],20,-1926607734),n=tr(n,r,i,s,t[o+5],4,-378558),s=tr(s,n,r,i,t[o+8],11,-2022574463),i=tr(i,s,n,r,t[o+11],16,1839030562),r=tr(r,i,s,n,t[o+14],23,-35309556),n=tr(n,r,i,s,t[o+1],4,-1530992060),s=tr(s,n,r,i,t[o+4],11,1272893353),i=tr(i,s,n,r,t[o+7],16,-155497632),r=tr(r,i,s,n,t[o+10],23,-1094730640),n=tr(n,r,i,s,t[o+13],4,681279174),s=tr(s,n,r,i,t[o],11,-358537222),i=tr(i,s,n,r,t[o+3],16,-722521979),r=tr(r,i,s,n,t[o+6],23,76029189),n=tr(n,r,i,s,t[o+9],4,-640364487),s=tr(s,n,r,i,t[o+12],11,-421815835),i=tr(i,s,n,r,t[o+15],16,530742520),r=tr(r,i,s,n,t[o+2],23,-995338651),n=nr(n,r,i,s,t[o],6,-198630844),s=nr(s,n,r,i,t[o+7],10,1126891415),i=nr(i,s,n,r,t[o+14],15,-1416354905),r=nr(r,i,s,n,t[o+5],21,-57434055),n=nr(n,r,i,s,t[o+12],6,1700485571),s=nr(s,n,r,i,t[o+3],10,-1894986606),i=nr(i,s,n,r,t[o+10],15,-1051523),r=nr(r,i,s,n,t[o+1],21,-2054922799),n=nr(n,r,i,s,t[o+8],6,1873313359),s=nr(s,n,r,i,t[o+15],10,-30611744),i=nr(i,s,n,r,t[o+6],15,-1560198380),r=nr(r,i,s,n,t[o+13],21,1309151649),n=nr(n,r,i,s,t[o+4],6,-145523070),s=nr(s,n,r,i,t[o+11],10,-1120210379),i=nr(i,s,n,r,t[o+2],15,718787259),r=nr(r,i,s,n,t[o+9],21,-343485551),n=oo(n,a),r=oo(r,l),i=oo(i,c),s=oo(s,d)}return[n,r,i,s]}function DF(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(bN(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function oo(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function OF(t,e){return t<<e|t>>>32-e}function wm(t,e,n,r,i,s){return oo(OF(oo(oo(e,t),oo(r,s)),i),n)}function Jn(t,e,n,r,i,s,o){return wm(e&n|~e&r,t,e,i,s,o)}function er(t,e,n,r,i,s,o){return wm(e&r|n&~r,t,e,i,s,o)}function tr(t,e,n,r,i,s,o){return wm(e^n^r,t,e,i,s,o)}function nr(t,e,n,r,i,s,o){return wm(n^(e|~r),t,e,i,s,o)}var jF=EN("v3",48,MF);function BF(t,e,n){t=t||{};var r=t.random||(t.rng||_N)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return ym(r)}function UF(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function jg(t,e){return t<<e|t>>>32-e}function FF(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=t[l*64+d*4]<<24|t[l*64+d*4+1]<<16|t[l*64+d*4+2]<<8|t[l*64+d*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var m=new Uint32Array(80),w=0;w<16;++w)m[w]=a[h][w];for(var k=16;k<80;++k)m[k]=jg(m[k-3]^m[k-8]^m[k-14]^m[k-16],1);for(var I=n[0],_=n[1],T=n[2],S=n[3],E=n[4],j=0;j<80;++j){var K=Math.floor(j/20),G=jg(I,5)+UF(K,_,T,S)+E+e[K]+m[j]>>>0;E=S,S=T,T=jg(_,30)>>>0,_=I,I=G}n[0]=n[0]+I>>>0,n[1]=n[1]+_>>>0,n[2]=n[2]+T>>>0,n[3]=n[3]+S>>>0,n[4]=n[4]+E>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var VF=EN("v5",80,FF);const zF="00000000-0000-0000-0000-000000000000";function WF(t){if(!gm(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const $F=Object.freeze(Object.defineProperty({__proto__:null,NIL:zF,parse:xN,stringify:ym,v1:AF,v3:jF,v4:BF,v5:VF,validate:gm,version:WF},Symbol.toStringTag,{value:"Module"})),IN=lw($F),qF=IN.v4,HF=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:t};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return qF()};s.id=o(s,r)}else i===2&&n===null?r.notificationIdNull&&(s.id=null):s.id=n;return s};var KF=HF;const GF=IN.v4,YF=KF,yd=function(t,e){if(!(this instanceof yd))return new yd(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return GF()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var QF=yd;yd.prototype.request=function(t,e,n,r){const i=this;let s=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,s=t;else{typeof n=="function"&&(r=n,n=void 0);const c=typeof r=="function";try{s=YF(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(d){if(c)return r(d);throw d}if(!c)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(c){return r(c)}return this.callServer(l,function(c,d){i._parseResponse(c,d,r)}),s};yd.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return n(i)}if(n.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return n(null,r.filter(i),r.filter(s))}else return n(null,r.error,r.result);n(null,r)};const ZF=Co(QF);var SN={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var w=new i(d,h||l,m),k=n?n+c:c;return l._events[k]?l._events[k].fn?l._events[k]=[l._events[k],w]:l._events[k].push(w):(l._events[k]=w,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)e.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,w=h.length,k=new Array(w);m<w;m++)k[m]=h[m].fn;return k},a.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,d,h,m,w,k){var I=n?n+c:c;if(!this._events[I])return!1;var _=this._events[I],T=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),T){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,m),!0;case 5:return _.fn.call(_.context,d,h,m,w),!0;case 6:return _.fn.call(_.context,d,h,m,w,k),!0}for(E=1,S=new Array(T-1);E<T;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var j=_.length,K;for(E=0;E<j;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),T){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,d);break;case 3:_[E].fn.call(_[E].context,d,h);break;case 4:_[E].fn.call(_[E].context,d,h,m);break;default:if(!S)for(K=1,S=new Array(T-1);K<T;K++)S[K-1]=arguments[K];_[E].fn.apply(_[E].context,S)}}return!0},a.prototype.on=function(c,d,h){return s(this,c,d,h,!1)},a.prototype.once=function(c,d,h){return s(this,c,d,h,!0)},a.prototype.removeListener=function(c,d,h,m){var w=n?n+c:c;if(!this._events[w])return this;if(!d)return o(this,w),this;var k=this._events[w];if(k.fn)k.fn===d&&(!m||k.once)&&(!h||k.context===h)&&o(this,w);else{for(var I=0,_=[],T=k.length;I<T;I++)(k[I].fn!==d||m&&!k[I].once||h&&k[I].context!==h)&&_.push(k[I]);_.length?this._events[w]=_.length===1?_[0]:_:o(this,w)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(SN);var XF=SN.exports;const kN=Co(XF);var JF=class extends kN{constructor(e,n,r){super();kn(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function eV(t,e){return new JF(t,e)}var tV=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},nV=class extends kN{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();kn(this,"address");kn(this,"rpc_id");kn(this,"queue");kn(this,"options");kn(this,"autoconnect");kn(this,"ready");kn(this,"reconnect");kn(this,"reconnect_timer_id");kn(this,"reconnect_interval");kn(this,"max_reconnects");kn(this,"rest_options");kn(this,"current_reconnects");kn(this,"generate_request_id");kn(this,"socket");kn(this,"webSocketFactory");kn(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>++this.rpc_id),c?this.dataPack=c:this.dataPack=new tV,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=Be.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}};class TN extends RA{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,k8(e);const r=d1(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return op(this),this.iHash.update(e),this}digestInto(e){op(this),lm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const AN=(t,e,n)=>new TN(t,e).update(n).digest();AN.create=(t,e)=>new TN(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ib(t){t.lowS!==void 0&&gs("lowS",t.lowS),t.prehash!==void 0&&gs("prehash",t.prehash)}function rV(t){const e=p1(t);kc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:iV,hexToBytes:sV}=fU;class oV extends Error{constructor(e=""){super(e)}}const Ji={Err:oV,_tlv:{encode:(t,e)=>{const{Err:n}=Ji;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=Sl(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Sl(i.length/2|128):"";return Sl(t)+s+i+e},decode(t,e){const{Err:n}=Ji;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of c)o=o<<8|d;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ji;if(t<ns)throw new e("integer: negative integers are not allowed");let n=Sl(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ji;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return iV(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ji,i=typeof t=="string"?sV(t):t;zd(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:d}=r.decode(2,l);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=Ji,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},ns=BigInt(0),Tn=BigInt(1);BigInt(2);const Sb=BigInt(3);BigInt(4);function aV(t){const e=rV(t),{Fp:n}=e,r=hm(e.n,e.nBitLength),i=e.toBytes||((I,_,T)=>{const S=_.toAffine();return Ma(Uint8Array.from([4]),n.toBytes(S.x),n.toBytes(S.y))}),s=e.fromBytes||(I=>{const _=I.subarray(1),T=n.fromBytes(_.subarray(0,n.BYTES)),S=n.fromBytes(_.subarray(n.BYTES,2*n.BYTES));return{x:T,y:S}});function o(I){const{a:_,b:T}=e,S=n.sqr(I),E=n.mul(S,I);return n.add(n.add(E,n.mul(I,_)),T)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(I){return dm(I,Tn,e.n)}function l(I){const{allowedPrivateKeyLengths:_,nByteLength:T,wrapPrivateKey:S,n:E}=e;if(_&&typeof I!="bigint"){if(Ca(I)&&(I=Ra(I)),typeof I!="string"||!_.includes(I.length))throw new Error("invalid private key");I=I.padStart(T*2,"0")}let j;try{j=typeof I=="bigint"?I:ma(yn("private key",I,T))}catch{throw new Error("invalid private key, expected hex or "+T+" bytes, got "+typeof I)}return S&&(j=Ft(j,E)),Kr("private key",j,Tn,E),j}function c(I){if(!(I instanceof m))throw new Error("ProjectivePoint expected")}const d=gd((I,_)=>{const{px:T,py:S,pz:E}=I;if(n.eql(E,n.ONE))return{x:T,y:S};const j=I.is0();_==null&&(_=j?n.ONE:n.inv(E));const K=n.mul(T,_),G=n.mul(S,_),O=n.mul(E,_);if(j)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:K,y:G}}),h=gd(I=>{if(I.is0()){if(e.allowInfinityPoint&&!n.is0(I.py))return;throw new Error("bad point: ZERO")}const{x:_,y:T}=I.toAffine();if(!n.isValid(_)||!n.isValid(T))throw new Error("bad point: x or y not FE");const S=n.sqr(T),E=o(_);if(!n.eql(S,E))throw new Error("bad point: equation left != right");if(!I.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(_,T,S){if(this.px=_,this.py=T,this.pz=S,_==null||!n.isValid(_))throw new Error("x required");if(T==null||!n.isValid(T))throw new Error("y required");if(S==null||!n.isValid(S))throw new Error("z required");Object.freeze(this)}static fromAffine(_){const{x:T,y:S}=_||{};if(!_||!n.isValid(T)||!n.isValid(S))throw new Error("invalid affine point");if(_ instanceof m)throw new Error("projective point not allowed");const E=j=>n.eql(j,n.ZERO);return E(T)&&E(S)?m.ZERO:new m(T,S,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){const T=n.invertBatch(_.map(S=>S.pz));return _.map((S,E)=>S.toAffine(T[E])).map(m.fromAffine)}static fromHex(_){const T=m.fromAffine(s(yn("pointHex",_)));return T.assertValidity(),T}static fromPrivateKey(_){return m.BASE.multiply(l(_))}static msm(_,T){return $A(m,r,_,T)}_setWindowSize(_){k.setWindowSize(this,_)}assertValidity(){h(this)}hasEvenY(){const{y:_}=this.toAffine();if(n.isOdd)return!n.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){c(_);const{px:T,py:S,pz:E}=this,{px:j,py:K,pz:G}=_,O=n.eql(n.mul(T,G),n.mul(j,E)),L=n.eql(n.mul(S,G),n.mul(K,E));return O&&L}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:_,b:T}=e,S=n.mul(T,Sb),{px:E,py:j,pz:K}=this;let G=n.ZERO,O=n.ZERO,L=n.ZERO,B=n.mul(E,E),W=n.mul(j,j),$=n.mul(K,K),H=n.mul(E,j);return H=n.add(H,H),L=n.mul(E,K),L=n.add(L,L),G=n.mul(_,L),O=n.mul(S,$),O=n.add(G,O),G=n.sub(W,O),O=n.add(W,O),O=n.mul(G,O),G=n.mul(H,G),L=n.mul(S,L),$=n.mul(_,$),H=n.sub(B,$),H=n.mul(_,H),H=n.add(H,L),L=n.add(B,B),B=n.add(L,B),B=n.add(B,$),B=n.mul(B,H),O=n.add(O,B),$=n.mul(j,K),$=n.add($,$),B=n.mul($,H),G=n.sub(G,B),L=n.mul($,W),L=n.add(L,L),L=n.add(L,L),new m(G,O,L)}add(_){c(_);const{px:T,py:S,pz:E}=this,{px:j,py:K,pz:G}=_;let O=n.ZERO,L=n.ZERO,B=n.ZERO;const W=e.a,$=n.mul(e.b,Sb);let H=n.mul(T,j),A=n.mul(S,K),f=n.mul(E,G),b=n.add(T,S),C=n.add(j,K);b=n.mul(b,C),C=n.add(H,A),b=n.sub(b,C),C=n.add(T,E);let M=n.add(j,G);return C=n.mul(C,M),M=n.add(H,f),C=n.sub(C,M),M=n.add(S,E),O=n.add(K,G),M=n.mul(M,O),O=n.add(A,f),M=n.sub(M,O),B=n.mul(W,C),O=n.mul($,f),B=n.add(O,B),O=n.sub(A,B),B=n.add(A,B),L=n.mul(O,B),A=n.add(H,H),A=n.add(A,H),f=n.mul(W,f),C=n.mul($,C),A=n.add(A,f),f=n.sub(H,f),f=n.mul(W,f),C=n.add(C,f),H=n.mul(A,C),L=n.add(L,H),H=n.mul(M,C),O=n.mul(b,O),O=n.sub(O,H),H=n.mul(b,A),B=n.mul(M,B),B=n.add(B,H),new m(O,L,B)}subtract(_){return this.add(_.negate())}is0(){return this.equals(m.ZERO)}wNAF(_){return k.wNAFCached(this,_,m.normalizeZ)}multiplyUnsafe(_){const{endo:T,n:S}=e;Kr("scalar",_,ns,S);const E=m.ZERO;if(_===ns)return E;if(this.is0()||_===Tn)return this;if(!T||k.hasPrecomputes(this))return k.wNAFCachedUnsafe(this,_,m.normalizeZ);let{k1neg:j,k1:K,k2neg:G,k2:O}=T.splitScalar(_),L=E,B=E,W=this;for(;K>ns||O>ns;)K&Tn&&(L=L.add(W)),O&Tn&&(B=B.add(W)),W=W.double(),K>>=Tn,O>>=Tn;return j&&(L=L.negate()),G&&(B=B.negate()),B=new m(n.mul(B.px,T.beta),B.py,B.pz),L.add(B)}multiply(_){const{endo:T,n:S}=e;Kr("scalar",_,Tn,S);let E,j;if(T){const{k1neg:K,k1:G,k2neg:O,k2:L}=T.splitScalar(_);let{p:B,f:W}=this.wNAF(G),{p:$,f:H}=this.wNAF(L);B=k.constTimeNegate(K,B),$=k.constTimeNegate(O,$),$=new m(n.mul($.px,T.beta),$.py,$.pz),E=B.add($),j=W.add(H)}else{const{p:K,f:G}=this.wNAF(_);E=K,j=G}return m.normalizeZ([E,j])[0]}multiplyAndAddUnsafe(_,T,S){const E=m.BASE,j=(G,O)=>O===ns||O===Tn||!G.equals(E)?G.multiplyUnsafe(O):G.multiply(O),K=j(this,T).add(j(_,S));return K.is0()?void 0:K}toAffine(_){return d(this,_)}isTorsionFree(){const{h:_,isTorsionFree:T}=e;if(_===Tn)return!0;if(T)return T(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:_,clearCofactor:T}=e;return _===Tn?this:T?T(m,this):this.multiplyUnsafe(e.h)}toRawBytes(_=!0){return gs("isCompressed",_),this.assertValidity(),i(m,this,_)}toHex(_=!0){return gs("isCompressed",_),Ra(this.toRawBytes(_))}}m.BASE=new m(e.Gx,e.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const w=e.nBitLength,k=WA(m,e.endo?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function lV(t){const e=p1(t);return kc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function cV(t){const e=lV(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(f){return Ft(f,r)}function a(f){return Ny(f,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:h}=aV({...e,toBytes(f,b,C){const M=b.toAffine(),R=n.toBytes(M.x),F=Ma;return gs("isCompressed",C),C?F(Uint8Array.from([b.hasEvenY()?2:3]),R):F(Uint8Array.from([4]),R,n.toBytes(M.y))},fromBytes(f){const b=f.length,C=f[0],M=f.subarray(1);if(b===i&&(C===2||C===3)){const R=ma(M);if(!dm(R,Tn,n.ORDER))throw new Error("Point is not on curve");const F=d(R);let q;try{q=n.sqrt(F)}catch(V){const se=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+se)}const D=(q&Tn)===Tn;return(C&1)===1!==D&&(q=n.neg(q)),{x:R,y:q}}else if(b===s&&C===4){const R=n.fromBytes(M.subarray(0,n.BYTES)),F=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:R,y:F}}else{const R=i,F=s;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+F+", got "+b)}}}),m=f=>Ra(sc(f,e.nByteLength));function w(f){const b=r>>Tn;return f>b}function k(f){return w(f)?o(-f):f}const I=(f,b,C)=>ma(f.slice(b,C));class _{constructor(b,C,M){this.r=b,this.s=C,this.recovery=M,this.assertValidity()}static fromCompact(b){const C=e.nByteLength;return b=yn("compactSignature",b,C*2),new _(I(b,0,C),I(b,C,2*C))}static fromDER(b){const{r:C,s:M}=Ji.toSig(yn("DER",b));return new _(C,M)}assertValidity(){Kr("r",this.r,Tn,r),Kr("s",this.s,Tn,r)}addRecoveryBit(b){return new _(this.r,this.s,b)}recoverPublicKey(b){const{r:C,s:M,recovery:R}=this,F=G(yn("msgHash",b));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const q=R===2||R===3?C+e.n:C;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const D=R&1?"03":"02",v=l.fromHex(D+m(q)),V=a(q),se=o(-F*V),le=o(M*V),de=l.BASE.multiplyAndAddUnsafe(v,se,le);if(!de)throw new Error("point at infinify");return de.assertValidity(),de}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ic(this.toDERHex())}toDERHex(){return Ji.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ic(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const T={isValidPrivateKey(f){try{return c(f),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const f=FA(e.n);return bU(e.randomBytes(f),e.n)},precompute(f=8,b=l.BASE){return b._setWindowSize(f),b.multiply(BigInt(3)),b}};function S(f,b=!0){return l.fromPrivateKey(f).toRawBytes(b)}function E(f){const b=Ca(f),C=typeof f=="string",M=(b||C)&&f.length;return b?M===i||M===s:C?M===2*i||M===2*s:f instanceof l}function j(f,b,C=!0){if(E(f))throw new Error("first arg must be private key");if(!E(b))throw new Error("second arg must be public key");return l.fromHex(b).multiply(c(f)).toRawBytes(C)}const K=e.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const b=ma(f),C=f.length*8-e.nBitLength;return C>0?b>>BigInt(C):b},G=e.bits2int_modN||function(f){return o(K(f))},O=f1(e.nBitLength);function L(f){return Kr("num < 2^"+e.nBitLength,f,ns,O),sc(f,e.nByteLength)}function B(f,b,C=W){if(["recovered","canonical"].some(Ie=>Ie in C))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:R}=e;let{lowS:F,prehash:q,extraEntropy:D}=C;F==null&&(F=!0),f=yn("msgHash",f),Ib(C),q&&(f=yn("prehashed msgHash",M(f)));const v=G(f),V=c(b),se=[L(V),L(v)];if(D!=null&&D!==!1){const Ie=D===!0?R(n.BYTES):D;se.push(yn("extraEntropy",Ie))}const le=Ma(...se),de=v;function Ae(Ie){const Ce=K(Ie);if(!h(Ce))return;const vt=a(Ce),Ue=l.BASE.multiply(Ce).toAffine(),Oe=o(Ue.x);if(Oe===ns)return;const jt=o(vt*o(de+Oe*V));if(jt===ns)return;let qe=(Ue.x===Oe?0:2)|Number(Ue.y&Tn),Ge=jt;return F&&w(jt)&&(Ge=k(jt),qe^=1),new _(Oe,Ge,qe)}return{seed:le,k2sig:Ae}}const W={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function H(f,b,C=W){const{seed:M,k2sig:R}=B(f,b,C),F=e;return jA(F.hash.outputLen,F.nByteLength,F.hmac)(M,R)}l.BASE._setWindowSize(8);function A(f,b,C,M=$){var qe;const R=f;b=yn("msgHash",b),C=yn("publicKey",C);const{lowS:F,prehash:q,format:D}=M;if(Ib(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(D!==void 0&&D!=="compact"&&D!=="der")throw new Error("format must be compact or der");const v=typeof R=="string"||Ca(R),V=!v&&!D&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!v&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let se,le;try{if(V&&(se=new _(R.r,R.s)),v){try{D!=="compact"&&(se=_.fromDER(R))}catch(Ge){if(!(Ge instanceof Ji.Err))throw Ge}!se&&D!=="der"&&(se=_.fromCompact(R))}le=l.fromHex(C)}catch{return!1}if(!se||F&&se.hasHighS())return!1;q&&(b=e.hash(b));const{r:de,s:Ae}=se,Ie=G(b),Ce=a(Ae),vt=o(Ie*Ce),Ue=o(de*Ce),Oe=(qe=l.BASE.multiplyAndAddUnsafe(le,vt,Ue))==null?void 0:qe.toAffine();return Oe?o(Oe.x)===de:!1}return{CURVE:e,getPublicKey:S,getSharedSecret:j,sign:H,verify:A,ProjectivePoint:l,Signature:_,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uV(t){return{hash:t,hmac:(e,...n)=>AN(t,e,N8(...n)),randomBytes:PA}}function dV(t,e){const n=r=>cV({...t,...uV(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NN=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),kb=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),hV=BigInt(1),Py=BigInt(2),Tb=(t,e)=>(t+e/Py)/e;function fV(t){const e=NN,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,d=c*c*t%e,h=sn(d,n,e)*d%e,m=sn(h,n,e)*d%e,w=sn(m,Py,e)*c%e,k=sn(w,i,e)*w%e,I=sn(k,s,e)*k%e,_=sn(I,a,e)*I%e,T=sn(_,l,e)*_%e,S=sn(T,a,e)*I%e,E=sn(S,n,e)*d%e,j=sn(E,o,e)*k%e,K=sn(j,r,e)*c%e,G=sn(K,Py,e);if(!Ly.eql(Ly.sqr(G),t))throw new Error("Cannot find square root");return G}const Ly=hm(NN,void 0,void 0,{sqrt:fV}),pV=dV({a:BigInt(0),b:BigInt(7),Fp:Ly,n:kb,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=kb,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-hV*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Tb(s*t,e),l=Tb(-r*t,e);let c=Ft(t-a*n-l*i,e),d=Ft(-a*r-l*s,e);const h=c>o,m=d>o;if(h&&(c=e-c),m&&(d=e-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:d}}}},Ry);BigInt(0);const Ab=()=>{const t=Wd.utils.randomPrivateKey(),e=Dy(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},Dy=Wd.getPublicKey;function Nb(t){try{return Wd.ExtendedPoint.fromHex(t),!0}catch{return!1}}const CN=(t,e)=>Wd.sign(t,e.slice(0,32)),mV=Wd.verify,ac=t=>Be.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Be.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Be.Buffer.from(t);class gV{constructor(e){Object.assign(this,e)}encode(){return Be.Buffer.from(JA(uf,this))}static decode(e){return eN(uf,this,e)}static decodeUnchecked(e){return GA(uf,this,e)}}const uf=new Map;var RN;const yV=32,Eo=32;function wV(t){return t._bn!==void 0}let Cb=1;class Ee extends gV{constructor(e){if(super({}),this._bn=void 0,wV(e))this._bn=e._bn;else{if(typeof e=="string"){const n=zn.decode(e);if(n.length!=Eo)throw new Error("Invalid public key input");this._bn=new xb(n)}else this._bn=new xb(e);if(this._bn.byteLength()>Eo)throw new Error("Invalid public key input")}}static unique(){const e=new Ee(Cb);return Cb+=1,new Ee(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return zn.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Be.Buffer);if(e.length===Eo)return e;const n=Be.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=Be.Buffer.concat([e.toBuffer(),Be.Buffer.from(n),r.toBuffer()]),s=Ry(i);return new Ee(s)}static createProgramAddressSync(e,n){let r=Be.Buffer.alloc(0);e.forEach(function(s){if(s.length>yV)throw new TypeError("Max seed length exceeded");r=Be.Buffer.concat([r,ac(s)])}),r=Be.Buffer.concat([r,n.toBuffer(),Be.Buffer.from("ProgramDerivedAddress")]);const i=Ry(r);if(Nb(i))throw new Error("Invalid seeds, address must fall off the curve");return new Ee(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(Be.Buffer.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new Ee(e);return Nb(n.toBytes())}}RN=Ee;Ee.default=new RN("11111111111111111111111111111111");uf.set(Ee,{kind:"struct",fields:[["_bn","u256"]]});new Ee("BPFLoader1111111111111111111111111111111111");const Fl=1232,N1=127,wd=64;class MN extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(MN.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class PN extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(PN.prototype,"name",{value:"TransactionExpiredTimeoutError"});class gu extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(gu.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class fp{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const He=(t="publicKey")=>Lt(32,t),vV=(t="signature")=>Lt(64,t),kl=(t="string")=>{const e=ve([Se("length"),Se("lengthPadding"),Lt(ga(Se(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:Be.Buffer.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>Se().span+Se().span+Be.Buffer.from(s,"utf8").length,i},_V=(t="authorized")=>ve([He("staker"),He("withdrawer")],t),xV=(t="lockup")=>ve([Nr("unixTimestamp"),Nr("epoch"),He("custodian")],t),EV=(t="voteInit")=>ve([He("nodePubkey"),He("authorizedVoter"),He("authorizedWithdrawer"),at("commission")],t),bV=(t="voteAuthorizeWithSeedArgs")=>ve([Se("voteAuthorizationType"),He("currentAuthorityDerivedKeyOwnerPubkey"),kl("currentAuthorityDerivedKeySeed"),He("newAuthorized")],t);function Cr(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function Rr(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Ut(t,e){if(!t)throw new Error(e||"Assertion failed")}class vm{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new vm(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ut(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Ut(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Ut(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new Ee(l)),...r.map(([l])=>new Ee(l)),...i.map(([l])=>new Ee(l)),...s.map(([l])=>new Ee(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new Ee(s),l=e.findIndex(c=>c.equals(a));l>=0&&(Ut(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const LN="Reached end of buffer unexpectedly";function rs(t){if(t.length===0)throw new Error(LN);return t.shift()}function Mr(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(LN);return t.splice(...e)}class Ss{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new Ee(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:zn.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new fp(this.staticAccountKeys)}static compile(e){const n=vm.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new fp(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:zn.encode(a.data)}));return new Ss({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Rr(n,e);const r=this.instructions.map(h=>{const{accounts:m,programIdIndex:w}=h,k=Array.from(zn.decode(h.data));let I=[];Rr(I,m.length);let _=[];return Rr(_,k.length),{programIdIndex:w,keyIndicesCount:Be.Buffer.from(I),keyIndices:m,dataLength:Be.Buffer.from(_),data:k}});let i=[];Rr(i,r.length);let s=Be.Buffer.alloc(Fl);Be.Buffer.from(i).copy(s);let o=i.length;r.forEach(h=>{const w=ve([at("programIdIndex"),Lt(h.keyIndicesCount.length,"keyIndicesCount"),ar(at("keyIndex"),h.keyIndices.length,"keyIndices"),Lt(h.dataLength.length,"dataLength"),ar(at("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=w}),s=s.slice(0,o);const a=ve([Lt(1,"numRequiredSignatures"),Lt(1,"numReadonlySignedAccounts"),Lt(1,"numReadonlyUnsignedAccounts"),Lt(n.length,"keyCount"),ar(He("key"),e,"keys"),He("recentBlockhash")]),l={numRequiredSignatures:Be.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Be.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Be.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Be.Buffer.from(n),keys:this.accountKeys.map(h=>ac(h.toBytes())),recentBlockhash:zn.decode(this.recentBlockhash)};let c=Be.Buffer.alloc(2048);const d=a.encode(l,c);return s.copy(c,d),c.slice(0,d+s.length)}static from(e){let n=[...e];const r=rs(n);if(r!==(r&N1))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=rs(n),s=rs(n),o=Cr(n);let a=[];for(let m=0;m<o;m++){const w=Mr(n,0,Eo);a.push(new Ee(Be.Buffer.from(w)))}const l=Mr(n,0,Eo),c=Cr(n);let d=[];for(let m=0;m<c;m++){const w=rs(n),k=Cr(n),I=Mr(n,0,k),_=Cr(n),T=Mr(n,0,_),S=zn.encode(Be.Buffer.from(T));d.push({programIdIndex:w,accounts:I,data:S})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:zn.encode(Be.Buffer.from(l)),accountKeys:a,instructions:d};return new Ss(h)}}class vd{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new fp(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=vm.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const h=n.extractTableLookup(d);if(h!==void 0){const[m,{writable:w,readonly:k}]=h;r.push(m),i.writable.push(...w),i.readonly.push(...k)}}const[o,a]=n.getMessageComponents(),c=new fp(a,i).compileInstructions(e.instructions);return new vd({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Rr(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Rr(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Rr(s,this.addressTableLookups.length);const o=ve([at("prefix"),ve([at("numRequiredSignatures"),at("numReadonlySignedAccounts"),at("numReadonlyUnsignedAccounts")],"header"),Lt(e.length,"staticAccountKeysLength"),ar(He(),this.staticAccountKeys.length,"staticAccountKeys"),He("recentBlockhash"),Lt(r.length,"instructionsLength"),Lt(n.length,"serializedInstructions"),Lt(s.length,"addressTableLookupsLength"),Lt(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Fl),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:zn.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(Fl);for(const r of this.compiledInstructions){const i=Array();Rr(i,r.accountKeyIndexes.length);const s=Array();Rr(s,r.data.length);const o=ve([at("programIdIndex"),Lt(i.length,"encodedAccountKeyIndexesLength"),ar(at(),r.accountKeyIndexes.length,"accountKeyIndexes"),Lt(s.length,"encodedDataLength"),Lt(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Fl);for(const r of this.addressTableLookups){const i=Array();Rr(i,r.writableIndexes.length);const s=Array();Rr(s,r.readonlyIndexes.length);const o=ve([He("accountKey"),Lt(i.length,"encodedWritableIndexesLength"),ar(at(),r.writableIndexes.length,"writableIndexes"),Lt(s.length,"encodedReadonlyIndexesLength"),ar(at(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=rs(n),i=r&N1;Ut(r!==i,"Expected versioned message but received legacy message");const s=i;Ut(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:rs(n),numReadonlySignedAccounts:rs(n),numReadonlyUnsignedAccounts:rs(n)},a=[],l=Cr(n);for(let k=0;k<l;k++)a.push(new Ee(Mr(n,0,Eo)));const c=zn.encode(Mr(n,0,Eo)),d=Cr(n),h=[];for(let k=0;k<d;k++){const I=rs(n),_=Cr(n),T=Mr(n,0,_),S=Cr(n),E=new Uint8Array(Mr(n,0,S));h.push({programIdIndex:I,accountKeyIndexes:T,data:E})}const m=Cr(n),w=[];for(let k=0;k<m;k++){const I=new Ee(Mr(n,0,Eo)),_=Cr(n),T=Mr(n,0,_),S=Cr(n),E=Mr(n,0,S);w.push({accountKey:I,writableIndexes:T,readonlyIndexes:E})}return new vd({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:h,addressTableLookups:w})}}const C1={deserializeMessageVersion(t){const e=t[0],n=e&N1;return n===e?"legacy":n},deserialize:t=>{const e=C1.deserializeMessageVersion(t);if(e==="legacy")return Ss.from(t);if(e===0)return vd.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let zs=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const IV=Be.Buffer.alloc(wd).fill(0);class Rb{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Be.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ci{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Rb(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<n.length;I++)if(n[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const i=[],s=[];n.forEach(I=>{I.keys.forEach(T=>{s.push({...T})});const _=I.programId.toString();i.includes(_)||i.push(_)}),i.forEach(I=>{s.push({pubkey:new Ee(I),isSigner:!1,isWritable:!1})});const o=[];s.forEach(I=>{const _=I.pubkey.toString(),T=o.findIndex(S=>S.pubkey.toString()===_);T>-1?(o[T].isWritable=o[T].isWritable||I.isWritable,o[T].isSigner=o[T].isSigner||I.isSigner):o.push(I)}),o.sort(function(I,_){if(I.isSigner!==_.isSigner)return I.isSigner?-1:1;if(I.isWritable!==_.isWritable)return I.isWritable?-1:1;const T={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(_.pubkey.toBase58(),"en",T)});const a=o.findIndex(I=>I.pubkey.equals(r));if(a>-1){const[I]=o.splice(a,1);I.isSigner=!0,I.isWritable=!0,o.unshift(I)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const I of this.signatures){const _=o.findIndex(T=>T.pubkey.equals(I.publicKey));if(_>-1)o[_].isSigner||(o[_].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let l=0,c=0,d=0;const h=[],m=[];o.forEach(({pubkey:I,isSigner:_,isWritable:T})=>{_?(h.push(I.toString()),l+=1,T||(c+=1)):(m.push(I.toString()),T||(d+=1))});const w=h.concat(m),k=n.map(I=>{const{data:_,programId:T}=I;return{programIdIndex:w.indexOf(T.toString()),accounts:I.keys.map(S=>w.indexOf(S.pubkey.toString())),data:zn.encode(_)}});return k.forEach(I=>{Ut(I.programIdIndex>=0),I.accounts.forEach(_=>Ut(_>=0))}),new Ss({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:d},accountKeys:w,recentBlockhash:e,instructions:k})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=CN(r,i.secretKey);this._addSignature(i.publicKey,ac(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Ut(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=Be.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):mV(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];Rr(r,n.length);const i=r.length+n.length*64+e.length,s=Be.Buffer.alloc(i);return Ut(n.length<256),Be.Buffer.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Ut(o.length===64,"signature has invalid length"),Be.Buffer.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),Ut(s.length<=Fl,`Transaction too large: ${s.length} > ${Fl}`),s}get keys(){return Ut(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ut(this.instructions.length===1),this.instructions[0].programId}get data(){return Ut(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Cr(n);let i=[];for(let s=0;s<r;s++){const o=Mr(n,0,wd);i.push(zn.encode(Be.Buffer.from(o)))}return ci.populate(Ss.from(n),i)}static populate(e,n=[]){const r=new ci;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==zn.encode(IV)?null:zn.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Rb({keys:s,programId:e.accountKeys[i.programIdIndex],data:zn.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class _d{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)Ut(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(wd));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();Rr(n,this.signatures.length);const r=ve([Lt(n.length,"encodedSignaturesLength"),ar(vV(),this.signatures.length,"signatures"),Lt(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let n=[...e];const r=[],i=Cr(n);for(let o=0;o<i;o++)r.push(new Uint8Array(Mr(n,0,wd)));const s=C1.deserialize(new Uint8Array(n));return new _d(s,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=r.findIndex(o=>o.equals(i.publicKey));Ut(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=CN(n,i.secretKey)}}addSignature(e,n){Ut(n.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Ut(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=n}}const SV=160,kV=64,TV=SV/kV,AV=1e3/TV;new Ee("SysvarC1ock11111111111111111111111111111111");new Ee("SysvarEpochSchedu1e111111111111111111111111");new Ee("Sysvar1nstructions1111111111111111111111111");new Ee("SysvarRecentB1ockHashes11111111111111111111");new Ee("SysvarRent111111111111111111111111111111111");new Ee("SysvarRewards111111111111111111111111111111");new Ee("SysvarS1otHashes111111111111111111111111111");new Ee("SysvarS1otHistory11111111111111111111111111");new Ee("SysvarStakeHistory1111111111111111111111111");class Mb extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class xe extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function dl(t){return new Promise(e=>setTimeout(e,t))}const NV=jn("lamportsPerSignature"),DN=ve([Se("version"),Se("state"),He("authorizedPubkey"),He("nonce"),ve([NV],"feeCalculator")]);DN.span;class R1{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=DN.decode(ac(e),0);return new R1({authorizedPubkey:new Ee(n.authorizedPubkey),nonce:new Ee(n.nonce).toString(),feeCalculator:n.feeCalculator})}}const CV=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}},RV=t=>e=>{const n=Lt(t,e),{encode:r,decode:i}=CV(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return fF(Be.Buffer.from(l))},s.encode=(o,a,l)=>{const c=gF(o,t);return r(c,a,l)},s},lc=RV(8);Object.freeze({Create:{index:0,layout:ve([Se("instruction"),Nr("lamports"),Nr("space"),He("programId")])},Assign:{index:1,layout:ve([Se("instruction"),He("programId")])},Transfer:{index:2,layout:ve([Se("instruction"),lc("lamports")])},CreateWithSeed:{index:3,layout:ve([Se("instruction"),He("base"),kl("seed"),Nr("lamports"),Nr("space"),He("programId")])},AdvanceNonceAccount:{index:4,layout:ve([Se("instruction")])},WithdrawNonceAccount:{index:5,layout:ve([Se("instruction"),Nr("lamports")])},InitializeNonceAccount:{index:6,layout:ve([Se("instruction"),He("authorized")])},AuthorizeNonceAccount:{index:7,layout:ve([Se("instruction"),He("authorized")])},Allocate:{index:8,layout:ve([Se("instruction"),Nr("space")])},AllocateWithSeed:{index:9,layout:ve([Se("instruction"),He("base"),kl("seed"),Nr("space"),He("programId")])},AssignWithSeed:{index:10,layout:ve([Se("instruction"),He("base"),kl("seed"),He("programId")])},TransferWithSeed:{index:11,layout:ve([Se("instruction"),lc("lamports"),kl("seed"),He("programId")])},UpgradeNonceAccount:{index:12,layout:ve([Se("instruction")])}});new Ee("11111111111111111111111111111111");new Ee("BPFLoader2111111111111111111111111111111111");function MV(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bg,Pb;function PV(){if(Pb)return Bg;Pb=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,d,h;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(h=t.call(r),h==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(h==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],d=n(r[c],!1),d!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+d),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Bg=function(r){var i=n(r,!1);if(i!==void 0)return""+i},Bg}var LV=PV(),Lb=MV(LV);const Jc=32;function Ug(t){let e=0;for(;t>1;)t/=2,e++;return e}function DV(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class OV{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=Ug(DV(e+Jc+1))-Ug(Jc)-1,r=this.getSlotsInEpoch(n),i=e-(r-Jc);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Jc:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ug(Jc)):this.slotsPerEpoch}}var jV=globalThis.fetch;class BV extends nV{constructor(e,n,r){const i=s=>{const o=eV(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function UV(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const Db=56;class Ob{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=UV(FV,e),r=e.length-Db;Ut(r>=0,"lookup table is invalid"),Ut(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=ve([ar(He(),i,"addresses")]).decode(e.slice(Db));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new Ee(n.authority[0]):void 0,addresses:s.map(o=>new Ee(o))}}}const FV={index:1,layout:ve([Se("typeIndex"),lc("deactivationSlot"),jn("lastExtendedSlot"),at("lastExtendedStartIndex"),at(),ar(He(),ga(at(),-1),"authority")])},VV=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function zV(t){const e=t.match(VV);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const en=Kd(T1(Ee),ue(),t=>new Ee(t)),ON=A1([ue(),Yt("base64")]),M1=Kd(T1(Be.Buffer),ON,t=>Be.Buffer.from(t[0],"base64")),WV=30*1e3;function $V(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Tt(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function jb(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function jN(t){return mr([ie({jsonrpc:Yt("2.0"),id:ue(),result:t}),ie({jsonrpc:Yt("2.0"),id:ue(),error:ie({code:Nc(),message:ue(),data:Te(IF())})})])}const qV=jN(Nc());function $e(t){return Kd(jN(t),qV,e=>"error"in e?e:{...e,result:fe(e.result,t)})}function un(t){return $e(ie({context:ie({slot:J()}),value:t}))}function _m(t){return ie({context:ie({slot:J()}),value:t})}function Fg(t,e){return t===0?new vd({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new Ee(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:zn.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Ss(e)}const HV=ie({foundation:J(),foundationTerm:J(),initial:J(),taper:J(),terminal:J()}),KV=$e(pe(me(ie({epoch:J(),effectiveSlot:J(),amount:J(),postBalance:J(),commission:Te(me(J()))})))),GV=pe(ie({slot:J(),prioritizationFee:J()})),YV=ie({total:J(),validator:J(),foundation:J(),epoch:J()}),QV=ie({epoch:J(),slotIndex:J(),slotsInEpoch:J(),absoluteSlot:J(),blockHeight:Te(J()),transactionCount:Te(J())}),ZV=ie({slotsPerEpoch:J(),leaderScheduleSlotOffset:J(),warmup:Oi(),firstNormalEpoch:J(),firstNormalSlot:J()}),XV=vN(ue(),pe(J())),Va=me(mr([ie({}),ue()])),JV=ie({err:Va}),e9=Yt("receivedSignature"),t9=ie({"solana-core":ue(),"feature-set":Te(J())}),n9=ie({program:ue(),programId:en,parsed:Nc()}),r9=ie({programId:en,accounts:pe(en),data:ue()}),Bb=un(ie({err:me(mr([ie({}),ue()])),logs:me(pe(ue())),accounts:Te(me(pe(me(ie({executable:Oi(),owner:ue(),lamports:J(),data:pe(ue()),rentEpoch:Te(J())}))))),unitsConsumed:Te(J()),returnData:Te(me(ie({programId:ue(),data:A1([ue(),Yt("base64")])}))),innerInstructions:Te(me(pe(ie({index:J(),instructions:pe(mr([n9,r9]))}))))})),i9=un(ie({byIdentity:vN(ue(),pe(J())),range:ie({firstSlot:J(),lastSlot:J()})}));function s9(t,e,n,r,i,s){const o=n||jV;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(d,h)=>{const m=await new Promise((w,k)=>{try{r(d,h,(I,_)=>w([I,_]))}catch(I){k(I)}});return await o(...m)}),new ZF(async(d,h)=>{const m={method:"POST",body:d,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},sz)};try{let w=5,k,I=500;for(;l?k=await l(t,m):k=await o(t,m),!(k.status!==429||i===!0||(w-=1,w===0));)console.error(`Server responded with ${k.status} ${k.statusText}.  Retrying after ${I}ms delay...`),await dl(I),I*=2;const _=await k.text();k.ok?h(null,_):h(new Error(`${k.status} ${k.statusText}: ${_}`))}catch(w){w instanceof Error&&h(w)}},{})}function o9(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function a9(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const l9=$e(HV),c9=$e(YV),u9=$e(GV),d9=$e(QV),h9=$e(ZV),f9=$e(XV),p9=$e(J()),m9=un(ie({total:J(),circulating:J(),nonCirculating:J(),nonCirculatingAccounts:pe(en)})),Oy=ie({amount:ue(),uiAmount:me(J()),decimals:J(),uiAmountString:Te(ue())}),g9=un(pe(ie({address:en,amount:ue(),uiAmount:me(J()),decimals:J(),uiAmountString:Te(ue())}))),y9=un(pe(ie({pubkey:en,account:ie({executable:Oi(),owner:en,lamports:J(),data:M1,rentEpoch:J()})}))),jy=ie({program:ue(),parsed:Nc(),space:J()}),w9=un(pe(ie({pubkey:en,account:ie({executable:Oi(),owner:en,lamports:J(),data:jy,rentEpoch:J()})}))),v9=un(pe(ie({lamports:J(),address:en}))),xd=ie({executable:Oi(),owner:en,lamports:J(),data:M1,rentEpoch:J()}),_9=ie({pubkey:en,account:xd}),x9=Kd(mr([T1(Be.Buffer),jy]),mr([ON,jy]),t=>Array.isArray(t)?fe(t,M1):t),By=ie({executable:Oi(),owner:en,lamports:J(),data:x9,rentEpoch:J()}),E9=ie({pubkey:en,account:By}),b9=ie({state:mr([Yt("active"),Yt("inactive"),Yt("activating"),Yt("deactivating")]),active:J(),inactive:J()}),I9=$e(pe(ie({signature:ue(),slot:J(),err:Va,memo:me(ue()),blockTime:Te(me(J()))}))),S9=$e(pe(ie({signature:ue(),slot:J(),err:Va,memo:me(ue()),blockTime:Te(me(J()))}))),k9=ie({subscription:J(),result:_m(xd)}),T9=ie({pubkey:en,account:xd}),A9=ie({subscription:J(),result:_m(T9)}),N9=ie({parent:J(),slot:J(),root:J()}),C9=ie({subscription:J(),result:N9}),R9=mr([ie({type:mr([Yt("firstShredReceived"),Yt("completed"),Yt("optimisticConfirmation"),Yt("root")]),slot:J(),timestamp:J()}),ie({type:Yt("createdBank"),parent:J(),slot:J(),timestamp:J()}),ie({type:Yt("frozen"),slot:J(),timestamp:J(),stats:ie({numTransactionEntries:J(),numSuccessfulTransactions:J(),numFailedTransactions:J(),maxTransactionsPerEntry:J()})}),ie({type:Yt("dead"),slot:J(),timestamp:J(),err:ue()})]),M9=ie({subscription:J(),result:R9}),P9=ie({subscription:J(),result:_m(mr([JV,e9]))}),L9=ie({subscription:J(),result:J()}),D9=ie({pubkey:ue(),gossip:me(ue()),tpu:me(ue()),rpc:me(ue()),version:me(ue())}),Ub=ie({votePubkey:ue(),nodePubkey:ue(),activatedStake:J(),epochVoteAccount:Oi(),epochCredits:pe(A1([J(),J(),J()])),commission:J(),lastVote:J(),rootSlot:me(J())}),O9=$e(ie({current:pe(Ub),delinquent:pe(Ub)})),j9=mr([Yt("processed"),Yt("confirmed"),Yt("finalized")]),B9=ie({slot:J(),confirmations:me(J()),err:Va,confirmationStatus:Te(j9)}),U9=un(pe(me(B9))),F9=$e(J()),BN=ie({accountKey:en,writableIndexes:pe(J()),readonlyIndexes:pe(J())}),P1=ie({signatures:pe(ue()),message:ie({accountKeys:pe(ue()),header:ie({numRequiredSignatures:J(),numReadonlySignedAccounts:J(),numReadonlyUnsignedAccounts:J()}),instructions:pe(ie({accounts:pe(J()),data:ue(),programIdIndex:J()})),recentBlockhash:ue(),addressTableLookups:Te(pe(BN))})}),UN=ie({pubkey:en,signer:Oi(),writable:Oi(),source:Te(mr([Yt("transaction"),Yt("lookupTable")]))}),FN=ie({accountKeys:pe(UN),signatures:pe(ue())}),VN=ie({parsed:Nc(),program:ue(),programId:en}),zN=ie({accounts:pe(en),data:ue(),programId:en}),V9=mr([zN,VN]),z9=mr([ie({parsed:Nc(),program:ue(),programId:ue()}),ie({accounts:pe(ue()),data:ue(),programId:ue()})]),WN=Kd(V9,z9,t=>"accounts"in t?fe(t,zN):fe(t,VN)),$N=ie({signatures:pe(ue()),message:ie({accountKeys:pe(UN),instructions:pe(WN),recentBlockhash:ue(),addressTableLookups:Te(me(pe(BN)))})}),pp=ie({accountIndex:J(),mint:ue(),owner:Te(ue()),programId:Te(ue()),uiTokenAmount:Oy}),qN=ie({writable:pe(en),readonly:pe(en)}),xm=ie({err:Va,fee:J(),innerInstructions:Te(me(pe(ie({index:J(),instructions:pe(ie({accounts:pe(J()),data:ue(),programIdIndex:J()}))})))),preBalances:pe(J()),postBalances:pe(J()),logMessages:Te(me(pe(ue()))),preTokenBalances:Te(me(pe(pp))),postTokenBalances:Te(me(pe(pp))),loadedAddresses:Te(qN),computeUnitsConsumed:Te(J())}),L1=ie({err:Va,fee:J(),innerInstructions:Te(me(pe(ie({index:J(),instructions:pe(WN)})))),preBalances:pe(J()),postBalances:pe(J()),logMessages:Te(me(pe(ue()))),preTokenBalances:Te(me(pe(pp))),postTokenBalances:Te(me(pe(pp))),loadedAddresses:Te(qN),computeUnitsConsumed:Te(J())}),Cc=mr([Yt(0),Yt("legacy")]),za=ie({pubkey:ue(),lamports:J(),postBalance:me(J()),rewardType:me(ue()),commission:Te(me(J()))}),W9=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:P1,meta:me(xm),version:Te(Cc)})),rewards:Te(pe(za)),blockTime:me(J()),blockHeight:me(J())}))),$9=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),rewards:Te(pe(za)),blockTime:me(J()),blockHeight:me(J())}))),q9=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:FN,meta:me(xm),version:Te(Cc)})),rewards:Te(pe(za)),blockTime:me(J()),blockHeight:me(J())}))),H9=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:$N,meta:me(L1),version:Te(Cc)})),rewards:Te(pe(za)),blockTime:me(J()),blockHeight:me(J())}))),K9=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:FN,meta:me(L1),version:Te(Cc)})),rewards:Te(pe(za)),blockTime:me(J()),blockHeight:me(J())}))),G9=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),rewards:Te(pe(za)),blockTime:me(J()),blockHeight:me(J())}))),Y9=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(ie({transaction:P1,meta:me(xm)})),rewards:Te(pe(za)),blockTime:me(J())}))),Fb=$e(me(ie({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),signatures:pe(ue()),blockTime:me(J())}))),Vg=$e(me(ie({slot:J(),meta:me(xm),blockTime:Te(me(J())),transaction:P1,version:Te(Cc)}))),jh=$e(me(ie({slot:J(),transaction:$N,meta:me(L1),blockTime:Te(me(J())),version:Te(Cc)}))),Q9=un(ie({blockhash:ue(),lastValidBlockHeight:J()})),Z9=un(Oi()),X9=ie({slot:J(),numTransactions:J(),numSlots:J(),samplePeriodSecs:J()}),J9=$e(pe(X9)),ez=un(me(ie({feeCalculator:ie({lamportsPerSignature:J()})}))),tz=$e(ue()),nz=$e(ue()),rz=ie({err:Va,logs:pe(ue()),signature:ue()}),iz=ie({result:_m(rz),subscription:J()}),sz={"solana-client":"js/1.0.0-maintenance"};class D1{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async d=>{const{commitment:h,config:m}=Tt(d),w=this._buildArgs([],h,void 0,m),k=Lb(w);return c[k]=c[k]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",w),_=fe(I,$e(J()));if("error"in _)throw new xe(_.error,"failed to get block height information");return _.result}finally{delete c[k]}})(),await c[k]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=$V(e),this._rpcWsEndpoint=r||zV(e),this._rpcClient=s9(e,i,s,o,a,l),this._rpcRequest=o9(this._rpcClient),this._rpcBatchRequest=a9(this._rpcClient),this._rpcWebSocket=new BV(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=fe(o,un(J()));if("error"in a)throw new xe(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=fe(n,$e(me(J())));if("error"in r)throw new xe(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=fe(e,$e(J()));if("error"in n)throw new xe(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=fe(e,p9);if("error"in n)throw new xe(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=fe(r,m9);if("error"in i)throw new xe(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=fe(i,un(Oy));if("error"in s)throw new xe(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=fe(i,un(Oy));if("error"in s)throw new xe(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=Tt(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=fe(l,y9);if("error"in c)throw new xe(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=fe(o,w9);if("error"in a)throw new xe(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=fe(i,v9);if("error"in s)throw new xe(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=fe(i,g9);if("error"in s)throw new xe(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=fe(o,un(me(xd)));if("error"in a)throw new xe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=fe(o,un(me(By)));if("error"in a)throw new xe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=Tt(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=fe(a,un(pe(me(By))));if("error"in l)throw new xe(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=Tt(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=fe(a,un(pe(me(xd))));if("error"in l)throw new xe(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=Tt(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=fe(a,$e(b9));if("error"in l)throw new xe(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=Tt(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:jb(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=pe(_9),d=o.withContext===!0?fe(l,un(c)):fe(l,$e(c));if("error"in d)throw new xe(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=fe(o,$e(pe(E9)));if("error"in a)throw new xe(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=zn.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ut(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(h,m)=>{r=void 0;const w={context:m,value:h};l({__type:zs.PROCESSED,response:w})},e);const d=new Promise(h=>{r==null?h():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&h()})});(async()=>{if(await d,s)return;const h=await this.getSignatureStatus(n);if(s||h==null)return;const{context:m,value:w}=h;if(w!=null)if(w!=null&&w.err)c(w.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(w.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(w.confirmationStatus==="processed"||w.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:zs.PROCESSED,response:{context:m,value:w}})}})()}catch(d){c(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(h=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let w=await m();if(!s){for(;w<=r;)if(await dl(1e3),s||(w=await m(),s))return;h({__type:zs.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let d;try{const h=await Promise.race([c,l,o]);if(h.__type===zs.PROCESSED)d=h.response;else throw new MN(i)}finally{s=!0,a()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(w=>{let k=s,I=null;const _=async()=>{try{const{context:T,value:S}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return I=T.slot,S==null?void 0:S.nonce}catch{return k}};(async()=>{if(k=await _(),!a)for(;;){if(s!==k){w({__type:zs.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await dl(2e3),a||(k=await _(),a))return}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(n);let m;try{const w=await Promise.race([h,d,l]);if(w.__type===zs.PROCESSED)m=w.response;else{let k;for(;;){const I=await this.getSignatureStatus(o);if(I==null)break;if(I.context.slot<(w.slotInWhichNonceDidAdvance??r)){await dl(400);continue}k=I;break}if(k!=null&&k.value){const I=e||"finalized",{confirmationStatus:_}=k.value;switch(I){case"processed":case"recent":if(_!=="processed"&&_!=="confirmed"&&_!=="finalized")throw new gu(o);break;case"confirmed":case"single":case"singleGossip":if(_!=="confirmed"&&_!=="finalized")throw new gu(o);break;case"finalized":case"max":case"root":if(_!=="finalized")throw new gu(o);break;default:}m={context:k.context,value:{err:k.value.err}}}else throw new gu(o)}}finally{a=!0,c()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:zs.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===zs.PROCESSED)a=l.response;else throw new PN(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=fe(e,$e(pe(D9)));if("error"in n)throw new xe(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=fe(r,O9);if("error"in i)throw new xe(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=fe(s,$e(J()));if("error"in o)throw new xe(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=fe(s,$e(ue()));if("error"in o)throw new xe(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=fe(i,$e(pe(en)));if("error"in s)throw new xe(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);Ut(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=fe(i,U9);if("error"in s)throw new xe(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=fe(s,$e(J()));if("error"in o)throw new xe(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=fe(r,l9);if("error"in i)throw new xe(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=Tt(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=fe(a,KV);if("error"in l)throw new xe(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=fe(e,c9);if("error"in n)throw new xe(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=fe(s,d9);if("error"in o)throw new xe(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=fe(e,h9);if("error"in n)throw new xe(n.error,"failed to get epoch schedule");const r=n.result;return new OV(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=fe(e,f9);if("error"in n)throw new xe(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=fe(i,F9);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=fe(n,J9);if("error"in r)throw new xe(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=fe(i,ez);if("error"in s)throw new xe(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=ac(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=fe(s,un(me(J())));if("error"in o)throw new xe(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=fe(i,u9);if("error"in s)throw new xe(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=fe(s,Q9);if("error"in o)throw new xe(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=fe(o,Z9);if("error"in a)throw new xe(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=fe(e,$e(t9));if("error"in n)throw new xe(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=fe(e,$e(ue()));if("error"in n)throw new xe(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=fe(o,q9);if("error"in a)throw a.error;return a.result}case"none":{const a=fe(o,$9);if("error"in a)throw a.error;return a.result}default:{const a=fe(o,W9);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:d,version:h})=>({meta:d,transaction:{...c,message:Fg(h,c.message)},version:h}))}:null}}}catch(a){throw new xe(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=fe(o,K9);if("error"in a)throw a.error;return a.result}case"none":{const a=fe(o,G9);if("error"in a)throw a.error;return a.result}default:{const a=fe(o,H9);if("error"in a)throw a.error;return a.result}}}catch(a){throw new xe(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=fe(s,i9);if("error"in o)throw new xe(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=fe(o,Vg);if("error"in a)throw new xe(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:Fg(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=Tt(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=fe(o,jh);if("error"in a)throw new xe(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=Tt(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=fe(l,jh);if("error"in c)throw new xe(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=Tt(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=fe(l,Vg);if("error"in c)throw new xe(c.error,"failed to get transactions");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:Fg(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=fe(i,Y9);if("error"in s)throw new xe(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const d=new Ss(l.message);return{meta:c,transaction:{...l,message:d}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:ci.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=fe(s,$e(pe(J())));if("error"in o)throw new xe(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=fe(i,Fb);if("error"in s)throw new xe(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=fe(i,Fb);if("error"in s)throw new xe(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=fe(i,Vg);if("error"in s)throw new xe(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Ss(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:ci.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=fe(i,jh);if("error"in s)throw new xe(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=fe(o,jh);if("error"in a)throw new xe(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=fe(s,I9);if("error"in o)throw new xe(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=fe(s,S9);if("error"in o)throw new xe(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new Ob({key:e,state:Ob.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=R1.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=fe(r,tz);if("error"in i)throw new xe(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await dl(100);const r=Date.now()-this._blockhashInfo.lastFetch>=WV;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await dl(AV/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=Tt(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=fe(s,un(J()));if("error"in o)throw new xe(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const I=e.serialize(),_=Be.Buffer.from(I).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const T=n||{};T.encoding="base64","commitment"in T||(T.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(T.innerInstructions=n.innerInstructions);const S=[_,T],E=await this._rpcRequest("simulateTransaction",S),j=fe(E,Bb);if("error"in j)throw new Error("failed to simulate transaction: "+j.error.message);return j.result}let i;if(e instanceof ci){let k=e;i=new ci,i.feePayer=k.feePayer,i.instructions=e.instructions,i.nonceInfo=k.nonceInfo,i.signatures=k.signatures}else i=ci.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let k=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(k);if(i.lastValidBlockHeight=I.lastValidBlockHeight,i.recentBlockhash=I.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const _=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(_)&&!this._blockhashInfo.transactionSignatures.includes(_)){this._blockhashInfo.simulatedSignatures.push(_);break}else k=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(r){const k=(Array.isArray(r)?r:o.nonProgramIds()).map(I=>I.toBase58());d.accounts={encoding:"base64",addresses:k}}s&&(d.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(d.innerInstructions=n.innerInstructions);const h=[c,d],m=await this._rpcRequest("simulateTransaction",h),w=fe(m,Bb);if("error"in w){let k;if("data"in w.error&&(k=w.error.data.logs,k&&Array.isArray(k))){const I=`
    `,_=I+k.join(I);console.error(w.error.message,_)}throw new Mb({action:"simulate",signature:"",transactionMessage:w.error.message,logs:k})}return w.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=ac(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=fe(a,nz);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new Mb({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=fe(e,k9);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=Lb([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Ut(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=Tt(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=fe(e,A9);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=Tt(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:jb(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=fe(e,iz);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=fe(e,C9);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=fe(e,M9);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=fe(e,P9);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=fe(e,L9);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Pu{constructor(e){this._keypair=void 0,this._keypair=e??Ab()}static generate(){return new Pu(Ab())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=Dy(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Pu({publicKey:r,secretKey:e})}static fromSeed(e){const n=Dy(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new Pu({publicKey:n,secretKey:r})}get publicKey(){return new Ee(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:ve([Se("instruction"),lc("recentSlot"),at("bumpSeed")])},FreezeLookupTable:{index:1,layout:ve([Se("instruction")])},ExtendLookupTable:{index:2,layout:ve([Se("instruction"),lc(),ar(He(),ga(Se(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ve([Se("instruction")])},CloseLookupTable:{index:4,layout:ve([Se("instruction")])}});new Ee("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ve([at("instruction"),Se("units"),Se("additionalFee")])},RequestHeapFrame:{index:1,layout:ve([at("instruction"),Se("bytes")])},SetComputeUnitLimit:{index:2,layout:ve([at("instruction"),Se("units")])},SetComputeUnitPrice:{index:3,layout:ve([at("instruction"),lc("microLamports")])}});new Ee("ComputeBudget111111111111111111111111111111");ve([at("numSignatures"),at("padding"),Wr("signatureOffset"),Wr("signatureInstructionIndex"),Wr("publicKeyOffset"),Wr("publicKeyInstructionIndex"),Wr("messageDataOffset"),Wr("messageDataSize"),Wr("messageInstructionIndex")]);new Ee("Ed25519SigVerify111111111111111111111111111");pV.utils.isValidPrivateKey;ve([at("numSignatures"),Wr("signatureOffset"),at("signatureInstructionIndex"),Wr("ethAddressOffset"),at("ethAddressInstructionIndex"),Wr("messageDataOffset"),Wr("messageDataSize"),at("messageInstructionIndex"),Lt(20,"ethAddress"),Lt(64,"signature"),at("recoveryId")]);new Ee("KeccakSecp256k11111111111111111111111111111");var HN;new Ee("StakeConfig11111111111111111111111111111111");class KN{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}HN=KN;KN.default=new HN(0,0,Ee.default);Object.freeze({Initialize:{index:0,layout:ve([Se("instruction"),_V(),xV()])},Authorize:{index:1,layout:ve([Se("instruction"),He("newAuthorized"),Se("stakeAuthorizationType")])},Delegate:{index:2,layout:ve([Se("instruction")])},Split:{index:3,layout:ve([Se("instruction"),Nr("lamports")])},Withdraw:{index:4,layout:ve([Se("instruction"),Nr("lamports")])},Deactivate:{index:5,layout:ve([Se("instruction")])},Merge:{index:7,layout:ve([Se("instruction")])},AuthorizeWithSeed:{index:8,layout:ve([Se("instruction"),He("newAuthorized"),Se("stakeAuthorizationType"),kl("authoritySeed"),He("authorityOwner")])}});new Ee("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ve([Se("instruction"),EV()])},Authorize:{index:1,layout:ve([Se("instruction"),He("newAuthorized"),Se("voteAuthorizationType")])},Withdraw:{index:3,layout:ve([Se("instruction"),Nr("lamports")])},UpdateValidatorIdentity:{index:4,layout:ve([Se("instruction")])},AuthorizeWithSeed:{index:10,layout:ve([Se("instruction"),bV()])}});new Ee("Vote111111111111111111111111111111111111111");new Ee("Va1idator1nfo111111111111111111111111111111");ie({name:ue(),website:Te(ue()),details:Te(ue()),iconUrl:Te(ue()),keybaseUsername:Te(ue())});new Ee("Vote111111111111111111111111111111111111111");ve([He("nodePubkey"),He("authorizedWithdrawer"),at("commission"),jn(),ar(ve([jn("slot"),Se("confirmationCount")]),ga(Se(),-8),"votes"),at("rootSlotValid"),jn("rootSlot"),jn(),ar(ve([jn("epoch"),He("authorizedVoter")]),ga(Se(),-8),"authorizedVoters"),ve([ar(ve([He("authorizedPubkey"),jn("epochOfLastAuthorizedSwitch"),jn("targetEpoch")]),32,"buf"),jn("idx"),at("isEmpty")],"priorVoters"),jn(),ar(ve([jn("epoch"),jn("credits"),jn("prevCredits")]),ga(Se(),-8),"epochCredits"),ve([jn("slot"),jn("timestamp")],"lastTimestamp")]);const Vb={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function oz(t,e){const n="https";if(!t)return Vb[n].devnet;const r=Vb[n][t];if(!r)throw new Error(`Unknown ${n} cluster: ${t}`);return r}const GN=Y.createContext({});function az(){return Y.useContext(GN)}const lz=({children:t,endpoint:e,config:n={commitment:"confirmed"}})=>{const r=Y.useMemo(()=>new D1(e,n),[e,n]);return ce.createElement(GN.Provider,{value:{connection:r}},t)};var YN={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var w=new i(d,h||l,m),k=n?n+c:c;return l._events[k]?l._events[k].fn?l._events[k]=[l._events[k],w]:l._events[k].push(w):(l._events[k]=w,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)e.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,w=h.length,k=new Array(w);m<w;m++)k[m]=h[m].fn;return k},a.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,d,h,m,w,k){var I=n?n+c:c;if(!this._events[I])return!1;var _=this._events[I],T=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),T){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,m),!0;case 5:return _.fn.call(_.context,d,h,m,w),!0;case 6:return _.fn.call(_.context,d,h,m,w,k),!0}for(E=1,S=new Array(T-1);E<T;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var j=_.length,K;for(E=0;E<j;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),T){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,d);break;case 3:_[E].fn.call(_[E].context,d,h);break;case 4:_[E].fn.call(_[E].context,d,h,m);break;default:if(!S)for(K=1,S=new Array(T-1);K<T;K++)S[K-1]=arguments[K];_[E].fn.apply(_[E].context,S)}}return!0},a.prototype.on=function(c,d,h){return s(this,c,d,h,!1)},a.prototype.once=function(c,d,h){return s(this,c,d,h,!0)},a.prototype.removeListener=function(c,d,h,m){var w=n?n+c:c;if(!this._events[w])return this;if(!d)return o(this,w),this;var k=this._events[w];if(k.fn)k.fn===d&&(!m||k.once)&&(!h||k.context===h)&&o(this,w);else{for(var I=0,_=[],T=k.length;I<T;I++)(k[I].fn!==d||m&&!k[I].once||h&&k[I].context!==h)&&_.push(k[I]);_.length?this._events[w]=_.length===1?_[0]:_:o(this,w)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(YN);var cz=YN.exports;const uz=Co(cz);class Pn extends Error{constructor(e,n){super(e),this.error=n}}class bo extends Pn{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class dz extends Pn{constructor(){super(...arguments),this.name="WalletLoadError"}}class Tl extends Pn{constructor(){super(...arguments),this.name="WalletConfigError"}}class ao extends Pn{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Em extends Pn{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class O1 extends Pn{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class oa extends Pn{constructor(){super(...arguments),this.name="WalletAccountError"}}class cc extends Pn{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class fn extends Pn{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class us extends Pn{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class hi extends Pn{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class bm extends Pn{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class zb extends Pn{constructor(){super(...arguments),this.name="WalletSignInError"}}var Ve;(function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"})(Ve||(Ve={}));class QN extends uz{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,n,r={}){const i=this.publicKey;if(!i)throw new fn;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await n.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function ZN(t){if(typeof window>"u"||typeof document>"u")return;const e=[];function n(){if(t())for(const s of e)s()}const r=setInterval(n,1e3);e.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",n))),document.readyState!=="complete"&&(window.addEventListener("load",n,{once:!0}),e.push(()=>window.removeEventListener("load",n))),n()}function Uy(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),n=t.includes("safari");return e&&n}function ds(t){return"version"in t}class hz extends QN{async sendTransaction(e,n,r={}){let i=!0;try{if(ds(e)){if(!this.supportedTransactionVersions)throw new us("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new us(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await n.sendRawTransaction(s,r)}catch(s){throw s instanceof hi?(i=!1,s):new us(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=r;e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await n.sendRawTransaction(a,o)}catch(s){throw s instanceof hi?(i=!1,s):new us(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const r of e)if(ds(r)){if(!this.supportedTransactionVersions)throw new hi("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new hi(`Signing transaction version ${r.version} isn't supported by this wallet`)}const n=[];for(const r of e)n.push(await this.signTransaction(r));return n}}class j1 extends hz{}class fz extends j1{}const is="solana:signAndSendTransaction",zg="solana:signIn",hl="solana:signMessage",Nn="solana:signTransaction",B1="standard:connect",Fy="standard:disconnect",U1="standard:events";function pz(t){return B1 in t.features&&U1 in t.features&&(is in t.features||Nn in t.features)}var Vy;(function(t){t.Mainnet="mainnet-beta",t.Testnet="testnet",t.Devnet="devnet"})(Vy||(Vy={}));class Wb extends Pn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const mz=[],Im={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){oi("call","select")},connect(){return Promise.reject(oi("call","connect"))},disconnect(){return Promise.reject(oi("call","disconnect"))},sendTransaction(){return Promise.reject(oi("call","sendTransaction"))},signTransaction(){return Promise.reject(oi("call","signTransaction"))},signAllTransactions(){return Promise.reject(oi("call","signAllTransactions"))},signMessage(){return Promise.reject(oi("call","signMessage"))},signIn(){return Promise.reject(oi("call","signIn"))}};Object.defineProperty(Im,"wallets",{get(){return oi("read","wallets"),mz}});Object.defineProperty(Im,"wallet",{get(){return oi("read","wallet"),null}});Object.defineProperty(Im,"publicKey",{get(){return oi("read","publicKey"),null}});function oi(t,e){const n=new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(n),n}const XN=Y.createContext(Im);function JN(){return Y.useContext(XN)}function gz(t,e){const n=Y.useState(()=>{try{const s=localStorage.getItem(t);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),r=n[0],i=Y.useRef(!0);return Y.useEffect(()=>{if(i.current){i.current=!1;return}try{r===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(r))}catch(s){typeof window<"u"&&console.error(s)}},[r,t]),n}function Wg(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const zy="solana:mainnet",eC="solana:devnet",tC="solana:testnet",yz="solana:localnet",wz="https://api.mainnet-beta.solana.com";function vz(t){return t.includes(wz)?zy:/\bdevnet\b/i.test(t)?eC:/\btestnet\b/i.test(t)?tC:/\blocalhost\b/i.test(t)||/\b127\.0\.0\.1\b/.test(t)?yz:zy}function _z(t){let e=`${t.domain} wants you to sign in with your Solana account:
`;e+=`${t.address}`,t.statement&&(e+=`

${t.statement}`);const n=[];if(t.uri&&n.push(`URI: ${t.uri}`),t.version&&n.push(`Version: ${t.version}`),t.chainId&&n.push(`Chain ID: ${t.chainId}`),t.nonce&&n.push(`Nonce: ${t.nonce}`),t.issuedAt&&n.push(`Issued At: ${t.issuedAt}`),t.expirationTime&&n.push(`Expiration Time: ${t.expirationTime}`),t.notBefore&&n.push(`Not Before: ${t.notBefore}`),t.requestId&&n.push(`Request ID: ${t.requestId}`),t.resources){n.push("Resources:");for(const r of t.resources)n.push(`- ${r}`)}return n.length&&(e+=`

${n.join(`
`)}`),e}const ks={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Ts extends Error{constructor(...e){const[n,r,i]=e;super(r),this.code=n,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class nC extends Error{constructor(...e){const[n,r,i,s]=e;super(i),this.code=r,this.data=s,this.jsonRpcMessageId=n,this.name="SolanaMobileWalletAdapterProtocolError"}}function wn(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,[])).next())})}function $g(t,e){return wn(this,void 0,void 0,function*(){const n=yield crypto.subtle.exportKey("raw",t),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,n),i=new Uint8Array(n.byteLength+r.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i})}function xz(t){return window.btoa(t)}function Ez(t){return _z(t)}function bz(t){return xz(Ez(t))}const Iz="solana:signTransactions",$b="solana:cloneAuthorization";function Sz(t,e){return new Proxy({},{get(n,r){return n[r]==null&&(n[r]=function(i){return wn(this,void 0,void 0,function*(){const{method:s,params:o}=kz(r,i,t),a=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Az(o.sign_in_payload,a,e)),Tz(r,a,t)})}),n[r]},defineProperty(){return!1},deleteProperty(){return!1}})}function kz(t,e,n){let r=e,i=t.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(t){case"authorize":{let{chain:s}=r;if(n==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=r.cluster}r.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}r.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=r;if(s)switch(n){case"legacy":{i="reauthorize",r={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:r}}function Tz(t,e,n){switch(t){case"getCapabilities":{const r=e;switch(n){case"legacy":{const i=[Iz];return r.supports_clone_authorization===!0&&i.push($b),Object.assign(Object.assign({},r),{features:i})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes($b)})}}}return e}function Az(t,e,n){var r;return wn(this,void 0,void 0,function*(){const i=(r=t.domain)!==null&&r!==void 0?r:window.location.host,s=e.accounts[0].address,o=bz(Object.assign(Object.assign({},t),{domain:i,address:s})),a=yield n("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const aa=4;function Nz(t){if(t>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(aa);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e)}const Wy=12,rC=65;function Cz(t,e,n){return wn(this,void 0,void 0,function*(){const r=Nz(e),i=new Uint8Array(Wy);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(sC(r,i),n,new TextEncoder().encode(t)),o=new Uint8Array(r.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.byteLength),o.set(new Uint8Array(s),r.byteLength+i.byteLength),o})}function iC(t,e){return wn(this,void 0,void 0,function*(){const n=t.slice(0,aa),r=t.slice(aa,aa+Wy),i=t.slice(aa+Wy),s=yield crypto.subtle.decrypt(sC(n,r),e,i);return Rz().decode(s)})}function sC(t,e){return{additionalData:t,iv:e,name:"AES-GCM",tagLength:128}}let qg;function Rz(){return qg===void 0&&(qg=new TextDecoder("utf-8")),qg}function Mz(){return wn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Hg(){return wn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Pz(t,e){return wn(this,void 0,void 0,function*(){const n=JSON.stringify(t),r=t.id;return Cz(n,r,e)})}function Lz(t,e){return wn(this,void 0,void 0,function*(){const n=yield iC(t,e),r=JSON.parse(n);if(Object.hasOwnProperty.call(r,"error"))throw new nC(r.id,r.error.code,r.error.message);return r})}function Dz(t,e,n){return wn(this,void 0,void 0,function*(){const[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",t.slice(0,rC),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},n,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function Oz(t,e){return wn(this,void 0,void 0,function*(){const n=yield iC(t,e),r=JSON.parse(n);let i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Ts(ks.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}function jz(){return oC(49152+Math.floor(Math.random()*16384))}function oC(t){if(t<49152||t>65535)throw new Ts(ks.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${t} given.`,{port:t});return t}function Bz(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}function Uz(t){return t.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const Fz="solana-wallet";function qb(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Vz(t,e){let n=null;if(e){try{n=new URL(e)}catch{}if((n==null?void 0:n.protocol)!=="https:")throw new Ts(ks.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL(`${Fz}:/`));const r=t.startsWith("/")?t:[...qb(n.pathname),...qb(t)].join("/");return new URL(r,n)}function zz(t,e,n,r=["v1"]){return wn(this,void 0,void 0,function*(){const i=oC(e),s=yield crypto.subtle.exportKey("raw",t),o=Bz(s),a=Vz("v1/associate/local",n);return a.searchParams.set("association",Uz(o)),a.searchParams.set("port",`${i}`),r.forEach(l=>{a.searchParams.set("v",l)}),a})}const mp={Firefox:0,Other:1};function Wz(){return navigator.userAgent.indexOf("Firefox/")!==-1?mp.Firefox:mp.Other}function $z(){return new Promise((t,e)=>{function n(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){n(),t()}window.addEventListener("blur",r);const i=setTimeout(()=>{n(),e()},2e3)})}let eu=null;function qz(t){eu==null&&(eu=document.createElement("iframe"),eu.style.display="none",document.body.appendChild(eu)),eu.contentWindow.location.href=t.toString()}function Hz(t){return wn(this,void 0,void 0,function*(){if(t.protocol==="https:")window.location.assign(t);else try{const e=Wz();switch(e){case mp.Firefox:qz(t);break;case mp.Other:{const n=$z();window.location.assign(t),yield n;break}default:}}catch{throw new Ts(ks.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Kz(t,e){return wn(this,void 0,void 0,function*(){const n=jz(),r=yield zz(t,n,e);return yield Hz(r),n})}const Hb={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},Gz="com.solana.mobilewalletadapter.v1";function Yz(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Ts(ks.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function Qz(t){let e;try{e=new URL(t)}catch{throw new Ts(ks.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Ts(ks.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function Kb(t){return new DataView(t).getUint32(0,!1)}function Zz(t,e){return wn(this,void 0,void 0,function*(){Yz();const n=yield Mz(),i=`ws://localhost:${yield Kz(n.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const d=[...Hb.retryDelayScheduleMs];return()=>d.length>1?d.shift():d[0]})();let a=1,l=0,c={__type:"disconnected"};return new Promise((d,h)=>{let m;const w={},k=()=>wn(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}m.removeEventListener("open",k);const{associationKeypair:K}=c,G=yield Hg();m.send(yield $g(G.publicKey,K.privateKey)),c={__type:"hello_req_sent",associationPublicKey:K.publicKey,ecdhPrivateKey:G.privateKey}}),I=K=>{K.wasClean?c={__type:"disconnected"}:h(new Ts(ks.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${K.code}: ${K.reason}).`,{closeEvent:K})),S()},_=K=>wn(this,void 0,void 0,function*(){S(),Date.now()-s>=Hb.timeoutMs?h(new Ts(ks.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(G=>{const O=o();E=window.setTimeout(G,O)}),j())}),T=K=>wn(this,void 0,void 0,function*(){const G=yield K.data.arrayBuffer();switch(c.__type){case"connecting":if(G.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const O=yield Hg();m.send(yield $g(O.publicKey,n.privateKey)),c={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:O.privateKey};break;case"connected":try{const L=G.slice(0,aa),B=Kb(L);if(B!==l+1)throw new Error("Encrypted message has invalid sequence number");l=B;const W=yield Lz(G,c.sharedSecret),$=w[W.id];delete w[W.id],$.resolve(W.result)}catch(L){if(L instanceof nC){const B=w[L.jsonRpcMessageId];delete w[L.jsonRpcMessageId],B.reject(L)}else throw L}break;case"hello_req_sent":{if(G.byteLength===0){const H=yield Hg();m.send(yield $g(H.publicKey,n.privateKey)),c={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:H.privateKey};break}const L=yield Dz(G,c.associationPublicKey,c.ecdhPrivateKey),B=G.slice(rC),W=B.byteLength!==0?yield wn(this,void 0,void 0,function*(){const H=B.slice(0,aa),A=Kb(H);if(A!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=A,Oz(B,L)}):{protocol_version:"legacy"};c={__type:"connected",sharedSecret:L,sessionProperties:W};const $=Sz(W.protocol_version,(H,A)=>wn(this,void 0,void 0,function*(){const f=a++;return m.send(yield Pz({id:f,jsonrpc:"2.0",method:H,params:A??{}},L)),new Promise((b,C)=>{w[f]={resolve(M){switch(H){case"authorize":case"reauthorize":{const{wallet_uri_base:R}=M;if(R!=null)try{Qz(R)}catch(F){C(F);return}break}}b(M)},reject:C}})}));try{d(yield t($))}catch(H){h(H)}finally{S(),m.close()}break}}});let S,E;const j=()=>{S&&S(),c={__type:"connecting",associationKeypair:n},s===void 0&&(s=Date.now()),m=new WebSocket(i,[Gz]),m.addEventListener("open",k),m.addEventListener("close",I),m.addEventListener("error",_),m.addEventListener("message",T),S=()=>{window.clearTimeout(E),m.removeEventListener("open",k),m.removeEventListener("close",I),m.removeEventListener("error",_),m.removeEventListener("message",T)}};j()})})}function Xz(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function d(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var k=0,I=0,_=0,T=w.length;_!==T&&w[_]===0;)_++,k++;for(var S=(T-_)*c+1>>>0,E=new Uint8Array(S);_!==T;){for(var j=w[_],K=0,G=S-1;(j!==0||K<I)&&G!==-1;G--,K++)j+=256*E[G]>>>0,E[G]=j%o>>>0,j=j/o>>>0;if(j!==0)throw new Error("Non-zero carry");I=K,_++}for(var O=S-I;O!==S&&E[O]===0;)O++;for(var L=a.repeat(k);O<S;++O)L+=t.charAt(E[O]);return L}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;for(var k=0,I=0,_=0;w[k]===a;)I++,k++;for(var T=(w.length-k)*l+1>>>0,S=new Uint8Array(T);w[k];){var E=e[w.charCodeAt(k)];if(E===255)return;for(var j=0,K=T-1;(E!==0||j<_)&&K!==-1;K--,j++)E+=o*S[K]>>>0,S[K]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");_=j,k++}for(var G=T-_;G!==T&&S[G]===0;)G++;for(var O=new Uint8Array(I+(T-G)),L=I;G!==T;)O[L++]=S[G++];return O}function m(w){var k=h(w);if(k)return k;throw new Error("Non-base"+o+" character")}return{encode:d,decodeUnsafe:h,decode:m}}var Jz=Xz;const e7=Jz,t7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var n7=e7(t7);const r7=Co(n7);function Kg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Bh(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,[])).next())})}function aC(t){return window.btoa(String.fromCharCode.call(null,...t))}function Gg(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function Gb(t){const e="version"in t?t.serialize():t.serialize({requireAllSignatures:!1,verifySignatures:!1});return aC(e)}function i7(t){const n=t[0]*wd+1;return C1.deserializeMessageVersion(t.slice(n,t.length))==="legacy"?ci.from(t):_d.deserialize(t)}function s7(t,e){return Bh(this,void 0,void 0,function*(){return yield Zz(r=>{const i=new Proxy({},{get(s,o){if(s[o]==null)switch(o){case"signAndSendTransactions":s[o]=function(a){var{minContextSlot:l,commitment:c,skipPreflight:d,maxRetries:h,waitForCommitmentToSendNextTransaction:m,transactions:w}=a,k=Kg(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Bh(this,void 0,void 0,function*(){const I=w.map(Gb),_={min_context_slot:l,commitment:c,skip_preflight:d,max_retries:h,wait_for_commitment_to_send_next_transaction:m},{signatures:T}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},k),Object.values(_).some(E=>E!=null)?{options:_}:null),{payloads:I}));return T.map(Gg).map(r7.encode)})};break;case"signMessages":s[o]=function(a){var{payloads:l}=a,c=Kg(a,["payloads"]);return Bh(this,void 0,void 0,function*(){const d=l.map(aC),{signed_payloads:h}=yield r.signMessages(Object.assign(Object.assign({},c),{payloads:d}));return h.map(Gg)})};break;case"signTransactions":s[o]=function(a){var{transactions:l}=a,c=Kg(a,["transactions"]);return Bh(this,void 0,void 0,function*(){const d=l.map(Gb),{signed_payloads:h}=yield r.signTransactions(Object.assign(Object.assign({},c),{payloads:d}));return h.map(Gg).map(i7)})};break;default:{s[o]=r[o];break}}return s[o]},defineProperty(){return!1},deleteProperty(){return!1}});return t(i)},e)})}var o7=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},lC={},Vr={};let F1;const a7=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Vr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Vr.getSymbolTotalCodewords=function(e){return a7[e]};Vr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Vr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');F1=e};Vr.isKanjiModeEnabled=function(){return typeof F1<"u"};Vr.toSJIS=function(e){return F1(e)};var Sm={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(Sm);function cC(){this.buffer=[],this.length=0}cC.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var l7=cC;function Gd(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Gd.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};Gd.prototype.get=function(t,e){return this.data[t*this.size+e]};Gd.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Gd.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var c7=Gd,uC={};(function(t){const e=Vr.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(uC);var dC={};const u7=Vr.getSymbolSize,Yb=7;dC.getPositions=function(e){const n=u7(e);return[[0,0],[n-Yb,0],[0,n-Yb]]};var hC={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,c=null,d=null;for(let h=0;h<s;h++){a=l=0,c=d=null;for(let m=0;m<s;m++){let w=i.get(h,m);w===c?a++:(a>=5&&(o+=e.N1+(a-5)),c=w,a=1),w=i.get(m,h),w===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=w,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const c=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(c===4||c===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let c=0;c<s;c++){a=l=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(c,d),d>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(d,c),d>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,n(i,l,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let c=0;c<o;c++){s(c),t.applyMask(c,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(c,i),d<l&&(l=d,a=c)}return a}})(hC);var km={};const lo=Sm,Uh=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Fh=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];km.getBlocksCount=function(e,n){switch(n){case lo.L:return Uh[(e-1)*4+0];case lo.M:return Uh[(e-1)*4+1];case lo.Q:return Uh[(e-1)*4+2];case lo.H:return Uh[(e-1)*4+3];default:return}};km.getTotalCodewordsCount=function(e,n){switch(n){case lo.L:return Fh[(e-1)*4+0];case lo.M:return Fh[(e-1)*4+1];case lo.Q:return Fh[(e-1)*4+2];case lo.H:return Fh[(e-1)*4+3];default:return}};var fC={},Tm={};const Lu=new Uint8Array(512),gp=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Lu[n]=e,gp[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Lu[n]=Lu[n-255]})();Tm.log=function(e){if(e<1)throw new Error("log("+e+")");return gp[e]};Tm.exp=function(e){return Lu[e]};Tm.mul=function(e,n){return e===0||n===0?0:Lu[gp[e]+gp[n]]};(function(t){const e=Tm;t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(fC);const pC=fC;function V1(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}V1.prototype.initialize=function(e){this.degree=e,this.genPoly=pC.generateECPolynomial(this.degree)};V1.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=pC.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var d7=V1,mC={},Oo={},z1={};z1.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Wi={};const gC="[0-9]+",h7="[A-Z $%*+\\-./:]+";let Ed="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ed=Ed.replace(/u/g,"\\u");const f7="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ed+`)(?:.|[\r
]))+`;Wi.KANJI=new RegExp(Ed,"g");Wi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Wi.BYTE=new RegExp(f7,"g");Wi.NUMERIC=new RegExp(gC,"g");Wi.ALPHANUMERIC=new RegExp(h7,"g");const p7=new RegExp("^"+Ed+"$"),m7=new RegExp("^"+gC+"$"),g7=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Wi.testKanji=function(e){return p7.test(e)};Wi.testNumeric=function(e){return m7.test(e)};Wi.testAlphanumeric=function(e){return g7.test(e)};(function(t){const e=z1,n=Wi;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(Oo);(function(t){const e=Vr,n=km,r=Sm,i=Oo,s=z1,o=7973,a=e.getBCHDigit(o);function l(m,w,k){for(let I=1;I<=40;I++)if(w<=t.getCapacity(I,k,m))return I}function c(m,w){return i.getCharCountIndicator(m,w)+4}function d(m,w){let k=0;return m.forEach(function(I){const _=c(I.mode,w);k+=_+I.getBitsLength()}),k}function h(m,w){for(let k=1;k<=40;k++)if(d(m,k)<=t.getCapacity(k,w,i.MIXED))return k}t.from=function(w,k){return s.isValid(w)?parseInt(w,10):k},t.getCapacity=function(w,k,I){if(!s.isValid(w))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=i.BYTE);const _=e.getSymbolTotalCodewords(w),T=n.getTotalCodewordsCount(w,k),S=(_-T)*8;if(I===i.MIXED)return S;const E=S-c(I,w);switch(I){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(w,k){let I;const _=r.from(k,r.M);if(Array.isArray(w)){if(w.length>1)return h(w,_);if(w.length===0)return 1;I=w[0]}else I=w;return l(I.mode,I.getLength(),_)},t.getEncodedBits=function(w){if(!s.isValid(w)||w<7)throw new Error("Invalid QR Code version");let k=w<<12;for(;e.getBCHDigit(k)-a>=0;)k^=o<<e.getBCHDigit(k)-a;return w<<12|k}})(mC);var yC={};const $y=Vr,wC=1335,y7=21522,Qb=$y.getBCHDigit(wC);yC.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;$y.getBCHDigit(i)-Qb>=0;)i^=wC<<$y.getBCHDigit(i)-Qb;return(r<<10|i)^y7};var vC={};const w7=Oo;function uc(t){this.mode=w7.NUMERIC,this.data=t.toString()}uc.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};uc.prototype.getLength=function(){return this.data.length};uc.prototype.getBitsLength=function(){return uc.getBitsLength(this.data.length)};uc.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,s*3+1))};var v7=uc;const _7=Oo,Yg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function dc(t){this.mode=_7.ALPHANUMERIC,this.data=t}dc.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};dc.prototype.getLength=function(){return this.data.length};dc.prototype.getBitsLength=function(){return dc.getBitsLength(this.data.length)};dc.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Yg.indexOf(this.data[n])*45;r+=Yg.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Yg.indexOf(this.data[n]),6)};var x7=dc;const E7=Oo;function hc(t){this.mode=E7.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}hc.getBitsLength=function(e){return e*8};hc.prototype.getLength=function(){return this.data.length};hc.prototype.getBitsLength=function(){return hc.getBitsLength(this.data.length)};hc.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var b7=hc;const I7=Oo,S7=Vr;function fc(t){this.mode=I7.KANJI,this.data=t}fc.getBitsLength=function(e){return e*13};fc.prototype.getLength=function(){return this.data.length};fc.prototype.getBitsLength=function(){return fc.getBitsLength(this.data.length)};fc.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=S7.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var k7=fc,_C={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,c,d,h,m,w,k,I,_;!a.empty();){l=a.pop(),c=l.value,h=l.cost,m=n[c]||{};for(d in m)m.hasOwnProperty(d)&&(w=m[d],k=h+w,I=o[d],_=typeof o[d]>"u",(_||I>k)&&(o[d]=k,a.push(d,k),s[d]=c))}if(typeof i<"u"&&typeof o[i]>"u"){var T=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(T)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(_C);var T7=_C.exports;(function(t){const e=Oo,n=v7,r=x7,i=b7,s=k7,o=Wi,a=Vr,l=T7;function c(T){return unescape(encodeURIComponent(T)).length}function d(T,S,E){const j=[];let K;for(;(K=T.exec(E))!==null;)j.push({data:K[0],index:K.index,mode:S,length:K[0].length});return j}function h(T){const S=d(o.NUMERIC,e.NUMERIC,T),E=d(o.ALPHANUMERIC,e.ALPHANUMERIC,T);let j,K;return a.isKanjiModeEnabled()?(j=d(o.BYTE,e.BYTE,T),K=d(o.KANJI,e.KANJI,T)):(j=d(o.BYTE_KANJI,e.BYTE,T),K=[]),S.concat(E,j,K).sort(function(O,L){return O.index-L.index}).map(function(O){return{data:O.data,mode:O.mode,length:O.length}})}function m(T,S){switch(S){case e.NUMERIC:return n.getBitsLength(T);case e.ALPHANUMERIC:return r.getBitsLength(T);case e.KANJI:return s.getBitsLength(T);case e.BYTE:return i.getBitsLength(T)}}function w(T){return T.reduce(function(S,E){const j=S.length-1>=0?S[S.length-1]:null;return j&&j.mode===E.mode?(S[S.length-1].data+=E.data,S):(S.push(E),S)},[])}function k(T){const S=[];for(let E=0;E<T.length;E++){const j=T[E];switch(j.mode){case e.NUMERIC:S.push([j,{data:j.data,mode:e.ALPHANUMERIC,length:j.length},{data:j.data,mode:e.BYTE,length:j.length}]);break;case e.ALPHANUMERIC:S.push([j,{data:j.data,mode:e.BYTE,length:j.length}]);break;case e.KANJI:S.push([j,{data:j.data,mode:e.BYTE,length:c(j.data)}]);break;case e.BYTE:S.push([{data:j.data,mode:e.BYTE,length:c(j.data)}])}}return S}function I(T,S){const E={},j={start:{}};let K=["start"];for(let G=0;G<T.length;G++){const O=T[G],L=[];for(let B=0;B<O.length;B++){const W=O[B],$=""+G+B;L.push($),E[$]={node:W,lastCount:0},j[$]={};for(let H=0;H<K.length;H++){const A=K[H];E[A]&&E[A].node.mode===W.mode?(j[A][$]=m(E[A].lastCount+W.length,W.mode)-m(E[A].lastCount,W.mode),E[A].lastCount+=W.length):(E[A]&&(E[A].lastCount=W.length),j[A][$]=m(W.length,W.mode)+4+e.getCharCountIndicator(W.mode,S))}}K=L}for(let G=0;G<K.length;G++)j[K[G]].end=0;return{map:j,table:E}}function _(T,S){let E;const j=e.getBestModeForData(T);if(E=e.from(S,j),E!==e.BYTE&&E.bit<j.bit)throw new Error('"'+T+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(j));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new n(T);case e.ALPHANUMERIC:return new r(T);case e.KANJI:return new s(T);case e.BYTE:return new i(T)}}t.fromArray=function(S){return S.reduce(function(E,j){return typeof j=="string"?E.push(_(j,null)):j.data&&E.push(_(j.data,j.mode)),E},[])},t.fromString=function(S,E){const j=h(S,a.isKanjiModeEnabled()),K=k(j),G=I(K,E),O=l.find_path(G.map,"start","end"),L=[];for(let B=1;B<O.length-1;B++)L.push(G.table[O[B]].node);return t.fromArray(w(L))},t.rawSplit=function(S){return t.fromArray(h(S,a.isKanjiModeEnabled()))}})(vC);const Am=Vr,Qg=Sm,A7=l7,N7=c7,C7=uC,R7=dC,qy=hC,Hy=km,M7=d7,yp=mC,P7=yC,L7=Oo,Zg=vC;function D7(t,e){const n=t.size,r=R7.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||n<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(s+a,o+l,!0,!0):t.set(s+a,o+l,!1,!0))}}function O7(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function j7(t,e){const n=C7.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function B7(t,e){const n=t.size,r=yp.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=(r>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Xg(t,e,n){const r=t.size,i=P7.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function U7(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(i,a-l)){let c=!1;o<e.length&&(c=(e[o]>>>s&1)===1),t.set(i,a-l,c),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function F7(t,e,n){const r=new A7;n.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),L7.getCharCountIndicator(l.mode,t)),l.write(r)});const i=Am.getSymbolTotalCodewords(t),s=Hy.getTotalCodewordsCount(t,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let l=0;l<a;l++)r.put(l%2?17:236,8);return V7(r,t,e)}function V7(t,e,n){const r=Am.getSymbolTotalCodewords(e),i=Hy.getTotalCodewordsCount(e,n),s=r-i,o=Hy.getBlocksCount(e,n),a=r%o,l=o-a,c=Math.floor(r/o),d=Math.floor(s/o),h=d+1,m=c-d,w=new M7(m);let k=0;const I=new Array(o),_=new Array(o);let T=0;const S=new Uint8Array(t.buffer);for(let O=0;O<o;O++){const L=O<l?d:h;I[O]=S.slice(k,k+L),_[O]=w.encode(I[O]),k+=L,T=Math.max(T,L)}const E=new Uint8Array(r);let j=0,K,G;for(K=0;K<T;K++)for(G=0;G<o;G++)K<I[G].length&&(E[j++]=I[G][K]);for(K=0;K<m;K++)for(G=0;G<o;G++)E[j++]=_[G][K];return E}function z7(t,e,n,r){let i;if(Array.isArray(t))i=Zg.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){const d=Zg.rawSplit(t);c=yp.getBestVersionForData(d,n)}i=Zg.fromString(t,c||40)}else throw new Error("Invalid data");const s=yp.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=F7(e,n,i),a=Am.getSymbolSize(e),l=new N7(a);return D7(l,e),O7(l),j7(l,e),Xg(l,n,0),e>=7&&B7(l,e),U7(l,o),isNaN(r)&&(r=qy.getBestMask(l,Xg.bind(null,l,n))),qy.applyMask(r,l),Xg(l,n,r),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}lC.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Qg.M,i,s;return typeof n<"u"&&(r=Qg.from(n.errorCorrectionLevel,Qg.M),i=yp.from(n.version),s=qy.from(n.maskPattern),n.toSJISFunc&&Am.setToSJISFunction(n.toSJISFunc)),z7(e,i,r,s)};var xC={},W1={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,l=t.getScale(o,s),c=Math.floor((o+s.margin*2)*l),d=s.margin*l,h=[s.color.light,s.color.dark];for(let m=0;m<c;m++)for(let w=0;w<c;w++){let k=(m*c+w)*4,I=s.color.light;if(m>=d&&w>=d&&m<c-d&&w<c-d){const _=Math.floor((m-d)/l),T=Math.floor((w-d)/l);I=h[a[_*o+T]?1:0]}r[k++]=I.r,r[k++]=I.g,r[k++]=I.b,r[k]=I.a}}})(W1);(function(t){const e=W1;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let l=a,c=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(c=r()),l=e.getOptions(l);const d=e.getImageWidth(s.modules.size,l),h=c.getContext("2d"),m=h.createImageData(d,d);return e.qrToImageData(m.data,s,l),n(h,c,d),h.putImageData(m,0,0),c},t.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const c=t.render(s,o,l),d=l.type||"image/png",h=l.rendererOpts||{};return c.toDataURL(d,h.quality)}})(xC);var EC={};const W7=W1;function Zb(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Jg(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function $7(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),c=Math.floor(a/e);!l&&!s&&(s=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(r+=s?Jg("M",l+n,.5+c+n):Jg("m",i,0),i=0,s=!1),l+1<e&&t[a+1]||(r+=Jg("h",o),o=0)):i++}return r}EC.render=function(e,n,r){const i=W7.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,l=i.color.light.a?"<path "+Zb(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+Zb(i.color.dark,"stroke")+' d="'+$7(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof r=="function"&&r(null,m),m};const q7=o7,Ky=lC,bC=xC,H7=EC;function $1(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!q7())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(l,c){try{const d=Ky.create(n,r);l(t(d,e,r))}catch(d){c(d)}})}try{const l=Ky.create(n,r);i(null,t(l,e,r))}catch(l){i(l)}}Ky.create;$1.bind(null,bC.render);$1.bind(null,bC.renderToDataURL);$1.bind(null,function(t,e,n){return H7.render(t,n)});function tt(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,[])).next())})}function df(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function K7(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const Gs="Mobile Wallet Adapter",G7=64;function Y7(t){const e=df(t);return new Ee(e)}function Xb(t){return"version"in t}function Q7(t){switch(t){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class Z7 extends fz{constructor(e){var n;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=Gs,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=K7()?Ve.Loadable:Ve.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=(n=e.chain)!==null&&n!==void 0?n:Q7(e.cluster),this._hostAuthority=e.remoteHostAuthority,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==Ve.Unsupported&&this._authorizationResultCache.get().then(r=>{r&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=Y7(this._selectedAddress)}catch(e){throw new cc(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==Ve.Installed&&this.emit("readyStateChange",this._readyState=Ve.Installed)}runWithGuard(e){return tt(this,void 0,void 0,function*(){try{return yield e()}catch(n){throw this.emit("error",n),n}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return tt(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return tt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new bo;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new ao(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return tt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new bo;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new ao(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return tt(this,void 0,void 0,function*(){try{const n=yield this._authorizationResultCache.get();return n?(this.handleAuthorizationResult(n),n):yield this.transact(r=>tt(this,void 0,void 0,function*(){const i=yield r.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(i),this.handleAuthorizationResult(i)]),i}))}catch(n){throw new ao(n instanceof Error&&n.message||"Unknown error",n)}})}handleAuthorizationResult(e){var n;return tt(this,void 0,void 0,function*(){const r=this._authorizationResult==null||((n=this._authorizationResult)===null||n===void 0?void 0:n.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((i,s)=>i.address!==e.accounts[s].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),r){const i=yield this._addressSelector.select(e.accounts.map(({address:s})=>s));i!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,n){return tt(this,void 0,void 0,function*(){try{const r=yield e.authorize({auth_token:n,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(r),this.handleAuthorizationResult(r)])}catch(r){throw this.disconnect(),new Em(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}})}disconnect(){return tt(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var n;return tt(this,void 0,void 0,function*(){const r=(n=this._authorizationResult)===null||n===void 0?void 0:n.wallet_uri_base,i=r?{baseUri:r}:void 0,s=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield s7(e,Object.assign(Object.assign({},i),s))}catch(a){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),a}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new fn;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return tt(this,void 0,void 0,function*(){const{authToken:n}=this.assertIsAuthorized();try{return yield this.transact(r=>tt(this,void 0,void 0,function*(){return yield this.performReauthorization(r,n),yield r.signTransactions({transactions:e})}))}catch(r){throw new hi(r==null?void 0:r.message,r)}})}sendTransaction(e,n,r){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const{authToken:i}=this.assertIsAuthorized(),s=r==null?void 0:r.minContextSlot;try{return yield this.transact(o=>tt(this,void 0,void 0,function*(){function a(){let h;switch(n.commitment){case"confirmed":case"finalized":case"processed":h=n.commitment;break;default:h="finalized"}let m;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":m=r.preflightCommitment;break;case void 0:m=h;break;default:m="finalized"}return(m==="finalized"?2:m==="confirmed"?1:0)<(h==="finalized"?2:h==="confirmed"?1:0)?m:h}const[l,c,d]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,i),Xb(e)?null:tt(this,void 0,void 0,function*(){var h;if(e.feePayer||(e.feePayer=(h=this.publicKey)!==null&&h!==void 0?h:void 0),e.recentBlockhash==null){const{blockhash:m}=yield n.getLatestBlockhash({commitment:a()});e.recentBlockhash=m}})]);if(l.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:s,transactions:[e]}))[0];{const[h]=yield o.signTransactions({transactions:[e]});if(Xb(h))return yield n.sendTransaction(h);{const m=h.serialize();return yield n.sendRawTransaction(m,Object.assign(Object.assign({},r),{preflightCommitment:a()}))}}}))}catch(o){throw new us(o==null?void 0:o.message,o)}}))})}signTransaction(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const[n]=yield this.performSignTransactions([e]);return n}))})}signAllTransactions(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const{authToken:n,selectedAddress:r}=this.assertIsAuthorized();try{return yield this.transact(i=>tt(this,void 0,void 0,function*(){yield this.performReauthorization(i,n);const[s]=yield i.signMessages({addresses:[r],payloads:[e]});return s.slice(-G7)}))}catch(i){throw new bm(i==null?void 0:i.message,i)}}))})}signIn(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){var n,r;if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new bo;this._connecting=!0;try{const i=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:(n=e==null?void 0:e.domain)!==null&&n!==void 0?n:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(r=i.accounts.find(a=>a.address==s))!==null&&r!==void 0?r:{address:s}),{publicKey:df(s)}),signedMessage:df(i.sign_in_result.signed_message),signature:df(i.sign_in_result.signature)}}catch(i){throw new ao(i instanceof Error&&i.message||"Unknown error",i)}finally{this._connecting=!1}}))})}}function X7(){return{select(t){return tt(this,void 0,void 0,function*(){return t[0]})}}}const e0="SolanaMobileWalletAdapterDefaultAuthorizationCache";function J7(){let t;try{t=window.localStorage}catch{}return{clear(){return tt(this,void 0,void 0,function*(){if(t)try{t.removeItem(e0)}catch{}})},get(){return tt(this,void 0,void 0,function*(){if(t)try{return JSON.parse(t.getItem(e0))||void 0}catch{}})},set(e){return tt(this,void 0,void 0,function*(){if(t)try{t.setItem(e0,JSON.stringify(e))}catch{}})}}}function eW(t){return tt(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(t.url)})}function tW(){return eW}var nW=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},rW=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},hf;function iW(t){const e=({register:n})=>n(t);try{window.dispatchEvent(new sW(e))}catch(n){console.error(`wallet-standard:register-wallet event could not be dispatched
`,n)}try{window.addEventListener("wallet-standard:app-ready",({detail:n})=>e(n))}catch(n){console.error(`wallet-standard:app-ready event listener could not be added
`,n)}}class sW extends Event{get detail(){return nW(this,hf,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),hf.set(this,void 0),rW(this,hf,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}hf=new WeakMap;function oW(t,e){if(t===e)return!0;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function aW(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){const d=t.charAt(c),h=d.charCodeAt(0);if(e[h]!==255)throw new TypeError(d+" is ambiguous");e[h]=c}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let d=0,h=0,m=0;const w=c.length;for(;m!==w&&c[m]===0;)m++,d++;const k=(w-m)*s+1>>>0,I=new Uint8Array(k);for(;m!==w;){let S=c[m],E=0;for(let j=k-1;(S!==0||E<h)&&j!==-1;j--,E++)S+=256*I[j]>>>0,I[j]=S%n>>>0,S=S/n>>>0;if(S!==0)throw new Error("Non-zero carry");h=E,m++}let _=k-h;for(;_!==k&&I[_]===0;)_++;let T=r.repeat(d);for(;_<k;++_)T+=t.charAt(I[_]);return T}function a(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let d=0,h=0,m=0;for(;c[d]===r;)h++,d++;const w=(c.length-d)*i+1>>>0,k=new Uint8Array(w);for(;c[d];){let S=e[c.charCodeAt(d)];if(S===255)return;let E=0;for(let j=w-1;(S!==0||E<m)&&j!==-1;j--,E++)S+=n*k[j]>>>0,k[j]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");m=E,d++}let I=w-m;for(;I!==w&&k[I]===0;)I++;const _=new Uint8Array(h+(w-I));let T=h;for(;I!==w;)_[T++]=k[I++];return _}function l(c){const d=a(c);if(d)return d;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var lW="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const cW=aW(lW);var _e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},gn=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Un,vr,la,ca,Qo,yu,wp,nt,vp,Gy,ff,Yy,Du,Qy,Jb,eI,tI,nI;class uW extends QN{get name(){return _e(this,nt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return _e(this,nt,"f").icon}get readyState(){return _e(this,vp,"f")}get publicKey(){return _e(this,la,"f")}get connecting(){return _e(this,ca,"f")}get supportedTransactionVersions(){return _e(this,wp,"f")}get wallet(){return _e(this,nt,"f")}get standard(){return!0}constructor({wallet:e}){super(),Un.add(this),vr.set(this,void 0),la.set(this,void 0),ca.set(this,void 0),Qo.set(this,void 0),yu.set(this,void 0),wp.set(this,void 0),nt.set(this,void 0),vp.set(this,typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.Installed),Qy.set(this,n=>{if("accounts"in n){const r=_e(this,nt,"f").accounts[0];_e(this,vr,"f")&&!_e(this,Qo,"f")&&r!==_e(this,vr,"f")&&(r?_e(this,Un,"m",ff).call(this,r):(this.emit("error",new Em),_e(this,Un,"m",Yy).call(this)))}"features"in n&&_e(this,Un,"m",Du).call(this)}),gn(this,nt,e,"f"),gn(this,vr,null,"f"),gn(this,la,null,"f"),gn(this,ca,!1,"f"),gn(this,Qo,!1,"f"),gn(this,yu,_e(this,nt,"f").features[U1].on("change",_e(this,Qy,"f")),"f"),_e(this,Un,"m",Du).call(this)}destroy(){gn(this,vr,null,"f"),gn(this,la,null,"f"),gn(this,ca,!1,"f"),gn(this,Qo,!1,"f");const e=_e(this,yu,"f");e&&(gn(this,yu,null,"f"),e())}async autoConnect(){return _e(this,Un,"m",Gy).call(this,{silent:!0})}async connect(){return _e(this,Un,"m",Gy).call(this)}async disconnect(){if(Fy in _e(this,nt,"f").features)try{gn(this,Qo,!0,"f"),await _e(this,nt,"f").features[Fy].disconnect()}catch(e){this.emit("error",new O1(e==null?void 0:e.message,e))}finally{gn(this,Qo,!1,"f")}_e(this,Un,"m",Yy).call(this)}async sendTransaction(e,n,r={}){try{const i=_e(this,vr,"f");if(!i)throw new fn;let s;if(is in _e(this,nt,"f").features)if(i.features.includes(is))s=is;else if(Nn in _e(this,nt,"f").features&&i.features.includes(Nn))s=Nn;else throw new oa;else if(Nn in _e(this,nt,"f").features){if(!i.features.includes(Nn))throw new oa;s=Nn}else throw new Tl;const o=vz(n.rpcEndpoint);if(!i.chains.includes(o))throw new us;try{const{signers:a,...l}=r;let c;if(ds(e)?(a!=null&&a.length&&e.sign(a),c=e.serialize()):(e=await this.prepareTransaction(e,n,l),a!=null&&a.length&&e.partialSign(...a),c=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===is){const[d]=await _e(this,nt,"f").features[is].signAndSendTransaction({account:i,chain:o,transaction:c,options:{preflightCommitment:Wg(l.preflightCommitment||n.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return cW.encode(d.signature)}else{const[d]=await _e(this,nt,"f").features[Nn].signTransaction({account:i,chain:o,transaction:c,options:{preflightCommitment:Wg(l.preflightCommitment||n.commitment),minContextSlot:l.minContextSlot}});return await n.sendRawTransaction(d.signedTransaction,{...l,preflightCommitment:Wg(l.preflightCommitment||n.commitment)})}}catch(a){throw a instanceof Pn?a:new us(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}vr=new WeakMap,la=new WeakMap,ca=new WeakMap,Qo=new WeakMap,yu=new WeakMap,wp=new WeakMap,nt=new WeakMap,vp=new WeakMap,Qy=new WeakMap,Un=new WeakSet,Gy=async function(e){try{if(this.connected||this.connecting)return;if(_e(this,vp,"f")!==Ve.Installed)throw new bo;if(gn(this,ca,!0,"f"),!_e(this,nt,"f").accounts.length)try{await _e(this,nt,"f").features[B1].connect(e)}catch(r){throw new ao(r==null?void 0:r.message,r)}const n=_e(this,nt,"f").accounts[0];if(!n)throw new oa;_e(this,Un,"m",ff).call(this,n)}catch(n){throw this.emit("error",n),n}finally{gn(this,ca,!1,"f")}},ff=function(e){let n;try{n=new Ee(e.address)}catch(r){throw new cc(r==null?void 0:r.message,r)}gn(this,vr,e,"f"),gn(this,la,n,"f"),_e(this,Un,"m",Du).call(this),this.emit("connect",n)},Yy=function(){gn(this,vr,null,"f"),gn(this,la,null,"f"),_e(this,Un,"m",Du).call(this),this.emit("disconnect")},Du=function(){var n,r;const e=is in _e(this,nt,"f").features?_e(this,nt,"f").features[is].supportedTransactionVersions:_e(this,nt,"f").features[Nn].supportedTransactionVersions;gn(this,wp,oW(e,["legacy"])?null:new Set(e),"f"),Nn in _e(this,nt,"f").features&&((n=_e(this,vr,"f"))!=null&&n.features.includes(Nn))?(this.signTransaction=_e(this,Un,"m",Jb),this.signAllTransactions=_e(this,Un,"m",eI)):(delete this.signTransaction,delete this.signAllTransactions),hl in _e(this,nt,"f").features&&((r=_e(this,vr,"f"))!=null&&r.features.includes(hl))?this.signMessage=_e(this,Un,"m",tI):delete this.signMessage,zg in _e(this,nt,"f").features?this.signIn=_e(this,Un,"m",nI):delete this.signIn},Jb=async function(e){try{const n=_e(this,vr,"f");if(!n)throw new fn;if(!(Nn in _e(this,nt,"f").features))throw new Tl;if(!n.features.includes(Nn))throw new oa;try{const i=(await _e(this,nt,"f").features[Nn].signTransaction({account:n,transaction:ds(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return ds(e)?_d.deserialize(i):ci.from(i)}catch(r){throw r instanceof Pn?r:new hi(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},eI=async function(e){try{const n=_e(this,vr,"f");if(!n)throw new fn;if(!(Nn in _e(this,nt,"f").features))throw new Tl;if(!n.features.includes(Nn))throw new oa;try{const r=await _e(this,nt,"f").features[Nn].signTransaction(...e.map(i=>({account:n,transaction:ds(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=r[s].signedTransaction;return ds(i)?_d.deserialize(o):ci.from(o)})}catch(r){throw new hi(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},tI=async function(e){try{const n=_e(this,vr,"f");if(!n)throw new fn;if(!(hl in _e(this,nt,"f").features))throw new Tl;if(!n.features.includes(hl))throw new oa;try{return(await _e(this,nt,"f").features[hl].signMessage({account:n,message:e}))[0].signature}catch(r){throw new bm(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}},nI=async function(e={}){try{if(!(zg in _e(this,nt,"f").features))throw new Tl;let n;try{[n]=await _e(this,nt,"f").features[zg].signIn(e)}catch(r){throw new zb(r==null?void 0:r.message,r)}if(!n)throw new zb;return _e(this,Un,"m",ff).call(this,n.account),n}catch(n){throw this.emit("error",n),n}};const dW=pz;var hW=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},fW=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},pf;let Ar;const Nm=new Set;function pW(t){Ou=void 0,Nm.add(t)}function mW(t){Ou=void 0,Nm.delete(t)}const Al={};function gW(){if(Ar||(Ar=Object.freeze({register:rI,get:yW,on:wW}),typeof window>"u"))return Ar;const t=Object.freeze({register:rI});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new vW(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Ar}function rI(...t){var e;return t=t.filter(n=>!Nm.has(n)),t.length?(t.forEach(n=>pW(n)),(e=Al.register)==null||e.forEach(n=>Zy(()=>n(...t))),function(){var r;t.forEach(i=>mW(i)),(r=Al.unregister)==null||r.forEach(i=>Zy(()=>i(...t)))}):()=>{}}let Ou;function yW(){return Ou||(Ou=[...Nm]),Ou}function wW(t,e){var n;return(n=Al[t])!=null&&n.push(e)||(Al[t]=[e]),function(){var i;Al[t]=(i=Al[t])==null?void 0:i.filter(s=>e!==s)}}function Zy(t){try{t()}catch(e){console.error(e)}}class vW extends Event{get detail(){return hW(this,pf,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),pf.set(this,void 0),fW(this,pf,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}pf=new WeakMap;function _W(){if(Ar||(Ar=gW(),typeof window>"u"))return Ar;const t=window.navigator.wallets||[];if(!Array.isArray(t))return console.error("window.navigator.wallets is not an array"),Ar;const{register:e}=Ar,n=(...r)=>r.forEach(i=>Zy(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch{return console.error("window.navigator.wallets could not be set"),Ar}return n(...t),Ar}function xW(t){const e=iI(()=>new Set),{get:n,on:r}=iI(()=>_W()),[i,s]=Y.useState(()=>sI(n()));Y.useEffect(()=>{const a=[r("register",(...l)=>s(c=>[...c,...sI(l)])),r("unregister",(...l)=>s(c=>c.filter(d=>l.some(h=>h===d.wallet))))];return()=>a.forEach(l=>l())},[r]);const o=EW(i);return Y.useEffect(()=>{if(!o)return;const a=new Set(i);new Set(o.filter(c=>!a.has(c))).forEach(c=>c.destroy())},[o,i]),Y.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),Y.useMemo(()=>[...i,...t.filter(({name:a})=>i.some(l=>l.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,t,e])}function iI(t){const e=Y.useRef(void 0);return e.current===void 0&&(e.current={value:t()}),e.current.value}function EW(t){const e=Y.useRef(void 0);return Y.useEffect(()=>{e.current=t}),e.current}function sI(t){return t.filter(dW).map(e=>new uW({wallet:e}))}var Vl;(function(t){t[t.DESKTOP_WEB=0]="DESKTOP_WEB",t[t.MOBILE_WEB=1]="MOBILE_WEB"})(Vl||(Vl={}));function bW(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function IW({adapters:t,userAgentString:e}){return t.some(n=>n.name!==Gs&&n.readyState===Ve.Installed)?Vl.DESKTOP_WEB:e&&/android/i.test(e)&&!bW(e)?Vl.MOBILE_WEB:Vl.DESKTOP_WEB}function SW(t){return t?/devnet/i.test(t)?"devnet":/testnet/i.test(t)?"testnet":"mainnet-beta":"mainnet-beta"}function kW({children:t,wallets:e,adapter:n,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const l=Y.useRef(!1),[c,d]=Y.useState(!1),h=Y.useRef(!1),[m,w]=Y.useState(!1),[k,I]=Y.useState(()=>(n==null?void 0:n.publicKey)??null),[_,T]=Y.useState(()=>(n==null?void 0:n.connected)??!1),S=Y.useRef(o);Y.useEffect(()=>(S.current=o,()=>{S.current=void 0}),[o]);const E=Y.useRef((b,C)=>(r.current||(S.current?S.current(b,C):(console.error(b,C),b instanceof bo&&typeof window<"u"&&C&&window.open(C.url,"_blank"))),b)),[j,K]=Y.useState(()=>e.map(b=>({adapter:b,readyState:b.readyState})).filter(({readyState:b})=>b!==Ve.Unsupported));Y.useEffect(()=>{K(C=>e.map((M,R)=>{const F=C[R];return F&&F.adapter===M&&F.readyState===M.readyState?F:{adapter:M,readyState:M.readyState}}).filter(({readyState:M})=>M!==Ve.Unsupported));function b(C){K(M=>{const R=M.findIndex(({adapter:q})=>q===this);if(R===-1)return M;const{adapter:F}=M[R];return[...M.slice(0,R),{adapter:F,readyState:C},...M.slice(R+1)].filter(({readyState:q})=>q!==Ve.Unsupported)})}return e.forEach(C=>C.on("readyStateChange",b,C)),()=>{e.forEach(C=>C.off("readyStateChange",b,C))}},[n,e]);const G=Y.useMemo(()=>j.find(b=>b.adapter===n)??null,[n,j]);Y.useEffect(()=>{if(!n)return;const b=R=>{I(R),l.current=!1,d(!1),T(!0),h.current=!1,w(!1)},C=()=>{r.current||(I(null),l.current=!1,d(!1),T(!1),h.current=!1,w(!1))},M=R=>{E.current(R,n)};return n.on("connect",b),n.on("disconnect",C),n.on("error",M),()=>{n.off("connect",b),n.off("disconnect",C),n.off("error",M),C()}},[n,r]);const O=Y.useRef(!1);Y.useEffect(()=>()=>{O.current=!1},[n]),Y.useEffect(()=>{O.current||l.current||_||!i||!((G==null?void 0:G.readyState)===Ve.Installed||(G==null?void 0:G.readyState)===Ve.Loadable)||(l.current=!0,d(!0),O.current=!0,async function(){try{await i()}catch{s()}finally{d(!1),l.current=!1}}())},[_,i,s,G]);const L=Y.useCallback(async(b,C,M)=>{if(!n)throw E.current(new Wb);if(!_)throw E.current(new fn,n);return await n.sendTransaction(b,C,M)},[n,_]),B=Y.useMemo(()=>n&&"signTransaction"in n?async b=>{if(!_)throw E.current(new fn,n);return await n.signTransaction(b)}:void 0,[n,_]),W=Y.useMemo(()=>n&&"signAllTransactions"in n?async b=>{if(!_)throw E.current(new fn,n);return await n.signAllTransactions(b)}:void 0,[n,_]),$=Y.useMemo(()=>n&&"signMessage"in n?async b=>{if(!_)throw E.current(new fn,n);return await n.signMessage(b)}:void 0,[n,_]),H=Y.useMemo(()=>n&&"signIn"in n?async b=>await n.signIn(b):void 0,[n]),A=Y.useCallback(async()=>{if(l.current||h.current||G!=null&&G.adapter.connected)return;if(!G)throw E.current(new Wb);const{adapter:b,readyState:C}=G;if(!(C===Ve.Installed||C===Ve.Loadable))throw E.current(new bo,b);l.current=!0,d(!0);try{await b.connect()}catch(M){throw s(),M}finally{d(!1),l.current=!1}},[s,G]),f=Y.useCallback(async()=>{if(!h.current&&n){h.current=!0,w(!0);try{await n.disconnect()}finally{w(!1),h.current=!1}}},[n]);return ce.createElement(XN.Provider,{value:{autoConnect:!!i,wallets:j,wallet:G,publicKey:k,connected:_,connecting:c,disconnecting:m,select:a,connect:A,disconnect:f,sendTransaction:L,signTransaction:B,signAllTransactions:W,signMessage:$,signIn:H}},t)}let t0;function TW(){var t;return t0===void 0&&(t0=((t=globalThis.navigator)==null?void 0:t.userAgent)??null),t0}function Vh(t){const e=TW();return IW({adapters:t,userAgentString:e})===Vl.MOBILE_WEB}function AW(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function NW({children:t,wallets:e,autoConnect:n,localStorageKey:r="walletName",onError:i}){const{connection:s}=az(),o=xW(e),a=Y.useMemo(()=>{if(!Vh(o))return null;const S=o.find(E=>E.name===Gs);return S||new Z7({addressSelector:X7(),appIdentity:{uri:AW()},authorizationResultCache:J7(),cluster:SW(s==null?void 0:s.rpcEndpoint),onWalletNotFound:tW()})},[o,s==null?void 0:s.rpcEndpoint]),l=Y.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[c,d]=gz(r,Vh(o)?Gs:null),h=Y.useMemo(()=>l.find(S=>S.name===c)??null,[l,c]),m=Y.useCallback(S=>{c!==S&&(h&&h.name!==Gs&&h.disconnect(),d(S))},[h,d,c]);Y.useEffect(()=>{if(!h)return;function S(){I.current||c===Gs&&Vh(o)||d(null)}return h.on("disconnect",S),()=>{h.off("disconnect",S)}},[h,o,d,c]);const w=Y.useRef(!1),k=Y.useMemo(()=>{if(!(!n||!h))return async()=>{(n===!0||await n(h))&&(w.current?await h.connect():await h.autoConnect())}},[n,h]),I=Y.useRef(!1);Y.useEffect(()=>{if(c===Gs&&Vh(o)){I.current=!1;return}function S(){I.current=!0}return window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S)}},[o,c]);const _=Y.useCallback(()=>{h&&h.name!==Gs&&m(null)},[h,m]),T=Y.useCallback(S=>{w.current=!0,m(S)},[m]);return ce.createElement(kW,{wallets:l,adapter:h,isUnloadingRef:I,onAutoConnectRequest:k,onConnectError:_,onError:i,onSelectWallet:T},t)}const CW="modulepreload",RW=function(t){return"/"+t},oI={},IC=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=RW(l),l in oI)return;oI[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":CW,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((m,w)=>{h.addEventListener("load",m),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},MW="Phantom";class PW extends j1{constructor(e={}){super(),this.name=MW,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.NotDetected,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),n.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new Em),this.emit("disconnect"))},this._accountChanged=n=>{const r=this._publicKey;if(r){try{n=new Ee(n.toBytes())}catch(i){this.emit("error",new cc(i==null?void 0:i.message,i));return}r.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==Ve.Unsupported&&(Uy()?(this._readyState=Ve.Loadable,this.emit("readyStateChange",this._readyState)):ZN(()=>{var n,r,i;return(r=(n=window.phantom)==null?void 0:n.solana)!=null&&r.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=Ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ve.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===Ve.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==Ve.Installed)throw new bo;this._connecting=!0;const n=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!n.isConnected)try{await n.connect()}catch(i){throw new ao(i==null?void 0:i.message,i)}if(!n.publicKey)throw new oa;let r;try{r=new Ee(n.publicKey.toBytes())}catch(i){throw new cc(i==null?void 0:i.message,i)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=r,this.emit("connect",r)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new O1(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,r={}){try{const i=this._wallet;if(!i)throw new fn;try{const{signers:s,...o}=r;ds(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||n.commitment;const{signature:a}=await i.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof Pn?s:new us(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new fn;try{return await n.signTransaction(e)||e}catch(r){throw new hi(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new fn;try{return await n.signAllTransactions(e)||e}catch(r){throw new hi(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new fn;try{const{signature:r}=await n.signMessage(e);return r}catch(r){throw new bm(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}}const LW="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var ht=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},DW=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},mf,ua,Xy,Jy,ew,rr,tw,SC,kC,nw,rw,iw,sw,ow;class OW{constructor(){mf.add(this),ua.set(this,{}),Xy.set(this,"1.0.0"),Jy.set(this,"MetaMask"),ew.set(this,LW),rr.set(this,null),tw.set(this,(e,n)=>{var r;return(r=ht(this,ua,"f")[e])!=null&&r.push(n)||(ht(this,ua,"f")[e]=[n]),()=>ht(this,mf,"m",kC).call(this,e,n)}),nw.set(this,async()=>{if(!ht(this,rr,"f")){let e;try{e=(await IC(async()=>{const{default:n}=await import("./index-BSeqjwsx.js");return{default:n}},[])).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}DW(this,rr,new e,"f"),ht(this,rr,"f").on("standard_change",n=>ht(this,mf,"m",SC).call(this,"change",n))}return this.accounts.length||await ht(this,rr,"f").connect(),{accounts:this.accounts}}),rw.set(this,async()=>{ht(this,rr,"f")&&await ht(this,rr,"f").disconnect()}),iw.set(this,async(...e)=>{if(!ht(this,rr,"f"))throw new fn;return await ht(this,rr,"f").standardSignAndSendTransaction(...e)}),sw.set(this,async(...e)=>{if(!ht(this,rr,"f"))throw new fn;return await ht(this,rr,"f").standardSignTransaction(...e)}),ow.set(this,async(...e)=>{if(!ht(this,rr,"f"))throw new fn;return await ht(this,rr,"f").standardSignMessage(...e)})}get version(){return ht(this,Xy,"f")}get name(){return ht(this,Jy,"f")}get icon(){return ht(this,ew,"f")}get chains(){return[zy,eC,tC]}get features(){return{[B1]:{version:"1.0.0",connect:ht(this,nw,"f")},[Fy]:{version:"1.0.0",disconnect:ht(this,rw,"f")},[U1]:{version:"1.0.0",on:ht(this,tw,"f")},[is]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ht(this,iw,"f")},[Nn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ht(this,sw,"f")},[hl]:{version:"1.0.0",signMessage:ht(this,ow,"f")}}}get accounts(){return ht(this,rr,"f")?ht(this,rr,"f").standardAccounts:[]}}ua=new WeakMap,Xy=new WeakMap,Jy=new WeakMap,ew=new WeakMap,rr=new WeakMap,tw=new WeakMap,nw=new WeakMap,rw=new WeakMap,iw=new WeakMap,sw=new WeakMap,ow=new WeakMap,mf=new WeakSet,SC=function(e,...n){var r;(r=ht(this,ua,"f")[e])==null||r.forEach(i=>i.apply(null,n))},kC=function(e,n){var r;ht(this,ua,"f")[e]=(r=ht(this,ua,"f")[e])==null?void 0:r.filter(i=>n!==i)};let aI=!1;function jW(){aI||(iW(new OW),aI=!0)}async function BW(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function n(r){var s,o;const i=r.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===t?(window.removeEventListener("message",n),i.data.data.error||jW()):e())}window.addEventListener("message",n),window.setTimeout(()=>window.removeEventListener("message",n),5e3),e()}const UW="Solflare";class FW extends j1{constructor(e={}){super(),this.name=UW,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.Loadable,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new Em),this.emit("disconnect"))},this._accountChanged=n=>{if(!n)return;const r=this._publicKey;if(r){try{n=new Ee(n.toBytes())}catch(i){this.emit("error",new cc(i==null?void 0:i.message,i));return}r.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==Ve.Unsupported&&(ZN(()=>{var n;return(n=window.solflare)!=null&&n.isSolflare||window.SolflareApp?(this._readyState=Ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),BW())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ve.Loadable&&Uy()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ve.Loadable&&this._readyState!==Ve.Installed)throw new bo;if(this.readyState===Ve.Loadable&&Uy()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await IC(async()=>{const{default:i}=await import("./index-zmD6ad2j.js");return{default:i}},[])).default}catch(i){throw new dz(i==null?void 0:i.message,i)}let n;try{n=new e({network:this._config.network})}catch(i){throw new Tl(i==null?void 0:i.message,i)}if(this._connecting=!0,!n.connected)try{await n.connect()}catch(i){throw new ao(i==null?void 0:i.message,i)}if(!n.publicKey)throw new ao;let r;try{r=new Ee(n.publicKey.toBytes())}catch(i){throw new cc(i==null?void 0:i.message,i)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new O1(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,r={}){try{const i=this._wallet;if(!i)throw new fn;try{const{signers:s,...o}=r;return ds(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||n.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof Pn?s:new us(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new fn;try{return await n.signTransaction(e)||e}catch(r){throw new hi(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new fn;try{return await n.signAllTransactions(e)||e}catch(r){throw new hi(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new fn;try{return await n.signMessage(e,"utf8")}catch(r){throw new bm(r==null?void 0:r.message,r)}}catch(n){throw this.emit("error",n),n}}}const TC={setVisible(t){console.error(AC("call","setVisible"))},visible:!1};Object.defineProperty(TC,"visible",{get(){return console.error(AC("read","visible")),!1}});function AC(t,e){return`You have tried to  ${t} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const NC=Y.createContext(TC);function VW(){return Y.useContext(NC)}const zW=t=>ce.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&ce.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&ce.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),WW=({wallet:t,...e})=>t&&ce.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e}),lI=({id:t,children:e,expanded:n=!1})=>{const r=Y.useRef(null),i=Y.useRef(!0),s="height 250ms ease-out",o=()=>{const l=r.current;l&&requestAnimationFrame(()=>{l.style.height=l.scrollHeight+"px"})},a=()=>{const l=r.current;l&&requestAnimationFrame(()=>{l.style.height=l.offsetHeight+"px",l.style.overflow="hidden",requestAnimationFrame(()=>{l.style.height="0"})})};return Y.useLayoutEffect(()=>{n?o():a()},[n]),Y.useLayoutEffect(()=>{const l=r.current;if(!l)return;function c(){l&&(l.style.overflow=n?"initial":"hidden",n&&(l.style.height="auto"))}function d(h){l&&h.target===l&&h.propertyName==="height"&&c()}return i.current&&(c(),i.current=!1),l.addEventListener("transitionend",d),()=>l.removeEventListener("transitionend",d)},[n]),ce.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:r,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},n0=({handleClick:t,tabIndex:e,wallet:n})=>ce.createElement("li",null,ce.createElement(zW,{onClick:t,startIcon:ce.createElement(WW,{wallet:n}),tabIndex:e},n.adapter.name,n.readyState===Ve.Installed&&ce.createElement("span",null,"Detected"))),$W=()=>ce.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ce.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),ce.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),ce.createElement("g",{clipPath:"url(#clip0_880_5115)"},ce.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),ce.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),ce.createElement("defs",null,ce.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("clipPath",{id:"clip0_880_5115"},ce.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),qW=({className:t="",container:e="body"})=>{const n=Y.useRef(null),{wallets:r,select:i}=JN(),{setVisible:s}=VW(),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[d,h]=Y.useState(null),[m,w]=Y.useMemo(()=>{const E=[],j=[];for(const K of r)K.readyState===Ve.Installed?E.push(K):j.push(K);return E.length?[E,j]:[j,[]]},[r]),k=Y.useCallback(()=>{c(!1),setTimeout(()=>s(!1),150)},[s]),I=Y.useCallback(E=>{E.preventDefault(),k()},[k]),_=Y.useCallback((E,j)=>{i(j),I(E)},[i,I]),T=Y.useCallback(()=>a(!o),[o]),S=Y.useCallback(E=>{const j=n.current;if(!j)return;const K=j.querySelectorAll("button"),G=K[0],O=K[K.length-1];E.shiftKey?document.activeElement===G&&(O.focus(),E.preventDefault()):document.activeElement===O&&(G.focus(),E.preventDefault())},[n]);return Y.useLayoutEffect(()=>{const E=K=>{K.key==="Escape"?k():K.key==="Tab"&&S(K)},{overflow:j}=window.getComputedStyle(document.body);return setTimeout(()=>c(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",E,!1),()=>{document.body.style.overflow=j,window.removeEventListener("keydown",E,!1)}},[k,S]),Y.useLayoutEffect(()=>h(document.querySelector(e)),[e]),d&&Ok.createPortal(ce.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${l&&"wallet-adapter-modal-fade-in"} ${t}`,ref:n,role:"dialog"},ce.createElement("div",{className:"wallet-adapter-modal-container"},ce.createElement("div",{className:"wallet-adapter-modal-wrapper"},ce.createElement("button",{onClick:I,className:"wallet-adapter-modal-button-close"},ce.createElement("svg",{width:"14",height:"14"},ce.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),m.length?ce.createElement(ce.Fragment,null,ce.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),ce.createElement("ul",{className:"wallet-adapter-modal-list"},m.map(E=>ce.createElement(n0,{key:E.adapter.name,handleClick:j=>_(j,E.adapter.name),wallet:E})),w.length?ce.createElement(lI,{expanded:o,id:"wallet-adapter-modal-collapse"},w.map(E=>ce.createElement(n0,{key:E.adapter.name,handleClick:j=>_(j,E.adapter.name),tabIndex:o?0:-1,wallet:E}))):null),w.length?ce.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:T,tabIndex:0},ce.createElement("span",null,o?"Less ":"More ","options"),ce.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},ce.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):ce.createElement(ce.Fragment,null,ce.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),ce.createElement("div",{className:"wallet-adapter-modal-middle"},ce.createElement($W,null)),w.length?ce.createElement(ce.Fragment,null,ce.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:T,tabIndex:0},ce.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),ce.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},ce.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),ce.createElement(lI,{expanded:o,id:"wallet-adapter-modal-collapse"},ce.createElement("ul",{className:"wallet-adapter-modal-list"},w.map(E=>ce.createElement(n0,{key:E.adapter.name,handleClick:j=>_(j,E.adapter.name),tabIndex:o?0:-1,wallet:E}))))):null))),ce.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:I})),d)},HW=({children:t,...e})=>{const[n,r]=Y.useState(!1);return ce.createElement(NC.Provider,{value:{visible:n,setVisible:r}},t,n&&ce.createElement(qW,{...e}))},KW=Y.createContext({connected:!1,connecting:!1,publicKey:null,balance:null,error:null}),GW=({children:t})=>{Vy.Mainnet;const e="https://api.mainnet-beta.solana.com",n=[new PW,new FW];return p.jsx(lz,{endpoint:e,children:p.jsx(NW,{wallets:n,autoConnect:!0,children:p.jsx(HW,{children:p.jsx(YW,{children:t})})})})},YW=({children:t})=>{const{publicKey:e,connected:n,connecting:r}=JN(),[i,s]=Y.useState(null),[o,a]=Y.useState(null);return Y.useEffect(()=>{n&&e&&(async()=>{if(e)try{const d=await new D1("https://api.mainnet-beta.solana.com","confirmed").getBalance(e);s(d/1e9),a(null)}catch(c){console.error("Error fetching balance:",c),a("Failed to fetch wallet balance"),s(null)}else s(null)})()},[n,e]),p.jsx(KW.Provider,{value:{connected:n,connecting:r,publicKey:(e==null?void 0:e.toBase58())||null,balance:i,error:o},children:t})},QW=()=>{const{pathname:t}=Bi();return Y.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t]),null};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),lt=(t,e)=>{const n=Y.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>Y.createElement("svg",{ref:d,...ZW,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${XW(t)}`,a].join(" "),...c},[...e.map(([h,m])=>Y.createElement(h,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=lt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=lt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=lt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=lt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=lt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=lt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=lt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=lt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=lt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=lt("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=lt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=lt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=lt("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=lt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=lt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=lt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=lt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=lt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=lt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=lt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=lt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=lt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=lt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=lt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=lt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=lt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=lt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=lt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=lt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=lt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function _$(t,e){Y.useEffect(()=>{const n=r=>{!t.current||t.current.contains(r.target)||e(r)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[t,e])}const x$=({isOpen:t,onClose:e})=>{const n=Y.useRef(null);return _$(n,e),t?p.jsxs("div",{ref:n,className:"absolute right-0 top-16 w-48 py-2 bg-white rounded-lg shadow-lg border border-gray-100",children:[p.jsx(zt,{to:"/browse-items",onClick:e,className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"Browse"}),p.jsx(zt,{to:"/list-item",onClick:e,className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"List Item"})]}):null},E$={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCmgORmeslowUkNeAhkf-V07fNXs9GB2wk",VITE_FIREBASE_APP_ID:"1:906788087014:web:df01c89cbca8459ef94727",VITE_FIREBASE_AUTH_DOMAIN:"xchainj-8b61b.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-3PHFSNC9Y3",VITE_FIREBASE_MESSAGING_SENDER_ID:"906788087014",VITE_FIREBASE_PROJECT_ID:"xchainj-8b61b",VITE_FIREBASE_STORAGE_BUCKET:"xchainj-8b61b.firebasestorage.app",VITE_SOLANA_RPC_URL:"https://api.mainnet-beta.solana.com"},cI=t=>{let e;const n=new Set,r=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const w=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(k=>k(e,w))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(E$?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},b$=t=>t?cI(t):cI;var LC={exports:{}},DC={},OC={exports:{}},jC={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=Y;function I$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var S$=typeof Object.is=="function"?Object.is:I$,k$=pc.useState,T$=pc.useEffect,A$=pc.useLayoutEffect,N$=pc.useDebugValue;function C$(t,e){var n=e(),r=k$({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return A$(function(){i.value=n,i.getSnapshot=e,r0(i)&&s({inst:i})},[t,n,e]),T$(function(){return r0(i)&&s({inst:i}),t(function(){r0(i)&&s({inst:i})})},[t]),N$(n),n}function r0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!S$(t,n)}catch{return!0}}function R$(t,e){return e()}var M$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?R$:C$;jC.useSyncExternalStore=pc.useSyncExternalStore!==void 0?pc.useSyncExternalStore:M$;OC.exports=jC;var P$=OC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=Y,L$=P$;function D$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var O$=typeof Object.is=="function"?Object.is:D$,j$=L$.useSyncExternalStore,B$=Cm.useRef,U$=Cm.useEffect,F$=Cm.useMemo,V$=Cm.useDebugValue;DC.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=B$(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=F$(function(){function l(w){if(!c){if(c=!0,d=w,w=r(w),i!==void 0&&o.hasValue){var k=o.value;if(i(k,w))return h=k}return h=w}if(k=h,O$(d,w))return k;var I=r(w);return i!==void 0&&i(k,I)?k:(d=w,h=I)}var c=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var a=j$(t,s[0],s[1]);return U$(function(){o.hasValue=!0,o.value=a},[a]),V$(a),a};LC.exports=DC;var z$=LC.exports;const W$=Co(z$),BC={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCmgORmeslowUkNeAhkf-V07fNXs9GB2wk",VITE_FIREBASE_APP_ID:"1:906788087014:web:df01c89cbca8459ef94727",VITE_FIREBASE_AUTH_DOMAIN:"xchainj-8b61b.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-3PHFSNC9Y3",VITE_FIREBASE_MESSAGING_SENDER_ID:"906788087014",VITE_FIREBASE_PROJECT_ID:"xchainj-8b61b",VITE_FIREBASE_STORAGE_BUCKET:"xchainj-8b61b.firebasestorage.app",VITE_SOLANA_RPC_URL:"https://api.mainnet-beta.solana.com"},{useDebugValue:$$}=ce,{useSyncExternalStoreWithSelector:q$}=W$;let uI=!1;const H$=t=>t;function K$(t,e=H$,n){(BC?"production":void 0)!=="production"&&n&&!uI&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),uI=!0);const r=q$(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return $$(r),r}const dI=t=>{(BC?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?b$(t):t,n=(r,i)=>K$(e,r,i);return Object.assign(n,e),n},Y1=t=>t?dI(t):dI,G$=Y1(t=>({searchQuery:"",setSearchQuery:e=>t({searchQuery:e})})),Y$=()=>{const t=ur(),[e,n]=Y.useState(""),{setSearchQuery:r}=G$(),i=s=>{s.preventDefault(),e.trim()&&(r(e.trim()),t(`/browse-items?search=${encodeURIComponent(e.trim())}`))};return p.jsxs("form",{onSubmit:i,className:"relative max-w-lg w-full",children:[p.jsx("input",{type:"text",value:e,onChange:s=>n(s.target.value),placeholder:"Search items...",className:"w-full bg-gray-100 dark:bg-dark-charcoal rounded-full pl-10 pr-24 py-2 focus:outline-none focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 dark:placeholder-neutral-warm/60 transition-colors duration-200"}),p.jsx(MC,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400 dark:text-neutral-warm/60"}),p.jsx("button",{type:"submit",className:"absolute right-2 top-1 px-4 py-1 text-sm text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 rounded-full transition-colors duration-200",children:"Search"})]})},UC=({variant:t="full",className:e=""})=>{const[n,r]=Y.useState(!1),i=()=>{switch(t){case"text":return"/images/logos/TextLogo.png";case"icon":return"/images/logos/AppIcon.png";default:return"/images/logos/FullLogo.png"}};return n?p.jsxs(zt,{to:"/",className:`inline-flex items-center ${e}`,children:[p.jsx(jo,{className:"h-8 w-8 text-blue-600"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Xchainj"})]}):p.jsx(zt,{to:"/",className:`inline-block ${e}`,children:p.jsx("img",{src:i(),alt:"Xchainj",className:`h-auto ${t==="icon"?"w-10":"w-32"}`,onError:()=>r(!0)})})},Q$={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCmgORmeslowUkNeAhkf-V07fNXs9GB2wk",VITE_FIREBASE_APP_ID:"1:906788087014:web:df01c89cbca8459ef94727",VITE_FIREBASE_AUTH_DOMAIN:"xchainj-8b61b.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-3PHFSNC9Y3",VITE_FIREBASE_MESSAGING_SENDER_ID:"906788087014",VITE_FIREBASE_PROJECT_ID:"xchainj-8b61b",VITE_FIREBASE_STORAGE_BUCKET:"xchainj-8b61b.firebasestorage.app",VITE_SOLANA_RPC_URL:"https://api.mainnet-beta.solana.com"};function Z$(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const bd=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return bd(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return bd(r)(n)}}}},X$=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,T)=>({...T,..._}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(..._)},r,i);const d=bd(s.serialize),h=()=>{const _=s.partialize({...r()});let T;const S=d({state:_,version:s.version}).then(E=>c.setItem(s.name,E)).catch(E=>{T=E});if(T)throw T;return S},m=i.setState;i.setState=(_,T)=>{m(_,T),h()};const w=t((..._)=>{n(..._),h()},r,i);let k;const I=()=>{var _;if(!c)return;o=!1,a.forEach(S=>S(r()));const T=((_=s.onRehydrateStorage)==null?void 0:_.call(s,r()))||void 0;return bd(c.getItem.bind(c))(s.name).then(S=>{if(S)return s.deserialize(S)}).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==s.version){if(s.migrate)return s.migrate(S.state,S.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return S.state}).then(S=>{var E;return k=s.merge(S,(E=r())!=null?E:w),n(k,!0),h()}).then(()=>{T==null||T(k,void 0),o=!0,l.forEach(S=>S(k))}).catch(S=>{T==null||T(void 0,S)})};return i.persist={setOptions:_=>{s={...s,..._},_.getStorage&&(c=_.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>I(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},I(),k||w},J$=(t,e)=>(n,r,i)=>{let s={storage:Z$(()=>localStorage),partialize:I=>I,version:0,merge:(I,_)=>({..._,...I}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...I)},r,i);const d=()=>{const I=s.partialize({...r()});return c.setItem(s.name,{state:I,version:s.version})},h=i.setState;i.setState=(I,_)=>{h(I,_),d()};const m=t((...I)=>{n(...I),d()},r,i);i.getInitialState=()=>m;let w;const k=()=>{var I,_;if(!c)return;o=!1,a.forEach(S=>{var E;return S((E=r())!=null?E:m)});const T=((_=s.onRehydrateStorage)==null?void 0:_.call(s,(I=r())!=null?I:m))||void 0;return bd(c.getItem.bind(c))(s.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==s.version){if(s.migrate)return[!0,s.migrate(S.state,S.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var E;const[j,K]=S;if(w=s.merge(K,(E=r())!=null?E:m),n(w,!0),j)return d()}).then(()=>{T==null||T(w,void 0),w=r(),o=!0,l.forEach(S=>S(w))}).catch(S=>{T==null||T(void 0,S)})};return i.persist={setOptions:I=>{s={...s,...I},I.storage&&(c=I.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>k(),hasHydrated:()=>o,onHydrate:I=>(a.add(I),()=>{a.delete(I)}),onFinishHydration:I=>(l.add(I),()=>{l.delete(I)})},s.skipHydration||k(),w||m},eq=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Q$?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),X$(t,e)):J$(t,e),tq=eq,nq=Y1()(tq(t=>({isDarkMode:!0,toggleTheme:()=>t(e=>({isDarkMode:!e.isDarkMode}))}),{name:"theme-storage"})),rq=()=>{const{isDarkMode:t,toggleTheme:e}=nq();return Y.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),p.jsx("button",{onClick:e,className:"p-2 rounded-full transition-colors duration-200 hover:bg-primary-accent/10","aria-label":"Toggle theme",children:t?p.jsx(f$,{className:"h-5 w-5 text-neutral-warm"}):p.jsx(u$,{className:"h-5 w-5 text-dark-charcoal"})})};function iq(){Bi();const t=ur(),{user:e}=om(),[n,r]=Y.useState(!1),[i,s]=Y.useState(!1),o=()=>{e?s(!i):t("/sign-in")},a=async()=>{try{await OO(ei),t("/")}catch(l){console.error("Error signing out:",l)}};return p.jsxs("header",{className:"bg-neutral-warm dark:bg-dark shadow-sm relative transition-colors duration-200",children:[p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between items-center h-16",children:[p.jsx("div",{className:"flex items-center",children:p.jsx(UC,{variant:"full",className:"h-8"})}),p.jsx("div",{className:"hidden sm:block flex-1 px-8",children:p.jsx("div",{className:"max-w-lg w-full mx-auto",children:p.jsx(Y$,{})})}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(rq,{}),p.jsx(zt,{to:"/list-item",className:"hidden sm:inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md bg-primary-accent text-dark hover:bg-primary-light transition-colors duration-200",children:"List Item"}),p.jsx(zt,{to:"/browse-items",className:"hidden sm:inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-dark-charcoal dark:text-neutral-warm hover:text-accent-purple dark:hover:text-primary-accent transition-colors duration-200",children:"Browse"}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:o,className:"text-dark-charcoal dark:text-neutral-warm hover:text-accent-purple dark:hover:text-primary-accent transition-colors duration-200","aria-label":e?"Open user menu":"Sign in",children:p.jsx(g$,{className:"h-6 w-6"})}),i&&e&&p.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-dark-charcoal rounded-md shadow-lg py-1 z-50",children:[p.jsx(zt,{to:"/dashboard",className:"block px-4 py-2 text-sm text-dark-charcoal dark:text-neutral-warm hover:bg-neutral-warm/90 dark:hover:bg-dark-secondary",onClick:()=>s(!1),children:"Dashboard"}),p.jsx(zt,{to:"/edit-profile",className:"block px-4 py-2 text-sm text-dark-charcoal dark:text-neutral-warm hover:bg-neutral-warm/90 dark:hover:bg-dark-secondary",onClick:()=>s(!1),children:"Settings"}),p.jsxs("button",{onClick:()=>{s(!1),a()},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-neutral-warm/90 dark:hover:bg-dark-secondary flex items-center",children:[p.jsx(RC,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]}),p.jsx("button",{className:"sm:hidden text-dark-charcoal dark:text-neutral-warm",onClick:()=>r(!n),"aria-label":"Toggle mobile menu",children:p.jsx(c$,{className:"h-6 w-6"})})]})]})}),p.jsx(x$,{isOpen:n,onClose:()=>r(!1)})]})}const sq=()=>{const t=ur(),e=n=>{if(n.endsWith(".html")){window.location.href=n;return}t(n),window.scrollTo({top:0,behavior:"smooth"})};return p.jsx("footer",{className:"bg-neutral-warm dark:bg-dark border-t border-dark-charcoal/10 dark:border-neutral-warm/10",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[p.jsxs("div",{className:"col-span-1 md:col-span-2",children:[p.jsx(UC,{variant:"text",className:"mb-4"}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 max-w-md",children:"Exchange anything with anyone, securely and easily. Join our community of trusted users today."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-dark-charcoal dark:text-neutral-warm tracking-wider uppercase mb-4",children:"Platform"}),p.jsxs("ul",{className:"space-y-4",children:[p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/browse-items"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"Browse Items"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/list-item"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"List Item"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/how-it-works"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"How It Works"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-dark-charcoal dark:text-neutral-warm tracking-wider uppercase mb-4",children:"Legal"}),p.jsxs("ul",{className:"space-y-4",children:[p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/privacy-policy.html"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"Privacy Policy"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>e("/TermsAndConditions.html"),className:"text-dark-charcoal/80 dark:text-neutral-warm/80 hover:text-accent-purple dark:hover:text-primary-accent",children:"Terms of Service"})})]})]})]}),p.jsx("div",{className:"mt-8 pt-8 border-t border-dark-charcoal/10 dark:border-neutral-warm/10",children:p.jsxs("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60 text-sm text-center",children:["© ",new Date().getFullYear()," Xchainj. All rights reserved."]})})]})})},oq=()=>p.jsxs("div",{className:"min-h-screen flex flex-col bg-neutral-warm dark:bg-dark-gradient transition-colors duration-200",children:[p.jsx(iq,{}),p.jsx("main",{className:"flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:p.jsx(UP,{})}),p.jsx(sq,{})]}),aq=()=>p.jsxs(zt,{to:"/how-it-works",className:"inline-flex items-center px-8 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 md:py-4 md:text-lg md:px-10",children:[p.jsx(a$,{className:"h-5 w-5 mr-2"}),"How It Works"]}),lq=[{name:"Secure Lending",description:"Protected by smart contracts and collateral system",icon:G1,path:"/secure-lending"},{name:"Trust System",description:"Build reputation through verified transactions",icon:PC,path:"/trust-system"},{name:"Quick Process",description:"Fast and efficient lending process",icon:q1,path:"/quick-process"}],cq=()=>p.jsxs("div",{className:"space-y-12",children:[p.jsxs("section",{className:"text-center",children:[p.jsxs("h1",{className:"text-4xl font-bold tracking-tight text-dark-charcoal dark:text-neutral-warm sm:text-5xl md:text-6xl",children:[p.jsx("span",{className:"block",children:"Borrow, Loan, Trade"}),p.jsx("span",{className:"block text-accent-purple dark:text-primary-accent",children:"Locally or remotely"})]}),p.jsxs("p",{className:"mt-3 max-w-md mx-auto text-base text-dark-charcoal/80 dark:text-neutral-warm/80 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:["Borrow, loan, and trade anything of value with anyone securely using a blockchain-powered collateral system.",p.jsx("br",{}),"Join our trusted community today."]}),p.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row items-center justify-center gap-4 md:mt-8",children:[p.jsx(zt,{to:"/browse-items",className:"inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-dark bg-primary-accent hover:bg-primary-light md:py-4 md:text-lg md:px-10 transition-colors duration-200",children:"Browse Items"}),p.jsx(aq,{})]})]}),p.jsx("section",{children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsx("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:lq.map(t=>p.jsxs(zt,{to:t.path,className:"relative bg-neutral-warm dark:bg-dark p-6 rounded-lg shadow-sm hover:shadow-md transition-all group",children:[p.jsx("div",{children:p.jsx(t.icon,{className:"h-8 w-8 text-accent-purple dark:text-accent-purple group-hover:text-primary-accent transition-colors duration-200","aria-hidden":"true"})}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:t.name}),p.jsx("p",{className:"mt-2 text-base text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]})]},t.name))})})})]}),uq=()=>{const[t,e]=JP(),n=r=>{e(r?{search:r}:{})};return{search:t.get("search")||"",setSearch:n}},dq=(t,e)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>t(...r),e)}},hq=({initialValue:t="",onSearch:e})=>{const n=ur(),[r,i]=Y.useState(t),s=Y.useCallback(dq(l=>{l.trim()&&e(l.trim())},300),[e]),o=l=>{l.preventDefault(),r.trim()&&(n(`/browse-items?search=${encodeURIComponent(r.trim())}`),e(r.trim()))},a=l=>{const c=l.target.value;i(c),s(c)};return p.jsxs("form",{onSubmit:o,className:"relative w-full",children:[p.jsx("input",{type:"text",value:r,onChange:a,placeholder:"Search items...",className:"w-full bg-gray-100 dark:bg-dark-charcoal rounded-full pl-10 pr-20 py-2 focus:outline-none focus:ring-2 focus:ring-accent-purple dark:focus:ring-accent-purple text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 dark:placeholder-neutral-warm/60 transition-colors duration-200","aria-label":"Search items"}),p.jsx(MC,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400 dark:text-neutral-warm/60"}),p.jsx("button",{type:"submit",className:"absolute right-2 top-1 px-4 py-1 text-sm text-white bg-[#5C50D7] hover:bg-[#5C50D7]/90 rounded-full transition-colors duration-200",children:"Search"})]})},fq=(t,e)=>t.length<=e?t:t.slice(0,e)+"...";function pq(t,e){if(!t.coordinates||!e.coordinates)return t.postalCode&&e.postalCode?t.postalCode===e.postalCode?.5:t.state===e.state?25:100:t.city===e.city&&t.state===e.state?5:1/0;const n=3959,r=t.coordinates.latitude*Math.PI/180,i=e.coordinates.latitude*Math.PI/180,s=(e.coordinates.latitude-t.coordinates.latitude)*Math.PI/180,o=(e.coordinates.longitude-t.coordinates.longitude)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(r)*Math.cos(i)*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return Math.round(n*l*10)/10}function FC(t){if(!t||!t.city)return"Location not specified";let e=`${t.city}, ${t.state}`;return t.postalCode&&(e+=` ${t.postalCode}`),e}function mq(t,e){return t.postalCode&&e.postalCode?t.postalCode===e.postalCode:t.city===e.city&&t.state===e.state}const gq=({item:t})=>{const e=r=>{if(!r)return!1;try{return new URL(r),r.startsWith("http")||r.startsWith("https")}catch{return console.warn("Invalid image URL:",r),!1}},n=Array.isArray(t.images)&&t.images.length>0?t.images[0]:t.image;return console.log("Rendering ItemCard with image:",{itemId:t.id,imageUrl:n,isValid:e(n)}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-md overflow-hidden transition-all hover:scale-[1.02]",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"pt-[60%]",children:e(n)?p.jsx("img",{src:n,alt:t.name,className:"absolute top-0 left-0 w-full h-full object-cover",onError:r=>{console.error("Image load error:",n),r.currentTarget.src="https://placehold.co/600x400/e2e8f0/64748b?text=No+Image"}}):p.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gray-100 dark:bg-dark-secondary flex items-center justify-center",children:p.jsx(jo,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"})})}),t.location&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-4",children:p.jsxs("div",{className:"flex items-center text-neutral-warm",children:[p.jsx(K1,{className:"h-4 w-4 flex-shrink-0"}),p.jsx("span",{className:"ml-1 text-sm truncate",children:FC(t.location)})]})})]}),p.jsxs("div",{className:"p-4 space-y-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-dark-charcoal dark:text-neutral-warm",children:t.name}),p.jsx("p",{className:"text-sm text-dark-charcoal/80 dark:text-neutral-warm/80",children:fq(t.description,100)})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[p.jsxs(zt,{to:`/items/${t.id}`,className:"inline-flex items-center text-sm font-medium text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:["View Details",p.jsx(i$,{className:"ml-1 h-4 w-4"})]}),p.jsx(zt,{to:`/request-borrow/${t.id}`,className:"inline-flex items-center justify-center px-3 py-1.5 border border-transparent text-sm font-medium rounded text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:"Request to Borrow"})]})]})]})},yq=({items:t})=>p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",children:t.map(e=>p.jsx(gq,{item:e},e.id))}),wq=({items:t,isLoading:e,searchQuery:n})=>e?p.jsx("div",{className:"flex justify-center items-center py-12",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.length===0?p.jsx("div",{className:"text-center py-12",children:p.jsx("p",{className:"text-gray-500",children:n?`No items found for "${n}"`:"No items available"})}):p.jsxs("div",{children:[n&&p.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Found ",t.length," ",t.length===1?"item":"items",' for "',n,'"']}),p.jsx(yq,{items:t})]}),vq=["All","Camping Gear","Electronics","Bicycles"],_q=["All","New","Like New","Used"],xq=({filters:t,onFilterChange:e})=>p.jsxs("div",{className:"space-y-4 p-4 bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm transition-colors duration-200",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm mb-1",children:"Category"}),p.jsx("select",{value:t.category,onChange:n=>e({...t,category:n.target.value}),className:"w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:border-accent-purple focus:ring-accent-purple dark:focus:border-primary-accent dark:focus:ring-primary-accent text-sm bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:vq.map(n=>p.jsx("option",{value:n==="All"?"":n,children:n},n))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm mb-1",children:"Condition"}),p.jsx("select",{value:t.condition,onChange:n=>e({...t,condition:n.target.value}),className:"w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:border-accent-purple focus:ring-accent-purple dark:focus:border-primary-accent dark:focus:ring-primary-accent text-sm bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:_q.map(n=>p.jsx("option",{value:n==="All"?"":n,children:n},n))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm mb-1",children:"Price Range (per day)"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"number",value:t.minPrice||"",onChange:n=>e({...t,minPrice:Number(n.target.value)}),placeholder:"Min",className:"w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:border-accent-purple focus:ring-accent-purple dark:focus:border-primary-accent dark:focus:ring-primary-accent text-sm bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200"}),p.jsx("input",{type:"number",value:t.maxPrice||"",onChange:n=>e({...t,maxPrice:Number(n.target.value)}),placeholder:"Max",className:"w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:border-accent-purple focus:ring-accent-purple dark:focus:border-primary-accent dark:focus:ring-primary-accent text-sm bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200"})]})]})]}),VC="listings",zC=t=>{var n;const e=t.data();return{id:t.id,name:e.itemName||e.name||"Untitled Item",description:e.description||"",category:e.category||"Other",condition:e.condition||"Used",pricePerDay:e.price||0,expectedValue:e.expectedValue||e.price*20||0,image:((n=e.images)==null?void 0:n[0])||e.image_url||"",location:e.location?{city:e.location.city||"",state:e.location.state||"",postalCode:e.location.postalCode||e.location.zip||"",coordinates:e.location.coordinates||null}:void 0,maxTravelDistance:e.maxTravelDistance||e.max_travel_distance||10}},Eq=async(t=20)=>{try{const e=fd(Aa(Di,VC),sp("timestamp","desc"),KB(t));return(await pd(e)).docs.map(zC)}catch(e){throw console.error("Error fetching listings:",e),new Error("Failed to fetch listings")}},bq=async t=>{try{const e=fd(Aa(Di,VC)),n=await pd(e),r=t.toLowerCase();return n.docs.filter(i=>{var o,a,l;const s=i.data();return((o=s.itemName)==null?void 0:o.toLowerCase().includes(r))||((a=s.description)==null?void 0:a.toLowerCase().includes(r))||((l=s.category)==null?void 0:l.toLowerCase().includes(r))}).map(zC)}catch(e){throw console.error("Error searching listings:",e),new Error("Failed to search listings")}},Iq=()=>{const{search:t,setSearch:e}=uq(),[n,r]=Y.useState(!0),[i,s]=Y.useState(null),[o,a]=Y.useState([]),[l,c]=Y.useState(!1),[d,h]=Y.useState({category:"",condition:"",minPrice:0,maxPrice:0});Y.useEffect(()=>{(async()=>{try{r(!0),s(null);const k=t?await bq(t):await Eq();a(k)}catch(k){console.error("Error fetching items:",k),s("Failed to load items. Please try again later.")}finally{r(!1)}})()},[t]);const m=async w=>{e(w)};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"lg:hidden",children:p.jsxs("button",{onClick:()=>c(!l),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-neutral-warm dark:bg-dark-charcoal rounded-md shadow-sm hover:bg-neutral-warm/90 dark:hover:bg-dark-secondary transition-colors duration-200",children:[p.jsx(o$,{className:"h-4 w-4"}),l?"Hide Filters":"Show Filters"]})}),p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[p.jsx("div",{className:`
          lg:w-64 flex-shrink-0
          ${l?"block":"hidden"}
          lg:block
        `,children:p.jsx("div",{className:"sticky top-4",children:p.jsx(xq,{filters:d,onFilterChange:h})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"mb-6",children:p.jsx(hq,{initialValue:t,onSearch:m})}),i?p.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-md",children:p.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}):p.jsx(wq,{items:o,isLoading:n,searchQuery:t})]})]})]})},Sq=({item:t})=>{const e=r=>{if(!r)return!1;try{return new URL(r),r.startsWith("http")||r.startsWith("https")}catch{return console.warn("Invalid image URL:",r),!1}},n=Array.isArray(t.images)&&t.images.length>0?t.images[0]:t.image;return console.log("Rendering ItemDetailsHeader with image:",{itemId:t.id,imageUrl:n,isValid:e(n)}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-lg overflow-hidden",children:e(n)?p.jsx("img",{src:n,alt:t.name,className:"w-full h-full object-cover",onError:r=>{console.error("Image load error:",n),r.currentTarget.src="https://placehold.co/600x400/e2e8f0/64748b?text=No+Image"}}):p.jsx("div",{className:"w-full h-full bg-gray-100 dark:bg-dark-secondary flex items-center justify-center",children:p.jsx(jo,{className:"h-16 w-16 text-gray-400 dark:text-gray-600"})})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-dark-charcoal dark:text-neutral-warm",children:t.name}),p.jsx("p",{className:"mt-2 text-lg text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]})]})},kq=({item:t})=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 space-y-6 transition-colors duration-200",children:[p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t.pricePerDay&&p.jsxs("div",{className:"flex items-start",children:[p.jsx(r$,{className:"h-5 w-5 text-accent-purple dark:text-primary-accent mt-1"}),p.jsxs("div",{className:"ml-2",children:[p.jsx("h3",{className:"text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Price per Day"}),p.jsxs("p",{className:"mt-1 text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:["$",t.pricePerDay]})]})]}),t.expectedValue&&p.jsxs("div",{className:"flex items-start",children:[p.jsx(p$,{className:"h-5 w-5 text-accent-purple dark:text-primary-accent mt-1"}),p.jsxs("div",{className:"ml-2",children:[p.jsx("h3",{className:"text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Expected Value"}),p.jsxs("p",{className:"mt-1 text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:["$",t.expectedValue]})]})]}),p.jsxs("div",{className:"flex items-start",children:[p.jsx(K1,{className:"h-5 w-5 text-accent-purple dark:text-primary-accent mt-1"}),p.jsxs("div",{className:"ml-2",children:[p.jsx("h3",{className:"text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Location"}),p.jsx("p",{className:"mt-1 text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:FC(t.location)}),t.maxTravelDistance&&p.jsxs("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:["Within ",t.maxTravelDistance," miles"]})]})]}),t.condition&&p.jsxs("div",{className:"flex items-start",children:[p.jsx(Wa,{className:"h-5 w-5 text-accent-purple dark:text-primary-accent mt-1"}),p.jsxs("div",{className:"ml-2",children:[p.jsx("h3",{className:"text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Condition"}),p.jsx("p",{className:"mt-1 text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:t.condition})]})]})]}),p.jsx("div",{className:"pt-6 border-t border-dark-charcoal/10 dark:border-neutral-warm/10",children:p.jsx(zt,{to:`/request-borrow/${t.id}`,className:"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple transition-colors duration-200",children:"Request to Borrow"})})]}),Tq=5*1024*1024,hI=5,fI=["image/jpeg","image/png","image/webp"],Aq=t=>{if(console.log("Validating image:",{name:t.name,size:`${(t.size/1024/1024).toFixed(2)}MB`,type:t.type}),t.size>Tq){const e=`File size (${(t.size/1024/1024).toFixed(2)}MB) exceeds limit of 5MB`;throw console.error(e),new Error(e)}if(!fI.includes(t.type)){const e=`File type ${t.type} not allowed. Allowed types: ${fI.join(", ")}`;throw console.error(e),new Error(e)}console.log("Image validation passed")},Nq=async t=>{console.log("Starting image upload process");const e=ei.currentUser;if(!e)throw console.error("No authenticated user found"),new Error("User not authenticated. Please sign in to upload images.");console.log("User authenticated:",e.uid);try{console.log("Validating image:",t.name),Aq(t);const n=t.name.split(".").pop(),r=`${Date.now()}-${Math.random().toString(36).substring(2)}.${n}`,i=`images/${e.uid}/${r}`;console.log("Generated file path:",i);const s=TA(AA,i);console.log("Storage reference created:",s.fullPath);const o={contentType:t.type,customMetadata:{uploadedBy:e.uid,originalName:t.name,uploadedAt:new Date().toISOString()}};console.log("Uploading file to Firebase Storage...");const a=await l8(s,t,o);console.log("File uploaded successfully. Metadata:",a.metadata),console.log("Generating download URL...");const l=await c8(s);return console.log("Download URL generated:",l),l}catch(n){throw console.error("Error in uploadImage:",n),n instanceof Error?n.message.includes("storage/unauthorized")?new Error("Upload failed: Not authorized. Please check if you are signed in and have permission to upload."):n.message.includes("storage/quota-exceeded")?new Error("Upload failed: Storage quota exceeded."):n.message.includes("storage/invalid-argument")?new Error("Upload failed: Invalid file or path."):n.message.includes("storage/canceled")?new Error("Upload failed: Operation canceled."):new Error(`Upload failed: ${n.message}`):new Error("Upload failed: Unknown error occurred")}},WC=async t=>{if(console.log(`Starting batch upload of ${t.length} images`),t.length>hI){const e=`Cannot upload more than ${hI} images`;throw console.error(e),new Error(e)}try{const e=t.map((r,i)=>(console.log(`Uploading image ${i+1}/${t.length}:`,r.name),Nq(r)));console.log("Waiting for all uploads to complete...");const n=await Promise.all(e);return console.log("All images uploaded successfully"),console.log("Generated URLs:",n),n}catch(e){throw console.error("Error in uploadImages:",e),e}},Cq=async t=>{if(console.log("Attempting to delete image:",t),!t.startsWith("https://firebasestorage.googleapis.com")){console.warn("Invalid Firebase Storage URL:",t);return}try{const e=TA(AA,t);console.log("Deleting image from Firebase Storage..."),await u8(e),console.log("Image deleted successfully")}catch(e){throw console.error("Error deleting image:",e),e}},pI=async t=>{if(t.length===0){console.log("No images to clean up");return}console.log(`Starting cleanup of ${t.length} images`);try{await Promise.all(t.map(e=>(console.log("Cleaning up image:",e),Cq(e)))),console.log("All images cleaned up successfully")}catch(e){console.error("Error during image cleanup:",e)}},$C="listings",qC=t=>({id:t.id,name:t.name,description:t.description,category:t.category,condition:t.condition,expectedValue:t.expected_value,images:t.images||[],location:t.location,maxTravelDistance:t.max_travel_distance}),Rq=async t=>{let e=[];try{console.log("Starting item creation process");const n=ei.currentUser;if(!n)throw new Error("Please sign in to create an item");console.log("Uploading images..."),e=await WC(t.images),console.log("Images uploaded successfully:",e);const r={name:t.name,description:t.description,expected_value:t.expectedValue,images:e,category:t.category,condition:t.condition,location:t.location,max_travel_distance:t.maxTravelDistance,user_id:n.uid,created_at:Sy()};console.log("Creating item record in Firestore:",r);const i=await uA(Aa(Di,$C),r),s=await im(i);if(!s.exists())throw console.error("Failed to create item: Document does not exist after creation"),await pI(e),new Error("Failed to create item");return console.log("Item created successfully:",i.id),qC({id:s.id,...s.data()})}catch(n){throw console.error("Error in createItem:",n),e.length>0&&(console.log("Cleaning up uploaded images due to error"),await pI(e)),n instanceof Error?n:new Error("An unexpected error occurred while creating the item")}},Mq=async t=>{try{console.log("Fetching item:",t);const e=em(Di,$C,t),n=await im(e);return n.exists()?qC({id:n.id,...n.data()}):(console.log("Item not found:",t),null)}catch(e){throw console.error("Error getting item:",e),e}},Pq=()=>{const{id:t}=$k(),e=ur(),[n,r]=Y.useState(null),[i,s]=Y.useState(!0),[o,a]=Y.useState(null);return Y.useEffect(()=>{(async()=>{if(!t){a("Invalid item ID"),s(!1);return}try{const c=await Mq(t);c?r(c):a("Item not found")}catch(c){console.error("Error fetching item:",c),a("Failed to load item details")}finally{s(!1)}})()},[t]),i?p.jsx("div",{className:"max-w-3xl mx-auto p-6",children:p.jsxs("div",{className:"animate-pulse space-y-4",children:[p.jsx("div",{className:"h-64 bg-gray-200 dark:bg-dark-secondary rounded-lg"}),p.jsx("div",{className:"h-8 bg-gray-200 dark:bg-dark-secondary rounded w-3/4"}),p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-dark-secondary rounded w-1/2"})]})}):o||!n?p.jsx("div",{className:"max-w-3xl mx-auto p-6",children:p.jsxs("div",{className:"text-center",children:[p.jsx(jo,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-600 mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-2",children:o||"Item Not Found"}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 mb-6",children:"This item is no longer available or may have been removed."}),p.jsx("button",{onClick:()=>e("/browse-items"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:"Back to Browse"})]})}):p.jsxs("div",{className:"max-w-3xl mx-auto p-4 sm:p-6 space-y-6",children:[p.jsxs("button",{onClick:()=>e("/browse-items"),className:"inline-flex items-center text-sm font-medium text-dark-charcoal/60 dark:text-neutral-warm/60 hover:text-dark-charcoal dark:hover:text-neutral-warm",children:[p.jsx(JW,{className:"h-4 w-4 mr-1"}),"Back to Browse"]}),p.jsx(Sq,{item:n}),p.jsx(kq,{item:n})]})};function HC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=HC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Lq(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=HC(t))&&(r&&(r+=" "),r+=e);return r}const Q1="-",Dq=t=>{const e=jq(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Q1);return a[0]===""&&a.length!==1&&a.shift(),KC(a,e)||Oq(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},KC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?KC(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Q1);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},mI=/^\[(.+)\]$/,Oq=t=>{if(mI.test(t)){const e=mI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},jq=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Uq(Object.entries(t.classGroups),n).forEach(([s,o])=>{aw(o,r,s,e)}),r},aw=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:gI(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(Bq(i)){aw(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{aw(o,gI(e,s),n,r)})})},gI=(t,e)=>{let n=t;return e.split(Q1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Bq=t=>t.isThemeGetter,Uq=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,Fq=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},GC="!",Vq=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let _=0;_<a.length;_++){let T=a[_];if(c===0){if(T===i&&(r||a.slice(_,_+s)===e)){l.push(a.slice(d,_)),d=_+s;continue}if(T==="/"){h=_;continue}}T==="["?c++:T==="]"&&c--}const m=l.length===0?a:a.substring(d),w=m.startsWith(GC),k=w?m.substring(1):m,I=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:k,maybePostfixModifierPosition:I}};return n?a=>n({className:a,parseClassName:o}):o},zq=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Wq=t=>({cache:Fq(t.cacheSize),parseClassName:Vq(t),...Dq(t)}),$q=/\s+/,qq=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split($q);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:w}=n(c);let k=!!w,I=r(k?m.substring(0,w):m);if(!I){if(!k){a=c+(a.length>0?" "+a:a);continue}if(I=r(m),!I){a=c+(a.length>0?" "+a:a);continue}k=!1}const _=zq(d).join(":"),T=h?_+GC:_,S=T+I;if(s.includes(S))continue;s.push(S);const E=i(I,k);for(let j=0;j<E.length;++j){const K=E[j];s.push(T+K)}a=c+(a.length>0?" "+a:a)}return a};function Hq(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=YC(e))&&(r&&(r+=" "),r+=n);return r}const YC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=YC(t[r]))&&(n&&(n+=" "),n+=e);return n};function Kq(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=Wq(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=qq(l,n);return i(l,d),d}return function(){return s(Hq.apply(null,arguments))}}const Mt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},QC=/^\[(?:([a-z-]+):)?(.+)\]$/i,Gq=/^\d+\/\d+$/,Yq=new Set(["px","full","screen"]),Qq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Xq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qi=t=>zl(t)||Yq.has(t)||Gq.test(t),Ws=t=>Rc(t,"length",lH),zl=t=>!!t&&!Number.isNaN(Number(t)),i0=t=>Rc(t,"number",zl),tu=t=>!!t&&Number.isInteger(Number(t)),tH=t=>t.endsWith("%")&&zl(t.slice(0,-1)),ze=t=>QC.test(t),$s=t=>Qq.test(t),nH=new Set(["length","size","percentage"]),rH=t=>Rc(t,nH,ZC),iH=t=>Rc(t,"position",ZC),sH=new Set(["image","url"]),oH=t=>Rc(t,sH,uH),aH=t=>Rc(t,"",cH),nu=()=>!0,Rc=(t,e,n)=>{const r=QC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},lH=t=>Zq.test(t)&&!Xq.test(t),ZC=()=>!1,cH=t=>Jq.test(t),uH=t=>eH.test(t),dH=()=>{const t=Mt("colors"),e=Mt("spacing"),n=Mt("blur"),r=Mt("brightness"),i=Mt("borderColor"),s=Mt("borderRadius"),o=Mt("borderSpacing"),a=Mt("borderWidth"),l=Mt("contrast"),c=Mt("grayscale"),d=Mt("hueRotate"),h=Mt("invert"),m=Mt("gap"),w=Mt("gradientColorStops"),k=Mt("gradientColorStopPositions"),I=Mt("inset"),_=Mt("margin"),T=Mt("opacity"),S=Mt("padding"),E=Mt("saturate"),j=Mt("scale"),K=Mt("sepia"),G=Mt("skew"),O=Mt("space"),L=Mt("translate"),B=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",ze,e],H=()=>[ze,e],A=()=>["",Qi,Ws],f=()=>["auto",zl,ze],b=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],C=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",ze],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[zl,ze];return{cacheSize:500,separator:":",theme:{colors:[nu],spacing:[Qi,Ws],blur:["none","",$s,ze],brightness:D(),borderColor:[t],borderRadius:["none","","full",$s,ze],borderSpacing:H(),borderWidth:A(),contrast:D(),grayscale:F(),hueRotate:D(),invert:F(),gap:H(),gradientColorStops:[t],gradientColorStopPositions:[tH,Ws],inset:$(),margin:$(),opacity:D(),padding:H(),saturate:D(),scale:D(),sepia:F(),skew:D(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",ze]}],container:["container"],columns:[{columns:[$s]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...b(),ze]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[I]}],"inset-x":[{"inset-x":[I]}],"inset-y":[{"inset-y":[I]}],start:[{start:[I]}],end:[{end:[I]}],top:[{top:[I]}],right:[{right:[I]}],bottom:[{bottom:[I]}],left:[{left:[I]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tu,ze]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ze]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",tu,ze]}],"grid-cols":[{"grid-cols":[nu]}],"col-start-end":[{col:["auto",{span:["full",tu,ze]},ze]}],"col-start":[{"col-start":f()}],"col-end":[{"col-end":f()}],"grid-rows":[{"grid-rows":[nu]}],"row-start-end":[{row:["auto",{span:[tu,ze]},ze]}],"row-start":[{"row-start":f()}],"row-end":[{"row-end":f()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ze]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ze,e]}],"min-w":[{"min-w":[ze,e,"min","max","fit"]}],"max-w":[{"max-w":[ze,e,"none","full","min","max","fit","prose",{screen:[$s]},$s]}],h:[{h:[ze,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ze,e,"auto","min","max","fit"]}],"font-size":[{text:["base",$s,Ws]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",i0]}],"font-family":[{font:[nu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ze]}],"line-clamp":[{"line-clamp":["none",zl,i0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Qi,ze]}],"list-image":[{"list-image":["none",ze]}],"list-style-type":[{list:["none","disc","decimal",ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...C(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Qi,Ws]}],"underline-offset":[{"underline-offset":["auto",Qi,ze]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...b(),iH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oH]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...C(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:C()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...C()]}],"outline-offset":[{"outline-offset":[Qi,ze]}],"outline-w":[{outline:[Qi,Ws]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[Qi,Ws]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",$s,aH]}],"shadow-color":[{shadow:[nu]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",$s,ze]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[K]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ze]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",ze]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[tu,ze]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[G]}],"skew-y":[{"skew-y":[G]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ze]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Qi,Ws,i0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hH=Kq(dH);function fH(...t){return hH(Lq(t))}const pH=({onImageChange:t,error:e})=>{const[n,r]=Y.useState(null),i=o=>{var c;const a=(c=o.target.files)==null?void 0:c[0];if(!a)return;if(!a.type.startsWith("image/")){t(null);return}const l=new FileReader;l.onloadend=()=>{r(l.result)},l.readAsDataURL(a),t(a)},s=()=>{r(null),t(null)};return p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm mb-2",children:"Item Image"}),p.jsx("div",{className:fH("mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md",e?"border-red-300":"border-gray-300 dark:border-dark",n?"bg-gray-50 dark:bg-dark-secondary":"bg-white dark:bg-dark"),children:n?p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:n,alt:"Preview",className:"max-h-48 rounded-md"}),p.jsx("button",{type:"button",onClick:s,className:"absolute -top-2 -right-2 p-1 bg-red-100 dark:bg-red-900/20 rounded-full text-red-600 dark:text-red-400 hover:bg-red-200",children:p.jsx(v$,{className:"h-4 w-4"})})]}):p.jsxs("div",{className:"space-y-1 text-center",children:[p.jsx(l$,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsx("div",{className:"flex text-sm",children:p.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-[#5C50D7] hover:text-[#5C50D7]/80",children:[p.jsx("span",{children:"Upload an image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:i,className:"sr-only"})]})}),p.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})}),e&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:e})]})},mH=({formData:t,onChange:e,errors:n})=>{const r=i=>{const{name:s,value:o}=i.target;e({...t,[s]:o})};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Name"}),p.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",required:!0}),n.name&&p.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.name})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Description"}),p.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:r,rows:4,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",required:!0}),n.description&&p.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.description})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Category"}),p.jsxs("select",{id:"category",name:"category",value:t.category,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:[p.jsx("option",{value:"",children:"Select a category"}),p.jsx("option",{value:"Electronics",children:"Electronics"}),p.jsx("option",{value:"Tools",children:"Tools"}),p.jsx("option",{value:"Sports",children:"Sports"}),p.jsx("option",{value:"Other",children:"Other"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"condition",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Condition"}),p.jsxs("select",{id:"condition",name:"condition",value:t.condition,onChange:r,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:[p.jsx("option",{value:"New",children:"New"}),p.jsx("option",{value:"Like New",children:"Like New"}),p.jsx("option",{value:"Used",children:"Used"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"expectedValue",className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Expected Value ($)"}),p.jsx("input",{type:"number",id:"expectedValue",name:"expectedValue",value:t.expectedValue,onChange:r,min:"0",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",required:!0})]})]})},XC=({value:t,onChange:e,maxDistance:n,onMaxDistanceChange:r})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"City"}),p.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:p.jsx(K1,{className:"h-5 w-5 text-accent-purple dark:text-accent-purple"})}),p.jsx("input",{type:"text",value:t.city,onChange:i=>e({...t,city:i.target.value}),className:"block w-full pl-10 rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",placeholder:"Enter city",required:!0})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"State"}),p.jsx("input",{type:"text",value:t.state,onChange:i=>e({...t,state:i.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",placeholder:"Enter state",required:!0})]})]}),p.jsxs("div",{className:"sm:w-1/2",children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Postal Code"}),p.jsx("input",{type:"text",value:t.postalCode,onChange:i=>e({...t,postalCode:i.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",placeholder:"Enter postal code",required:!0})]}),r&&p.jsxs("div",{className:"sm:w-1/2",children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Maximum Travel Distance (miles)"}),p.jsx("input",{type:"number",value:n,onChange:i=>r(Number(i.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",min:"0",step:"1",placeholder:"Enter maximum distance"})]})]}),gH=()=>{const t=ur(),[e,n]=Y.useState(!1),[r,i]=Y.useState({}),[s,o]=Y.useState(null),[a,l]=Y.useState({city:"",state:"",postalCode:""}),[c,d]=Y.useState(10),[h,m]=Y.useState({name:"",description:"",category:"",condition:"Used",expectedValue:""}),w=()=>{const I={};return h.name||(I.name="Name is required"),h.description||(I.description="Description is required"),s||(I.image="Image is required"),(!a.city||!a.state||!a.postalCode)&&(I.location="Complete location is required"),i(I),Object.keys(I).length===0},k=async I=>{if(I.preventDefault(),console.log("Form submission started"),!w()){console.log("Form validation failed",r);return}n(!0);try{if(console.log("Preparing to upload image"),!s)throw new Error("Item image is required");console.log("Starting image upload");const _=await WC([s]);console.log("Image upload completed. URLs:",_);const T={name:h.name,description:h.description,expectedValue:Number(h.expectedValue),category:h.category||"Other",condition:h.condition,images:[s],location:a,maxTravelDistance:c};console.log("Creating item with data:",T),await Rq(T),console.log("Item created successfully"),t("/browse-items")}catch(_){console.error("Error creating item:",_),i({submit:_ instanceof Error?_.message:"Failed to create item. Please try again."})}finally{n(!1)}};return p.jsxs("form",{onSubmit:k,className:"space-y-8",children:[r.submit&&p.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded",children:r.submit}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 space-y-6 transition-colors duration-200",children:[p.jsx("h3",{className:"text-lg font-medium text-accent-purple dark:text-accent-purple",children:"Item Details"}),p.jsx(pH,{onImageChange:I=>{console.log("Image selected:",I==null?void 0:I.name),o(I)},error:r.image}),p.jsx(mH,{formData:h,onChange:m,errors:r})]}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 space-y-6 transition-colors duration-200",children:[p.jsx("h3",{className:"text-lg font-medium text-accent-purple dark:text-accent-purple",children:"Location Details"}),p.jsx(XC,{value:a,onChange:l,maxDistance:c,onMaxDistanceChange:d}),r.location&&p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r.location})]}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-dark-charcoal/20 dark:border-neutral-warm/20 rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-transparent hover:bg-dark-charcoal/5 dark:hover:bg-neutral-warm/5 transition-colors duration-200",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:e,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:e?"Creating...":"Create Listing"})]})]})},yH=()=>p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold text-dark-charcoal dark:text-primary-accent mb-8",children:"List Your Item"}),p.jsx(gH,{})]}),wH=({user:t,onEdit:e})=>p.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("img",{src:t.avatarUrl,alt:t.username,className:"h-16 w-16 rounded-full object-cover"}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.username}),p.jsx("p",{className:"text-gray-600",children:t.email}),p.jsxs("div",{className:"flex items-center mt-1",children:[p.jsx(PC,{className:"h-5 w-5 text-yellow-400 fill-current"}),p.jsxs("span",{className:"ml-1 text-gray-600",children:[t.trustRating,"/5.0"]})]})]})]}),p.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600","aria-label":"Edit profile",children:p.jsx(h$,{className:"h-5 w-5"})})]})});function xi(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Pa(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const JC=6048e5,vH=864e5;let _H={};function Rm(){return _H}function Id(t,e){var a,l,c,d;const n=Rm(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=xi(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function _p(t){return Id(t,{weekStartsOn:1})}function eR(t){const e=xi(t),n=e.getFullYear(),r=Pa(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=_p(r),s=Pa(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=_p(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function yI(t){const e=xi(t);return e.setHours(0,0,0,0),e}function wI(t){const e=xi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function xH(t,e){const n=yI(t),r=yI(e),i=+n-wI(n),s=+r-wI(r);return Math.round((i-s)/vH)}function EH(t){const e=eR(t),n=Pa(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),_p(n)}function bH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function IH(t){if(!bH(t)&&typeof t!="number")return!1;const e=xi(t);return!isNaN(Number(e))}function SH(t){const e=xi(t),n=Pa(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const kH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},TH=(t,e,n)=>{let r;const i=kH[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function s0(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const AH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},NH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},CH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RH={date:s0({formats:AH,defaultWidth:"full"}),time:s0({formats:NH,defaultWidth:"full"}),dateTime:s0({formats:CH,defaultWidth:"full"})},MH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},PH=(t,e,n,r)=>MH[t];function ru(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const LH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},DH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},OH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},BH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},FH=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},VH={ordinalNumber:FH,era:ru({values:LH,defaultWidth:"wide"}),quarter:ru({values:DH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ru({values:OH,defaultWidth:"wide"}),day:ru({values:jH,defaultWidth:"wide"}),dayPeriod:ru({values:BH,defaultWidth:"wide",formattingValues:UH,defaultFormattingWidth:"wide"})};function iu(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?WH(a,h=>h.test(o)):zH(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function zH(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function WH(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function $H(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const qH=/^(\d+)(th|st|nd|rd)?/i,HH=/\d+/i,KH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GH={any:[/^b/i,/^(a|c)/i]},YH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},QH={any:[/1/i,/2/i,/3/i,/4/i]},ZH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},XH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},JH={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},eK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},tK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rK={ordinalNumber:$H({matchPattern:qH,parsePattern:HH,valueCallback:t=>parseInt(t,10)}),era:iu({matchPatterns:KH,defaultMatchWidth:"wide",parsePatterns:GH,defaultParseWidth:"any"}),quarter:iu({matchPatterns:YH,defaultMatchWidth:"wide",parsePatterns:QH,defaultParseWidth:"any",valueCallback:t=>t+1}),month:iu({matchPatterns:ZH,defaultMatchWidth:"wide",parsePatterns:XH,defaultParseWidth:"any"}),day:iu({matchPatterns:JH,defaultMatchWidth:"wide",parsePatterns:eK,defaultParseWidth:"any"}),dayPeriod:iu({matchPatterns:tK,defaultMatchWidth:"any",parsePatterns:nK,defaultParseWidth:"any"})},iK={code:"en-US",formatDistance:TH,formatLong:RH,formatRelative:PH,localize:VH,match:rK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sK(t){const e=xi(t);return xH(e,SH(e))+1}function oK(t){const e=xi(t),n=+_p(e)-+EH(e);return Math.round(n/JC)+1}function tR(t,e){var d,h,m,w;const n=xi(t),r=n.getFullYear(),i=Rm(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((w=(m=i.locale)==null?void 0:m.options)==null?void 0:w.firstWeekContainsDate)??1,o=Pa(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Id(o,e),l=Pa(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Id(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function aK(t,e){var a,l,c,d;const n=Rm(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=tR(t,e),s=Pa(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Id(s,e)}function lK(t,e){const n=xi(t),r=+Id(n,e)-+aK(n,e);return Math.round(r/JC)+1}function ft(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const qs={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ft(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ft(n+1,2)},d(t,e){return ft(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ft(t.getHours()%12||12,e.length)},H(t,e){return ft(t.getHours(),e.length)},m(t,e){return ft(t.getMinutes(),e.length)},s(t,e){return ft(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ft(i,e.length)}},ol={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vI={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return qs.y(t,e)},Y:function(t,e,n,r){const i=tR(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return ft(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ft(s,e.length)},R:function(t,e){const n=eR(t);return ft(n,e.length)},u:function(t,e){const n=t.getFullYear();return ft(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ft(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ft(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return qs.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ft(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=lK(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ft(i,e.length)},I:function(t,e,n){const r=oK(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ft(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):qs.d(t,e)},D:function(t,e,n){const r=sK(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ft(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ft(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ft(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ft(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ol.noon:r===0?i=ol.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ol.evening:r>=12?i=ol.afternoon:r>=4?i=ol.morning:i=ol.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return qs.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):qs.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ft(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):qs.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):qs.s(t,e)},S:function(t,e){return qs.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return xI(r);case"XXXX":case"XX":return Zo(r);case"XXXXX":case"XXX":default:return Zo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return xI(r);case"xxxx":case"xx":return Zo(r);case"xxxxx":case"xxx":default:return Zo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_I(r,":");case"OOOO":default:return"GMT"+Zo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_I(r,":");case"zzzz":default:return"GMT"+Zo(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return ft(r,e.length)},T:function(t,e,n){const r=t.getTime();return ft(r,e.length)}};function _I(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ft(s,2)}function xI(t,e){return t%60===0?(t>0?"-":"+")+ft(Math.abs(t)/60,2):Zo(t,e)}function Zo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ft(Math.trunc(r/60),2),s=ft(r%60,2);return n+i+e+s}const EI=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},nR=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cK=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return EI(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",EI(r,e)).replace("{{time}}",nR(i,e))},uK={p:nR,P:cK},dK=/^D+$/,hK=/^Y+$/,fK=["D","DD","YY","YYYY"];function pK(t){return dK.test(t)}function mK(t){return hK.test(t)}function gK(t,e,n){const r=yK(t,e,n);if(console.warn(r),fK.includes(t))throw new RangeError(r)}function yK(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const wK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_K=/^'([^]*?)'?$/,xK=/''/g,EK=/[a-zA-Z]/;function bK(t,e,n){var d,h,m,w;const r=Rm(),i=r.locale??iK,s=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((w=(m=r.locale)==null?void 0:m.options)==null?void 0:w.weekStartsOn)??0,a=xi(t);if(!IH(a))throw new RangeError("Invalid time value");let l=e.match(vK).map(k=>{const I=k[0];if(I==="p"||I==="P"){const _=uK[I];return _(k,i.formatLong)}return k}).join("").match(wK).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const I=k[0];if(I==="'")return{isToken:!1,value:IK(k)};if(vI[I])return{isToken:!0,value:k};if(I.match(EK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:k}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(k=>{if(!k.isToken)return k.value;const I=k.value;(mK(I)||pK(I))&&gK(I,e,String(t));const _=vI[I[0]];return _(a,I,i.localize,c)}).join("")}function IK(t){const e=t.match(_K);return e?e[1].replace(xK,"'"):t}const SK=({transactions:t,loading:e,error:n})=>e?p.jsx("div",{className:"flex justify-center items-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-purple"})}):n?p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg flex items-center",children:[p.jsx(Wa,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2"}),p.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})]}):t.length?p.jsx("div",{className:"divide-y divide-gray-200 dark:divide-dark",children:t.map(r=>p.jsxs("div",{className:"py-4",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-lg font-medium text-dark-charcoal dark:text-neutral-warm",children:r.itemName}),p.jsx("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:bK(r.timestamp.toDate(),"PPP")})]}),p.jsx("span",{className:`
              px-2 py-1 text-xs font-medium rounded-full
              ${r.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":r.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":r.status==="active"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}
            `,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("p",{className:"text-sm text-dark-charcoal/80 dark:text-neutral-warm/80",children:r.description}),p.jsxs("div",{className:"mt-2 text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:[p.jsxs("span",{className:"mr-4",children:["$",r.price]}),p.jsxs("span",{children:[r.location.city,", ",r.location.state]})]})]})]},r.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(jo,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-dark-charcoal dark:text-neutral-warm mb-2",children:"No Transactions Yet"}),p.jsx("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Your transaction history will appear here once you start trading."})]}),kK="transactionHistory",TK=t=>{var n,r,i;const e=t.data();return{id:t.id,category:e.category||"Uncategorized",condition:e.condition||"Not specified",description:e.description||"",images:e.images||[],itemName:e.itemName||"Unnamed Item",listingId:e.listingId||"",location:{city:((n=e.location)==null?void 0:n.city)||"",state:((r=e.location)==null?void 0:r.state)||"",zip:((i=e.location)==null?void 0:i.zip)||0},price:e.price||0,swapPreferences:e.swapPreferences||"",timestamp:e.timestamp||an.now(),userId:e.userId||"",status:e.status||"pending"}},AK=async t=>{try{console.log("Fetching transactions for user:",t);const e=fd(Aa(Di,kK),Iy("userId","==",t),sp("timestamp","desc")),n=await pd(e);if(n.empty)return console.log("No transactions found for user:",t),[];const r=n.docs.map(TK);return console.log(`Found ${r.length} transactions`),r}catch(e){throw console.error("Error fetching user transactions:",e),new Error("Failed to fetch transactions")}},NK=()=>{const t=ur(),{user:e,logout:n}=om(),[r,i]=Y.useState([]),[s,o]=Y.useState(!0),[a,l]=Y.useState(null);Y.useEffect(()=>{(async()=>{if(e)try{const h=await AK(e.uid);i(h)}catch(h){console.error("Error fetching transactions:",h),l("Failed to load transaction history")}finally{o(!1)}})()},[e]);const c=async()=>{try{await n(),t("/")}catch(d){console.error("Error logging out:",d)}};return e?p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[p.jsx(wH,{user:e,onEdit:()=>t("/edit-profile")}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow p-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm mb-4",children:"Transaction History"}),p.jsx(SK,{transactions:r,loading:s,error:a})]}),p.jsx("div",{className:"flex justify-end",children:p.jsxs("button",{onClick:c,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[p.jsx(RC,{className:"h-4 w-4 mr-2"}),"Logout"]})})]}):null},CK=({provider:t,onClick:e,isLoading:n=!1})=>{const r=()=>{switch(t){case"facebook":return p.jsx(s$,{className:"h-5 w-5"});case"google":return p.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]});default:return p.jsx(H1,{className:"h-5 w-5"})}},i=()=>{switch(t){case"facebook":return"bg-[#1877F2] hover:bg-[#166FE5] text-white";case"google":return"bg-white hover:bg-gray-50 text-gray-700 border border-gray-300";default:return"bg-gray-800 hover:bg-gray-700 text-white"}},s=()=>{switch(t){case"facebook":return"Continue with Facebook";case"google":return"Continue with Google";default:return"Continue with Email"}};return p.jsxs("button",{onClick:e,disabled:n,className:`w-full flex items-center justify-center gap-3 px-4 py-2 rounded-md font-medium transition-colors ${i()} disabled:opacity-50 disabled:cursor-not-allowed`,children:[r(),p.jsx("span",{children:n?"Loading...":s()})]})},RK=()=>{const t=ur(),e=Bi(),{user:n,initialized:r}=om(),[i,s]=Y.useState(""),[o,a]=Y.useState(""),[l,c]=Y.useState(!1),[d,h]=Y.useState(null);if(Y.useEffect(()=>{var I,_;if(r&&n){const T=((_=(I=e.state)==null?void 0:I.from)==null?void 0:_.pathname)||"/dashboard";t(T,{replace:!0})}},[n,r,t,e]),!r)return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple"})});if(n)return null;const m=I=>{switch(I.code){case"auth/user-not-found":return p.jsxs("span",{children:["No account found with this email."," ",p.jsx(zt,{to:"/sign-up",className:"underline hover:text-accent-purple/80 dark:hover:text-primary-light",children:"Create an account"})]});case"auth/invalid-credential":return p.jsxs("span",{children:["Invalid credentials. Please try again or"," ",p.jsx(zt,{to:"/forgot-password",className:"underline hover:text-accent-purple/80 dark:hover:text-primary-light",children:"reset your password"})]});default:return"Something went wrong. Please try again later."}},w=async I=>{var _,T;I.preventDefault(),c(!0),h(null);try{await PO(ei,i,o);const S=((T=(_=e.state)==null?void 0:_.from)==null?void 0:T.pathname)||"/dashboard";t(S,{replace:!0})}catch(S){h(m(S)),c(!1)}},k=async()=>{var I,_;try{c(!0),h(null);const T=new es;await n3(ei,T);const S=((_=(I=e.state)==null?void 0:I.from)==null?void 0:_.pathname)||"/dashboard";t(S,{replace:!0})}catch(T){h(m(T)),c(!1)}};return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-lg transition-colors duration-200",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold text-center text-dark-charcoal dark:text-neutral-warm",children:"Sign In"}),p.jsxs("p",{className:"mt-2 text-center text-dark-charcoal/80 dark:text-neutral-warm/80",children:["Don't have an account?"," ",p.jsx(zt,{to:"/sign-up",className:"text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Create one"})]})]}),d&&p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-md flex items-start gap-3",children:[p.jsx(Wa,{className:"h-5 w-5 text-red-500 dark:text-red-400 flex-shrink-0 mt-0.5"}),p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:d})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(CK,{provider:"google",onClick:k,isLoading:l}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-300 dark:border-dark"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-neutral-warm dark:bg-dark-charcoal text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Or continue with"})})]}),p.jsxs("form",{onSubmit:w,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Email"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("input",{type:"email",id:"email",value:i,onChange:I=>{s(I.target.value),h(null)},className:"block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent",required:!0,disabled:l}),p.jsx(H1,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 dark:text-neutral-warm/60"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Password"}),p.jsx("input",{type:"password",id:"password",value:o,onChange:I=>{a(I.target.value),h(null)},className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent",required:!0,disabled:l})]}),p.jsx("div",{className:"flex items-center justify-between",children:p.jsx("div",{className:"text-sm",children:p.jsx(zt,{to:"/forgot-password",className:"text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Forgot your password?"})})}),p.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:l?"Signing in...":"Sign in with Email"})]})]})]})})},MK=()=>{const t=ur(),[e,n]=Y.useState(""),[r,i]=Y.useState(""),[s,o]=Y.useState(""),[a,l]=Y.useState(""),[c,d]=Y.useState(!1),h=()=>r.length<6?(l("Password must be at least 6 characters long"),!1):r!==s?(l("Passwords do not match"),!1):!0,m=async w=>{if(w.preventDefault(),!!h()){d(!0),l("");try{await MO(ei,e,r),t("/sign-in")}catch(k){l(k.message)}finally{d(!1)}}};return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-lg transition-colors duration-200",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold text-center text-dark-charcoal dark:text-neutral-warm",children:"Create Account"}),p.jsxs("p",{className:"mt-2 text-center text-dark-charcoal/80 dark:text-neutral-warm/80",children:["Already have an account?"," ",p.jsx(zt,{to:"/sign-in",className:"text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Sign in"})]})]}),a&&p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-md flex items-start gap-3",children:[p.jsx(Wa,{className:"h-5 w-5 text-red-500 dark:text-red-400 flex-shrink-0 mt-0.5"}),p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:a})]}),p.jsxs("form",{onSubmit:m,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Email"}),p.jsx("input",{type:"email",id:"email",value:e,onChange:w=>n(w.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent transition-colors duration-200",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Password"}),p.jsx("input",{type:"password",id:"password",value:r,onChange:w=>i(w.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent transition-colors duration-200",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Confirm Password"}),p.jsx("input",{type:"password",id:"confirmPassword",value:s,onChange:w=>o(w.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent transition-colors duration-200",required:!0})]}),p.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:c?"Creating Account...":"Create Account"})]})]})})},PK=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),LK=()=>{const[t,e]=Y.useState(""),[n,r]=Y.useState("idle"),[i,s]=Y.useState(""),o=async a=>{if(a.preventDefault(),!PK(t)){r("error"),s("Please enter a valid email address");return}r("loading");try{await RO(ei,t),r("success")}catch(l){r("error"),s(l.message)}};return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center px-4",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-lg transition-colors duration-200",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-bold text-center text-dark-charcoal dark:text-neutral-warm",children:"Reset Password"}),p.jsx("p",{className:"mt-2 text-center text-dark-charcoal/80 dark:text-neutral-warm/80",children:"Enter your email address and we'll send you instructions to reset your password."})]}),n==="success"?p.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-md",children:[p.jsxs("p",{className:"text-green-800 dark:text-green-200",children:["If an account exists for ",t,", you will receive password reset instructions."]}),p.jsx(zt,{to:"/sign-in",className:"mt-4 inline-block text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Return to Sign In"})]}):p.jsxs("form",{onSubmit:o,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-dark-charcoal dark:text-neutral-warm",children:"Email Address"}),p.jsxs("div",{className:"mt-1 relative",children:[p.jsx("input",{type:"email",id:"email",value:t,onChange:a=>e(a.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-dark rounded-md bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm placeholder-gray-400 focus:ring-2 focus:ring-primary-accent dark:focus:ring-accent-purple focus:border-transparent transition-colors duration-200",required:!0}),p.jsx(H1,{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 dark:text-neutral-warm/60"})]}),n==="error"&&p.jsxs("div",{className:"mt-2 flex items-start gap-2",children:[p.jsx(Wa,{className:"h-5 w-5 text-red-500 dark:text-red-400 flex-shrink-0"}),p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:i})]})]}),p.jsx("button",{type:"submit",disabled:n==="loading",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:n==="loading"?"Sending...":"Send Reset Link"}),p.jsx("div",{className:"text-center",children:p.jsx(zt,{to:"/sign-in",className:"text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light",children:"Back to Sign In"})})]})]})})},DK=Y1(t=>({isAuthenticated:!1,user:null,login:async(e,n)=>{console.log("Login attempt:",{email:e,password:n}),t({isAuthenticated:!0,user:{username:e.split("@")[0],email:e,avatarUrl:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e",trustRating:4.5}})},logout:()=>t({isAuthenticated:!1,user:null}),updateProfile:e=>t(n=>({user:n.user?{...n.user,...e}:null}))})),OK=()=>{const t=ur(),{user:e,updateProfile:n}=DK(),[r,i]=Y.useState({username:(e==null?void 0:e.username)||"",email:(e==null?void 0:e.email)||"",avatarUrl:(e==null?void 0:e.avatarUrl)||""}),s=o=>{o.preventDefault(),n(r),console.log("Profile updated:",r),t("/user-profile")};return p.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Profile"}),p.jsxs("form",{onSubmit:s,className:"space-y-6 bg-white rounded-lg shadow p-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),p.jsx("input",{type:"text",id:"username",value:r.username,onChange:o=>i(a=>({...a,username:o.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),p.jsx("input",{type:"email",id:"email",value:r.email,onChange:o=>i(a=>({...a,email:o.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"avatarUrl",className:"block text-sm font-medium text-gray-700",children:"Profile Picture URL"}),p.jsx("input",{type:"url",id:"avatarUrl",value:r.avatarUrl,onChange:o=>i(a=>({...a,avatarUrl:o.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{type:"button",onClick:()=>t("/user-profile"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),p.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Save Changes"})]})]})]})},jK=({expectedValue:t,onChange:e})=>{const[n,r]=Y.useState({type:"digital",description:"",value:0,isLocal:!1,useSmartContract:!1}),i=(s,o)=>{if(s==="value"){const l=parseFloat(o);o=isNaN(l)?0:l}const a={...n,[s]:o};r(a),e(a)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Collateral Type"}),p.jsxs("select",{value:n.type,onChange:s=>i("type",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",children:[p.jsx("option",{value:"digital",children:"Digital Asset (Cryptocurrency/NFT)"}),p.jsx("option",{value:"physical",children:"Physical Item"}),p.jsx("option",{value:"other",children:"Other"})]})]}),n.type==="physical"&&p.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:p.jsxs("div",{className:"flex",children:[p.jsx(Wa,{className:"h-5 w-5 text-yellow-400"}),p.jsxs("div",{className:"ml-3",children:[p.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Physical Collateral Notice"}),p.jsx("p",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:"Physical collateral requires local exchange or smart contract setup. The lender must verify and accept the collateral in person."})]})]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Description"}),p.jsx("textarea",{value:n.description,onChange:s=>i("description",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",rows:3,placeholder:"Describe your collateral in detail..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-accent-purple dark:text-accent-purple",children:"Estimated Value ($)"}),p.jsx("input",{type:"number",value:n.value||"",onChange:s=>i("value",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-dark shadow-sm focus:ring-accent-purple focus:border-accent-purple dark:focus:ring-accent-purple dark:focus:border-accent-purple bg-white dark:bg-dark text-dark-charcoal dark:text-neutral-warm transition-colors duration-200",min:"0",step:"0.01"}),p.jsxs("p",{className:"mt-1 text-sm text-accent-purple dark:text-accent-purple",children:["The item's expected value is $",t,". Your collateral should match or exceed this value."]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"isLocal",checked:n.isLocal,onChange:s=>i("isLocal",s.target.checked),className:"h-4 w-4 text-accent-purple focus:ring-accent-purple dark:focus:ring-accent-purple border-gray-300 dark:border-dark rounded transition-colors duration-200"}),p.jsx("label",{htmlFor:"isLocal",className:"ml-2 block text-sm text-accent-purple dark:text-accent-purple",children:"This will be a local exchange (in-person meeting)"})]}),n.isLocal&&n.type==="physical"&&p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"useSmartContract",checked:n.useSmartContract,onChange:s=>i("useSmartContract",s.target.checked),className:"h-4 w-4 text-accent-purple focus:ring-accent-purple dark:focus:ring-accent-purple border-gray-300 dark:border-dark rounded transition-colors duration-200"}),p.jsx("label",{htmlFor:"useSmartContract",className:"ml-2 block text-sm text-accent-purple dark:text-accent-purple",children:"Use smart contract for secure collateral handling"})]})]})},BK="swapRequests",UK=async(t,e,n,r,i)=>{try{if(!e||!n||!r)throw new Error("Missing required fields for swap request");const s={offeredItemId:t||null,requestedItemId:e,senderId:n,receiverId:r,status:"Pending",messages:[{senderId:n,text:i,timestamp:Sy()}],timestamp:Sy()};return{requestId:(await uA(Aa(Di,BK),s)).id,...s,messages:[{senderId:n,text:i,timestamp:an.now()}],timestamp:an.now()}}catch(s){throw console.error("Error creating swap request:",s),s}},FK=()=>{const t=ur(),{itemId:e}=$k(),[n,r]=Y.useState(null),[i,s]=Y.useState(!0),[o,a]=Y.useState(null),[l,c]=Y.useState("idle");Y.useState({itemId:e||"",startDate:"",duration:7,collateralOffer:"",notes:""});const[d,h]=Y.useState({city:"",state:"",postalCode:""}),[m,w]=Y.useState({type:"digital",description:"",value:0,isLocal:!1}),[k,I]=Y.useState({location:"",meetingConfirmed:!1,exchangeCompleted:!1});Y.useState({contractCreated:!1,collateralLocked:!1,itemReturned:!1});const _=(S,E)=>{if(!E)return 1/0;const j=pq(S,E);return j===1/0?{distance:null,message:"Unable to calculate exact distance. Please ensure both locations are complete."}:{distance:j,message:mq(S,E)?"Item is in your area!":`${j} miles away`}};Y.useEffect(()=>{(async()=>{if(!e){a("Invalid item ID"),s(!1);return}try{const E=em(Di,"listings",e),j=await im(E);if(!j.exists())a("Item not found");else{const K={id:j.id,...j.data()};r(K)}}catch(E){console.error("Error fetching item:",E),a("Failed to load item details")}finally{s(!1)}})()},[e]);const T=async S=>{if(S.preventDefault(),!d.city||!d.state||!d.postalCode){alert("Please provide your location");return}if(!n){alert("Item not found");return}if(!n.userId){alert("Item owner information is missing");return}const E=n.expectedValue||n.price*20||0;if(m.value<E){alert("Collateral value must be at least equal to the item value");return}if(m.isLocal&&!k.meetingConfirmed){alert("Please confirm the local exchange details");return}c("submitting");try{const j=ei.currentUser;if(!j){t("/sign-in");return}await UK(null,n.id,j.uid,n.userId,`I would like to borrow this item. Collateral: ${m.description} (Value: $${m.value})`),c("success"),window.scrollTo(0,0)}catch(j){console.error("Error submitting borrow request:",j),c("idle"),j instanceof Error?alert(`Failed to submit request: ${j.message}`):alert("Failed to submit request. Please try again.")}};return i?p.jsx("div",{className:"max-w-2xl mx-auto p-6",children:p.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple dark:border-primary-accent"})})}):o||!n?p.jsx("div",{className:"max-w-2xl mx-auto p-6",children:p.jsxs("div",{className:"text-center",children:[p.jsx(jo,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-600 mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-2",children:o||"Item Not Found"}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 mb-6",children:"The item you're looking for doesn't exist or may have been removed."}),p.jsx("button",{onClick:()=>t("/browse-items"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:"Back to Browse"})]})}):l==="success"?p.jsx("div",{className:"max-w-2xl mx-auto p-6",children:p.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-green-900 dark:text-primary-accent mb-4",children:"Request Submitted!"}),p.jsx("p",{className:"text-green-700 dark:text-primary-accent mb-6",children:"Your request has been sent to the item owner. You'll be notified when they respond."}),p.jsx("button",{onClick:()=>t("/browse-items"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:"Browse More Items"})]})}):p.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-dark-charcoal dark:text-primary-accent mb-8",children:"Request to Borrow"}),p.jsxs("form",{onSubmit:T,className:"space-y-8",children:[p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 transition-colors duration-200",children:[p.jsx("h2",{className:"text-lg font-medium text-dark-charcoal dark:text-primary-accent mb-4",children:"Your Location"}),p.jsx(XC,{value:d,onChange:h}),d.city&&n.location&&p.jsx("div",{className:"mt-4",children:(()=>{const{distance:S,message:E}=_(d,n.location),j=n.maxTravelDistance||10,K=S!==null&&S>j;return p.jsxs("p",{className:"text-sm",children:[p.jsx("span",{className:S===null?"text-yellow-600 dark:text-yellow-400":"text-dark-charcoal dark:text-primary-accent",children:E}),K&&p.jsxs("span",{className:"text-red-600 dark:text-red-400 ml-2",children:["(Outside owner's maximum travel distance of ",j," miles)"]})]})})()})]}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-sm p-6 transition-colors duration-200",children:[p.jsx("h2",{className:"text-lg font-medium text-dark-charcoal dark:text-primary-accent mb-4",children:"Collateral Details"}),p.jsx(jK,{expectedValue:n.expectedValue||n.price*20||0,onChange:w})]}),p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border border-dark-charcoal/20 dark:border-neutral-warm/20 rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-primary-accent bg-transparent hover:bg-dark-charcoal/5 dark:hover:bg-neutral-warm/5 transition-colors duration-200",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:l==="submitting",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-accent dark:focus:ring-accent-purple disabled:opacity-50 transition-colors duration-200",children:l==="submitting"?"Submitting...":"Submit Request"})]})]})]})},Z1=({title:t,description:e})=>p.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[p.jsx("h1",{className:"text-4xl font-bold text-dark-charcoal dark:text-primary-accent mb-4 transition-colors duration-200",children:t}),p.jsx("p",{className:"text-lg text-dark-charcoal/80 dark:text-neutral-warm/80 transition-colors duration-200",children:e})]}),VK=()=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-md p-6 transition-colors duration-200",children:[p.jsxs("div",{className:"flex items-center mb-4",children:[p.jsx(G1,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent mr-2"}),p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm",children:"Collateral Management"})]}),p.jsxs("div",{className:"grid gap-4",children:[p.jsx("button",{className:"bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 text-dark-charcoal dark:text-neutral-warm px-4 py-2 rounded transition-colors duration-200",children:"Deposit Collateral"}),p.jsx("button",{className:"border border-accent-purple dark:border-primary-accent text-accent-purple dark:text-primary-accent px-4 py-2 rounded hover:bg-accent-purple/10 dark:hover:bg-primary-accent/10 transition-colors duration-200",children:"Withdraw Collateral"}),p.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-dark rounded transition-colors duration-200",children:[p.jsx("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Current Collateral Balance:"}),p.jsx("p",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm",children:"0.00 SOL"})]})]})]}),zK=()=>{const[t,e]=Y.useState(!1);return p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsx(Z1,{title:"Secure Lending",description:"Our platform uses blockchain technology to make every transaction safe and secure."}),p.jsx("div",{className:"text-center",children:p.jsxs("button",{onClick:()=>e(!t),className:"inline-flex items-center gap-1 text-sm text-accent-purple hover:text-accent-purple/80 dark:text-primary-accent dark:hover:text-primary-light transition-colors duration-200",children:["How it works",t?p.jsx(n$,{className:"h-4 w-4"}):p.jsx(t$,{className:"h-4 w-4"})]})}),t&&p.jsx("div",{className:"bg-neutral-warm/50 dark:bg-dark-secondary/50 rounded-lg p-6 animate-fadeIn",children:p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 text-center max-w-3xl mx-auto",children:"A smart contract on the Solana blockchain holds a deposit (collateral) from both parties in escrow. This collateral is only released when the agreed-upon conditions are met, ensuring trust and fairness for everyone involved. Whether you're lending or borrowing, our system protects you by using transparent and reliable technology."})})]}),p.jsx("div",{className:"mt-12",children:p.jsx(VK,{})})]})},WK=[{id:1,username:"Alice",rating:4.9,transactions:156},{id:2,username:"Bob",rating:4.8,transactions:142},{id:3,username:"Charlie",rating:4.7,transactions:128}],$K=()=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-md p-6 transition-colors duration-200",children:[p.jsxs("div",{className:"flex items-center mb-6",children:[p.jsx(m$,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent mr-2"}),p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm",children:"Top Trusted Users"})]}),p.jsx("div",{className:"space-y-4",children:WK.map((t,e)=>p.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark rounded transition-colors duration-200",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"text-lg font-bold text-dark-charcoal/60 dark:text-neutral-warm/60 mr-4",children:["#",e+1]}),p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-dark-charcoal dark:text-neutral-warm",children:t.username}),p.jsxs("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:[t.transactions," transactions"]})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-lg font-bold text-accent-purple dark:text-primary-accent",children:t.rating}),p.jsx("p",{className:"text-sm text-dark-charcoal/60 dark:text-neutral-warm/60",children:"rating"})]})]},t.id))})]}),qK=()=>p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx(Z1,{title:"Trust System",description:"Our trust system helps create a reliable community of lenders and borrowers. Build your reputation through successful transactions and join our top trusted users."}),p.jsx("div",{className:"mt-12",children:p.jsx($K,{})})]}),HK=[{title:"Create Account",description:"Sign up and verify your identity"},{title:"Browse Items",description:"Find items you want to borrow or list items to lend"},{title:"Secure Transaction",description:"Complete the transaction with our secure smart contract system"},{title:"Build Trust",description:"Rate your experience and build your trust score"}],KK=()=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow-md p-6 transition-colors duration-200",children:[p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm mb-6",children:"How It Works"}),p.jsx("div",{className:"space-y-6",children:HK.map((t,e)=>p.jsxs("div",{className:"flex items-start",children:[p.jsx("div",{className:"flex-shrink-0 mt-1",children:p.jsx(e$,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent"})}),p.jsxs("div",{className:"ml-4",children:[p.jsx("h3",{className:"font-semibold text-dark-charcoal dark:text-neutral-warm",children:t.title}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]})]},e))})]}),GK=()=>p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx(Z1,{title:"Quick Process",description:"Start lending or borrowing in minutes with our streamlined process. Our platform makes peer-to-peer lending simple, fast, and efficient."}),p.jsx("div",{className:"mt-12",children:p.jsx(KK,{})})]}),YK=[{name:"Sarah",title:"Renting Equipment for a Weekend Project",description:"Sarah needed power tools for a DIY project but didn't want to buy them for one-time use. She borrowed a cordless drill and circular saw using Xchainj's secure collateral system."},{name:"Mike",title:"Trading Items with Trust",description:"Mike wanted to trade his unused bike for camping gear. Through Xchainj, he connected with Lisa and safely traded his bike for a tent and sleeping bag using the platform's escrow system."},{name:"David",title:"Earning from Unused Equipment",description:"David occasionally lends his high-quality camera through Xchainj. He earned enough in one month to cover his camera's insurance by setting a reasonable collateral amount."},{name:"Emily",title:"Quick Solution for Urgent Needs",description:"When Emily urgently needed a laptop charger for a presentation, she found one nearby through Xchainj's trust-based collateral system."},{name:"Mark",title:"Smart Business Solutions",description:"Instead of purchasing an expensive aerator for a one-time landscaping job, Mark rented one through Xchainj, making his business more cost-effective."},{name:"Linda",title:"Building Community Connections",description:"Linda shares her board game collection with the community through Xchainj, using the platform's security features to protect her games while connecting with fellow enthusiasts."}],QK=()=>p.jsxs("section",{className:"mb-16",children:[p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-8 text-center",children:"Real User Stories"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:YK.map((t,e)=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal p-6 rounded-lg shadow-sm transition-colors duration-200",children:[p.jsx("div",{className:"flex items-center mb-4",children:p.jsxs("span",{className:"text-sm font-medium text-accent-purple dark:text-primary-accent",children:[t.name,"'s Story"]})}),p.jsx("h3",{className:"text-lg font-semibold text-dark-charcoal dark:text-neutral-warm mb-2",children:t.title}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]},e))})]}),ZK=[{icon:G1,title:"Secure Transactions",description:"Every transaction is protected by our blockchain-powered collateral system, ensuring safety for both parties."},{icon:y$,title:"Trust-Based Community",description:"Build your reputation through successful transactions and join a community of trusted users."},{icon:q1,title:"Quick & Easy Process",description:"List or borrow items in minutes with our streamlined platform designed for efficiency."}],XK=()=>p.jsxs("section",{className:"mb-16",children:[p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-8 text-center",children:"Core Features"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:ZK.map((t,e)=>p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal p-6 rounded-lg shadow-sm transition-colors duration-200",children:[p.jsx(t.icon,{className:"h-8 w-8 text-accent-purple dark:text-accent-purple mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm mb-2",children:t.title}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80",children:t.description})]},e))})]}),JK=()=>p.jsxs("section",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg p-8 text-center transition-colors duration-200",children:[p.jsx("h2",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm mb-4",children:"Ready to Get Started?"}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 mb-8 max-w-2xl mx-auto",children:"Join our community today and start borrowing, lending, or trading items securely. It only takes a few minutes to create an account and start exploring."}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsxs(zt,{to:"/sign-up",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-dark-charcoal bg-primary-accent hover:bg-primary-light dark:text-dark-charcoal dark:bg-primary-accent dark:hover:bg-primary-light transition-colors duration-200",children:["Join the Community",p.jsx(CC,{className:"ml-2 h-5 w-5"})]}),p.jsx(zt,{to:"/browse-items",className:"inline-flex items-center px-6 py-3 border border-dark-charcoal/20 dark:border-neutral-warm/20 text-base font-medium rounded-md text-dark-charcoal dark:text-neutral-warm bg-transparent hover:bg-dark-charcoal/5 dark:hover:bg-neutral-warm/5 transition-colors duration-200",children:"Browse Items"})]})]}),eG=()=>p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h1",{className:"text-4xl font-bold text-dark-charcoal dark:text-primary-accent sm:text-5xl",children:"How Xchainj Works"}),p.jsx("p",{className:"mt-4 text-xl text-dark-charcoal/80 dark:text-neutral-warm/80 max-w-3xl mx-auto",children:"Xchainj connects people to securely borrow, lend, or trade items with trust and ease. Our platform makes sharing resources simple, safe, and beneficial for everyone."})]}),p.jsx(XK,{}),p.jsx(QK,{}),p.jsx(JK,{})]}),tG=()=>{const t=ur();return Y.useEffect(()=>{const e=ei.onAuthStateChanged(n=>{t(n?"/dashboard":"/sign-in")});return()=>e()},[t]),p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-purple"})})},bI="transactionHistory",nG=async t=>{try{const e=fd(Aa(Di,bI),Iy("buyerId","==",t),sp("timestamp","desc")),n=fd(Aa(Di,bI),Iy("sellerId","==",t),sp("timestamp","desc")),[r,i]=await Promise.all([pd(e),pd(n)]),s=[...r.docs.map(o=>({transactionId:o.id,...o.data()})),...i.docs.map(o=>({transactionId:o.id,...o.data()}))];return s.sort((o,a)=>a.timestamp.seconds-o.timestamp.seconds),s.length===0&&console.log(`No transactions found for user: ${t}`),s}catch(e){return console.error("Error getting user transactions:",e),[]}},rG="userSettings",iG=async t=>{try{const e=em(Di,rG,t),n=await im(e);return n.exists()?{userId:t,...n.data()}:null}catch(e){throw console.error("Error getting user settings:",e),new Error("Failed to get user settings")}},sG=({transactions:t,loading:e=!1,error:n=null})=>e?p.jsx("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow p-6",children:p.jsxs("div",{className:"animate-pulse space-y-4",children:[p.jsx("div",{className:"h-4 bg-gray-200 dark:bg-dark-secondary rounded w-1/4"}),p.jsx("div",{className:"space-y-3",children:[1,2,3].map(r=>p.jsx("div",{className:"h-8 bg-gray-200 dark:bg-dark-secondary rounded"},r))})]})}):n?p.jsx("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow p-6",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:n}),p.jsx("button",{onClick:()=>window.location.reload(),className:"text-accent-purple dark:text-primary-accent hover:opacity-80",children:"Try Again"})]})}):!t||t.length===0?p.jsx("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow p-6",children:p.jsxs("div",{className:"text-center py-8",children:[p.jsx(jo,{className:"h-12 w-12 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-medium text-dark-charcoal dark:text-neutral-warm mb-2",children:"No Transactions Yet"}),p.jsx("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60 mb-6",children:"Start browsing items to create your first transaction!"}),p.jsxs(zt,{to:"/browse-items",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-dark-charcoal dark:text-neutral-warm bg-primary-accent hover:bg-primary-light dark:bg-accent-purple dark:hover:bg-accent-purple/90 transition-colors duration-200",children:["Browse Items",p.jsx(CC,{className:"ml-2 h-4 w-4"})]})]})}):p.jsx("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg shadow",children:p.jsxs("div",{className:"p-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-dark-charcoal dark:text-neutral-warm mb-4",children:"Transaction History"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-charcoal/60 dark:text-neutral-warm/60 uppercase tracking-wider",children:"Item"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-charcoal/60 dark:text-neutral-warm/60 uppercase tracking-wider",children:"Date"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-dark-charcoal/60 dark:text-neutral-warm/60 uppercase tracking-wider",children:"Status"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark",children:t.map(r=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-dark-charcoal dark:text-neutral-warm",children:r.itemName}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-dark-charcoal dark:text-neutral-warm",children:new Date(r.date).toLocaleDateString()}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${r.status==="Active"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":r.status==="Pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:r.status})})]},r.id))})]})})]})}),oG=new D1(oz("devnet"));Pu.generate();const aG=async t=>await oG.getBalance(new Ee(t))/1e9,lG=()=>{var d;const t=ur(),[e,n]=Y.useState(!0),[r,i]=Y.useState(null),[s,o]=Y.useState({transactions:[],settings:null,collateralBalance:null}),[a,l]=Y.useState(!1);Y.useEffect(()=>{(async()=>{try{const m=ei.currentUser;if(!m){t("/sign-in");return}const[w,k]=await Promise.all([nG(m.uid),iG(m.uid)]);let I=null;try{k!=null&&k.walletAddress&&(I=await aG(k.walletAddress),l(!0))}catch(_){console.error("Error fetching wallet balance:",_)}o({transactions:w,settings:k,collateralBalance:I})}catch(m){console.error("Error loading dashboard data:",m),i("Failed to load dashboard data")}finally{n(!1)}})()},[t]);const c=async()=>{try{l(!0)}catch(h){console.error("Error connecting wallet:",h),i("Failed to connect wallet")}};return e?p.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple"})}):p.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-8",children:[r&&p.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg flex items-center",children:[p.jsx(Wa,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2"}),p.jsx("p",{className:"text-red-600 dark:text-red-400",children:r})]}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg p-6",children:[p.jsxs("h1",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm",children:["Welcome back, ",((d=ei.currentUser)==null?void 0:d.displayName)||"User"]}),p.jsx("p",{className:"text-dark-charcoal/80 dark:text-neutral-warm/80 mt-2",children:"Manage your listings, transactions, and account settings from your dashboard."})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("button",{onClick:()=>t("/list-item"),className:"flex items-center p-4 bg-neutral-warm dark:bg-dark-charcoal rounded-lg hover:bg-neutral-warm/90 dark:hover:bg-dark-charcoal/90 transition-colors",children:[p.jsx(jo,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent"}),p.jsx("span",{className:"ml-3 text-dark-charcoal dark:text-neutral-warm",children:"List New Item"})]}),p.jsxs("button",{onClick:()=>t("/browse-items"),className:"flex items-center p-4 bg-neutral-warm dark:bg-dark-charcoal rounded-lg hover:bg-neutral-warm/90 dark:hover:bg-dark-charcoal/90 transition-colors",children:[p.jsx(q1,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent"}),p.jsx("span",{className:"ml-3 text-dark-charcoal dark:text-neutral-warm",children:"Browse Items"})]}),p.jsxs("button",{onClick:()=>t("/edit-profile"),className:"flex items-center p-4 bg-neutral-warm dark:bg-dark-charcoal rounded-lg hover:bg-neutral-warm/90 dark:hover:bg-dark-charcoal/90 transition-colors",children:[p.jsx(d$,{className:"h-6 w-6 text-accent-purple dark:text-primary-accent"}),p.jsx("span",{className:"ml-3 text-dark-charcoal dark:text-neutral-warm",children:"Settings"})]})]}),p.jsxs("div",{className:"bg-neutral-warm dark:bg-dark-charcoal rounded-lg p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm flex items-center",children:[p.jsx(w$,{className:"h-5 w-5 mr-2"}),"Collateral Account"]}),!a&&p.jsx("button",{onClick:c,className:"px-4 py-2 bg-accent-purple dark:bg-primary-accent text-white dark:text-dark-charcoal rounded-md hover:opacity-90 transition-opacity",children:"Connect Wallet"})]}),a?p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"text-2xl font-bold text-dark-charcoal dark:text-neutral-warm",children:s.collateralBalance!==null?`${s.collateralBalance} SOL`:"Balance unavailable"}),p.jsx("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60 text-sm",children:"Your collateral account is ready for transactions"})]}):p.jsx("p",{className:"text-dark-charcoal/60 dark:text-neutral-warm/60",children:"Connect your Solana wallet to manage collateral"})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-dark-charcoal dark:text-neutral-warm",children:"Recent Activity"}),p.jsx(sG,{})]})]})},su=({children:t})=>{const{user:e,loading:n,initialized:r}=om(),i=Bi();return r?!e&&!n?p.jsx(Gk,{to:"/sign-in",state:{from:i},replace:!0}):p.jsx(p.Fragment,{children:t}):p.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-purple"})})};function cG(){return p.jsx(g8,{children:p.jsx(GW,{children:p.jsxs(YP,{basename:"/",children:[p.jsx(QW,{}),p.jsx(VP,{children:p.jsxs(En,{path:"/",element:p.jsx(oq,{}),children:[p.jsx(En,{index:!0,element:p.jsx(cq,{})}),p.jsx(En,{path:"browse-items",element:p.jsx(Iq,{})}),p.jsx(En,{path:"items/:id",element:p.jsx(Pq,{})}),p.jsx(En,{path:"list-item",element:p.jsx(su,{children:p.jsx(yH,{})})}),p.jsx(En,{path:"sign-in",element:p.jsx(RK,{})}),p.jsx(En,{path:"sign-up",element:p.jsx(MK,{})}),p.jsx(En,{path:"forgot-password",element:p.jsx(LK,{})}),p.jsx(En,{path:"secure-lending",element:p.jsx(zK,{})}),p.jsx(En,{path:"trust-system",element:p.jsx(qK,{})}),p.jsx(En,{path:"quick-process",element:p.jsx(GK,{})}),p.jsx(En,{path:"how-it-works",element:p.jsx(eG,{})}),p.jsx(En,{path:"request-borrow/:itemId",element:p.jsx(su,{children:p.jsx(FK,{})})}),p.jsx(En,{path:"user-profile",element:p.jsx(su,{children:p.jsx(NK,{})})}),p.jsx(En,{path:"dashboard",element:p.jsx(su,{children:p.jsx(lG,{})})}),p.jsx(En,{path:"edit-profile",element:p.jsx(su,{children:p.jsx(OK,{})})}),p.jsx(En,{path:"auth/callback",element:p.jsx(tG,{})}),p.jsx(En,{path:"*",element:p.jsx(Gk,{to:"/",replace:!0})})]})})]})})})}jk(document.getElementById("root")).render(p.jsx(Y.StrictMode,{children:p.jsx(cG,{})}));export{kN as E,Ee as P,is as S,ci as T,_d as V,Nn as a,hl as b,Co as g};
